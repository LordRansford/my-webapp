;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="b6fe4a01-6bf7-61d6-c861-f9b4f7c18a10")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,872301,380696,e=>{"use strict";e.s(["default",0,function(e){return function(){return e}}],872301);let t=Math.PI,r=2*t,i=r-1e-6;function n(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}class l{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==e?n:function(e){let t=Math.floor(e);if(!(t>=0))throw Error(`invalid digits: ${e}`);if(t>15)return n;let r=10**t;return function(e){this._+=e[0];for(let t=1,i=e.length;t<i;++t)this._+=Math.round(arguments[t]*r)/r+e[t]}}(e)}moveTo(e,t){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,t){this._append`L${this._x1=+e},${this._y1=+t}`}quadraticCurveTo(e,t,r,i){this._append`Q${+e},${+t},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,t,r,i,n,l){this._append`C${+e},${+t},${+r},${+i},${this._x1=+n},${this._y1=+l}`}arcTo(e,r,i,n,l){if(e*=1,r*=1,i*=1,n*=1,(l*=1)<0)throw Error(`negative radius: ${l}`);let a=this._x1,o=this._y1,s=i-e,d=n-r,c=a-e,h=o-r,f=c*c+h*h;if(null===this._x1)this._append`M${this._x1=e},${this._y1=r}`;else if(f>1e-6)if(Math.abs(h*s-d*c)>1e-6&&l){let u=i-a,g=n-o,p=s*s+d*d,w=Math.sqrt(p),b=Math.sqrt(f),y=l*Math.tan((t-Math.acos((p+f-(u*u+g*g))/(2*w*b)))/2),v=y/b,x=y/w;Math.abs(v-1)>1e-6&&this._append`L${e+v*c},${r+v*h}`,this._append`A${l},${l},0,0,${+(h*u>c*g)},${this._x1=e+x*s},${this._y1=r+x*d}`}else this._append`L${this._x1=e},${this._y1=r}`}arc(e,n,l,a,o,s){if(e*=1,n*=1,l*=1,s=!!s,l<0)throw Error(`negative radius: ${l}`);let d=l*Math.cos(a),c=l*Math.sin(a),h=e+d,f=n+c,u=1^s,g=s?a-o:o-a;null===this._x1?this._append`M${h},${f}`:(Math.abs(this._x1-h)>1e-6||Math.abs(this._y1-f)>1e-6)&&this._append`L${h},${f}`,l&&(g<0&&(g=g%r+r),g>i?this._append`A${l},${l},0,1,${u},${e-d},${n-c}A${l},${l},0,1,${u},${this._x1=h},${this._y1=f}`:g>1e-6&&this._append`A${l},${l},0,${+(g>=t)},${u},${this._x1=e+l*Math.cos(o)},${this._y1=n+l*Math.sin(o)}`)}rect(e,t,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${r*=1}v${+i}h${-r}Z`}toString(){return this._}}function a(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(null==r)t=null;else{let e=Math.floor(r);if(!(e>=0))throw RangeError(`invalid digits: ${r}`);t=e}return e},()=>new l(t)}l.prototype,e.s(["withPath",()=>a],380696)},321776,e=>{"use strict";Array.prototype.slice,e.s(["default",0,function(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}])},629593,821587,612386,e=>{"use strict";var t=e.i(321776),r=e.i(872301),i=e.i(73422),n=e.i(380696);function l(e){return e[0]}function a(e){return e[1]}function o(e,o){var s=(0,r.default)(!0),d=null,c=i.default,h=null,f=(0,n.withPath)(u);function u(r){var i,n,l,a=(r=(0,t.default)(r)).length,u=!1;for(null==d&&(h=c(l=f())),i=0;i<=a;++i)!(i<a&&s(n=r[i],i,r))===u&&((u=!u)?h.lineStart():h.lineEnd()),u&&h.point(+e(n,i,r),+o(n,i,r));if(l)return h=null,l+""||null}return e="function"==typeof e?e:void 0===e?l:(0,r.default)(e),o="function"==typeof o?o:void 0===o?a:(0,r.default)(o),u.x=function(t){return arguments.length?(e="function"==typeof t?t:(0,r.default)(+t),u):e},u.y=function(e){return arguments.length?(o="function"==typeof e?e:(0,r.default)(+e),u):o},u.defined=function(e){return arguments.length?(s="function"==typeof e?e:(0,r.default)(!!e),u):s},u.curve=function(e){return arguments.length?(c=e,null!=d&&(h=c(d)),u):c},u.context=function(e){return arguments.length?(null==e?d=h=null:h=c(d=e),u):d},u}e.s(["x",()=>l,"y",()=>a],821587),e.s(["default",0,o],612386),e.s(["line",0,o],629593)},156816,619173,e=>{"use strict";e.i(986738);var t=e.i(85607),r=e.i(289325),i=e.i(990983),i=i,n=e.i(971261);e.i(563641);var l=e.i(638973);function a(e){var t,l,a={options:{directed:e.isDirected(),multigraph:e.isMultigraph(),compound:e.isCompound()},nodes:(t=e,n.map(t.nodes(),function(e){var i=t.node(e),n=t.parent(e),l={v:e};return r.isUndefined(i)||(l.value=i),r.isUndefined(n)||(l.parent=n),l})),edges:(l=e,n.map(l.edges(),function(e){var t=l.edge(e),i={v:e.v,w:e.w};return r.isUndefined(e.name)||(i.name=e.name),r.isUndefined(t)||(i.value=t),i}))};return r.isUndefined(e.graph())||(a.value=i.default(e.graph())),a}e.s(["write",()=>a],619173);var o=e.i(247156),s=e.i(51839);e.i(971515);var d=e.i(972186);e.i(531345);var c=e.i(744588);let h={},f={},u={},g=(e,t)=>(s.l.trace("In isDescendant",t," ",e," = ",f[t].includes(e)),!!f[t].includes(e)),p=(e,t,r,i)=>{s.l.warn("Copying children of ",e,"root",i,"data",t.node(e),i);let n=t.children(e)||[];e!==i&&n.push(e),s.l.warn("Copying (nodes) clusterId",e,"nodes",n),n.forEach(n=>{if(t.children(n).length>0)p(n,t,r,i);else{let l=t.node(n);s.l.info("cp ",n," to ",i," with parent ",e),r.setNode(n,l),i!==t.parent(n)&&(s.l.warn("Setting parent",n,t.parent(n)),r.setParent(n,t.parent(n))),e!==i&&n!==e?(s.l.debug("Setting parent",n,e),r.setParent(n,e)):(s.l.info("In copy ",e,"root",i,"data",t.node(e),i),s.l.debug("Not Setting parent for node=",n,"cluster!==rootId",e!==i,"node!==clusterId",n!==e));let a=t.edges(n);s.l.debug("Copying Edges",a),a.forEach(n=>{s.l.info("Edge",n);let l=t.edge(n.v,n.w,n.name);s.l.info("Edge data",l,i);try{(s.l.info("Descendants of ",i," is ",f[i]),s.l.info("Edge is ",n),n.v!==i&&n.w!==i&&(f[i]?f[i].includes(n.v)||g(n.v,i)||g(n.w,i)||f[i].includes(n.w):(s.l.debug("Tilt, ",i,",not in descendants"),!1)))?(s.l.info("Copying as ",n.v,n.w,l,n.name),r.setEdge(n.v,n.w,l,n.name),s.l.info("newGraph edges ",r.edges(),r.edge(r.edges()[0]))):s.l.info("Skipping copy of edge ",n.v,"-->",n.w," rootId: ",i," clusterId:",e)}catch(e){s.l.error(e)}})}s.l.debug("Removing node",n),t.removeNode(n)})},w=(e,t)=>{let r=t.children(e),i=[...r];for(let n of r)u[n]=e,i=[...i,...w(n,t)];return i},b=(e,t)=>{s.l.trace("Searching",e);let r=t.children(e);if(s.l.trace("Searching children of id ",e,r),r.length<1)return s.l.trace("This is a valid node",e),e;for(let i of r){let r=b(i,t);if(r)return s.l.trace("Found replacement for",e," => ",r),r}},y=e=>h[e]&&h[e].externalConnections&&h[e]?h[e].id:e,v=(e,t)=>{if(s.l.warn("extractor - ",t,a(e),e.children("D")),t>10)return void s.l.error("Bailing out");let r=e.nodes(),i=!1;for(let t of r){let r=e.children(t);i=i||r.length>0}if(!i)return void s.l.debug("Done, no node has children",e.nodes());for(let i of(s.l.debug("Nodes = ",r,t),r))if(s.l.debug("Extracting node",i,h,h[i]&&!h[i].externalConnections,!e.parent(i),e.node(i),e.children("D")," Depth ",t),h[i])if(!h[i].externalConnections&&e.children(i)&&e.children(i).length>0){s.l.warn("Cluster without external connections, without a parent and with children",i,t);let r="TB"===e.graph().rankdir?"LR":"TB";h[i]&&h[i].clusterData&&h[i].clusterData.dir&&(r=h[i].clusterData.dir,s.l.warn("Fixing dir",h[i].clusterData.dir,r));let n=new l.Graph({multigraph:!0,compound:!0}).setGraph({rankdir:r,nodesep:50,ranksep:50,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}});s.l.warn("Old graph before copy",a(e)),p(i,e,n,i),e.setNode(i,{clusterNode:!0,id:i,clusterData:h[i].clusterData,labelText:h[i].labelText,graph:n}),s.l.warn("New graph after copy node: (",i,")",a(n)),s.l.debug("Old graph after copy",a(e))}else s.l.warn("Cluster ** ",i," **not meeting the criteria !externalConnections:",!h[i].externalConnections," no parent: ",!e.parent(i)," children ",e.children(i)&&e.children(i).length>0,e.children("D"),t),s.l.debug(h);else s.l.debug("Not a cluster",i,t);for(let i of(r=e.nodes(),s.l.warn("New list of nodes",r),r)){let r=e.node(i);s.l.warn(" Now next level",i,r),r.clusterNode&&v(r.graph,t+1)}},x=(e,t)=>{if(0===t.length)return[];let r=Object.assign(t);return t.forEach(t=>{let i=e.children(t),n=x(e,i);r=[...r,...n]}),r},m={rect:(e,t)=>{s.l.info("Creating subgraph rect for ",t.id,t);let r=(0,s.c)(),i=e.insert("g").attr("class","cluster"+(t.class?" "+t.class:"")).attr("id",t.id),n=i.insert("rect",":first-child"),l=(0,s.m)(r.flowchart.htmlLabels),a=i.insert("g").attr("class","cluster-label"),h="markdown"===t.labelType?(0,d.a)(a,t.labelText,{style:t.labelStyle,useHtmlLabels:l}):a.node().appendChild((0,o.c)(t.labelText,t.labelStyle,void 0,!0)),f=h.getBBox();if((0,s.m)(r.flowchart.htmlLabels)){let e=h.children[0],t=(0,c.select)(h);f=e.getBoundingClientRect(),t.attr("width",f.width),t.attr("height",f.height)}let u=0*t.padding,g=t.width<=f.width+u?f.width+u:t.width;t.width<=f.width+u?t.diff=(f.width-t.width)/2-t.padding/2:t.diff=-t.padding/2,s.l.trace("Data ",t,JSON.stringify(t)),n.attr("style",t.style).attr("rx",t.rx).attr("ry",t.ry).attr("x",t.x-g/2).attr("y",t.y-t.height/2-u/2).attr("width",g).attr("height",t.height+u);let{subGraphTitleTopMargin:p}=(0,o.g)(r);l?a.attr("transform",`translate(${t.x-f.width/2}, ${t.y-t.height/2+p})`):a.attr("transform",`translate(${t.x}, ${t.y-t.height/2+p})`);let w=n.node().getBBox();return t.width=w.width,t.height=w.height,t.intersect=function(e){return(0,o.i)(t,e)},i},roundedWithTitle:(e,t)=>{let r=(0,s.c)(),i=e.insert("g").attr("class",t.classes).attr("id",t.id),n=i.insert("rect",":first-child"),l=i.insert("g").attr("class","cluster-label"),a=i.append("rect"),d=l.node().appendChild((0,o.c)(t.labelText,t.labelStyle,void 0,!0)),h=d.getBBox();if((0,s.m)(r.flowchart.htmlLabels)){let e=d.children[0],t=(0,c.select)(d);h=e.getBoundingClientRect(),t.attr("width",h.width),t.attr("height",h.height)}h=d.getBBox();let f=0*t.padding,u=f/2,g=t.width<=h.width+t.padding?h.width+t.padding:t.width;t.width<=h.width+t.padding?t.diff=(h.width+0*t.padding-t.width)/2:t.diff=-t.padding/2,n.attr("class","outer").attr("x",t.x-g/2-u).attr("y",t.y-t.height/2-u).attr("width",g+f).attr("height",t.height+f),a.attr("class","inner").attr("x",t.x-g/2-u).attr("y",t.y-t.height/2-u+h.height-1).attr("width",g+f).attr("height",t.height+f-h.height-3);let{subGraphTitleTopMargin:p}=(0,o.g)(r);return l.attr("transform",`translate(${t.x-h.width/2}, ${t.y-t.height/2-t.padding/3+((0,s.m)(r.flowchart.htmlLabels)?5:3)+p})`),t.height=n.node().getBBox().height,t.intersect=function(e){return(0,o.i)(t,e)},i},noteGroup:(e,t)=>{let r=e.insert("g").attr("class","note-cluster").attr("id",t.id),i=r.insert("rect",":first-child"),n=0*t.padding,l=n/2;i.attr("rx",t.rx).attr("ry",t.ry).attr("x",t.x-t.width/2-l).attr("y",t.y-t.height/2-l).attr("width",t.width+n).attr("height",t.height+n).attr("fill","none");let a=i.node().getBBox();return t.width=a.width,t.height=a.height,t.intersect=function(e){return(0,o.i)(t,e)},r},divider:(e,t)=>{let r=e.insert("g").attr("class",t.classes).attr("id",t.id),i=r.insert("rect",":first-child"),n=0*t.padding;i.attr("class","divider").attr("x",t.x-t.width/2-n/2).attr("y",t.y-t.height/2).attr("width",t.width+n).attr("height",t.height+n);let l=i.node().getBBox();return t.width=l.width,t.height=l.height,t.diff=-t.padding/2,t.intersect=function(e){return(0,o.i)(t,e)},r}},k={},_=async(e,r,i,n,l,d)=>{s.l.info("Graph in recursive render: XXX",a(r),l);let c=r.graph().rankdir;s.l.trace("Dir in recursive render - dir:",c);let f=e.insert("g").attr("class","root");r.nodes()?s.l.info("Recursive render XXX",r.nodes()):s.l.info("No nodes found for",r),r.edges().length>0&&s.l.trace("Recursive edges",r.edge(r.edges()[0]));let u=f.insert("g").attr("class","clusters"),g=f.insert("g").attr("class","edgePaths"),p=f.insert("g").attr("class","edgeLabels"),w=f.insert("g").attr("class","nodes");await Promise.all(r.nodes().map(async function(e){let t=r.node(e);if(void 0!==l){let t=JSON.parse(JSON.stringify(l.clusterData));s.l.info("Setting data for cluster XXX (",e,") ",t,l),r.setNode(l.id,t),r.parent(e)||(s.l.trace("Setting parent",e,l.id),r.setParent(e,l.id,t))}if(s.l.info("(Insert) Node XXX"+e+": "+JSON.stringify(r.node(e))),t&&t.clusterNode){s.l.info("Cluster identified",e,t.width,r.node(e));let l=await _(w,t.graph,i,n,r.node(e),d),a=l.elem;(0,o.u)(t,a),t.diff=l.diff||0,s.l.info("Node bounds (abc123)",e,t,t.width,t.x,t.y),(0,o.s)(a,t),s.l.warn("Recursive render complete ",a,t)}else r.children(e).length>0?(s.l.info("Cluster - the non recursive path XXX",e,t.id,t,r),s.l.info(b(t.id,r)),h[t.id]={id:b(t.id,r),node:t}):(s.l.info("Node - the non recursive path",e,t.id,t),await (0,o.e)(w,r.node(e),c))})),r.edges().forEach(function(e){let t=r.edge(e.v,e.w,e.name);s.l.info("Edge "+e.v+" -> "+e.w+": "+JSON.stringify(e)),s.l.info("Edge "+e.v+" -> "+e.w+": ",e," ",JSON.stringify(r.edge(e))),s.l.info("Fix",h,"ids:",e.v,e.w,"Translating: ",h[e.v],h[e.w]),(0,o.f)(p,t)}),r.edges().forEach(function(e){s.l.info("Edge "+e.v+" -> "+e.w+": "+JSON.stringify(e))}),s.l.info("#############################################"),s.l.info("###                Layout                 ###"),s.l.info("#############################################"),s.l.info(r),(0,t.layout)(r),s.l.info("Graph after layout:",a(r));let y=0,{subGraphTitleTotalMargin:v}=(0,o.g)(d);return x(r,r.children()).forEach(function(e){let t=r.node(e);if(s.l.info("Position "+e+": "+JSON.stringify(r.node(e))),s.l.info("Position "+e+": ("+t.x,","+t.y,") width: ",t.width," height: ",t.height),t&&t.clusterNode)t.y+=v,(0,o.p)(t);else if(r.children(e).length>0){let e;t.height+=v,s.l.trace("Inserting cluster"),e=t.shape||"rect",k[t.id]=m[e](u,t),h[t.id].node=t}else t.y+=v/2,(0,o.p)(t)}),r.edges().forEach(function(e){let t=r.edge(e);s.l.info("Edge "+e.v+" -> "+e.w+": "+JSON.stringify(t),t),t.points.forEach(e=>e.y+=v/2);let l=(0,o.h)(g,e,t,h,i,r,n);(0,o.j)(t,l)}),r.nodes().forEach(function(e){let t=r.node(e);s.l.info(e,t.type,t.diff),"group"===t.type&&(y=t.diff)}),{elem:f,diff:y}},$=async(e,t,r,i,n)=>{(0,o.a)(e,r,i,n),(0,o.b)(),(0,o.d)(),k={},f={},u={},h={},s.l.warn("Graph at first:",JSON.stringify(a(t))),((e,t)=>{if(!e||t>10)return s.l.debug("Opting out, no graph ");for(let t of(s.l.debug("Opting in, graph "),e.nodes().forEach(function(t){e.children(t).length>0&&(s.l.warn("Cluster identified",t," Replacement id in edges: ",b(t,e)),f[t]=w(t,e),h[t]={id:b(t,e),clusterData:e.node(t)})}),e.nodes().forEach(function(t){let r=e.children(t),i=e.edges();r.length>0?(s.l.debug("Cluster identified",t,f),i.forEach(e=>{e.v!==t&&e.w!==t&&g(e.v,t)^g(e.w,t)&&(s.l.warn("Edge: ",e," leaves cluster ",t),s.l.warn("Descendants of XXX ",t,": ",f[t]),h[t].externalConnections=!0)})):s.l.debug("Not a cluster ",t,f)}),Object.keys(h))){let r=h[t].id,i=e.parent(r);i!==t&&h[i]&&!h[i].externalConnections&&(h[t].id=i)}e.edges().forEach(function(t){let r=e.edge(t);s.l.warn("Edge "+t.v+" -> "+t.w+": "+JSON.stringify(t)),s.l.warn("Edge "+t.v+" -> "+t.w+": "+JSON.stringify(e.edge(t)));let i=t.v,n=t.w;if(s.l.warn("Fix XXX",h,"ids:",t.v,t.w,"Translating: ",h[t.v]," --- ",h[t.w]),h[t.v]&&h[t.w]&&h[t.v]===h[t.w]){s.l.warn("Fixing and trixing link to self - removing XXX",t.v,t.w,t.name),s.l.warn("Fixing and trixing - removing XXX",t.v,t.w,t.name),i=y(t.v),n=y(t.w),e.removeEdge(t.v,t.w,t.name);let l=t.w+"---"+t.v;e.setNode(l,{domId:l,id:l,labelStyle:"",labelText:r.label,padding:0,shape:"labelRect",style:""});let a=structuredClone(r),o=structuredClone(r);a.label="",a.arrowTypeEnd="none",o.label="",a.fromCluster=t.v,o.toCluster=t.v,e.setEdge(i,l,a,t.name+"-cyclic-special"),e.setEdge(l,n,o,t.name+"-cyclic-special")}else(h[t.v]||h[t.w])&&(s.l.warn("Fixing and trixing - removing XXX",t.v,t.w,t.name),i=y(t.v),n=y(t.w),e.removeEdge(t.v,t.w,t.name),i!==t.v&&(h[e.parent(i)].externalConnections=!0,r.fromCluster=t.v),n!==t.w&&(h[e.parent(n)].externalConnections=!0,r.toCluster=t.w),s.l.warn("Fix Replacing with XXX",i,n,t.name),e.setEdge(i,n,r,t.name))}),s.l.warn("Adjusted Graph",a(e)),v(e,0),s.l.trace(h)})(t),s.l.warn("Graph after:",JSON.stringify(a(t)));let l=(0,s.c)();await _(e,t,i,n,void 0,l)};e.s(["r",()=>$],156816)},131756,e=>{"use strict";var t=e.i(145484),r=e.i(317463);e.s(["channel",0,(e,i)=>t.default.lang.round(r.default.parse(e)[i])],131756)},832119,174238,772861,657002,e=>{"use strict";e.i(531345);var t=e.i(578973),r=e.i(744588),i=e.i(482348),n=e.i(413695);function l(e){return"string"==typeof e?new n.Selection([document.querySelectorAll(e)],[document.documentElement]):new n.Selection([(0,i.default)(e)],n.root)}e.s(["selectAll",0,l],174238);var a=e.i(342706),a=a,o=e.i(484076);function s(e,t){return!!e.children(t).length}function d(e){return h(e.v)+":"+h(e.w)+":"+h(e.name)}var c=/:/g;function h(e){return e?String(e).replace(c,"\\:"):""}function f(e,t){t&&e.attr("style",t)}function u(e,t,r){t&&e.attr("class",t).attr("class",r+" "+e.attr("class"))}function g(e,t){var r=t.graph();if(a.default(r)){var i=r.transition;if(o.isFunction(i))return i(e)}return e}function p(e,t){var r=e.append("foreignObject").attr("width","100000"),i=r.append("xhtml:div");i.attr("xmlns","http://www.w3.org/1999/xhtml");var n=t.label;switch(typeof n){case"function":i.insert(n);break;case"object":i.insert(function(){return n});break;default:i.html(n)}f(i,t.labelStyle),i.style("display","inline-block"),i.style("white-space","nowrap");var l=i.node().getBoundingClientRect();return r.attr("width",l.width).attr("height",l.height),r}e.s(["applyClass",()=>u,"applyStyle",()=>f,"applyTransition",()=>g,"edgeToId",()=>d,"isSubgraph",()=>s],772861),e.s(["addHtmlLabel",()=>p],657002),e.i(971515);var w=e.i(638973),b=e.i(156816),y=e.i(51839),v=e.i(131756),x=e.i(765912);let m={},k=async function(e,t,r,i,n,l){let a=i.select(`[id="${r}"]`);for(let r of Object.keys(e)){let i,o=e[r],s="default";o.classes.length>0&&(s=o.classes.join(" ")),s+=" flowchart-label";let d=(0,y.k)(o.styles),c=void 0!==o.text?o.text:o.id;if(y.l.info("vertex",o,o.labelType),"markdown"===o.labelType)y.l.info("vertex",o,o.labelType);else if((0,y.m)((0,y.c)().flowchart.htmlLabels))(i=p(a,{label:c}).node()).parentNode.removeChild(i);else{let e=n.createElementNS("http://www.w3.org/2000/svg","text");for(let t of(e.setAttribute("style",d.labelStyle.replace("color:","fill:")),c.split(y.e.lineBreakRegex))){let r=n.createElementNS("http://www.w3.org/2000/svg","tspan");r.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),r.setAttribute("dy","1em"),r.setAttribute("x","1"),r.textContent=t,e.appendChild(r)}i=e}let h=0,f="";switch(o.type){case"round":h=5,f="rect";break;case"square":case"group":default:f="rect";break;case"diamond":f="question";break;case"hexagon":f="hexagon";break;case"odd":case"odd_right":f="rect_left_inv_arrow";break;case"lean_right":f="lean_right";break;case"lean_left":f="lean_left";break;case"trapezoid":f="trapezoid";break;case"inv_trapezoid":f="inv_trapezoid";break;case"circle":f="circle";break;case"ellipse":f="ellipse";break;case"stadium":f="stadium";break;case"subroutine":f="subroutine";break;case"cylinder":f="cylinder";break;case"doublecircle":f="doublecircle"}let u=await (0,y.r)(c,(0,y.c)());t.setNode(o.id,{labelStyle:d.labelStyle,shape:f,labelText:u,labelType:o.labelType,rx:h,ry:h,class:s,style:d.style,id:o.id,link:o.link,linkTarget:o.linkTarget,tooltip:l.db.getTooltip(o.id)||"",domId:l.db.lookUpDomId(o.id),haveCallback:o.haveCallback,width:"group"===o.type?500:void 0,dir:o.dir,type:o.type,props:o.props,padding:(0,y.c)().flowchart.padding}),y.l.info("setNode",{labelStyle:d.labelStyle,labelType:o.labelType,shape:f,labelText:u,rx:h,ry:h,class:s,style:d.style,id:o.id,domId:l.db.lookUpDomId(o.id),width:"group"===o.type?500:void 0,type:o.type,dir:o.dir,props:o.props,padding:(0,y.c)().flowchart.padding})}},_=async function(e,r,i){let n,l;y.l.info("abc78 edges = ",e);let a=0,o={};if(void 0!==e.defaultStyle){let t=(0,y.k)(e.defaultStyle);n=t.style,l=t.labelStyle}for(let i of e){a++;let s="L-"+i.start+"-"+i.end;void 0===o[s]?o[s]=0:o[s]++,y.l.info("abc78 new entry",s,o[s]);let d=s+"-"+o[s];y.l.info("abc78 new link id to be used is",s,d,o[s]);let c="LS-"+i.start,h="LE-"+i.end,f={style:"",labelStyle:""};switch(f.minlen=i.length||1,"arrow_open"===i.type?f.arrowhead="none":f.arrowhead="normal",f.arrowTypeStart="arrow_open",f.arrowTypeEnd="arrow_open",i.type){case"double_arrow_cross":f.arrowTypeStart="arrow_cross";case"arrow_cross":f.arrowTypeEnd="arrow_cross";break;case"double_arrow_point":f.arrowTypeStart="arrow_point";case"arrow_point":f.arrowTypeEnd="arrow_point";break;case"double_arrow_circle":f.arrowTypeStart="arrow_circle";case"arrow_circle":f.arrowTypeEnd="arrow_circle"}let u="",g="";switch(i.stroke){case"normal":u="fill:none;",void 0!==n&&(u=n),void 0!==l&&(g=l),f.thickness="normal",f.pattern="solid";break;case"dotted":f.thickness="normal",f.pattern="dotted",f.style="fill:none;stroke-width:2px;stroke-dasharray:3;";break;case"thick":f.thickness="thick",f.pattern="solid",f.style="stroke-width: 3.5px;fill:none;";break;case"invisible":f.thickness="invisible",f.pattern="solid",f.style="stroke-width: 0;fill:none;"}if(void 0!==i.style){let e=(0,y.k)(i.style);u=e.style,g=e.labelStyle}f.style=f.style+=u,f.labelStyle=f.labelStyle+=g,void 0!==i.interpolate?f.curve=(0,y.n)(i.interpolate,t.curveLinear):void 0!==e.defaultInterpolate?f.curve=(0,y.n)(e.defaultInterpolate,t.curveLinear):f.curve=(0,y.n)(m.curve,t.curveLinear),void 0===i.text?void 0!==i.style&&(f.arrowheadStyle="fill: #333"):(f.arrowheadStyle="fill: #333",f.labelpos="c"),f.labelType=i.labelType,f.label=await (0,y.r)(i.text.replace(y.e.lineBreakRegex,"\n"),(0,y.c)()),void 0===i.style&&(f.style=f.style||"stroke: #333; stroke-width: 1.5px;fill:none;"),f.labelStyle=f.labelStyle.replace("color:","fill:"),f.id=d,f.classes="flowchart-link "+c+" "+h,r.setEdge(i.start,i.end,f,a)}},$=async function(e,t,i,n){let a,o;y.l.info("Drawing flowchart");let s=n.db.getDirection();void 0===s&&(s="TD");let{securityLevel:d,flowchart:c}=(0,y.c)(),h=c.nodeSpacing||50,f=c.rankSpacing||50;"sandbox"===d&&(a=(0,r.select)("#i"+t));let u="sandbox"===d?(0,r.select)(a.nodes()[0].contentDocument.body):(0,r.select)("body"),g="sandbox"===d?a.nodes()[0].contentDocument:document,p=new w.Graph({multigraph:!0,compound:!0}).setGraph({rankdir:s,nodesep:h,ranksep:f,marginx:0,marginy:0}).setDefaultEdgeLabel(function(){return{}}),v=n.db.getSubGraphs();y.l.info("Subgraphs - ",v);for(let e=v.length-1;e>=0;e--)o=v[e],y.l.info("Subgraph - ",o),n.db.addVertex(o.id,{text:o.title,type:o.labelType},"group",void 0,o.classes,o.dir);let x=n.db.getVertices(),m=n.db.getEdges();y.l.info("Edges",m);let $=0;for($=v.length-1;$>=0;$--){o=v[$],l("cluster").append("text");for(let e=0;e<o.nodes.length;e++)y.l.info("Setting up subgraphs",o.nodes[e],o.id),p.setParent(o.nodes[e],o.id)}await k(x,p,t,u,g,n),await _(m,p);let S=u.select(`[id="${t}"]`),C=u.select("#"+t+" g");if(await (0,b.r)(C,p,["point","circle","cross"],"flowchart",t),y.u.insertTitle(S,"flowchartTitleText",c.titleTopMargin,n.db.getDiagramTitle()),(0,y.o)(p,S,c.diagramPadding,c.useMaxWidth),n.db.indexNodes("subGraph"+$),!c.htmlLabels)for(let e of g.querySelectorAll('[id="'+t+'"] .edgeLabel .label')){let t=e.getBBox(),r=g.createElementNS("http://www.w3.org/2000/svg","rect");r.setAttribute("rx",0),r.setAttribute("ry",0),r.setAttribute("width",t.width),r.setAttribute("height",t.height),e.insertBefore(r,e.firstChild)}Object.keys(x).forEach(function(e){let i=x[e];if(i.link){let n=(0,r.select)("#"+t+' [id="'+e+'"]');if(n){let e=g.createElementNS("http://www.w3.org/2000/svg","a");e.setAttributeNS("http://www.w3.org/2000/svg","class",i.classes.join(" ")),e.setAttributeNS("http://www.w3.org/2000/svg","href",i.link),e.setAttributeNS("http://www.w3.org/2000/svg","rel","noopener"),"sandbox"===d?e.setAttributeNS("http://www.w3.org/2000/svg","target","_top"):i.linkTarget&&e.setAttributeNS("http://www.w3.org/2000/svg","target",i.linkTarget);let t=n.insert(function(){return e},":first-child"),r=n.select(".label-container");r&&t.append(function(){return r.node()});let l=n.select(".label");l&&t.append(function(){return l.node()})}}})},S={setConf:function(e){for(let t of Object.keys(e))m[t]=e[t]},addVertices:k,addEdges:_,getClasses:function(e,t){return t.db.getClasses()},draw:$},C=e=>{var t;let r,i,n,l;return`.label {
    font-family: ${e.fontFamily};
    color: ${e.nodeTextColor||e.textColor};
  }
  .cluster-label text {
    fill: ${e.titleColor};
  }
  .cluster-label span,p {
    color: ${e.titleColor};
  }

  .label text,span,p {
    fill: ${e.nodeTextColor||e.textColor};
    color: ${e.nodeTextColor||e.textColor};
  }

  .node rect,
  .node circle,
  .node ellipse,
  .node polygon,
  .node path {
    fill: ${e.mainBkg};
    stroke: ${e.nodeBorder};
    stroke-width: 1px;
  }
  .flowchart-label text {
    text-anchor: middle;
  }
  // .flowchart-label .text-outer-tspan {
  //   text-anchor: middle;
  // }
  // .flowchart-label .text-inner-tspan {
  //   text-anchor: start;
  // }

  .node .katex path {
    fill: #000;
    stroke: #000;
    stroke-width: 1px;
  }

  .node .label {
    text-align: center;
  }
  .node.clickable {
    cursor: pointer;
  }

  .arrowheadPath {
    fill: ${e.arrowheadColor};
  }

  .edgePath .path {
    stroke: ${e.lineColor};
    stroke-width: 2.0px;
  }

  .flowchart-link {
    stroke: ${e.lineColor};
    fill: none;
  }

  .edgeLabel {
    background-color: ${e.edgeLabelBackground};
    rect {
      opacity: 0.5;
      background-color: ${e.edgeLabelBackground};
      fill: ${e.edgeLabelBackground};
    }
    text-align: center;
  }

  /* For html labels only */
  .labelBkg {
    background-color: ${t=e.edgeLabelBackground,i=(r=v.channel)(t,"r"),n=r(t,"g"),l=r(t,"b"),x.rgba(i,n,l,.5)};
    // background-color: 
  }

  .cluster rect {
    fill: ${e.clusterBkg};
    stroke: ${e.clusterBorder};
    stroke-width: 1px;
  }

  .cluster text {
    fill: ${e.titleColor};
  }

  .cluster span,p {
    color: ${e.titleColor};
  }
  /* .cluster div {
    color: ${e.titleColor};
  } */

  div.mermaidTooltip {
    position: absolute;
    text-align: center;
    max-width: 200px;
    padding: 2px;
    font-family: ${e.fontFamily};
    font-size: 12px;
    background: ${e.tertiaryColor};
    border: 1px solid ${e.border2};
    border-radius: 2px;
    pointer-events: none;
    z-index: 100;
  }

  .flowchartTitleText {
    text-anchor: middle;
    font-size: 18px;
    fill: ${e.textColor};
  }
`};e.s(["a",()=>C,"f",()=>S],832119)},356487,e=>{"use strict";var t=e.i(605429),r=e.i(832119),i=e.i(51839);e.i(531345),e.i(657002),e.i(971515),e.i(986738),e.i(619173),e.i(745117),e.i(494834),e.i(694783),e.i(425448);let n={parser:t.p,db:t.f,renderer:r.f,styles:r.a,init:e=>{e.flowchart||(e.flowchart={}),e.flowchart.arrowMarkerAbsolute=e.arrowMarkerAbsolute,(0,i.p)({flowchart:{arrowMarkerAbsolute:e.arrowMarkerAbsolute}}),r.f.setConf(e.flowchart),t.f.clear(),t.f.setGen("gen-2")}};e.s(["diagram",()=>n])}]);

//# debugId=b6fe4a01-6bf7-61d6-c861-f9b4f7c18a10
//# sourceMappingURL=525e03e9485c95e7.js.map