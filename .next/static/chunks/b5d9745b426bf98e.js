;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="94fddf5b-1be2-0a59-ca63-6742b0d1fdbd")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,443042,e=>{"use strict";var s=e.i(843476),t=e.i(271645),l=e.i(522016);function a(e){try{return new Date(e).toLocaleString()}catch{return e}}async function r(e,s){let t=await fetch(e,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(s)}),l=await t.json().catch(()=>({}));if(!t.ok)throw Error(l?.error||l?.message||"Request failed");return l}function i({user:e}){let[i,n]=(0,t.useState)(null),[o,d]=(0,t.useState)(null),[c,u]=(0,t.useState)(null),[x,m]=(0,t.useState)(e.role),[b,h]=(0,t.useState)(e.accountStatus),[p,f]=(0,t.useState)(""),[g,j]=(0,t.useState)(""),N=(0,t.useMemo)(()=>["NONE","READ_ONLY","SUPPORT","ADMIN","OWNER"],[]),v=(0,t.useMemo)(()=>["active","pending","suspended"],[]),y=async()=>{d(null),u(null);let s=p.trim();if(!s)return d("Reason is required.");if(confirm("Confirm role change")){n("role");try{await r(`/api/admin/users/${encodeURIComponent(e.userId)}/role`,{role:x,reason:s}),u("Role updated."),f("")}catch(e){d(e.message||"Failed to update role.")}finally{n(null)}}},w=async()=>{d(null),u(null);let s=g.trim();if(!s)return d("Reason is required.");if(confirm("Confirm status change")){n("status");try{await r(`/api/admin/users/${encodeURIComponent(e.userId)}/status`,{status:b,reason:s}),u("Status updated."),j("")}catch(e){d(e.message||"Failed to update status.")}finally{n(null)}}};return(0,s.jsxs)("main",{className:"mx-auto max-w-4xl px-4 py-10 md:px-6 lg:px-8 space-y-6",children:[(0,s.jsxs)("div",{className:"flex flex-wrap items-baseline justify-between gap-2",children:[(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("p",{className:"text-xs font-semibold text-slate-600",children:"Users"}),(0,s.jsx)("h1",{className:"text-2xl font-semibold text-slate-900",children:e.email}),(0,s.jsxs)("p",{className:"text-xs text-slate-600 font-mono",children:["User ID: ",e.userId]})]}),(0,s.jsx)(l.default,{href:"/admin/users",className:"rounded-full border border-slate-300 px-4 py-2 text-sm font-semibold text-slate-900 hover:border-slate-400",children:"Back to users"})]}),o?(0,s.jsx)("div",{className:"rounded-2xl border border-rose-200 bg-rose-50 p-4 text-sm text-rose-900",children:o}):null,c?(0,s.jsx)("div",{className:"rounded-2xl border border-emerald-200 bg-emerald-50 p-4 text-sm text-emerald-900",children:c}):null,(0,s.jsxs)("section",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm space-y-3",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-slate-900",children:"Profile summary"}),(0,s.jsxs)("div",{className:"grid gap-3 sm:grid-cols-2",children:[(0,s.jsxs)("div",{className:"rounded-2xl border border-slate-200 bg-slate-50/70 p-4",children:[(0,s.jsx)("p",{className:"text-xs font-semibold text-slate-700",children:"Created"}),(0,s.jsx)("p",{className:"mt-1 text-sm text-slate-900",children:a(e.createdAt)})]}),(0,s.jsxs)("div",{className:"rounded-2xl border border-slate-200 bg-slate-50/70 p-4",children:[(0,s.jsx)("p",{className:"text-xs font-semibold text-slate-700",children:"Last active"}),(0,s.jsx)("p",{className:"mt-1 text-sm text-slate-900",children:a(e.lastActiveAt)})]})]})]}),(0,s.jsxs)("section",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm space-y-4",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-slate-900",children:"Roles and permissions"}),(0,s.jsx)("p",{className:"text-sm text-slate-700",children:"Role changes require a reason and are audited."}),(0,s.jsxs)("div",{className:"grid gap-3 md:grid-cols-3",children:[(0,s.jsxs)("label",{className:"space-y-1",children:[(0,s.jsx)("span",{className:"text-xs font-semibold text-slate-700",children:"Role"}),(0,s.jsx)("select",{value:x,onChange:e=>m(e.target.value),className:"w-full rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm text-slate-900 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-400 focus-visible:ring-offset-2",children:N.map(e=>(0,s.jsx)("option",{value:e,children:e},e))})]}),(0,s.jsxs)("label",{className:"space-y-1 md:col-span-2",children:[(0,s.jsx)("span",{className:"text-xs font-semibold text-slate-700",children:"Reason"}),(0,s.jsx)("input",{value:p,onChange:e=>f(e.target.value),placeholder:"Required",className:"w-full rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm text-slate-900 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-400 focus-visible:ring-offset-2"})]})]}),(0,s.jsx)("button",{type:"button",className:"rounded-full bg-slate-900 px-4 py-2 text-sm font-semibold text-white hover:bg-slate-800 disabled:bg-slate-300",disabled:null!==i,onClick:y,children:"role"===i?"Updating...":"Change role"})]}),(0,s.jsxs)("section",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm space-y-4",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-slate-900",children:"Account status"}),(0,s.jsx)("p",{className:"text-sm text-slate-700",children:"Status changes require a reason and are audited."}),(0,s.jsxs)("div",{className:"grid gap-3 md:grid-cols-3",children:[(0,s.jsxs)("label",{className:"space-y-1",children:[(0,s.jsx)("span",{className:"text-xs font-semibold text-slate-700",children:"Status"}),(0,s.jsx)("select",{value:b,onChange:e=>h(e.target.value),className:"w-full rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm text-slate-900 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-400 focus-visible:ring-offset-2",children:v.map(e=>(0,s.jsx)("option",{value:e,children:e},e))})]}),(0,s.jsxs)("label",{className:"space-y-1 md:col-span-2",children:[(0,s.jsx)("span",{className:"text-xs font-semibold text-slate-700",children:"Reason"}),(0,s.jsx)("input",{value:g,onChange:e=>j(e.target.value),placeholder:"Required",className:"w-full rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm text-slate-900 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-400 focus-visible:ring-offset-2"})]})]}),(0,s.jsx)("button",{type:"button",className:"rounded-full bg-slate-900 px-4 py-2 text-sm font-semibold text-white hover:bg-slate-800 disabled:bg-slate-300",disabled:null!==i,onClick:w,children:"status"===i?"Updating...":"Change status"})]})]})}e.s(["default",()=>i])}]);

//# debugId=94fddf5b-1be2-0a59-ca63-6742b0d1fdbd
//# sourceMappingURL=817c6677d3616a3a.js.map