;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="c85ff31b-ad90-277e-3a48-20c8f2a0bc2d")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,643531,e=>{"use strict";let s=(0,e.i(475254).default)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);e.s(["Check",()=>s],643531)},531278,e=>{"use strict";let s=(0,e.i(475254).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>s],531278)},162062,e=>{"use strict";var s=e.i(843476),t=e.i(271645),a=e.i(217255),l=e.i(618566),r=e.i(39312),i=e.i(643531),c=e.i(531278),d=e.i(63209),n=e.i(522016);let o=[{id:"starter",label:"Starter",price:10,credits:500,pricePerCredit:.02},{id:"standard",label:"Standard",price:25,credits:1400,pricePerCredit:.0179},{id:"professional",label:"Professional",price:50,credits:3e3,pricePerCredit:.0167}];function m(){let{data:e,status:m}=(0,a.useSession)(),x=(0,l.useRouter)(),[h,u]=(0,t.useState)(null),[b,p]=(0,t.useState)(!0),[j,g]=(0,t.useState)(null),[f,N]=(0,t.useState)(null),[y,v]=(0,t.useState)(!1);async function k(){try{p(!0),g(null);let e=await fetch("/api/credits/balance");if(!e.ok)throw Error("Failed to load credit balance");let s=await e.json();u(s)}catch(e){g(e instanceof Error?e.message:"Failed to load balance")}finally{p(!1)}}async function w(s){if(!e?.user)return void x.push("/api/auth/signin?callbackUrl=/account/credits");v(!0),g(null);try{let e=await fetch("/api/billing/checkout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({packId:s})});if(!e.ok){let s=await e.json();throw Error(s.error||"Failed to create checkout session")}let t=await e.json();if(t.url)window.location.href=t.url;else throw Error("No checkout URL returned")}catch(e){g(e instanceof Error?e.message:"Purchase failed"),v(!1)}}return((0,t.useEffect)(()=>{"unauthenticated"===m?x.push("/api/auth/signin?callbackUrl=/account/credits"):"authenticated"===m&&k()},[m,x]),"loading"===m||b)?(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-sky-50/30 to-slate-50 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(c.Loader2,{className:"w-8 h-8 animate-spin text-sky-600 mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-slate-600",children:"Loading credit balance..."})]})}):"unauthenticated"===m?null:(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-sky-50/30 to-slate-50",children:(0,s.jsxs)("div",{className:"mx-auto max-w-7xl px-4 py-8 sm:px-6 lg:px-8",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("h1",{className:"text-4xl font-bold text-slate-900 mb-2",children:"Credits"}),(0,s.jsx)("p",{className:"text-lg text-slate-600",children:"Purchase credits to use premium tools and features"})]}),j&&(0,s.jsx)("div",{className:"mb-6 rounded-lg border border-amber-200 bg-amber-50 p-4",children:(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)(d.AlertCircle,{className:"w-5 h-5 text-amber-600 mt-0.5 flex-shrink-0"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"font-semibold text-amber-900",children:"Error"}),(0,s.jsx)("p",{className:"text-sm text-amber-800 mt-1",children:j})]}),(0,s.jsx)("button",{onClick:()=>g(null),className:"text-amber-600 hover:text-amber-800","aria-label":"Dismiss error",children:"×"})]})}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,s.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,s.jsxs)("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-slate-900",children:"Current Balance"}),(0,s.jsx)("button",{onClick:k,disabled:b,className:"text-sm text-sky-600 hover:text-sky-700 font-medium",children:"Refresh"})]}),h?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex items-baseline gap-3 mb-6",children:[(0,s.jsx)("span",{className:"text-5xl font-bold text-slate-900",children:h.balance.toLocaleString()}),(0,s.jsx)("span",{className:"text-lg text-slate-600",children:"credits"})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsx)("span",{className:"text-sm font-medium text-slate-700",children:"Daily Usage"}),(0,s.jsxs)("span",{className:"text-sm text-slate-600",children:[h.usage.daily.used," / ",h.usage.daily.cap]})]}),(0,s.jsx)("div",{className:"w-full bg-slate-200 rounded-full h-2.5",children:(0,s.jsx)("div",{className:`h-2.5 rounded-full transition-all ${h.alerts.daily?"bg-amber-500":h.usage.daily.percentage>=50?"bg-sky-500":"bg-emerald-500"}`,style:{width:`${Math.min(100,h.usage.daily.percentage)}%`}})}),(0,s.jsxs)("p",{className:"text-xs text-slate-500 mt-1",children:[h.usage.daily.remaining," remaining today"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsx)("span",{className:"text-sm font-medium text-slate-700",children:"Monthly Usage"}),(0,s.jsxs)("span",{className:"text-sm text-slate-600",children:[h.usage.monthly.used," / ",h.usage.monthly.cap]})]}),(0,s.jsx)("div",{className:"w-full bg-slate-200 rounded-full h-2.5",children:(0,s.jsx)("div",{className:`h-2.5 rounded-full transition-all ${h.alerts.monthly?"bg-amber-500":h.usage.monthly.percentage>=50?"bg-sky-500":"bg-emerald-500"}`,style:{width:`${Math.min(100,h.usage.monthly.percentage)}%`}})}),(0,s.jsxs)("p",{className:"text-xs text-slate-500 mt-1",children:[h.usage.monthly.remaining," remaining this month"]})]})]}),(0,s.jsxs)("div",{className:"mt-6 pt-6 border-t border-slate-200",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-slate-700",children:"Current Plan"}),(0,s.jsx)("p",{className:"text-lg font-semibold text-slate-900",children:h.plan.label})]}),(0,s.jsx)(n.default,{href:"/account/upgrade",className:"text-sm text-sky-600 hover:text-sky-700 font-medium",children:"Upgrade →"})]}),(0,s.jsxs)("p",{className:"text-xs text-slate-500 mt-2",children:[h.plan.monthlyCredits.toLocaleString()," credits/month,"," ",h.plan.dailyCap.toLocaleString(),"/day cap"]})]})]}):(0,s.jsx)("div",{className:"text-center py-8",children:(0,s.jsx)("p",{className:"text-slate-500",children:"Unable to load balance"})})]}),(0,s.jsxs)("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-slate-900 mb-6",children:"Purchase Credits"}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:o.map(e=>(0,s.jsxs)("div",{className:`rounded-xl border-2 p-5 transition-all cursor-pointer ${f===e.id?"border-sky-500 bg-sky-50":"border-slate-200 hover:border-slate-300 bg-white"}`,onClick:()=>N(e.id),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,s.jsx)("h3",{className:"font-semibold text-slate-900",children:e.label}),f===e.id&&(0,s.jsx)(i.Check,{className:"w-5 h-5 text-sky-600"})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("div",{className:"flex items-baseline gap-2",children:(0,s.jsxs)("span",{className:"text-3xl font-bold text-slate-900",children:["£",e.price]})}),(0,s.jsxs)("p",{className:"text-sm text-slate-600 mt-1",children:[e.credits.toLocaleString()," credits"]}),"starter"!==e.id&&(0,s.jsxs)("p",{className:"text-xs text-emerald-600 mt-1 font-medium",children:[Math.round((1-e.pricePerCredit/.02)*100),"% savings"]})]}),(0,s.jsx)("button",{onClick:s=>{s.stopPropagation(),w(e.id)},disabled:y,className:"w-full px-4 py-2 bg-sky-600 hover:bg-sky-700 text-white rounded-lg font-semibold transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:y&&f===e.id?(0,s.jsxs)("span",{className:"flex items-center justify-center gap-2",children:[(0,s.jsx)(c.Loader2,{className:"w-4 h-4 animate-spin"}),"Processing..."]}):"Purchase"})]},e.id))}),(0,s.jsx)("p",{className:"text-xs text-slate-500 mt-4 text-center",children:"Credits never expire. All purchases are final."})]})]}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[(0,s.jsxs)("h2",{className:"text-lg font-semibold text-slate-900 mb-4 flex items-center gap-2",children:[(0,s.jsx)(r.Zap,{className:"w-5 h-5 text-sky-600"}),"How Credits Work"]}),(0,s.jsxs)("div",{className:"space-y-3 text-sm text-slate-700",children:[(0,s.jsx)("p",{children:"Credits are consumed when you use server-side tools and features. Client-side tools are always free."}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Base fee:"})," 2 credits per server run"]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Compute:"})," 1 credit per 2 seconds of CPU time"]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Memory:"})," 1 credit per 4 seconds per GB RAM"]}),(0,s.jsxs)("p",{className:"pt-3 border-t border-slate-200",children:[(0,s.jsx)("strong",{children:"Price:"})," £","0.02"," per credit"]})]})]}),(0,s.jsxs)("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Quick Links"}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(n.default,{href:"/account",className:"block text-sm text-sky-600 hover:text-sky-700 font-medium",children:"Account Settings →"}),(0,s.jsx)(n.default,{href:"/account/settings/credits",className:"block text-sm text-sky-600 hover:text-sky-700 font-medium",children:"Credit Settings →"}),(0,s.jsx)(n.default,{href:"/account/usage",className:"block text-sm text-sky-600 hover:text-sky-700 font-medium",children:"Usage Analytics →"}),(0,s.jsx)(n.default,{href:"/account/upgrade",className:"block text-sm text-sky-600 hover:text-sky-700 font-medium",children:"Upgrade Plan →"})]})]})]})]})]})})}e.s(["default",()=>m],162062)}]);

//# debugId=c85ff31b-ad90-277e-3a48-20c8f2a0bc2d
//# sourceMappingURL=286db6cf1db98cbf.js.map