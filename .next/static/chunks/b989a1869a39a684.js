;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="2e6e879b-fd01-c343-989a-02d9c864b8b6")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,595058,e=>{"use strict";var t=e.i(191788),s=e.i(486533);function a(){let{data:e}=(0,s.useSession)(),a=e?.user?.id||null,[r,n]=(0,t.useState)(!1),i=(0,t.useRef)([]),l=(0,t.useRef)(null);(0,t.useEffect)(()=>{if(!a){n(!1),i.current=[];return}fetch("/api/account/profile").then(e=>e.json()).then(e=>{n(!!e?.user?.consent?.cpdDataUseAcceptedAt)}).catch(()=>n(!1))},[a]);let c=async()=>{if(!a||!r){i.current=[];return}let e=i.current.splice(0,i.current.length);if(e.length)try{await fetch("/api/analytics/events",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({events:e})})}catch{}};return(0,t.useEffect)(()=>()=>{l.current&&clearTimeout(l.current)},[]),{consented:r,track:e=>{if(a&&r){if(i.current.push({...e,timestamp:new Date().toISOString()}),i.current.length>=20)return void c();l.current&&clearTimeout(l.current),l.current=setTimeout(()=>void c(),1200)}},flush:c}}e.s(["useAnalytics",()=>a])},215125,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a={VALID_LOADERS:function(){return n},imageConfigDefault:function(){return i}};for(var r in a)Object.defineProperty(s,r,{enumerable:!0,get:a[r]});let n=["default","imgix","cloudinary","akamai","custom"],i={deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[32,48,64,96,128,256,384],path:"/_next/image",loader:"default",loaderFile:"",domains:[],disableStaticImages:!1,minimumCacheTTL:14400,formats:["image/webp"],maximumRedirects:3,dangerouslyAllowLocalIP:!1,dangerouslyAllowSVG:!1,contentSecurityPolicy:"script-src 'none'; frame-src 'none'; sandbox;",contentDispositionType:"attachment",localPatterns:void 0,remotePatterns:[],qualities:[75],unoptimized:!1}},813521,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"ImageConfigContext",{enumerable:!0,get:function(){return n}});let a=e.r(741705)._(e.r(191788)),r=e.r(215125),n=a.default.createContext(r.imageConfigDefault)},851682,559062,e=>{"use strict";function t(e){return"number"==typeof e&&Number.isFinite(e)?e:null}function s(e){let s=t(e);return null==s?null:Math.max(0,Math.round(s))}function a(e){let t=s(e);if(null==t)return null;let a=Math.max(0,Math.round(t/1e3));if(a<60)return`${a}s`;let r=Math.floor(a/60);return`${r}m ${a%60}s`}function r(e){let s=t(e);return null==s?null:String(Math.max(0,Math.round(s)))}e.s(["formatCreditsSafe",()=>r,"formatMsSafe",()=>a,"msOrNull",()=>s,"numberOrNull",()=>t],559062),e.s([],851682)},429457,e=>{"use strict";var t=e.i(391398),s=e.i(191788);e.i(851682);var a=e.i(559062);function r({estimatedCredits:e,currentBalance:r,onAccept:n,onDecline:i,disabled:l=!1,safetyBuffer:c=1.25}){let[o,d]=(0,s.useState)(!1),u=Math.ceil(e*c),m=null!==r&&r>=u;return((0,s.useEffect)(()=>{d(!1)},[e]),e<=0)?null:null===r?(0,t.jsx)("div",{className:"rounded-xl border border-slate-200 bg-slate-50 p-4",children:(0,t.jsx)("p",{className:"text-sm text-slate-700",children:"Loading credit balance..."})}):(0,t.jsx)("div",{className:"rounded-xl border border-amber-200 bg-amber-50/50 p-4",children:(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("h3",{className:"text-sm font-semibold text-slate-900",children:"Credit Cost Estimate"}),(0,t.jsx)("span",{className:"text-xs font-semibold text-amber-700 bg-amber-100 px-2 py-0.5 rounded",children:"ESTIMATE"})]}),(0,t.jsxs)("div",{className:"rounded-lg border border-slate-200 bg-white p-3",children:[(0,t.jsxs)("div",{className:"flex items-baseline justify-between",children:[(0,t.jsx)("span",{className:"text-xs font-medium text-slate-700",children:"Estimated credits:"}),(0,t.jsx)("span",{className:"text-lg font-bold text-slate-900",children:(0,a.formatCreditsSafe)(e)})]}),(0,t.jsxs)("div",{className:"mt-1 flex items-baseline justify-between text-xs",children:[(0,t.jsx)("span",{className:"text-slate-600",children:"Required (with safety buffer):"}),(0,t.jsx)("span",{className:"font-semibold text-slate-700",children:(0,a.formatCreditsSafe)(u)})]}),(0,t.jsxs)("div",{className:"mt-1 flex items-baseline justify-between text-xs",children:[(0,t.jsx)("span",{className:"text-slate-600",children:"Current balance:"}),(0,t.jsx)("span",{className:`font-semibold ${m?"text-slate-900":"text-rose-600"}`,children:(0,a.formatCreditsSafe)(r)})]})]}),(0,t.jsx)("div",{className:"rounded-lg border border-amber-300 bg-amber-100/50 p-3",children:(0,t.jsxs)("p",{className:"text-xs font-medium text-amber-900",children:["⚠️ ",(0,t.jsx)("strong",{children:"This is an ESTIMATE."})," Actual cost may be higher or lower depending on actual execution time, complexity, and system load."]})}),!m&&(0,t.jsxs)("div",{className:"rounded-lg border border-rose-300 bg-rose-50 p-3",children:[(0,t.jsx)("p",{className:"text-xs font-semibold text-rose-900",children:"Insufficient Credits"}),(0,t.jsxs)("p",{className:"mt-1 text-xs text-rose-800",children:["You need at least ",(0,a.formatCreditsSafe)(u)," credits to proceed. Current balance: ",(0,a.formatCreditsSafe)(r),"."]})]}),(0,t.jsxs)("div",{className:"flex items-start gap-2",children:[(0,t.jsx)("input",{type:"checkbox",id:"credit-consent",checked:o,onChange:e=>{e.target.checked&&m?(d(!0),n?.()):d(!1)},disabled:!m||l,className:"mt-0.5 h-4 w-4 rounded border-slate-300 text-amber-600 focus:ring-amber-500 disabled:opacity-50 disabled:cursor-not-allowed"}),(0,t.jsxs)("label",{htmlFor:"credit-consent",className:"text-xs text-slate-700",children:[(0,t.jsx)("span",{className:"font-medium",children:"I accept that this operation will consume credits."}),(0,t.jsx)("br",{}),(0,t.jsx)("span",{className:"text-slate-600",children:"I understand this is an estimate and actual cost may vary. I have sufficient credits to proceed."})]})]}),(0,t.jsx)("div",{className:"flex gap-2",children:o&&m?(0,t.jsx)("button",{type:"button",onClick:()=>{d(!1),i?.()},className:"text-xs text-slate-600 underline hover:text-slate-900",children:"Revoke acceptance"}):(0,t.jsx)("button",{type:"button",onClick:()=>{m&&(d(!0),n?.())},disabled:!m||l,className:"rounded-lg bg-amber-600 px-3 py-1.5 text-xs font-semibold text-white hover:bg-amber-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Accept and Continue"})})]})})}function n(e,t,a=1.25){let[r,i]=(0,s.useState)(!1),l=Math.ceil(e*a),c=null!==t&&t>=l,o=!(e>0)||r&&c;return(0,s.useEffect)(()=>{e<=0&&i(!0)},[e]),{accepted:r,setAccepted:i,canProceed:o,hasEnoughCredits:c,requiredCredits:l,needsConsent:e>0}}e.s(["default",()=>r,"useCreditConsent",()=>n])},19424,e=>{"use strict";var t=e.i(391398),s=e.i(191788),a=e.i(277774),r=e.i(41158),n=e.i(486533);let i=["public","registered","supporter","professional"];function l({message:e,detail:s}){return(0,t.jsxs)("div",{className:"rounded-2xl border border-slate-200 bg-white/80 p-3 shadow-sm",children:[(0,t.jsx)("p",{className:"text-sm font-semibold text-slate-900",children:e}),s?(0,t.jsx)("p",{className:"text-sm text-slate-700 mt-1",children:s}):null]})}var c=e.i(595058),o=e.i(837159);function d({requiredLevel:e,fallbackMessage:a,showUpgradeHint:d=!0,children:u}){let{data:m}=(0,n.useSession)(),[h,f]=(0,s.useState)("public"),p=(0,c.useAnalytics)(),x=(0,o.getTestingOverrideDecision)().allowed;(0,s.useEffect)(()=>{let e=!1;return async function(){try{if(x){e||f("professional");return}let t=await fetch("/api/billing/summary");if(!t.ok)throw Error("summary");let s=await t.json(),a=s?.plan==="supporter"?"supporter":s?.plan==="pro"||s?.plan==="professional"?"professional":m?.user?.id?"registered":"public";e||f(a)}catch{e||f(m?.user?.id?"registered":"public")}}(),()=>{e=!0}},[m?.user?.id,x]);let b=(0,s.useMemo)(()=>x||i.indexOf(h)>=i.indexOf(e),[e,h,x]);return((0,s.useEffect)(()=>{b||p.track({type:"access_gate_locked",requiredLevel:e,plan:h})},[b]),b)?(0,t.jsx)(t.Fragment,{children:u}):(0,t.jsx)("div",{className:"rounded-2xl border border-slate-200 bg-slate-50 p-4 shadow-sm",children:(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)("p",{className:"text-sm font-semibold text-slate-900",children:"This feature is available to higher access levels."}),(0,t.jsxs)("p",{className:"text-sm text-slate-700",children:["Current: ",h,". Required: ",e,"."]}),a?(0,t.jsx)(l,{message:a}):null,d?(0,t.jsx)(l,{message:"Create an account or sign in to continue.",detail:"Accounts save your progress and enable certificates and downloads."}):null,(0,t.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,t.jsx)(r.default,{href:"/signin",className:"button",children:"Sign in"}),(0,t.jsx)(r.default,{href:"/pricing",className:"link",children:"See access options"})]})]})})}let u={ai:50,cybersecurity:0,"software-architecture":50,data:50,digitalisation:50};var m=e.i(429457);function h(){let[e,n]=(0,s.useState)([]),[i,l]=(0,s.useState)(!0),[c,o]=(0,s.useState)(null),[u,m]=(0,s.useState)(null),[h,p]=(0,s.useState)(null);(0,s.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/learning/records");if(!e.ok){o("Sign in to view your learning records."),n([]);return}let t=await e.json();n(Array.isArray(t?.records)?t.records:[])}catch{o("Could not load learning records.")}finally{l(!1)}})()},[]),(0,s.useEffect)(()=>{fetch("/api/credits/status").then(e=>e.ok?e.json():null).then(e=>{p("number"==typeof e?.balance?e.balance:0)}).catch(()=>p(0))},[]);let x=(0,s.useMemo)(()=>Math.round(e.reduce((e,t)=>e+(Number(t.timeSpentMinutes)||0),0)/60*10)/10,[e]),b=async(e,t)=>{m(`${e}:${t}`);try{let s=`${e}:${t}`,a=await fetch("/api/certificates/issue",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({courseId:s})}),r=await a.json().catch(()=>({}));if(!a.ok)return void o(r?.message||"Unable to issue certificate.");let n="string"==typeof r?.pdfUrl?r.pdfUrl:null,i="string"==typeof r?.verifyUrl?r.verifyUrl:null;n?window.location.href=n:i&&(window.location.href=i)}catch{o("Unable to issue certificate.")}finally{m(null)}};return(0,t.jsx)(a.default,{title:"Learning records",description:"Server verified learning records and CPD evidence summary.",children:(0,t.jsxs)("main",{className:"page",children:[(0,t.jsxs)("header",{className:"page-header",children:[(0,t.jsx)("p",{className:"eyebrow",children:"My CPD"}),(0,t.jsx)("h1",{children:"Learning records"}),(0,t.jsx)("p",{className:"lead",children:"This page shows server-derived learning records. Hours are calculated conservatively."}),(0,t.jsx)("p",{className:"muted",children:"Calculation method: earned minutes are based on completed sections, quizzes, and tool usage, capped by the course estimated hours. Manual hours are not accepted for certificates."}),(0,t.jsx)("div",{className:"actions",children:(0,t.jsx)(r.default,{href:"/my-cpd/evidence",className:"button",children:"CPD evidence text"})})]}),(0,t.jsxs)("section",{className:"section",children:[i?(0,t.jsx)("p",{className:"muted",children:"Loading."}):null,c?(0,t.jsx)("p",{className:"muted",children:c}):null,i||c?null:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("p",{className:"muted",children:["Total earned hours (all records): ",x]}),0===e.length?(0,t.jsx)("p",{className:"muted",children:"No records yet. Complete sections and quizzes, then refresh a record from a course page."}):(0,t.jsx)("div",{className:"card-grid",children:e.map(e=>(0,t.jsxs)("div",{className:"card",children:[(0,t.jsxs)("h3",{children:[e.courseId," ",e.levelId]}),(0,t.jsxs)("p",{className:"muted",children:["Status: ",e.completionStatus]}),(0,t.jsxs)("p",{className:"muted",children:["Sections completed: ",e.sectionsCompleted," · Quizzes: ",e.quizzesCompleted," · Tools used: ",e.toolsUsed]}),(0,t.jsxs)("p",{className:"muted",children:["Earned hours: ",Math.round(e.timeSpentMinutes/60*10)/10]}),e.completionDate?(0,t.jsxs)("p",{className:"muted",children:["Completion date: ",new Date(e.completionDate).toLocaleDateString()]}):null,(0,t.jsx)("div",{className:"actions",children:(0,t.jsxs)(d,{requiredLevel:"supporter",fallbackMessage:"Sign in to get a CPD certificate for this course.",showUpgradeHint:!0,children:[(0,t.jsx)("p",{className:"muted",style:{marginTop:0},children:"Everything on RansfordsNotes is free to learn and use. We only charge for extra compute and for issuing CPD certificates."}),(0,t.jsx)("p",{className:"muted",style:{marginTop:0},children:"You are purchasing certificate issuance. This covers identity linked issuance, a downloadable PDF, and a public verification page."}),(0,t.jsx)(f,{courseId:e.courseId,levelId:e.levelId,completionStatus:e.completionStatus,issuing:u,balance:h,onIssue:b})]})})]},`${e.courseId}:${e.levelId}`))})]})]})]})})}function f({courseId:e,levelId:s,completionStatus:a,issuing:r,balance:n,onIssue:i}){let l,c=Math.max(0,Math.round("number"==typeof(l=u[e])?l:50)),{accepted:o,canProceed:d}=(0,m.useCreditConsent)(c,n),h=r===`${e}:${s}`;return(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)(m.default,{estimatedCredits:c,currentBalance:n,onAccept:()=>{}}),(0,t.jsx)("button",{type:"button",className:"button",disabled:"completed"!==a||h||!d,onClick:()=>i(e,s),children:h?"Issuing...":`Get CPD certificate (${c} credits)`})]})}e.s(["default",()=>h],19424)},765865,(e,t,s)=>{let a="/my-cpd/records";(window.__NEXT_P=window.__NEXT_P||[]).push([a,()=>e.r(19424)]),t.hot&&t.hot.dispose(function(){window.__NEXT_P.push([a])})},648761,e=>{e.v(t=>Promise.all(["static/chunks/076d71697cf8418f.js"].map(t=>e.l(t))).then(()=>t(493594)))},828805,e=>{e.v(t=>Promise.all(["static/chunks/9598a04aeb8d39c4.js"].map(t=>e.l(t))).then(()=>t(879466)))},401042,e=>{e.v(t=>Promise.all(["static/chunks/240263eebbec9d80.js"].map(t=>e.l(t))).then(()=>t(79936)))}]);

//# debugId=2e6e879b-fd01-c343-989a-02d9c864b8b6
//# sourceMappingURL=bcb35631252fb5f7.js.map