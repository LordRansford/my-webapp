;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="33779866-4e05-a5dc-62ae-054c61185670")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,618348,e=>{"use strict";let t=(0,e.i(475254).default)("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);e.s(["HelpCircle",()=>t],618348)},431343,e=>{"use strict";let t=(0,e.i(475254).default)("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);e.s(["Play",()=>t],431343)},495242,e=>{"use strict";let t=(0,e.i(475254).default)("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);e.s(["Pause",()=>t],495242)},694351,e=>{"use strict";let t=(0,e.i(475254).default)("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);e.s(["Home",()=>t],694351)},962110,e=>{"use strict";var t=e.i(843476),s=e.i(271645),i=e.i(618348),a=e.i(495242),r=e.i(431343),n=e.i(475254);let l=(0,n.default)("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);var o=e.i(694351);let c=(0,n.default)("Keyboard",[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]]),d=(0,n.default)("MousePointer2",[["path",{d:"M4.037 4.688a.495.495 0 0 1 .651-.651l16 6.5a.5.5 0 0 1-.063.947l-6.124 1.58a2 2 0 0 0-1.438 1.435l-1.579 6.126a.5.5 0 0 1-.947.063z",key:"edeuup"}]]);function h({config:e,status:n,onStart:h,onPause:u,onResume:m,onReset:p,onQuit:f,children:g,rightPanel:x,showHelp:y=!1,onToggleHelp:b}){let[v,w]=(0,s.useState)(!1);return(0,t.jsxs)("div",{className:"min-h-screen bg-slate-50",children:[(0,t.jsx)("header",{className:"border-b border-slate-200 bg-white",children:(0,t.jsx)("div",{className:"mx-auto max-w-7xl px-4 py-4 sm:px-6 lg:px-8",children:(0,t.jsxs)("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4 flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,t.jsx)("h1",{className:"text-xl font-semibold text-slate-900 truncate",children:e.title}),(0,t.jsx)("p",{className:"text-sm text-slate-600 hidden sm:block",children:e.description})]}),(0,t.jsx)("div",{className:"flex items-center gap-2 flex-shrink-0",children:(0,t.jsx)("span",{className:`rounded-full px-3 py-1 text-xs font-medium whitespace-nowrap ${"playing"===n?"bg-green-100 text-green-800":"paused"===n?"bg-amber-100 text-amber-800":"finished"===n?"bg-blue-100 text-blue-800":"bg-slate-100 text-slate-800"}`,role:"status","aria-live":"polite","aria-label":`Game status: ${"playing"===n&&!v?"Playing":"paused"===n||v?"Paused":"finished"===n?"Finished":"Ready"}`,children:"playing"!==n||v?"paused"===n||v?"Paused":"finished"===n?"Finished":"Ready":"Playing"})})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[b&&(0,t.jsx)("button",{onClick:b,className:"rounded-lg p-2 text-slate-600 hover:bg-slate-100 hover:text-slate-900 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500","aria-label":"Toggle help",type:"button",children:(0,t.jsx)(i.HelpCircle,{className:"h-5 w-5","aria-hidden":"true"})}),"idle"===n&&h&&(0,t.jsxs)("button",{onClick:h,className:"flex items-center gap-2 rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 transition-colors",type:"button","aria-label":"Start game",children:[(0,t.jsx)(r.Play,{className:"h-4 w-4","aria-hidden":"true"}),"Start"]}),"playing"===n&&!v&&u&&(0,t.jsxs)("button",{onClick:()=>{w(!0),u?.()},className:"flex items-center gap-2 rounded-lg bg-slate-100 px-4 py-2 text-sm font-medium text-slate-700 hover:bg-slate-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 transition-colors",type:"button","aria-label":"Pause game",children:[(0,t.jsx)(a.Pause,{className:"h-4 w-4","aria-hidden":"true"}),"Pause"]}),("paused"===n||v)&&m&&(0,t.jsxs)("button",{onClick:()=>{w(!1),m?.()},className:"flex items-center gap-2 rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 transition-colors",type:"button","aria-label":"Resume game",children:[(0,t.jsx)(r.Play,{className:"h-4 w-4","aria-hidden":"true"}),"Resume"]}),p&&(0,t.jsxs)("button",{onClick:p,className:"flex items-center gap-2 rounded-lg bg-slate-100 px-4 py-2 text-sm font-medium text-slate-700 hover:bg-slate-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 transition-colors",type:"button","aria-label":"Reset game",children:[(0,t.jsx)(l,{className:"h-4 w-4","aria-hidden":"true"}),"Reset"]}),f&&(0,t.jsxs)("button",{onClick:f,className:"flex items-center gap-2 rounded-lg bg-slate-100 px-4 py-2 text-sm font-medium text-slate-700 hover:bg-slate-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 transition-colors",type:"button","aria-label":"Quit game and return to games hub",children:[(0,t.jsx)(o.Home,{className:"h-4 w-4","aria-hidden":"true"}),"Quit"]})]})]})})}),(0,t.jsx)("div",{className:"mx-auto max-w-7xl px-4 py-6 sm:px-6 lg:px-8",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-4",children:[(0,t.jsx)("main",{className:"lg:col-span-3",role:"main","aria-label":"Game area",children:(0,t.jsx)("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",id:"game-main-area",children:g})}),x&&(0,t.jsx)("aside",{className:"lg:col-span-1",role:"complementary","aria-label":"Game information and statistics",children:(0,t.jsx)("div",{className:"rounded-2xl border border-slate-200 bg-white p-4 shadow-sm",id:"game-sidebar",children:x})})]})}),(0,t.jsx)("footer",{className:"border-t border-slate-200 bg-white",role:"contentinfo",children:(0,t.jsx)("div",{className:"mx-auto max-w-7xl px-4 py-3 sm:px-6 lg:px-8",children:(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 sm:gap-4 text-xs text-slate-600",children:[(0,t.jsxs)("div",{className:"flex items-start gap-2 flex-wrap",children:[(0,t.jsx)(c,{className:"h-4 w-4 mt-0.5 flex-shrink-0","aria-hidden":"true"}),(0,t.jsxs)("span",{className:"flex flex-wrap gap-x-1.5 gap-y-1",children:[(0,t.jsx)("kbd",{className:"px-1.5 py-0.5 bg-slate-100 rounded text-xs",children:"Arrow keys"})," to move,"," ",(0,t.jsx)("kbd",{className:"px-1.5 py-0.5 bg-slate-100 rounded text-xs",children:"Space"})," to action,"," ",(0,t.jsx)("kbd",{className:"px-1.5 py-0.5 bg-slate-100 rounded text-xs",children:"P"})," to pause,"," ",(0,t.jsx)("kbd",{className:"px-1.5 py-0.5 bg-slate-100 rounded text-xs",children:"Q"})," to quit"]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(d,{className:"h-4 w-4 flex-shrink-0","aria-hidden":"true"}),(0,t.jsx)("span",{children:"Touch: Swipe to move, Tap to action"})]})]})})})]})}e.s(["default",()=>h],962110)},539115,e=>{"use strict";class t{state;constructor(e){this.state=Math.abs(Math.floor(e))||1}next(){return this.state=(1664525*this.state+0x3c6ef35f)%0x100000000,this.state/0x100000000}nextInt(e,t){return Math.floor(this.next()*(t-e+1))+e}nextFloat(e,t){return e+this.next()*(t-e)}shuffle(e){let t=[...e];for(let e=t.length-1;e>0;e--){let s=Math.floor(this.next()*(e+1));[t[e],t[s]]=[t[s],t[e]]}return t}weightedChoice(e,t){if(e.length!==t.length)throw Error("Items and weights arrays must have same length");let s=t.reduce((e,t)=>e+t,0);if(0===s)throw Error("Total weight must be greater than 0");let i=this.next()*s;for(let s=0;s<e.length;s++)if((i-=t[s])<=0)return e[s];return e[e.length-1]}choice(e){if(0===e.length)throw Error("Cannot choose from empty array");return e[this.nextInt(0,e.length-1)]}sample(e,t){if(t>e.length)throw Error("Sample size cannot be larger than array length");let s=new Set,i=[];for(;s.size<t;){let t=this.nextInt(0,e.length-1);s.has(t)||(s.add(t),i.push(e[t]))}return i}getState(){return this.state}setState(e){this.state=Math.abs(Math.floor(e))||1}clone(){return new t(this.state)}}function s(){let e=new Date,t=e.getUTCFullYear(),s=String(e.getUTCMonth()+1).padStart(2,"0"),i=String(e.getUTCDate()).padStart(2,"0"),a=`${t}-${s}-${i}`,r=0x811c9dc5;for(let e=0;e<a.length;e++)r^=a.charCodeAt(e),r+=(r<<1)+(r<<4)+(r<<7)+(r<<8)+(r<<24);return Math.abs(r>>>0)}function i(e){let t=0;for(let s=0;s<e.length;s++)t=(t<<5)-t+e.charCodeAt(s),t&=t;return Math.abs(t)}e.s(["SeededRNG",()=>t,"getDailySeed",()=>s,"hashString",()=>i])},455521,523285,295728,140492,e=>{"use strict";var t=e.i(539115);class s{state;replayLog;rng;constructor(e,s){this.rng=new t.SeededRNG(s),this.state={status:"idle",seed:s,timestamp:Date.now(),difficulty:0,moves:[],metadata:{},...e},this.replayLog={gameId:"",seed:s,moves:[],initialState:this.state,finalState:null}}getState(){return{...this.state}}random(){return this.rng.next()}getRNG(){return this.rng}randomInt(e,t){return this.rng.nextInt(e,t)}randomFloat(e,t){return this.rng.nextFloat(e,t)}shuffle(e){return this.rng.shuffle(e)}weightedChoice(e,t){return this.rng.weightedChoice(e,t)}recordMove(e,t){let s={timestamp:Date.now()-this.state.timestamp,type:e,data:t};this.state.moves.push(s),this.replayLog.moves.push(s)}updateState(e){this.state={...this.state,...e,moves:[...this.state.moves]}}getReplayLog(){return{...this.replayLog,finalState:this.state}}serialize(){return JSON.stringify({state:this.state,replayLog:this.replayLog})}static deserialize(e){return JSON.parse(e)}static verifyReplay(e,t){return!0}}e.s(["StateManager",()=>s],455521);class i{curve;startTime;performanceHistory;constructor(e){this.curve=e,this.startTime=Date.now(),this.performanceHistory=[]}getCurrentDifficulty(){let e=Date.now()-this.startTime,t=this.calculateTimeBasedDifficulty(e);return this.curve.adaptive?Math.min(1,Math.max(0,t+this.calculatePerformanceAdjustment())):t}calculateTimeBasedDifficulty(e){let t=e/1e3;if(t<this.curve.rampTime/1e3){let e=t/(this.curve.rampTime/1e3);return this.curve.initial+(this.curve.target-this.curve.initial)*e}let s=Math.min(.2,(t-this.curve.rampTime/1e3)/60);return Math.min(1,this.curve.target+s)}calculatePerformanceAdjustment(){if(0===this.performanceHistory.length)return 0;let e=this.performanceHistory.reduce((e,t)=>e+t,0)/this.performanceHistory.length;return this.calculateTimeBasedDifficulty(Date.now()-this.startTime),this.curve.initial,(e-.5)*.2}recordPerformance(e){this.performanceHistory.push(e),this.performanceHistory.length>10&&this.performanceHistory.shift()}reset(){this.startTime=Date.now(),this.performanceHistory=[]}getDifficultyLabel(e){return e<.3?"Foundations":e<.5?"Intermediate":e<.7?"Advanced":e<.9?"Expert":"Master"}}e.s(["DifficultyEngine",()=>i],523285);class a{analyzeGame(e,t){let s=this.identifyTurningPoints(e),i=this.identifyMistakes(e,t),a=this.identifyGoodDecisions(e,t),r=this.generateSummary(s,i,a);return{turningPoints:s.slice(0,3),keyMistakes:i.slice(0,3),keyDecisions:a.slice(0,3),summary:r}}identifyTurningPoints(e){let t=[],s=0;for(let i=0;i<e.moves.length;i++){let a=e.moves[i];void 0!==e.score&&Math.abs((e.score||0)-s)>10&&(t.push({timestamp:a.timestamp,description:`Significant score change at ${this.formatTime(a.timestamp)}`,impact:(e.score||0)>s?"positive":"negative"}),s=e.score||0),("error"===a.type||"collision"===a.type)&&t.push({timestamp:a.timestamp,description:`Error occurred at ${this.formatTime(a.timestamp)}`,impact:"negative"})}return t.sort((e,t)=>Math.abs(t.timestamp-e.timestamp))}identifyMistakes(e,t){let s=[];for(let i of e.moves.filter(e=>"error"===e.type||"collision"===e.type))s.push({timestamp:i.timestamp,description:`Mistake at ${this.formatTime(i.timestamp)}`,suggestion:this.getSuggestionForMistake(i,t)});for(let t=1;t<e.moves.length;t++){let i=e.moves[t-1],a=e.moves[t];("error"===i.type||"collision"===i.type)&&("error"===a.type||"collision"===a.type)&&a.timestamp-i.timestamp<2e3&&s.push({timestamp:a.timestamp,description:"Repeated mistakes within 2 seconds",suggestion:"Take a moment to assess the situation before acting"})}return s}identifyGoodDecisions(e,t){let s=[],i=0;for(let t=0;t<e.moves.length;t++){let a=e.moves[t];"error"!==a.type&&"collision"!==a.type?++i>=5&&(s.push({timestamp:a.timestamp,description:`Successful sequence of ${i} moves`,impact:"Maintained consistent performance"}),i=0):i=0}return e.score&&e.score>100&&s.push({timestamp:e.moves[e.moves.length-1]?.timestamp||0,description:"Achieved high score",impact:"Demonstrated strong performance"}),s}generateSummary(e,t,s){let i=[];if(s.length>0&&i.push(`You made ${s.length} strong decisions during this game.`),t.length>0&&i.push(`There were ${t.length} areas where you could improve.`),e.length>0){let t=e.filter(e=>"positive"===e.impact).length;t>0&&i.push(`${t} key moments worked in your favor.`)}return i.join(" ")||"Review your moves to identify patterns and improve."}getSuggestionForMistake(e,t){return"collision"===e.type?"Watch for obstacles and plan your path ahead":"error"===e.type?"Double-check your inputs before confirming":"Review the game rules and try a different approach"}formatTime(e){let t=Math.floor(e/1e3),s=Math.floor(t/60),i=t%60;return s>0?`${s}m ${i}s`:`${i}s`}}e.s(["ExplainabilityEngine",()=>a],295728),e.i(247167);var r=e.i(271645);function n(e,t,s){(0,r.useRef)(Date.now());let i=(0,r.useRef)({gameId:e,startTime:Date.now(),moves:0,status:t});return(0,r.useEffect)(()=>{"playing"===t&&0===i.current.startTime&&(i.current.startTime=Date.now()),("finished"===t||"error"===t)&&(i.current.endTime=Date.now(),i.current.duration=i.current.endTime-i.current.startTime,i.current.status=t,i.current.moves=s.moves.length,i.current.score=s.score)},[t,e,s]),i.current}e.s(["useGameAnalytics",()=>n],140492)},878894,e=>{"use strict";let t=(0,e.i(475254).default)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);e.s(["AlertTriangle",()=>t],878894)},16715,e=>{"use strict";let t=(0,e.i(475254).default)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);e.s(["RefreshCw",()=>t],16715)},295922,e=>{"use strict";var t=e.i(843476),s=e.i(271645),i=e.i(878894),a=e.i(16715),r=e.i(694351),n=e.i(522016);class l extends s.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){this.setState({error:e,errorInfo:t})}handleReset=()=>{this.setState({hasError:!1,error:null,errorInfo:null})};render(){return this.state.hasError?(0,t.jsx)("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-4",children:(0,t.jsxs)("div",{className:"max-w-md w-full rounded-2xl border border-red-200 bg-white p-8 shadow-lg",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,t.jsx)(i.AlertTriangle,{className:"h-6 w-6 text-red-600","aria-hidden":"true"}),(0,t.jsx)("h1",{className:"text-xl font-semibold text-slate-900",children:this.props.gameName?`${this.props.gameName} Error`:"Game Error"})]}),(0,t.jsx)("p",{className:"text-slate-700 mb-6",children:"Something went wrong while running the game. This has been logged and we'll look into it."}),!1,(0,t.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,t.jsxs)("button",{onClick:this.handleReset,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 transition-colors",type:"button",children:[(0,t.jsx)(a.RefreshCw,{className:"h-4 w-4","aria-hidden":"true"}),"Try Again"]}),(0,t.jsxs)(n.default,{href:"/games/hub",className:"flex items-center gap-2 px-4 py-2 bg-slate-100 text-slate-700 rounded-lg font-medium hover:bg-slate-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 transition-colors",children:[(0,t.jsx)(r.Home,{className:"h-4 w-4","aria-hidden":"true"}),"Back to Games Hub"]})]})]})}):this.props.children}}e.s(["GameErrorBoundary",()=>l])},557663,597327,e=>{"use strict";class t{handlers=new Map;isEnabled=!0;touchStartPos=null;SWIPE_THRESHOLD=50;keyboardHandler=null;touchStartHandler=null;touchEndHandler=null;constructor(){}on(e,t){return this.handlers.has(e)||this.handlers.set(e,[]),this.handlers.get(e).push(t),()=>{let s=this.handlers.get(e);if(s){let e=s.indexOf(t);e>-1&&s.splice(e,1)}}}setEnabled(e){this.isEnabled=e}setupKeyboardListeners(){return this.keyboardHandler=e=>{if(!this.isEnabled)return;let t=this.mapKeyToAction(e.key,e);t&&this.emit(t,{type:"keyboard",action:t,timestamp:Date.now(),data:{key:e.key,code:e.code,modifiers:this.getModifiers(e)}})},window.addEventListener("keydown",this.keyboardHandler),()=>{this.keyboardHandler&&(window.removeEventListener("keydown",this.keyboardHandler),this.keyboardHandler=null)}}setupTouchListeners(){return this.touchStartHandler=e=>{if(!this.isEnabled)return;let t=e.touches[0];t&&(this.touchStartPos={x:t.clientX,y:t.clientY})},this.touchEndHandler=e=>{if(!this.isEnabled||!this.touchStartPos)return;let t=e.changedTouches[0];if(!t)return;let s=t.clientX-this.touchStartPos.x,i=t.clientY-this.touchStartPos.y,a=Math.sqrt(s*s+i*i);if(a>this.SWIPE_THRESHOLD){let e=this.detectSwipe(s,i);e&&this.emit(e,{type:"touch",action:e,timestamp:Date.now(),data:{deltaX:s,deltaY:i,distance:a}})}else this.emit("tap",{type:"touch",action:"tap",timestamp:Date.now(),data:{x:t.clientX,y:t.clientY}});this.touchStartPos=null},window.addEventListener("touchstart",this.touchStartHandler,{passive:!0}),window.addEventListener("touchend",this.touchEndHandler,{passive:!0}),()=>{this.touchStartHandler&&(window.removeEventListener("touchstart",this.touchStartHandler),this.touchStartHandler=null),this.touchEndHandler&&(window.removeEventListener("touchend",this.touchEndHandler),this.touchEndHandler=null)}}mapKeyToAction(e,t){return({ArrowUp:"move-up",ArrowDown:"move-down",ArrowLeft:"move-left",ArrowRight:"move-right"," ":"action",Enter:"confirm",Escape:"pause",p:"pause",P:"pause",q:"quit",Q:"quit"})[e]||null}detectSwipe(e,t){return Math.abs(e)>Math.abs(t)?e>0?"swipe-right":"swipe-left":t>0?"swipe-down":"swipe-up"}getModifiers(e){return{shift:e.shiftKey,ctrl:e.ctrlKey,alt:e.altKey,meta:e.metaKey}}emit(e,t){let s=this.handlers.get(e);s&&s.forEach(e=>e(t))}setupAllListeners(){let e=this.setupKeyboardListeners(),t=this.setupTouchListeners();return()=>{e(),t()}}destroy(){this.keyboardHandler&&(window.removeEventListener("keydown",this.keyboardHandler),this.keyboardHandler=null),this.touchStartHandler&&(window.removeEventListener("touchstart",this.touchStartHandler),this.touchStartHandler=null),this.touchEndHandler&&(window.removeEventListener("touchend",this.touchEndHandler),this.touchEndHandler=null),this.handlers.clear()}}e.s(["InputLayer",()=>t],557663);var s=e.i(271645);function i(){let[e,t]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{let e=window.matchMedia("(prefers-reduced-motion: reduce)");t(e.matches);let s=e=>{t(e.matches)};return e.addEventListener?(e.addEventListener("change",s),()=>e.removeEventListener("change",s)):(e.addListener(s),()=>e.removeListener(s))},[]),e}e.s(["useReducedMotion",()=>i],597327)},773547,e=>{"use strict";var t=e.i(843476),s=e.i(271645),i=e.i(962110),a=e.i(455521),r=e.i(523285),n=e.i(295728),l=e.i(557663),o=e.i(140492),c=e.i(597327);let d={id:"grid-racer",title:"Grid Racer Time Trial",description:"Time trial racing with customizable loadouts. Navigate through obstacles and beat your best time.",category:"arcade",modes:["solo"],supportsMultiplayer:!1,minPlayers:1,maxPlayers:1,estimatedMinutes:10,tutorialAvailable:!0};function h(){let[e,h]=(0,s.useState)("idle"),[u,m]=(0,s.useState)(0),[p,f]=(0,s.useState)(0),[g,x]=(0,s.useState)(null),[y,b]=(0,s.useState)({x:400,y:500,speed:3,direction:"none"}),[v,w]=(0,s.useState)([]),j=(0,s.useMemo)(()=>Math.floor(1e6*Math.random()),[]),k=(0,s.useMemo)(()=>new a.StateManager({status:"idle"},j),[j]),M=(0,s.useMemo)(()=>new r.DifficultyEngine({initial:.2,target:.9,rampTime:6e4,adaptive:!0}),[]),N=(0,s.useMemo)(()=>new n.ExplainabilityEngine,[]),S=(0,s.useMemo)(()=>new l.InputLayer,[]),E=(0,c.useReducedMotion)();(0,o.useGameAnalytics)(d.id,e,k.getState());let T=(0,s.useCallback)(e=>{let t=Math.floor(5+10*e),s=[],i=()=>k.random();for(let e=0;e<t;e++)s.push({x:700*i()+50,y:-(2e3*i()),width:40+60*i(),height:40+60*i(),type:i()>.7?"moving":"static"});return s},[k]),H=function({width:e,height:t,pixelRatio:i=window.devicePixelRatio||1,onRender:a,enabled:r=!0}){let n=(0,s.useRef)(null),l=(0,s.useRef)(void 0),o=(0,s.useRef)(0),c=(0,s.useCallback)(s=>{if(!n.current||!r)return;let d=n.current.getContext("2d");if(!d)return;let h=s-o.current;o.current=s,d.clearRect(0,0,e*i,t*i),d.save(),d.scale(i,i),a(d,h),d.restore(),l.current=requestAnimationFrame(c)},[e,t,i,a,r]);return(0,s.useEffect)(()=>{if(!n.current)return;let s=n.current;return s.width=e*i,s.height=t*i,s.style.width=`${e}px`,s.style.height=`${t}px`,r&&(o.current=performance.now(),l.current=requestAnimationFrame(c)),()=>{l.current&&cancelAnimationFrame(l.current)}},[e,t,i,r,c]),n}({width:800,height:600,onRender:(0,s.useCallback)((t,s)=>{if("playing"!==e)return;t.fillStyle="#f8fafc",t.fillRect(0,0,800,600),t.strokeStyle="#e2e8f0",t.lineWidth=1;for(let e=0;e<800;e+=40)t.beginPath(),t.moveTo(e,0),t.lineTo(e,600),t.stroke();for(let e=0;e<600;e+=40)t.beginPath(),t.moveTo(0,e),t.lineTo(800,e),t.stroke();t.fillStyle="#3b82f6",t.beginPath(),t.arc(y.x,y.y,15,0,2*Math.PI),t.fill(),v.forEach(e=>{t.fillStyle="moving"===e.type?"#ef4444":"#64748b",t.fillRect(e.x,e.y,e.width,e.height)});let i=M.getCurrentDifficulty();w(e=>{let t=e.map(e=>({...e,y:e.y+(2+5*i),x:"moving"===e.type?e.x+2*Math.sin(.01*e.y):e.x})).filter(e=>e.y<650);return t.length<10?[...t,...T(i)]:t}),v.forEach(e=>{y.x+15>e.x&&y.x-15<e.x+e.width&&y.y+15>e.y&&y.y-15<e.y+e.height&&(k.recordMove("collision",{obstacleId:e.x}),M.recordPerformance(0),m(e=>Math.max(0,e-10)))}),m(e=>e+1)},[e,y,v,k,M,T,E]),enabled:"playing"===e});(0,s.useEffect)(()=>{if("playing"!==e)return void S.setEnabled(!1);S.setEnabled(!0);let t=S.setupAllListeners(),s=S.on("move-left",()=>{b(e=>({...e,x:Math.max(15,e.x-e.speed),direction:"left"})),k.recordMove("move",{direction:"left"})}),i=S.on("move-right",()=>{b(e=>({...e,x:Math.min(785,e.x+e.speed),direction:"right"})),k.recordMove("move",{direction:"right"})}),a=S.on("move-up",()=>{b(e=>({...e,y:Math.max(15,e.y-e.speed),direction:"up"})),k.recordMove("move",{direction:"up"})}),r=S.on("move-down",()=>{b(e=>({...e,y:Math.min(585,e.y+e.speed),direction:"down"})),k.recordMove("move",{direction:"down"})}),n=S.on("pause",()=>{h("paused")});return()=>{t(),s(),i(),a(),r(),n(),S.setEnabled(!1)}},[e,S,k]),(0,s.useEffect)(()=>{if("playing"!==e)return;let t=setInterval(()=>{f(e=>e+.1)},100);return()=>clearInterval(t)},[e]);let R=(0,s.useCallback)(()=>{h("playing"),m(0),f(0),b({x:400,y:500,speed:3,direction:"none"}),w(T(.2)),k.updateState({status:"playing",timestamp:Date.now()}),k.recordMove("start",{}),M.reset()},[k,M,T]),P=(0,s.useCallback)(()=>{h("idle"),m(0),f(0),b({x:400,y:500,speed:3,direction:"none"}),w([]),x(null),k.updateState({status:"idle",moves:[],score:0}),M.reset()},[k,M]),D=(0,s.useCallback)(()=>{("playing"===e||"paused"===e)&&(h("finished"),k.updateState({status:"finished",score:u}),x(N.analyzeGame(k.getState(),{id:d.id,type:"arcade"})))},[e,k,u,N]),C=M.getCurrentDifficulty();return(0,t.jsxs)(i.default,{config:d,status:e,onStart:"idle"===e?R:void 0,onReset:P,onQuit:D,rightPanel:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-sm font-semibold text-slate-900 mb-2",children:"Stats"}),(0,t.jsx)("div",{className:"text-2xl font-bold text-slate-900",children:Math.floor(u)}),(0,t.jsx)("div",{className:"text-sm text-slate-600",children:"Score"}),(0,t.jsxs)("div",{className:"mt-2 text-lg font-semibold text-slate-900",children:[p.toFixed(1),"s"]}),(0,t.jsx)("div",{className:"text-sm text-slate-600",children:"Time"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-sm font-semibold text-slate-900 mb-2",children:"Difficulty"}),(0,t.jsx)("div",{className:"text-sm text-slate-700",children:M.getDifficultyLabel(C)})]}),g&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-sm font-semibold text-slate-900 mb-2",children:"Analysis"}),(0,t.jsx)("p",{className:"text-xs text-slate-600",children:g.summary})]})]}),children:[(0,t.jsx)("div",{className:"flex items-center justify-center",role:"application","aria-label":"Grid Racer game canvas",children:(0,t.jsx)("canvas",{ref:H,className:"rounded-lg border-2 border-slate-300 bg-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500",style:{maxWidth:"100%",height:"auto"},"aria-label":"Grid Racer game canvas. Use arrow keys to navigate and avoid obstacles.",tabIndex:0})}),"idle"===e&&(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)("p",{className:"text-slate-600 mb-4",children:"Use arrow keys or swipe to navigate"}),(0,t.jsx)("p",{className:"text-sm text-slate-500",children:"Avoid obstacles and survive as long as possible"})]}),"finished"===e&&g&&(0,t.jsxs)("div",{className:"mt-6 space-y-4",children:[(0,t.jsxs)("div",{className:"text-center py-4",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Game Over"}),(0,t.jsxs)("p",{className:"text-lg text-slate-600",children:["Final Score: ",Math.floor(u)]}),(0,t.jsxs)("p",{className:"text-sm text-slate-500",children:["Time: ",p.toFixed(1),"s"]})]}),(0,t.jsx)("div",{className:"rounded-lg bg-blue-50 border border-blue-200 p-4",children:(0,t.jsx)("p",{className:"text-sm text-blue-900",children:g.summary})})]})]})}e.s(["default",()=>h],773547)},165061,e=>{"use strict";var t=e.i(843476),s=e.i(773547),i=e.i(295922);function a(){return(0,t.jsx)(i.GameErrorBoundary,{gameName:"Grid Racer Time Trial",children:(0,t.jsx)(s.default,{})})}e.s(["default",()=>a])}]);

//# debugId=33779866-4e05-a5dc-62ae-054c61185670
//# sourceMappingURL=9af0742c789258ca.js.map