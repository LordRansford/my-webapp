;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="57249e6f-4bab-335c-ad66-1ab03bf1b1c0")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,51590,e=>{"use strict";let t=new class{storageKey="studio-audit-logs";maxLogs=1e3;log(e,t,s){try{let l={timestamp:Date.now(),action:e,studio:t,metadata:s||{}},i=this.getLogs();i.push(l),i.length>this.maxLogs&&i.splice(0,i.length-this.maxLogs),localStorage.setItem(this.storageKey,JSON.stringify(i))}catch(e){console.warn("Failed to log audit entry:",e)}}getLogs(){try{let e=localStorage.getItem(this.storageKey);if(!e)return[];return JSON.parse(e)}catch(e){return console.warn("Failed to read audit logs:",e),[]}}getLogsForStudio(e){return this.getLogs().filter(t=>t.studio===e)}clearLogs(){localStorage.removeItem(this.storageKey)}exportLogs(){return JSON.stringify(this.getLogs(),null,2)}};e.s(["AuditActions",0,{TOOL_OPENED:"tool_opened",FILE_UPLOADED:"file_uploaded",PROJECT_CREATED:"project_created",PROJECT_DELETED:"project_deleted",DEPLOYMENT_INITIATED:"deployment_initiated",CREDITS_CONSUMED:"credits_consumed",SETTINGS_CHANGED:"settings_changed",ERROR_OCCURRED:"error_occurred",ERROR_BOUNDARY_TRIGGERED:"error_boundary_triggered",ERROR_BOUNDARY_RESET:"error_boundary_reset",PERFORMANCE_ISSUE:"performance_issue",RETRY_ATTEMPTED:"retry_attempted"},"auditLogger",0,t])},290032,e=>{"use strict";e.s(["TEMPLATE_CATEGORIES",0,[{id:"cybersecurity-architecture",title:"Cybersecurity Architecture",description:"Structures for threat modelling, controls, and resilient delivery.",icon:"shield"},{id:"data-architecture-governance",title:"Data Architecture and Governance",description:"Lineage, stewardship, retention, and trustworthy analytics foundations.",icon:"database"},{id:"ai-systems-models",title:"AI Systems and Models",description:"Model lifecycle, guardrails, and responsible deployment patterns.",icon:"spark"},{id:"digital-enterprise-architecture",title:"Digital and Enterprise Architecture",description:"Target states, capability maps, and portfolio roadmapping.",icon:"compass"},{id:"software-api-design",title:"Software and API Design",description:"Service shapes, contracts, and interoperability playbooks.",icon:"layout"},{id:"regulatory-compliance",title:"Regulatory and Compliance",description:"Evidence-led controls, audit readiness, and change governance.",icon:"scale"},{id:"engineering-systems-design",title:"Engineering and Systems Design",description:"Patterns for reliability, observability, and operability at scale.",icon:"circuit"},{id:"strategy-operating-models",title:"Strategy and Operating Models",description:"Decision rights, funding models, and measurable outcomes.",icon:"compass-rose"},{id:"analytics-decision-making",title:"Analytics and Decision Making",description:"Insight workflows, decision registers, and experiment hygiene.",icon:"analytics"}]])},83996,e=>{"use strict";function t(e,s=1e3){if("string"!=typeof e)return"";let l=e.replace(/<[^>]*>/g,"");return(l=(l=l.replace(/[<>\"']/g,"")).trim()).length>s&&(l=l.slice(0,s)),l}function s(e){if(!e||"string"!=typeof e)return"file";let t=e.replace(/[\/\\]/g,"_").replace(/[<>:"|?*]/g,"_").replace(/\.\./g,"_").trim();if((t=t.replace(/^\.+/,"")).length>255){let e=t.split(".").pop(),s=t.slice(0,255-(e?e.length+1:0));t=e?`${s}.${e}`:s}return t||(t="file"),t}function l(e){if("string"!=typeof e)return{valid:!1,data:null,error:"Input must be a string"};try{let s=JSON.parse(e),l=function e(s,l,i){if(l>i)return null;if(null==s)return s;if("object"!=typeof s)return"string"==typeof s?t(s,1e4):s;if(Array.isArray(s))return s.map(t=>e(t,l+1,i));let a={};for(let r in s){if(!Object.prototype.hasOwnProperty.call(s,r))continue;let n=t(r,100);!n||n.startsWith("__proto__")||n.startsWith("constructor")||(a[n]=e(s[r],l+1,i))}return a}(s,0,10);return{valid:!0,data:l}}catch(e){return{valid:!1,data:null,error:"Invalid JSON format"}}}function i(e){return"string"==typeof e&&/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)&&e.length<=254}function a(e,t=["https:","http:"]){if("string"!=typeof e)return{valid:!1,error:"URL must be a string"};try{let s=new URL(e);if(!t.includes(s.protocol))return{valid:!1,error:`Protocol ${s.protocol} is not allowed`};let l=s.hostname.toLowerCase();if("localhost"===l||"127.0.0.1"===l||l.startsWith("192.168.")||l.startsWith("10.")||l.startsWith("172.16.")||l.startsWith("172.17.")||l.startsWith("172.18.")||l.startsWith("172.19.")||l.startsWith("172.20.")||l.startsWith("172.21.")||l.startsWith("172.22.")||l.startsWith("172.23.")||l.startsWith("172.24.")||l.startsWith("172.25.")||l.startsWith("172.26.")||l.startsWith("172.27.")||l.startsWith("172.28.")||l.startsWith("172.29.")||l.startsWith("172.30.")||l.startsWith("172.31."))return{valid:!1,error:"Local and private IP addresses are not allowed"};return{valid:!0,url:s}}catch(e){return{valid:!1,error:"Invalid URL format"}}}function r(e,t,s){if(t.length>0&&!t.includes(e.type))return{valid:!1,error:`File type ${e.type} is not allowed`};let l="."+e.name.split(".").pop()?.toLowerCase();return s.length>0&&!s.includes(l)?{valid:!1,error:`File extension ${l} is not allowed`}:{valid:!0}}e.s(["sanitizeFileName",()=>s,"sanitizeJson",()=>l,"sanitizeText",()=>t,"validateEmail",()=>i,"validateFileType",()=>r,"validateUrl",()=>a])},811269,e=>{"use strict";var t=e.i(843476),s=e.i(271645),l=e.i(522016),i=e.i(618566),a=e.i(868549),r=e.i(290032);function n({id:e,label:l,help:i,example:a,required:r,validationMessage:n,why:o,children:d}){let[c,u]=(0,s.useState)(!1);return(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsxs)("label",{htmlFor:e,className:"flex items-center gap-2 text-sm font-semibold text-slate-900",children:[(0,t.jsx)("span",{children:l}),r?(0,t.jsx)("span",{className:"rounded-full bg-amber-50 px-2 py-0.5 text-[10px] font-semibold text-amber-800",children:"Required"}):null]}),i?(0,t.jsx)("p",{className:"text-xs text-slate-700",children:i}):null,d,a?(0,t.jsxs)("p",{className:"text-xs text-slate-600",children:["Example: ",a]}):null,n?(0,t.jsx)("p",{className:"text-xs font-semibold text-rose-700",children:n}):null,o?(0,t.jsx)("button",{type:"button",onClick:()=>u(e=>!e),className:"text-xs font-semibold text-slate-700 underline decoration-slate-300 underline-offset-4 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-400 focus-visible:ring-offset-2","aria-expanded":c,"aria-controls":`${e}-why`,children:"Why we ask this"}):null,o&&c?(0,t.jsx)("div",{id:`${e}-why`,className:"rounded-lg border border-slate-200 bg-slate-50/80 p-2 text-xs text-slate-700",children:o}):null]})}function o(e){let{id:s,label:l,value:i,onChange:a,help:r,example:o,required:d,validationMessage:c,why:u,placeholder:x,type:m="text"}=e;return(0,t.jsx)(n,{id:s,label:l,help:r,example:o,required:d,validationMessage:c,why:u,children:(0,t.jsx)("input",{id:s,name:s,type:m,className:"w-full rounded-lg border border-slate-200 px-3 py-2 text-sm text-slate-900 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-400",value:i??"",placeholder:x,onChange:e=>a(e.target.value)})})}function d(e){let{id:s,label:l,value:i,onChange:a,help:r,example:o,required:d,validationMessage:c,why:u,placeholder:x,rows:m=3}=e;return(0,t.jsx)(n,{id:s,label:l,help:r,example:o,required:d,validationMessage:c,why:u,children:(0,t.jsx)("textarea",{id:s,name:s,rows:m,className:"w-full rounded-lg border border-slate-200 px-3 py-2 text-sm text-slate-900 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-400",value:i??"",placeholder:x,onChange:e=>a(e.target.value)})})}function c(e){let{id:s,label:l,value:i,onChange:a,help:r,example:o,required:d,validationMessage:c,why:u,options:x}=e;return(0,t.jsx)(n,{id:s,label:l,help:r,example:o,required:d,validationMessage:c,why:u,children:(0,t.jsxs)("select",{id:s,name:s,className:"w-full rounded-lg border border-slate-200 px-3 py-2 text-sm text-slate-900 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-400",value:i??"",onChange:e=>a(e.target.value),children:[(0,t.jsx)("option",{value:"",children:"Select..."}),x.map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},e.value))]})})}function u(e){let{id:s,label:l,value:i,onChange:a,help:r,example:o,required:d,validationMessage:c,why:u,options:x}=e,m=Array.isArray(i)?i:[];return(0,t.jsx)(n,{id:s,label:l,help:r,example:o,required:d,validationMessage:c,why:u,children:(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:x.map(e=>{let s=m.includes(e.value);return(0,t.jsx)("button",{type:"button",onClick:()=>{var t;return t=e.value,void(m.includes(t)?a(m.filter(e=>e!==t)):a([...m,t]))},className:`rounded-full border px-3 py-1 text-xs font-semibold transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-400 focus-visible:ring-offset-2 ${s?"border-slate-900 bg-slate-900 text-white":"border-slate-200 bg-white text-slate-800 hover:bg-slate-50"}`,"aria-pressed":s,children:e.label},e.value)})})})}function x(e){let{id:s,label:l,value:i,onChange:a,help:r,example:o,required:d,validationMessage:c,why:u,placeholder:x,min:m,max:p,step:f}=e;return(0,t.jsx)(n,{id:s,label:l,help:r,example:o,required:d,validationMessage:c,why:u,children:(0,t.jsx)("input",{id:s,name:s,type:"number",min:m,max:p,step:f||1,className:"w-full rounded-lg border border-slate-200 px-3 py-2 text-sm text-slate-900 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-400",value:i??"",placeholder:x,onChange:e=>a(""===e.target.value?"":Number(e.target.value))})})}function m(e){let{id:s,label:l,value:i,onChange:a,help:r,example:o,required:d,validationMessage:c,why:u,min:x=0,max:m=10,step:p=1}=e,f="number"==typeof i?i:Number(i)||0;return(0,t.jsx)(n,{id:s,label:l,help:r,example:o,required:d,validationMessage:c,why:u,children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("input",{id:s,name:s,type:"range",min:x,max:m,step:p,value:f,onChange:e=>a(Number(e.target.value)),className:"flex-1 accent-slate-900"}),(0,t.jsx)("span",{className:"w-10 text-right text-sm font-semibold text-slate-900",children:f})]})})}function p(e){let{id:s,label:l,value:i,onChange:a,help:r,example:o,required:d,validationMessage:c,why:u,onLabel:x="On",offLabel:m="Off"}=e,p=!!i;return(0,t.jsx)(n,{id:s,label:l,help:r,example:o,required:d,validationMessage:c,why:u,children:(0,t.jsxs)("button",{type:"button",onClick:()=>a(!p),className:`inline-flex items-center gap-2 rounded-full border px-3 py-1 text-sm font-semibold transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-400 focus-visible:ring-offset-2 ${p?"border-slate-900 bg-slate-900 text-white":"border-slate-200 bg-white text-slate-800 hover:bg-slate-50"}`,"aria-pressed":p,children:[(0,t.jsx)("span",{"aria-hidden":"true",className:`relative inline-flex h-5 w-9 items-center rounded-full border ${p?"border-emerald-300 bg-emerald-500":"border-slate-300 bg-slate-200"}`,children:(0,t.jsx)("span",{className:`inline-block h-4 w-4 rounded-full bg-white transition ${p?"translate-x-4":"translate-x-0.5"}`})}),p?x:m]})})}function f(e){let{id:s,label:l,value:i,onChange:a,help:r,example:o,required:d,validationMessage:c,why:u}=e;return(0,t.jsx)(n,{id:s,label:l,help:r,example:o,required:d,validationMessage:c,why:u,children:(0,t.jsx)("input",{id:s,name:s,type:"date",className:"w-full rounded-lg border border-slate-200 px-3 py-2 text-sm text-slate-900 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-400",value:i??"",onChange:e=>a(e.target.value)})})}function b(s){let{id:l,label:i,onChange:a,help:r,example:o,required:d,validationMessage:c,why:u,accept:x=".txt,.csv,.json",onSafeParse:m}=s,{sanitizeFileName:p,validateFileType:f}=e.r(83996),{auditLogger:b,AuditActions:h}=e.r(51590),g=x.split(",").map(e=>e.trim().startsWith(".")?e.trim():`.${e.trim()}`);return(0,t.jsxs)(n,{id:l,label:i,help:r,example:o,required:d,validationMessage:c,why:u,children:[(0,t.jsx)("input",{id:l,name:l,type:"file",accept:x,className:"w-full text-sm text-slate-800",onChange:async e=>{let t=e.target.files?.[0];if(!t)return;let s=p(t.name),l=s!==t.name?new File([t],s,{type:t.type}):t;if(l.size>2097152){b.log(h.ERROR_OCCURRED,"template-field",{error:"file_too_large",fileName:s,fileSize:l.size}),a(null);return}let i="."+l.name.split(".").pop()?.toLowerCase();if(!f(l,[],g).valid){b.log(h.ERROR_OCCURRED,"template-field",{error:"invalid_file_type",fileName:s,extension:i}),a(null);return}if([".exe",".bat",".cmd",".com",".pif",".scr",".vbs",".js",".jar"].includes(i)){b.log(h.ERROR_OCCURRED,"template-field",{error:"dangerous_file_type",fileName:s,extension:i}),a(null);return}b.log(h.FILE_UPLOADED,"template-field",{fileName:s,fileSize:l.size});let r=await l.text();a(s),m?.(r)}}),(0,t.jsx)("p",{className:"text-xs text-slate-700",children:"Processed locally in your browser. No uploads are stored."})]})}function h({title:e,value:s,subtitle:l}){return(0,t.jsxs)("div",{className:"rounded-2xl border border-slate-200 bg-white p-4 shadow-sm",children:[(0,t.jsx)("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-600",children:e}),(0,t.jsx)("p",{className:"text-2xl font-semibold text-slate-900",children:s}),l?(0,t.jsx)("p",{className:"text-sm text-slate-700",children:l}):null]})}function g({band:e}){let s="Critical"===e?"bg-rose-100 text-rose-800":"High"===e?"bg-amber-100 text-amber-800":"Moderate"===e?"bg-yellow-100 text-yellow-800":"bg-emerald-100 text-emerald-800";return(0,t.jsxs)("span",{className:`inline-flex items-center gap-2 rounded-full px-3 py-1 text-xs font-semibold ${s}`,children:[(0,t.jsx)("span",{"aria-hidden":"true",className:"h-2 w-2 rounded-full bg-current"}),e||"Not rated"]})}function v({items:e}){return e.length?(0,t.jsxs)("div",{className:"rounded-2xl border border-slate-200 bg-slate-50/70 p-4",children:[(0,t.jsx)("p",{className:"text-sm font-semibold text-slate-900",children:"Assumptions"}),(0,t.jsx)("ul",{className:"mt-2 space-y-1 text-sm text-slate-700",children:e.map(e=>(0,t.jsxs)("li",{className:"flex items-start gap-2",children:[(0,t.jsx)("span",{"aria-hidden":"true",children:"â€¢"}),(0,t.jsx)("span",{children:e})]},e))})]}):null}function y({text:e}){return(0,t.jsxs)("div",{className:"rounded-2xl border border-slate-200 bg-white p-4 shadow-sm",children:[(0,t.jsx)("p",{className:"text-sm font-semibold text-slate-900",children:"Explanation"}),(0,t.jsx)("p",{className:"mt-1 text-sm text-slate-700 leading-relaxed",children:e})]})}function j({steps:e}){return e.length?(0,t.jsxs)("div",{className:"rounded-2xl border border-slate-200 bg-white p-4 shadow-sm",children:[(0,t.jsx)("p",{className:"text-sm font-semibold text-slate-900",children:"Next steps"}),(0,t.jsx)("ol",{className:"mt-2 list-decimal space-y-1 pl-5 text-sm text-slate-700",children:e.map(e=>(0,t.jsx)("li",{children:e},e))})]}):null}let N=function({disabled:e=!0,disabledReason:s="Export unlocked later",summary:l,assumptions:i,references:a,fileBaseName:r}){let n=()=>{};return(0,t.jsxs)("div",{className:"sticky bottom-0 z-10 flex flex-wrap items-center gap-2 rounded-2xl border border-slate-200 bg-white/90 p-3 shadow-sm backdrop-blur",children:[(0,t.jsx)("p",{className:"text-sm font-semibold text-slate-900",children:"Export"}),[{id:"pdf",label:"Export PDF"},{id:"docx",label:"Export DOCX"},{id:"csv",label:"Export CSV"}].map(l=>(0,t.jsx)("button",{type:"button",onClick:n,disabled:e,title:s,className:`rounded-full px-3 py-1 text-xs font-semibold transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-400 focus-visible:ring-offset-2 ${e?"cursor-not-allowed bg-slate-100 text-slate-400":"bg-slate-900 text-white hover:bg-slate-800"}`,children:l.label},l.id)),(0,t.jsx)("button",{type:"button",onClick:()=>navigator.clipboard.writeText(l),className:"rounded-full bg-slate-100 px-3 py-1 text-xs font-semibold text-slate-800 hover:bg-slate-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-400 focus-visible:ring-offset-2",children:"Copy summary"}),(0,t.jsx)("button",{type:"button",onClick:()=>navigator.clipboard.writeText(i.join("\n")),className:"rounded-full bg-slate-100 px-3 py-1 text-xs font-semibold text-slate-800 hover:bg-slate-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-400 focus-visible:ring-offset-2",children:"Copy assumptions"}),a?.length?(0,t.jsx)("button",{type:"button",onClick:()=>navigator.clipboard.writeText(a.join("\n")),className:"rounded-full bg-slate-100 px-3 py-1 text-xs font-semibold text-slate-800 hover:bg-slate-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-400 focus-visible:ring-offset-2",children:"Copy references"}):null,e?(0,t.jsx)("p",{className:"text-xs text-amber-700",children:s}):null]})};var w=e.i(770703);let S=(0,w.default)(()=>e.A(924483),{loadableGenerated:{modules:[283834]},ssr:!1}),E=(0,w.default)(()=>e.A(452735),{loadableGenerated:{modules:[774721]},ssr:!1}),C=(0,w.default)(()=>e.A(146214),{loadableGenerated:{modules:[546351]},ssr:!1});function R({placement:e}){let l=["Very Low","Low","Medium","High","Very High"];return(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("p",{className:"text-sm font-semibold text-slate-900",children:"Risk matrix"}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("div",{className:"grid grid-cols-6 gap-1 min-w-[320px]",children:[(0,t.jsx)("div",{}),l.map(e=>(0,t.jsx)("div",{className:"text-center text-xs font-semibold text-slate-700",children:e},e)),["Very High","High","Medium","Low","Very Low"].map((i,a)=>(0,t.jsxs)(s.default.Fragment,{children:[(0,t.jsx)("div",{className:"text-xs font-semibold text-slate-700",children:i}),l.map((s,l)=>{let r=e&&e.row===a&&e.col===l;return(0,t.jsx)("div",{className:`h-10 rounded ${r?"bg-amber-200 border-2 border-amber-500":"bg-slate-100"} flex items-center justify-center text-sm text-slate-700`,"aria-label":`${i} x ${s}`,children:r?"Current":""},s)})]},i))]})})]})}function k({data:e}){return e?.length?(0,t.jsx)(S,{data:e,dataKey:"name",valueKey:"value"}):null}function _({data:e,xKey:s,yKey:l}){return e?.length?(0,t.jsx)(E,{data:e,xKey:s,yKey:l}):null}function D({data:e,xKey:s,yKeys:l}){return e?.length?(0,t.jsx)(C,{data:e,xKey:s,yKeys:l}):null}let O="cpd-records",T="template-run-user-id";function A({itemId:e,activityType:l,defaultObjectives:i=[],defaultMinutes:a=20,evidenceLinks:r=[],templateVersion:n,category:o}){let[d,c]=(0,s.useState)(i),[u,x]=(0,s.useState)(""),[m,p]=(0,s.useState)(null),f=Math.max(5,Math.round(Number(a)||20)),b=(0,s.useMemo)(()=>f>0&&d.length>0,[f,d]);return(0,t.jsxs)("div",{className:"space-y-3 rounded-2xl border border-slate-200 bg-white/95 p-4 shadow-sm",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-600",children:"CPD evidence"}),(0,t.jsx)("p",{className:"text-sm text-slate-800",children:"Capture objectives, time, and a short reflection."})]}),(0,t.jsx)("span",{className:"rounded-full bg-slate-900 px-3 py-1 text-xs font-semibold text-white",children:"Local only"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-semibold text-slate-900",children:"Learning objectives met"}),(0,t.jsx)("textarea",{className:"w-full rounded-xl border border-slate-200 px-3 py-2 text-sm text-slate-900 shadow-inner focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-500 focus-visible:ring-offset-2",rows:2,value:d.join("\n"),onChange:e=>c(e.target.value.split("\n").filter(Boolean)),placeholder:"List objectives achieved..."})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("label",{className:"text-sm font-semibold text-slate-900",children:"Time spent (minutes)"}),(0,t.jsx)("div",{className:"w-32 rounded-xl border border-slate-200 bg-slate-50 px-3 py-2 text-sm font-semibold text-slate-900",children:f}),(0,t.jsx)("p",{className:"text-xs text-slate-600",children:"This is set by the site. Learners cannot edit time."})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("label",{className:"text-sm font-semibold text-slate-900",children:"Reflection (optional)"}),(0,t.jsx)("textarea",{className:"w-full rounded-xl border border-slate-200 px-3 py-2 text-sm text-slate-900 shadow-inner focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-500 focus-visible:ring-offset-2",rows:3,value:u,onChange:e=>x(e.target.value),placeholder:"What did you learn? How will you apply it?"})]}),(0,t.jsx)("button",{type:"button",onClick:()=>{var t,s;let i,a,c,x;b?(t={itemId:e,activityType:l,learningObjectives:d,timeMinutes:f,reflection:u.trim()||void 0,evidenceLinks:r,templateVersion:n,category:o},(i=window.localStorage.getItem(T))||(i=crypto.randomUUID(),window.localStorage.setItem(T,i)),a=i,c=t.id||`${a}-${crypto.randomUUID()}`,x=t.completedAt||Date.now(),s=[{...t,id:c,userId:a,completedAt:x},...(function(){try{let e=window.localStorage.getItem(O);return e?JSON.parse(e):[]}catch{return[]}})().filter(e=>e.id!==c)],window.localStorage.setItem(O,JSON.stringify(s)),p("Saved to your CPD records locally.")):p("Add at least one objective and minutes.")},className:"inline-flex items-center gap-2 rounded-full bg-slate-900 px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:bg-slate-800 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-slate-700",children:"Save CPD record"}),m&&(0,t.jsx)("p",{className:"text-xs font-semibold text-emerald-700",role:"status","aria-live":"polite",children:m})]})}let L="template-runs",M="template-run-user-id";function I(){let e=window.localStorage.getItem(M);return e||(e=crypto.randomUUID(),window.localStorage.setItem(M,e)),e}function P(){try{let e=window.localStorage.getItem(L);return e?JSON.parse(e):[]}catch{return[]}}function $(e){window.localStorage.setItem(L,JSON.stringify(e))}function W(e){let t=I();return P().filter(s=>s.templateSlug===e&&s.id.startsWith(t))}function U(e){let t=I(),s=e.id||`${t}-${crypto.randomUUID()}`,l=P(),i=Date.now(),a={...e,id:s,createdAt:e.createdAt||i,updatedAt:i},r=l.filter(e=>e.id!==s);return r.unshift(a),$(r),a}function K(e){return void 0!==e.defaultValue?e.defaultValue:"toggle"!==e.type&&("slider"===e.type||"number"===e.type?0:"multiselect"===e.type?[]:"")}let q=Object.fromEntries(a.templateDefinitions.map(e=>[e.slug,e]));function F({slug:e}){let a=q[e],n=(0,i.useRouter)(),[w,S]=(0,s.useState)({}),[E,C]=(0,s.useState)({}),[O,T]=(0,s.useState)(""),[L,M]=(0,s.useState)([]),[I,F]=(0,s.useState)([]),[J,V]=(0,s.useState)([]),[B,G]=(0,s.useState)(),[H,z]=(0,s.useState)(),[Y,X]=(0,s.useState)({}),[Q,Z]=(0,s.useState)(""),[ee,et]=(0,s.useState)(""),[es,el]=(0,s.useState)(""),[ei,ea]=(0,s.useState)([]),[er,en]=(0,s.useState)(null);(0,s.useEffect)(()=>{if(!a)return;ea(W(a.slug));let e={};a.fields.forEach(t=>{e[t.id]=K(t)}),S(e)},[a]);let eo=(0,s.useMemo)(()=>{var e;let t;return e=()=>{let e;if(!a||(e={},a?.fields.forEach(t=>{t.required&&(""===w[t.id]||void 0===w[t.id]||null===w[t.id]||Array.isArray(w[t.id])&&0===w[t.id].length)&&(e[t.id]="Required"),t.validation?.min!==void 0&&"number"==typeof w[t.id]&&w[t.id]<t.validation.min&&(e[t.id]=`Minimum ${t.validation.min}`),t.validation?.max!==void 0&&"number"==typeof w[t.id]&&w[t.id]>t.validation.max&&(e[t.id]=`Maximum ${t.validation.max}`)}),C(e),0!==Object.keys(e).length))return;let t=a.calcFn(w);X(t.scores),z(t.riskBand),T(t.explanation),M(t.assumptions||[]),F(t.nextSteps||[]),V(t.chartData||[]),G(t.matrixPlacement),Z(t.meaning||""),et(t.whyItMatters||""),el(t.whenItBreaks||"");let s=U({templateSlug:a.slug,templateVersion:a.version,inputs:w,outputs:{scores:t.scores,riskBand:t.riskBand,explanation:t.explanation,assumptions:t.assumptions,nextSteps:t.nextSteps,chartData:t.chartData,matrixPlacement:t.matrixPlacement},summary:t.explanation||a.title});ea(e=>{let t=e.filter(e=>e.id!==s.id);return[s,...t]})},()=>{clearTimeout(t),t=setTimeout(e,250)}},[a,w]);if((0,s.useEffect)(()=>{eo()},[w,eo]),!a)return(0,t.jsxs)("div",{className:"mx-auto max-w-3xl px-4 py-10 text-slate-800",children:[(0,t.jsx)("p",{className:"text-lg font-semibold",children:"Template not found."}),(0,t.jsx)("button",{type:"button",onClick:()=>n.push("/templates"),className:"mt-4 rounded-full bg-slate-900 px-4 py-2 text-sm font-semibold text-white",children:"Back to templates"})]});let ed=r.TEMPLATE_CATEGORIES.find(e=>e.id===a.category),ec="number"==typeof Y.risk?Y.risk:0,eu=Math.max(0,Math.min(100,ec*(ec>10?1:10))),ex="Critical"===H?"bg-rose-500":"High"===H?"bg-amber-500":"Moderate"===H?"bg-yellow-500":"bg-emerald-500",em=a.fields.some(e=>e.required&&(""===w[e.id]||void 0===w[e.id]||null===w[e.id]||Array.isArray(w[e.id])&&0===w[e.id].length));return(0,t.jsxs)("div",{className:"page-content mx-auto max-w-6xl space-y-6 px-4 py-8 sm:px-6","data-mode":"preview",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-slate-700",children:[(0,t.jsx)(l.default,{href:"/templates",className:"font-semibold text-slate-900 underline decoration-slate-300 decoration-2 underline-offset-4",children:"Templates"}),(0,t.jsx)("span",{"aria-hidden":"true",children:"/"}),ed?(0,t.jsx)(l.default,{href:`/templates/${ed.id}`,className:"font-semibold text-slate-900 underline decoration-slate-300 decoration-2 underline-offset-4",children:ed.title}):(0,t.jsx)("span",{className:"text-slate-600",children:"Category"}),(0,t.jsx)("span",{"aria-hidden":"true",children:"/"}),(0,t.jsx)("span",{className:"text-slate-500",children:a.title})]}),(0,t.jsxs)("div",{className:"space-y-3 rounded-3xl bg-gradient-to-br from-slate-50 via-sky-50/60 to-slate-50 px-6 py-6 ring-1 ring-slate-100 shadow-[0_18px_45px_rgba(15,23,42,0.06)]",children:[(0,t.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-600",children:"Template runner"}),(0,t.jsx)("h1",{className:"text-3xl font-semibold text-slate-900",children:a.title}),(0,t.jsx)("p",{className:"text-sm text-slate-700",children:a.description}),(0,t.jsxs)("p",{className:"text-xs text-slate-600",children:["Estimated ",a.estimatedMinutes," minutes. Processed locally in your browser."]}),er&&(0,t.jsx)("p",{className:"text-xs font-semibold text-amber-700",children:er})]}),(0,t.jsxs)("div",{className:"inline-flex flex-wrap items-center gap-2",children:[(0,t.jsx)(g,{band:H}),(0,t.jsx)("button",{type:"button",onClick:()=>{if(!window.confirm("Reset all inputs?"))return;let e={};a.fields.forEach(t=>{e[t.id]=K(t)}),S(e),C({}),X({}),z(void 0),M([]),F([]),T(""),V([]),G(void 0)},className:"rounded-full border border-slate-200 px-3 py-1 text-xs font-semibold text-slate-800 hover:bg-slate-50 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-400 focus-visible:ring-offset-2",children:"Reset"})]})]}),(0,t.jsx)("p",{className:"text-xs text-slate-700",children:"Disclaimer: informational only, not legal or professional advice. Results depend on inputs."})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-[1.1fr_0.9fr]",children:[(0,t.jsxs)("div",{className:"space-y-4 rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-sm",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("p",{className:"text-sm font-semibold text-slate-900",children:"Inputs"}),(0,t.jsx)("span",{className:"text-xs text-slate-700",children:"Keyboard and screen reader friendly"})]}),(0,t.jsx)("div",{className:"space-y-4",children:a.fields.map(e=>{let s={id:e.id,label:e.label,help:e.help,example:e.example,required:e.required,validationMessage:E[e.id],why:e.why,value:w[e.id],onChange:t=>{var s;return s=e.id,void S(e=>({...e,[s]:t}))}};return"text"===e.type?(0,t.jsx)(o,{...s,placeholder:e.placeholder},e.id):"textarea"===e.type?(0,t.jsx)(d,{...s,placeholder:e.placeholder,rows:3},e.id):"select"===e.type?(0,t.jsx)(c,{...s,options:e.options||[]},e.id):"multiselect"===e.type?(0,t.jsx)(u,{...s,options:e.options||[]},e.id):"number"===e.type?(0,t.jsx)(x,{...s,min:e.validation?.min,max:e.validation?.max,step:e.step,placeholder:e.placeholder},e.id):"slider"===e.type?(0,t.jsx)(m,{...s,min:e.validation?.min,max:e.validation?.max,step:e.step},e.id):"toggle"===e.type?(0,t.jsx)(p,{...s},e.id):"date"===e.type?(0,t.jsx)(f,{...s},e.id):"file"===e.type?(0,t.jsx)(b,{...s},e.id):null})})]}),(0,t.jsxs)("div",{className:"space-y-3 rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-sm",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("p",{className:"text-sm font-semibold text-slate-900",children:"Results"}),(0,t.jsx)(g,{band:H})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-2",children:[(0,t.jsx)(h,{title:"Primary score",value:Y.risk??"-"}),(0,t.jsx)(h,{title:"Estimated time",value:`${a.estimatedMinutes} mins`})]}),(0,t.jsx)(y,{text:O||"Adjust inputs to see results update live."}),(Q||ee||es)&&(0,t.jsxs)("div",{className:"grid gap-2 sm:grid-cols-3",children:[(0,t.jsxs)("div",{className:"rounded-2xl border border-slate-200 bg-white p-3 text-sm text-slate-800",children:[(0,t.jsx)("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-600",children:"What this means"}),(0,t.jsx)("p",{className:"mt-1",children:Q||"Updates as you change inputs."})]}),(0,t.jsxs)("div",{className:"rounded-2xl border border-slate-200 bg-white p-3 text-sm text-slate-800",children:[(0,t.jsx)("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-600",children:"Why it matters"}),(0,t.jsx)("p",{className:"mt-1",children:ee||"Shows impact of your selections."})]}),(0,t.jsxs)("div",{className:"rounded-2xl border border-slate-200 bg-white p-3 text-sm text-slate-800",children:[(0,t.jsx)("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-600",children:"When this breaks down"}),(0,t.jsx)("p",{className:"mt-1",children:es||"Heuristics only; validate with real data."})]})]}),(0,t.jsx)(v,{items:L}),(0,t.jsx)(j,{steps:I}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-600",children:"Score guide"}),(0,t.jsx)("div",{className:"h-2 w-full overflow-hidden rounded-full bg-slate-100",children:(0,t.jsx)("div",{className:`h-full ${ex}`,style:{width:`${eu}%`}})})]}),(0,t.jsxs)("div",{className:"rounded-2xl border border-slate-200 bg-white p-3 text-sm text-slate-800",children:[(0,t.jsx)("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-600",children:"History"}),0===ei.length?(0,t.jsx)("p",{className:"text-sm text-slate-700",children:"No runs saved yet. Fill inputs to save automatically."}):(0,t.jsx)("ul",{className:"mt-2 space-y-2",children:ei.map(e=>{let s=e.templateVersion&&a.version&&e.templateVersion!==a.version;return(0,t.jsxs)("li",{className:"rounded-xl border border-slate-100 bg-slate-50 p-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,t.jsx)("div",{className:"text-sm font-semibold text-slate-900",children:new Date(e.updatedAt).toLocaleString()}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("button",{type:"button",className:"rounded-full border border-slate-200 px-3 py-1 text-xs font-semibold text-slate-800 hover:bg-slate-100 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-slate-700",onClick:()=>{s?en("This template has been updated since this run."):en(null),S(e.inputs)},children:"Resume"}),(0,t.jsx)("button",{type:"button",className:"rounded-full border border-slate-200 px-3 py-1 text-xs font-semibold text-slate-800 hover:bg-slate-100 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-slate-700",onClick:()=>{var t;let s;t=e.id,((s=P().find(e=>e.id===t))?U({...s,id:void 0,createdAt:void 0}):null)&&ea(W(a.slug))},children:"Duplicate"}),(0,t.jsx)("button",{type:"button",className:"rounded-full border border-rose-200 px-3 py-1 text-xs font-semibold text-rose-800 hover:bg-rose-50 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-rose-700",onClick:()=>{var t;t=e.id,$(P().filter(e=>e.id!==t)),ea(W(a.slug))},children:"Delete"})]})]}),(0,t.jsx)("p",{className:"mt-1 text-xs text-slate-700",children:e.summary}),s?(0,t.jsxs)("p",{className:"text-sm font-semibold text-amber-700",children:["This run used version ",e.templateVersion,". Current version is ",a.version,"."]}):null]},e.id)})})]}),(0,t.jsx)(A,{itemId:a.slug,activityType:"template-submission",defaultObjectives:[a.title],defaultMinutes:2*a.estimatedMinutes,evidenceLinks:[O],templateVersion:a.version,category:a.category}),(0,t.jsx)("div",{className:"space-y-2",children:a.charts.map(e=>"matrix"===e.type?(0,t.jsx)(R,{placement:B},e.id):"radar"===e.type?(0,t.jsx)(k,{data:J},e.id):"bar"===e.type?(0,t.jsx)(D,{data:J,xKey:e.xKey,yKeys:e.yKeys},e.id):"line"===e.type?(0,t.jsx)(_,{data:J,xKey:e.xKey,yKey:e.yKey},e.id):null)})]})]}),(0,t.jsx)(N,{disabled:em||!O,disabledReason:em?"Fill required fields to enable exports.":void 0,summary:O||"No summary yet. Complete required fields first.",assumptions:L,references:I,fileBaseName:a.slug})]})}e.s(["TemplateRunner",()=>F],811269)},924483,e=>{e.v(t=>Promise.all(["static/chunks/3a34dc1f4d730317.js","static/chunks/3baeb8a003b3d228.js","static/chunks/87f195db824b4f56.js","static/chunks/b24e42e041574025.js"].map(t=>e.l(t))).then(()=>t(283834)))},452735,e=>{e.v(t=>Promise.all(["static/chunks/87f195db824b4f56.js","static/chunks/27a7c57cfd911762.js","static/chunks/d38a148c5f1d7a90.js"].map(t=>e.l(t))).then(()=>t(774721)))},146214,e=>{e.v(t=>Promise.all(["static/chunks/87f195db824b4f56.js","static/chunks/27a7c57cfd911762.js","static/chunks/8d561f7a7f8105d8.js"].map(t=>e.l(t))).then(()=>t(546351)))}]);

//# debugId=57249e6f-4bab-335c-ad66-1ab03bf1b1c0
//# sourceMappingURL=15944e267b8c971a.js.map