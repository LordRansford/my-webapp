;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="c1cbcfdc-0bfe-8088-0c07-f834fd9c6716")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,618348,e=>{"use strict";let t=(0,e.i(475254).default)("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);e.s(["HelpCircle",()=>t],618348)},431343,e=>{"use strict";let t=(0,e.i(475254).default)("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);e.s(["Play",()=>t],431343)},495242,e=>{"use strict";let t=(0,e.i(475254).default)("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);e.s(["Pause",()=>t],495242)},37727,e=>{"use strict";let t=(0,e.i(475254).default)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);e.s(["X",()=>t],37727)},643531,e=>{"use strict";let t=(0,e.i(475254).default)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);e.s(["Check",()=>t],643531)},87316,e=>{"use strict";let t=(0,e.i(475254).default)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);e.s(["Calendar",()=>t],87316)},25652,e=>{"use strict";let t=(0,e.i(475254).default)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);e.s(["TrendingUp",()=>t],25652)},270756,e=>{"use strict";let t=(0,e.i(475254).default)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);e.s(["Lock",()=>t],270756)},269638,e=>{"use strict";let t=(0,e.i(475254).default)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["CheckCircle",()=>t],269638)},286536,e=>{"use strict";let t=(0,e.i(475254).default)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Eye",()=>t],286536)},797548,e=>{"use strict";let t=(0,e.i(475254).default)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);e.s(["Filter",()=>t],797548)},555436,e=>{"use strict";let t=(0,e.i(475254).default)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);e.s(["Search",()=>t],555436)},620278,e=>{"use strict";let t=(0,e.i(475254).default)("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);e.s(["Target",()=>t],620278)},503116,e=>{"use strict";let t=(0,e.i(475254).default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);e.s(["Clock",()=>t],503116)},870273,e=>{"use strict";let t=(0,e.i(475254).default)("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);e.s(["Star",()=>t],870273)},962110,e=>{"use strict";var t=e.i(843476),r=e.i(271645),s=e.i(618348),n=e.i(495242),a=e.i(431343),i=e.i(475254);let o=(0,i.default)("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);var l=e.i(694351);let c=(0,i.default)("Keyboard",[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]]),d=(0,i.default)("MousePointer2",[["path",{d:"M4.037 4.688a.495.495 0 0 1 .651-.651l16 6.5a.5.5 0 0 1-.063.947l-6.124 1.58a2 2 0 0 0-1.438 1.435l-1.579 6.126a.5.5 0 0 1-.947.063z",key:"edeuup"}]]);function u({config:e,status:i,onStart:u,onPause:m,onResume:h,onReset:g,onQuit:p,children:f,rightPanel:x,showHelp:y=!1,onToggleHelp:v}){let[b,j]=(0,r.useState)(!1);return(0,t.jsxs)("div",{className:"min-h-screen bg-slate-50",children:[(0,t.jsx)("header",{className:"border-b border-slate-200 bg-white",children:(0,t.jsx)("div",{className:"mx-auto max-w-7xl px-4 py-4 sm:px-6 lg:px-8",children:(0,t.jsxs)("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4 flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,t.jsx)("h1",{className:"text-xl font-semibold text-slate-900 truncate",children:e.title}),(0,t.jsx)("p",{className:"text-sm text-slate-600 hidden sm:block",children:e.description})]}),(0,t.jsx)("div",{className:"flex items-center gap-2 flex-shrink-0",children:(0,t.jsx)("span",{className:`rounded-full px-3 py-1 text-xs font-medium whitespace-nowrap ${"playing"===i?"bg-green-100 text-green-800":"paused"===i?"bg-amber-100 text-amber-800":"finished"===i?"bg-blue-100 text-blue-800":"bg-slate-100 text-slate-800"}`,role:"status","aria-live":"polite","aria-label":`Game status: ${"playing"===i&&!b?"Playing":"paused"===i||b?"Paused":"finished"===i?"Finished":"Ready"}`,children:"playing"!==i||b?"paused"===i||b?"Paused":"finished"===i?"Finished":"Ready":"Playing"})})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[v&&(0,t.jsx)("button",{onClick:v,className:"rounded-lg p-2 text-slate-600 hover:bg-slate-100 hover:text-slate-900 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500","aria-label":"Toggle help",type:"button",children:(0,t.jsx)(s.HelpCircle,{className:"h-5 w-5","aria-hidden":"true"})}),"idle"===i&&u&&(0,t.jsxs)("button",{onClick:u,className:"flex items-center gap-2 rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 transition-colors",type:"button","aria-label":"Start game",children:[(0,t.jsx)(a.Play,{className:"h-4 w-4","aria-hidden":"true"}),"Start"]}),"playing"===i&&!b&&m&&(0,t.jsxs)("button",{onClick:()=>{j(!0),m?.()},className:"flex items-center gap-2 rounded-lg bg-slate-100 px-4 py-2 text-sm font-medium text-slate-700 hover:bg-slate-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 transition-colors",type:"button","aria-label":"Pause game",children:[(0,t.jsx)(n.Pause,{className:"h-4 w-4","aria-hidden":"true"}),"Pause"]}),("paused"===i||b)&&h&&(0,t.jsxs)("button",{onClick:()=>{j(!1),h?.()},className:"flex items-center gap-2 rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 transition-colors",type:"button","aria-label":"Resume game",children:[(0,t.jsx)(a.Play,{className:"h-4 w-4","aria-hidden":"true"}),"Resume"]}),g&&(0,t.jsxs)("button",{onClick:g,className:"flex items-center gap-2 rounded-lg bg-slate-100 px-4 py-2 text-sm font-medium text-slate-700 hover:bg-slate-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 transition-colors",type:"button","aria-label":"Reset game",children:[(0,t.jsx)(o,{className:"h-4 w-4","aria-hidden":"true"}),"Reset"]}),p&&(0,t.jsxs)("button",{onClick:p,className:"flex items-center gap-2 rounded-lg bg-slate-100 px-4 py-2 text-sm font-medium text-slate-700 hover:bg-slate-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 transition-colors",type:"button","aria-label":"Quit game and return to games hub",children:[(0,t.jsx)(l.Home,{className:"h-4 w-4","aria-hidden":"true"}),"Quit"]})]})]})})}),(0,t.jsx)("div",{className:"mx-auto max-w-7xl px-4 py-6 sm:px-6 lg:px-8",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-4",children:[(0,t.jsx)("main",{className:"lg:col-span-3",role:"main","aria-label":"Game area",children:(0,t.jsx)("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",id:"game-main-area",children:f})}),x&&(0,t.jsx)("aside",{className:"lg:col-span-1",role:"complementary","aria-label":"Game information and statistics",children:(0,t.jsx)("div",{className:"rounded-2xl border border-slate-200 bg-white p-4 shadow-sm",id:"game-sidebar",children:x})})]})}),(0,t.jsx)("footer",{className:"border-t border-slate-200 bg-white",role:"contentinfo",children:(0,t.jsx)("div",{className:"mx-auto max-w-7xl px-4 py-3 sm:px-6 lg:px-8",children:(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 sm:gap-4 text-xs text-slate-600",children:[(0,t.jsxs)("div",{className:"flex items-start gap-2 flex-wrap",children:[(0,t.jsx)(c,{className:"h-4 w-4 mt-0.5 flex-shrink-0","aria-hidden":"true"}),(0,t.jsxs)("span",{className:"flex flex-wrap gap-x-1.5 gap-y-1",children:[(0,t.jsx)("kbd",{className:"px-1.5 py-0.5 bg-slate-100 rounded text-xs",children:"Arrow keys"})," to move,"," ",(0,t.jsx)("kbd",{className:"px-1.5 py-0.5 bg-slate-100 rounded text-xs",children:"Space"})," to action,"," ",(0,t.jsx)("kbd",{className:"px-1.5 py-0.5 bg-slate-100 rounded text-xs",children:"P"})," to pause,"," ",(0,t.jsx)("kbd",{className:"px-1.5 py-0.5 bg-slate-100 rounded text-xs",children:"Q"})," to quit"]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(d,{className:"h-4 w-4 flex-shrink-0","aria-hidden":"true"}),(0,t.jsx)("span",{children:"Touch: Swipe to move, Tap to action"})]})]})})})]})}e.s(["default",()=>u],962110)},539115,e=>{"use strict";class t{state;constructor(e){this.state=Math.abs(Math.floor(e))||1}next(){return this.state=(1664525*this.state+0x3c6ef35f)%0x100000000,this.state/0x100000000}nextInt(e,t){return Math.floor(this.next()*(t-e+1))+e}nextFloat(e,t){return e+this.next()*(t-e)}shuffle(e){let t=[...e];for(let e=t.length-1;e>0;e--){let r=Math.floor(this.next()*(e+1));[t[e],t[r]]=[t[r],t[e]]}return t}weightedChoice(e,t){if(e.length!==t.length)throw Error("Items and weights arrays must have same length");let r=t.reduce((e,t)=>e+t,0);if(0===r)throw Error("Total weight must be greater than 0");let s=this.next()*r;for(let r=0;r<e.length;r++)if((s-=t[r])<=0)return e[r];return e[e.length-1]}choice(e){if(0===e.length)throw Error("Cannot choose from empty array");return e[this.nextInt(0,e.length-1)]}sample(e,t){if(t>e.length)throw Error("Sample size cannot be larger than array length");let r=new Set,s=[];for(;r.size<t;){let t=this.nextInt(0,e.length-1);r.has(t)||(r.add(t),s.push(e[t]))}return s}getState(){return this.state}setState(e){this.state=Math.abs(Math.floor(e))||1}clone(){return new t(this.state)}}function r(){let e=new Date,t=e.getUTCFullYear(),r=String(e.getUTCMonth()+1).padStart(2,"0"),s=String(e.getUTCDate()).padStart(2,"0"),n=`${t}-${r}-${s}`,a=0x811c9dc5;for(let e=0;e<n.length;e++)a^=n.charCodeAt(e),a+=(a<<1)+(a<<4)+(a<<7)+(a<<8)+(a<<24);return Math.abs(a>>>0)}function s(e){let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t&=t;return Math.abs(t)}e.s(["SeededRNG",()=>t,"getDailySeed",()=>r,"hashString",()=>s])},553969,e=>{"use strict";let t="ransford-daily-challenges";function r(){try{let e=localStorage.getItem(t);if(e)return JSON.parse(e)}catch(e){console.error("Error loading daily challenges:",e)}return{challenges:{},lastUpdated:Date.now()}}function s(e){try{e.lastUpdated=Date.now(),localStorage.setItem(t,JSON.stringify(e))}catch(e){console.error("Error saving daily challenges:",e)}}function n(e,t){let s=r(),n=`${e}-${t}`;return s.challenges[n]||null}function a(e){var t,n;let a=r(),i=(t=e.gameId,n=e.date,`${t}-${n}`);a.challenges[i]=e,s(a)}e.s(["getDailyChallenge",()=>n,"loadDailyChallenges",()=>r,"saveDailyChallenges",()=>s,"setDailyChallenge",()=>a])},980188,e=>{"use strict";var t=e.i(539115);let r={"daily-logic-gauntlet":"DLG","constraint-optimizer":"COPT","pattern-architect":"PATT","deduction-grid":"DEDU","flow-planner":"FLOW","memory-palace":"MEMO"},s={DLG:"daily-logic-gauntlet",COPT:"constraint-optimizer",PATT:"pattern-architect",DEDU:"deduction-grid",FLOW:"flow-planner",MEMO:"memory-palace",ALOC:"allocation-architect"};function n(e,s,n){let a=r[e];if(!a)throw Error(`Unknown game: ${e}`);let i=(0,t.hashString)(`challenge-${n}`).toString(36).slice(0,4).toUpperCase().padStart(4,"0");return{code:`${a}-${s}-${i}`,gameId:a,date:s,seed:n,hash:i}}function a(e,t){let r,s,a,i;return n(e,(s=(r=new Date).getUTCFullYear(),a=String(r.getUTCMonth()+1).padStart(2,"0"),i=String(r.getUTCDate()).padStart(2,"0"),`${s}-${a}-${i}`),t)}function i(e){return s[e]}function o(e){return r[e]||null}e.s(["generateChallengeCode",()=>n,"generateTodayChallengeCode",()=>a,"getGameId",()=>o,"getGameSlug",()=>i])},508592,e=>{"use strict";var t=e.i(539115);let r=/^([A-Z]{4})-(\d{4}-\d{2}-\d{2})-([A-Z0-9]{4})$/;function s(e){let s=e.match(r);if(!s)return{success:!1,error:`Invalid code format. Expected: GAME-YYYY-MM-DD-XXXX, got: ${e}`};let[,n,a,i]=s;if(!["DLG","COPT","PATT","DEDU","FLOW","MEMO"].includes(n))return{success:!1,error:`Unknown game ID: ${n}`};if(!a.match(/^(\d{4})-(\d{2})-(\d{2})$/))return{success:!1,error:`Invalid date format: ${a}`};let o=(0,t.hashString)(e);return{success:!0,code:{code:e,gameId:n,date:a,seed:o,hash:i}}}function n(e){return s(e).success}e.s(["parseChallengeCode",()=>s,"validateChallengeCode",()=>n])},98572,e=>{"use strict";let t=[{id:"first-game",name:"First Game",description:"Complete your first game",category:"progress",rarity:"common",icon:"ðŸŽ®",checkCondition:e=>(e.gamesCompleted||0)>=1},{id:"streak-3",name:"Getting Started",description:"Maintain a 3-day streak",category:"streak",rarity:"common",icon:"ðŸ”¥",checkCondition:e=>(e.currentStreak||0)>=3},{id:"streak-7",name:"Week Warrior",description:"Maintain a 7-day streak",category:"streak",rarity:"uncommon",icon:"ðŸ’ª",checkCondition:e=>(e.currentStreak||0)>=7},{id:"streak-30",name:"Monthly Master",description:"Maintain a 30-day streak",category:"streak",rarity:"rare",icon:"ðŸ‘‘",checkCondition:e=>(e.currentStreak||0)>=30},{id:"games-10",name:"Dedicated Player",description:"Complete 10 games",category:"milestone",rarity:"common",icon:"ðŸŽ¯",progressCondition:e=>Math.min(1,(e.gamesCompleted||0)/10),checkCondition:e=>(e.gamesCompleted||0)>=10},{id:"games-100",name:"Centurion",description:"Complete 100 games",category:"milestone",rarity:"epic",icon:"ðŸ†",progressCondition:e=>Math.min(1,(e.gamesCompleted||0)/100),checkCondition:e=>(e.gamesCompleted||0)>=100}];function r(){return t}function s(e){return t.find(t=>t.id===e)}function n(e){return t.filter(t=>t.gameId===e||!t.gameId&&null===e)}function a(){return t.filter(e=>!e.gameId)}e.s(["CROSS_GAME_ACHIEVEMENTS",0,t,"getAchievementDefinition",()=>s,"getAchievementsByGame",()=>n,"getAllAchievementDefinitions",()=>r,"getCrossGameAchievements",()=>a])},444499,e=>{"use strict";let t="ransford-achievements";function r(){try{let e=localStorage.getItem(t);if(e){let t=JSON.parse(e);if(1!==t.version)return n();return t.unlocked=t.unlocked||[],t.progress=t.progress||{},t}}catch(e){console.error("Error loading achievements:",e)}return n()}function s(e){try{e.version=1,localStorage.setItem(t,JSON.stringify(e))}catch(e){console.error("Error saving achievements:",e)}}function n(){return{unlocked:[],progress:{},version:1}}function a(e,t){return t.unlocked.some(t=>t.achievementId===e)}function i(e,t,n){let i=n||r();return a(e,i)||(i.unlocked.push({achievementId:e,unlockedAt:Date.now(),gameId:t}),s(i)),i}function o(e,t,n){let a=n||r();return a.progress[e]=Math.max(0,Math.min(1,t)),s(a),a}function l(e,t){return t.progress[e]||0}function c(e,t){return t.unlocked.find(t=>t.achievementId===e)}function d(){localStorage.removeItem(t)}e.s(["clearAchievementStorage",()=>d,"createDefaultStorage",()=>n,"getAchievementProgress",()=>l,"getAchievementUnlock",()=>c,"isAchievementUnlocked",()=>a,"loadAchievementStorage",()=>r,"saveAchievementStorage",()=>s,"unlockAchievement",()=>i,"updateAchievementProgress",()=>o])},836494,266369,239403,250310,382228,538057,1062,282283,702559,686551,603473,910595,e=>{"use strict";var t=e.i(539115);function r(){let e=new Date,t=e.getUTCFullYear(),r=String(e.getUTCMonth()+1).padStart(2,"0"),s=String(e.getUTCDate()).padStart(2,"0");return`${t}-${r}-${s}`}function s(e,r){return((0,t.getDailySeed)()^(0,t.hashString)(e))>>>0}var n=e.i(553969);function a(e){let t=r(),a=(0,n.getDailyChallenge)(e,t);if(a)return a;let i=s(e,t),o={gameId:e,date:t,seed:i,completed:!1};return(0,n.setDailyChallenge)(o),o}function i(e,t){let a=r(),i=(0,n.getDailyChallenge)(e,a);if(!i){let r=s(e,a),i={gameId:e,date:a,seed:r,completed:!0,score:t.score,time:t.time,scoreValue:t.scoreValue,completedAt:Date.now()};(0,n.setDailyChallenge)(i);return}i.completed=!0,i.score=t.score,i.time=t.time,i.scoreValue=t.scoreValue,i.completedAt=Date.now(),(0,n.setDailyChallenge)(i)}e.s(["completeTodayChallenge",()=>i,"getOrGenerateTodayChallenge",()=>a],266369),e.s([],836494);var o=e.i(980188);e.i(508592);let l="ransford-challenge-codes";function c(e){var t,r={code:e.code,gameId:e.gameId,date:e.date,seed:e.seed};try{let e=(t=r.code,`${l}-${t}`);localStorage.setItem(e,JSON.stringify(r))}catch(e){console.error("Error storing challenge code:",e)}}function d(e){try{let t=`${l}-${e}`,r=localStorage.getItem(t);if(!r)return null;return JSON.parse(r)}catch(e){return console.error("Error retrieving challenge code:",e),null}}function u(){let e=[];try{for(let t=0;t<localStorage.length;t++){let r=localStorage.key(t);if(r?.startsWith(l)){let t=localStorage.getItem(r);if(t)try{e.push(JSON.parse(t))}catch(e){}}}}catch(e){console.error("Error retrieving all challenge codes:",e)}return e}function m(t){let r=d(t);if(!r){let{parseChallengeCode:r}=e.r(508592),s=r(t);if(!s.success||!s.code)return null;let n=(0,o.getGameSlug)(s.code.gameId),{getDailyChallenge:a}=e.r(553969),i=a(n,s.code.date);return i?{code:s.code,seed:i.seed,gameSlug:n}:{code:s.code,seed:s.code.seed,gameSlug:n}}let s=(0,o.getGameSlug)(r.gameId);return{code:{code:r.code,gameId:r.gameId,date:r.date,seed:r.seed,hash:r.code.split("-")[2]||""},seed:r.seed,gameSlug:s}}function h(){let e=new Date,t=e.getUTCFullYear(),r=String(e.getUTCMonth()+1).padStart(2,"0");return`${t}-${r}`}e.s(["getAllChallengeCodes",()=>u,"getChallengeCode",()=>d,"storeChallengeCode",()=>c],239403),e.s(["loadChallengeFromCode",()=>m],250310),e.s([],382228);let g="ransford-streaks";function p(){try{let e=localStorage.getItem(g);if(e)return JSON.parse(e)}catch(e){console.error("Error loading streaks:",e)}return{streaks:{},lastUpdated:Date.now()}}function f(e){return p().streaks[e]||null}function x(e,t){let r=p();r.streaks[e]=t;try{r.lastUpdated=Date.now(),localStorage.setItem(g,JSON.stringify(r))}catch(e){console.error("Error saving streaks:",e)}}function y(e){return f(e)||{gameId:e,currentStreak:0,longestStreak:0,lastPlayDate:null,streakFreezesUsed:0,lastFreezeReset:new Date().toISOString().slice(0,7)}}function v(e,t){return function(e,t){let r,s,n,a,i=(s=(r=new Date).getUTCFullYear(),n=String(r.getUTCMonth()+1).padStart(2,"0"),a=String(r.getUTCDate()).padStart(2,"0"),`${s}-${n}-${a}`),o=h(),l=f(e);if(l||(l={gameId:e,currentStreak:0,longestStreak:0,lastPlayDate:null,streakFreezesUsed:0,lastFreezeReset:h()}),l.lastFreezeReset!==o&&(l.streakFreezesUsed=0,l.lastFreezeReset=o),!t)return x(e,l),l;if(l.lastPlayDate)if(l.lastPlayDate===i);else{let e=function(e){let t=new Date;t.setUTCHours(0,0,0,0);let[r,s,n]=e.split("-").map(Number),a=new Date(Date.UTC(r,s-1,n));return Math.floor((t.getTime()-a.getTime())/864e5)}(l.lastPlayDate);1===e?(l.currentStreak+=1,l.lastPlayDate=i):0===e||(l.currentStreak=1,l.lastPlayDate=i)}else l.currentStreak=1,l.lastPlayDate=i;return l.currentStreak>l.longestStreak&&(l.longestStreak=l.currentStreak),x(e,l),l}(e,t)}e.s(["getStreakDataForGame",()=>y,"updateStreakForGame",()=>v],538057),e.s([],1062);var b=e.i(98572),j=e.i(444499);function k(e){let t=(0,j.loadAchievementStorage)(),r=(0,b.getAllAchievementDefinitions)(),s=[],n={},a=t;for(let t of r)if((!t.gameId||t.gameId===e.gameId)&&!(0,j.isAchievementUnlocked)(t.id,a)){if(t.progressCondition){let r=t.progressCondition(e);n[t.id]=r,a=(0,j.updateAchievementProgress)(t.id,r,a)}t.checkCondition&&t.checkCondition(e)&&(a=(0,j.unlockAchievement)(t.id,e.gameId,a),s.push(t.id))}return{newlyUnlocked:s,updatedProgress:n}}function C(e){let t=e.replace(/[^A-Z0-9-]/gi,"-");return`ransford-scores-${t}`}function S(e,t){try{let r=C(e),s=w(e);s.push(t),s.length>100&&s.shift(),localStorage.setItem(r,JSON.stringify(s))}catch(e){console.error("Error storing score:",e)}}function w(e){try{let t=C(e),r=localStorage.getItem(t);if(!r)return[];return JSON.parse(r)}catch(e){return console.error("Error retrieving scores:",e),[]}}function N(e,t,r){var s;if(0===r.length)return{averageScore:t.score,percentile:50,participantCount:1,playerScore:t.score,playerRank:1};let n=r.map(e=>e.score),a=[...n].sort((e,t)=>t-e),i=n.reduce((e,t)=>e+t,0)/n.length,o=(s=t.score,0===n.length?50:[...n].sort((e,t)=>e-t).filter(e=>e<=s).length/n.length*100),l=a.findIndex(e=>e<=t.score)+1;return 0===l&&(l=a.length),{averageScore:i,percentile:o,participantCount:r.length,playerScore:t.score,playerRank:l}}function M(e,t){S(e,t);let r=w(e);return N(e,t,r)}function P(e,t){let r=w(e);return 0===r.length?null:t?N(e,t,r):N(e,r[r.length-1],r)}e.s(["checkAndUnlockAchievements",()=>k],282283),e.s([],702559),e.s(["getScores",()=>w,"storeScore",()=>S],686551),e.s(["getScoreComparison",()=>P,"submitScore",()=>M],603473),e.s([],910595)},761911,e=>{"use strict";let t=(0,e.i(475254).default)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);e.s(["Users",()=>t],761911)},662031,e=>{"use strict";let t=(0,e.i(475254).default)("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);e.s(["Share2",()=>t],662031)},587857,114325,335100,e=>{"use strict";var t=e.i(539115);function r(e){let r,s,n,a=new t.SeededRNG(e.seed+1e3),i=a.next();i<.7?(r="standard",s=1,n="Standard completion reward"):i<.9?(r="bonus",s=1.2+.3*a.next(),n="Bonus reward! Great performance!"):i<.98?(r="rare",s=1.5+.5*a.next(),n="Rare reward! Exceptional performance!"):(r="legendary",s=2+ +a.next(),n="Legendary reward! Outstanding achievement!");let o=1;e.streak>=7&&(o=1+(Math.min(e.streak,30)-7)*.01);let l=e.baseXP*(s-1),c=Math.round(e.baseXP*s*o),d=[];return"rare"===r&&.15>a.next()&&d.push("scenario-variant"),"legendary"===r&&.5>a.next()&&(d.push("exclusive-scenario"),.3>a.next()&&d.push("special-modifier")),{totalXP:c,baseXP:e.baseXP,bonusXP:Math.round(l),bonusMultiplier:s*o,rewardType:r,rewardDescription:n,unlocks:d.length>0?d:void 0}}function s(e){let{win:t,score:r,efficiency:s=100,time:n,difficulty:a,tier:i}=e;return Math.round(((t?50:10)+(t?.5*r:.2*r)+.3*s+(n?Math.max(0,20-n/1e3/60):0))*(({foundations:1,novice:1,intermediate:1.2,optimizer:1.2,tactician:1.2,advanced:1.5,solver:1.5,expert:2,"master-optimizer":2,"allocation-expert":2,"constraint-master":2.5,"allocation-master":2.5})[a]||1)*(({planner:1,novice:1,strategist:1.2,optimizer:1.2,architect:1.5,solver:1.5,master:2,"master-optimizer":2,legend:2.5,"constraint-master":2.5})[i]||1))}function n(e){return{gameId:e.gameId,seed:e.seed,baseXP:e.baseXP,performance:e.performance,streak:e.streak,tier:e.tier}}e.s(["generateRewardResult",()=>r],114325),e.s(["calculateBaseXP",()=>s,"createRewardContext",()=>n],335100),e.s([],587857)},62038,e=>{"use strict";var t=e.i(843476),r=e.i(271645),s=e.i(962110),n=e.i(539115);function a(e){var t,r;let s,n=function(e){if(0===e.totalBudgetUsed)return 100;let t=e.projects.reduce((t,r)=>{let s=r.currentProgress,n=e.allocationHistory.filter(e=>e.projectId===r.id).reduce((e,t)=>e+t.resources,0);return 0===n?t:t+s/r.requiredResources/(n/r.requiredResources)},0);return Math.min(100,Math.max(0,100*(e.projects.length>0?t/e.projects.length:0)))}(e),a=function(e){if(0===e.objectives.length)return 100;let t=e.objectives.reduce((e,t)=>e+Math.min(100,t.current/t.target*100)*t.weight,0),r=e.objectives.reduce((e,t)=>e+t.weight,0);return r>0?t/r:0}(e),i=0===(t=e).constraints.length?100:t.constraints.filter(e=>!e.violated).length/t.constraints.length*100;return{resourceEfficiency:n,objectiveProgress:a,constraintCompliance:i,riskLevel:Math.min(100,Math.max(0,s=0+(r=e).projects.reduce((e,t)=>e+(.5*((100-t.health)/100)+.5*t.riskLevel),0)/r.projects.length*50+r.constraints.reduce((e,t)=>e+Math.min(1,t.current/t.limit),0)/r.constraints.length*30+Math.min(20,5*r.events.filter(e=>e.round>r.currentRound).length))),waste:function(e){let t=0;for(let r of e.projects){let s=e.allocationHistory.filter(e=>e.projectId===r.id).reduce((e,t)=>e+t.resources,0);r.currentProgress>=100?t+=Math.max(0,s-r.requiredResources):1-r.currentProgress/100*r.diminishingReturns<.1&&(t+=.2*s)}return t}(e)}}function i(e,t){let r=e.projects.map(e=>{var r,s;let n=t.find(t=>t.projectId===e.id);if(!n||0===n.resources)return{...e};let a=(r=e,s=n.resources,r.progressPerResource*s*(1-r.currentProgress/100*r.diminishingReturns)),i=Math.min(100,e.currentProgress+a);return{...e,currentProgress:i}});return{...e,projects:r}}function o(e){return e.objectives.every(e=>e.met)}function l(e){return e.objectives.filter(e=>!e.met)}function c(e){return e.constraints.some(e=>e.violated)}let d="allocation-architect-progress";function u(){return function(){try{let e=localStorage.getItem(d);if(!e)return null;let t=JSON.parse(e);if(1!==t.version)return{...t,version:1};return t}catch(e){return console.error("Error loading progress:",e),null}}()||{version:1,xp:0,currentTier:"planner",tierProgress:0,unlockedScenarios:["budget-optimization"],unlockedHorizons:[6],unlockedConstraints:["budget"],personalBests:{},currentStreak:0,longestStreak:0,lastPlayedDate:"",completedChallenges:[],stats:{scenariosCompleted:0,averageEfficiency:0,averageScore:0,constraintViolations:0,eventResilience:0,scenarioTypeStats:{}}}}e.i(836494);var m=e.i(266369);e.i(382228);var h=e.i(980188),g=e.i(239403);e.i(1062);var p=e.i(538057);e.i(702559);var f=e.i(282283);e.i(910595);var x=e.i(603473);e.i(709017);var y=e.i(972081),v=e.i(134485),b=e.i(476518),j=e.i(7605);e.i(587857);var k=e.i(335100),C=e.i(114325);let S={id:"allocation-architect",title:"Allocation Architect",description:"Build optimal resource allocation plans under constraints",category:"strategy",modes:["solo","daily"],supportsMultiplayer:!1,minPlayers:1,maxPlayers:1,estimatedMinutes:12,tutorialAvailable:!0},w="allocation-architect";function N(){let[e,N]=(0,r.useState)("idle"),[M,P]=(0,r.useState)(null),[R,$]=(0,r.useState)({}),[D,T]=(0,r.useState)(null),[E,I]=(0,r.useState)(null),[A,U]=(0,r.useState)(null),[F,O]=(0,r.useState)([]),[B,z]=(0,r.useState)(null),[q,L]=(0,r.useState)(null),[G,H]=(0,r.useState)(null);(0,r.useEffect)(()=>{"idle"!==e||M||X()},[e,M]);let X=(0,r.useCallback)(()=>{try{var e,t;let r=(0,m.getOrGenerateTodayChallenge)(w),s=(e=function(e,t,r,s=8){var a,i,o,l,c;let d=new n.SeededRNG(e),u=(a=r,({foundations:{projectCount:4,objectiveCount:1,constraintCount:1,initialBudget:100,budgetPerRound:50,eventFrequency:.1,constraintTightness:.7,diminishingReturns:.2},intermediate:{projectCount:6,objectiveCount:2,constraintCount:2,initialBudget:80,budgetPerRound:40,eventFrequency:.2,constraintTightness:.8,diminishingReturns:.4},advanced:{projectCount:8,objectiveCount:3,constraintCount:3,initialBudget:70,budgetPerRound:35,eventFrequency:.3,constraintTightness:.9,diminishingReturns:.6},expert:{projectCount:10,objectiveCount:4,constraintCount:4,initialBudget:60,budgetPerRound:30,eventFrequency:.4,constraintTightness:.95,diminishingReturns:.8}})[a]),m=function(e,t,r){let s=[],n=["Alpha","Beta","Gamma","Delta","Epsilon","Zeta","Eta","Theta","Iota","Kappa"];for(let a=0;a<e;a++){let i=r.nextInt(30,80),o=r.nextFloat(.5,2),l=t.diminishingReturns*r.nextFloat(.8,1.2),c=r.nextInt(1,10),d=r.nextFloat(.1,.5),u=[];a>0&&.3>r.next()&&u.push(s[r.nextInt(0,a-1)].id);let m=[];a<e-1&&.3>r.next()&&m.push(`project-${a+1}`),s.push({id:`project-${a}`,name:n[a]||`Project ${a+1}`,description:`Project ${a+1} requires ${i} resources to complete`,requiredResources:i,currentProgress:0,progressPerResource:o,diminishingReturns:l,dependencies:u,unlocks:m,priority:c,riskLevel:d,health:0})}return s}(u.projectCount,u,d),h=function(e,t,r,s){let n=[],a=["complete-projects","maintain-efficiency","meet-constraints","minimize-risk"];for(let r=0;r<e;r++){let e=a[r%a.length],i=0,o="",l="";switch(e){case"complete-projects":i=Math.ceil(t.length*(.5+.3*s.next())),o="Complete Projects",l=`Complete at least ${i} projects`;break;case"maintain-efficiency":i=Math.round(70+20*s.next()),o="Maintain Efficiency",l=`Maintain resource efficiency above ${i}%`;break;case"meet-constraints":i=100,o="Meet All Constraints",l="Meet all constraints throughout the planning horizon";break;case"minimize-risk":i=Math.round(20+30*s.next()),o="Minimize Risk",l=`Keep risk level below ${i}%`}n.push({id:`objective-${r}`,name:o,description:l,type:e,target:i,current:0,weight:s.nextInt(1,10),met:!1})}return n}(u.objectiveCount,m,0,d),g=function(e,t,r){let s=[],n=["budget","time","capacity","resource"];for(let a=0;a<e;a++){let e=n[a%n.length],i=t.initialBudget+8*t.budgetPerRound,o=Math.round(i*t.constraintTightness*r.nextFloat(.9,1.1));s.push({id:`constraint-${a}`,type:e,name:`${e.charAt(0).toUpperCase()+e.slice(1)} Constraint`,description:`Total ${e} usage must not exceed ${o}`,limit:o,current:0,warningThreshold:.8,violated:!1})}return s}(u.constraintCount,u,d),p=function(e,t,r){let s=[];for(let n=2;n<=e;n++)if(r.next()<t.eventFrequency){let e=["budget-shock","requirement-change","resource-availability","external-pressure"],a=r.choice(e);s.push({id:`event-${n}`,type:a,name:{"budget-shock":"Budget Reduction","requirement-change":"Requirement Change","resource-availability":"Resource Availability","external-pressure":"External Pressure"}[a],description:{"budget-shock":"Unexpected budget reduction affects available resources","requirement-change":"Project requirements have changed","resource-availability":"Resource availability has changed","external-pressure":"External pressure affects project priorities"}[a],round:n,severity:r.nextFloat(.3,.8),affectedProjects:[],effect:function(e,t,r){switch(e){case"budget-shock":return{resourceChange:-Math.round(t.budgetPerRound*r.nextFloat(.2,.5))};case"requirement-change":return{requirementChange:r.nextFloat(.1,.3)};case"resource-availability":return{resourceChange:Math.round(t.budgetPerRound*r.nextFloat(-.3,.3))};case"external-pressure":return{progressLoss:r.nextFloat(5,15)};default:return{}}}(a,t,r)})}return s}(s,u,d);return{id:`scenario-${e}`,name:(i=t,o=r,`${({"budget-optimization":"Budget Optimization","time-management":"Time Management","capacity-planning":"Capacity Planning","multi-objective":"Multi-Objective Planning"})[i]} - ${o.charAt(0).toUpperCase()+o.slice(1)}`),description:(l=t,c=r,`A ${c} scenario focusing on ${l.replace("-"," ")}. Allocate resources strategically to meet objectives while managing constraints.`),type:t,difficulty:r,totalRounds:s,initialBudget:u.initialBudget,budgetPerRound:u.budgetPerRound,projects:m,objectives:h,constraints:g,events:p}}(r.seed,"budget-optimization","intermediate",8),t=r.seed,{scenario:e,currentRound:0,totalRounds:e.totalRounds,resourceBudget:e.initialBudget+e.budgetPerRound,totalBudgetUsed:0,projects:e.projects.map(e=>({...e})),objectives:e.objectives.map(e=>({...e})),constraints:e.constraints.map(e=>({...e})),events:[...e.events],allocationHistory:[],roundHistory:[],metrics:{resourceEfficiency:0,objectiveProgress:0,constraintCompliance:100,riskLevel:0,waste:0},seed:t,status:"idle"});P(s),$({}),T(null),I(null),U(null),O([]),z(null),L(null)}catch(e){console.error("Error initializing challenge:",e)}},[]),J=(0,r.useCallback)(()=>{M?(P({...M,status:"playing",currentRound:1}),N("playing"),H(Date.now())):X()},[M,X]),V=(0,r.useCallback)((t,r)=>{let s,n,o;if("playing"!==e||!M)return;$(e=>({...e,[t]:Math.max(0,r)}));let l=Object.entries({...R,[t]:r}).filter(([e,t])=>t>0).map(([e,t])=>({projectId:e,resources:t}));T((s=i(M,l),n=a({...s,projects:s.projects.map(e=>{let t=l.find(t=>t.projectId===e.id);if(!t)return e;let r=e.progressPerResource*t.resources,s=1-e.currentProgress/100*e.diminishingReturns,n=Math.min(100,e.currentProgress+r*s);return{...e,currentProgress:n}}),allocationHistory:[...s.allocationHistory,...l],totalBudgetUsed:s.totalBudgetUsed+l.reduce((e,t)=>e+t.resources,0)}),o=[],l.reduce((e,t)=>e+t.resources,0)>M.resourceBudget&&o.push("Allocation exceeds budget"),s.constraints.forEach(e=>{e.current>e.limit?o.push(`${e.name} will be violated`):e.current>e.limit*e.warningThreshold&&o.push(`${e.name} is approaching limit`)}),{projects:s.projects,objectives:s.objectives,constraints:s.constraints,metrics:n,warnings:o}))},[e,M,R]),Y=(0,r.useCallback)(()=>{if(!M||"playing"!==e)return;let t=Object.entries(R).filter(([e,t])=>t>0).map(([e,t])=>({projectId:e,resources:t})),r=function(e,t){let r=[],s=[],n=t.reduce((e,t)=>e+t.resources,0);for(let s of(n>e.resourceBudget&&r.push(`Total allocation (${n}) exceeds available budget (${e.resourceBudget})`),t))s.resources<0&&r.push(`Allocation for ${s.projectId} cannot be negative`);for(let n of t){let t=e.projects.find(e=>e.id===n.projectId);if(t)for(let r of t.dependencies){let t=e.projects.find(e=>e.id===r);t&&t.currentProgress<100&&s.push(`Project ${n.projectId} depends on ${r} which is not complete`)}else r.push(`Project ${n.projectId} not found`)}return n<.5*e.resourceBudget&&s.push("Less than 50% of budget is allocated"),{valid:0===r.length,errors:r,warnings:s}}(M,t);if(!r.valid)return void alert(r.errors.join("\n"));let s=function(e,t){var r,s,n;let o,l,c,d,u;if("playing"!==e.status)return e;let m=t.reduce((e,t)=>e+t.resources,0);if(m>e.resourceBudget)return e;let h=i(e,t),g=h.events.filter(e=>e.round===h.currentRound);g.length>0&&(h=function(e,t){let r={...e};for(let e of t)r=function(e,t){let r=e.projects.map(e=>{if(!(t.affectedProjects.includes(e.id)||0===t.affectedProjects.length))return{...e};let r={...e};if(t.effect.resourceChange){let e=t.effect.resourceChange*t.severity;r.requiredResources=Math.max(10,r.requiredResources+e)}if(t.effect.requirementChange){let e=t.effect.requirementChange*t.severity,s=r.requiredResources*(1+e);r.requiredResources=Math.max(10,s)}if(t.effect.progressLoss){let e=t.effect.progressLoss*t.severity;r.health>0?r.health=Math.max(0,r.health-e):r.currentProgress=Math.max(0,r.currentProgress-e)}return r}),s=e.resourceBudget;return t.effect.resourceChange&&0===t.affectedProjects.length&&(s=Math.max(0,s+t.effect.resourceChange*t.severity)),{...e,projects:r,resourceBudget:s}}(r,e);return r}(h,g)),o=a(r=h),l=r.objectives.map(e=>{let t=function(e,t,r){switch(t.type){case"complete-projects":return e.projects.filter(e=>e.currentProgress>=100).length;case"maintain-efficiency":return r.resourceEfficiency;case"meet-constraints":let s=e.constraints.filter(e=>!e.violated).length;return e.constraints.length>0?s/e.constraints.length*100:100;case"minimize-risk":return r.riskLevel;default:return 0}}(r,e,o),s=t>=e.target;return{...e,current:t,met:s}}),c=(s=h={...r,objectives:l}).constraints.map(e=>{let t=function(e,t){switch(t.type){case"budget":case"resource":return e.totalBudgetUsed;case"time":return e.currentRound;case"capacity":return e.allocationHistory.reduce((e,t)=>e+t.resources,0);case"dependency":return e.projects.filter(t=>t.dependencies.some(t=>{let r=e.projects.find(e=>e.id===t);return!r||r.currentProgress<100})).length;default:return 0}}(s,e),r=t>e.limit;return{...e,current:t,violated:r}}),(h={...s,constraints:c}).metrics=a(h);let p={round:h.currentRound,allocation:t,projectProgress:{},objectiveProgress:{},constraintStatus:{},events:g,metrics:{...h.metrics}};return e.projects.forEach((e,t)=>{let r=h.projects[t];r&&(p.projectProgress[e.id]=r.currentProgress-e.currentProgress)}),e.objectives.forEach((e,t)=>{let r=h.objectives[t];r&&(p.objectiveProgress[e.id]=r.current-e.current)}),h.constraints.forEach(e=>{p.constraintStatus[e.id]=e.violated}),h.roundHistory.push(p),h.allocationHistory.push(...t),h.totalBudgetUsed+=m,h.resourceBudget=h.resourceBudget-m+h.scenario.budgetPerRound,h.currentRound>=h.totalRounds?(h.status="finished",d=(n=h).objectives.every(e=>e.met),u=n.constraints.every(e=>!e.violated),h.outcome=d&&u?"win":"loss"):h.currentRound+=1,h}(M,t);P(s),$({}),T(null),"finished"===s.status&&(N("finished"),K(s))},[M,e,R]),K=(0,r.useCallback)(e=>{let t,r,s,n;if(!e.outcome||!G)return;let i=Date.now()-G,y=a(e),v="win"===e.outcome,b=(0,h.generateTodayChallengeCode)(w,e.seed);(0,g.storeChallengeCode)(b),I(b);let j=v?Math.round(.4*y.objectiveProgress+.4*y.resourceEfficiency+.2*y.constraintCompliance):Math.round(.3*y.objectiveProgress+.3*y.resourceEfficiency),S=(0,k.calculateBaseXP)({win:v,score:j,efficiency:y.resourceEfficiency,time:i,difficulty:e.scenario.difficulty,tier:u().currentTier}),N=(0,p.getStreakDataForGame)(w),M=(0,k.createRewardContext)({gameId:w,seed:e.seed,baseXP:S,performance:{score:j,efficiency:y.resourceEfficiency,time:i},streak:N.currentStreak,tier:u().currentTier}),P=(0,C.generateRewardResult)(M),R=function(e,t,r,s){let n={...e};n.xp+=50;let a={planner:0,strategist:100,architect:300,master:600,legend:1e3},i=Object.keys(a).indexOf(n.currentTier),o=Object.keys(a)[i+1];if(o&&n.xp>=a[o])n.currentTier=o,n.tierProgress=0;else{let e=a[n.currentTier],t=o?a[o]:1/0;n.tierProgress=(n.xp-e)/(t-e)}let l=t.scenario.id,d=n.personalBests[l];(!d||r>d.bestScore)&&(n.personalBests[l]={bestScore:r,bestEfficiency:s,bestCompletionRounds:t.currentRound}),n.stats.scenariosCompleted+=1,n.stats.averageScore=(n.stats.averageScore*(n.stats.scenariosCompleted-1)+r)/n.stats.scenariosCompleted,n.stats.averageEfficiency=(n.stats.averageEfficiency*(n.stats.scenariosCompleted-1)+s)/n.stats.scenariosCompleted,c(t)&&(n.stats.constraintViolations+=1);let u=t.scenario.type;n.stats.scenarioTypeStats[u]||(n.stats.scenarioTypeStats[u]={completed:0,averageScore:0,averageEfficiency:0});let m=n.stats.scenarioTypeStats[u];return m.completed+=1,m.averageScore=(m.averageScore*(m.completed-1)+r)/m.completed,m.averageEfficiency=(m.averageEfficiency*(m.completed-1)+s)/m.completed,n}(u(),e,j,y.resourceEfficiency);R.xp=P.totalXP;try{let e={...R,version:1};localStorage.setItem(d,JSON.stringify(e))}catch(e){console.error("Error saving progress:",e)}let $={score:j,time:i,scoreValue:j,efficiency:y.resourceEfficiency,timestamp:Date.now()};z($),U((0,x.submitScore)(b.code,$)),(0,m.completeTodayChallenge)(w,{score:j,time:i,scoreValue:j}),(0,p.updateStreakForGame)(w,!0),O((0,f.checkAndUnlockAchievements)({gameId:w,currentStreak:N.currentStreak+1,gamesCompleted:R.stats.scenariosCompleted,score:j,time:i}).newlyUnlocked),L((t=function(e){let t=[];for(let r=0;r<e.roundHistory.length;r++){let s=e.roundHistory[r],n=r>0?e.roundHistory[r-1]:null,a=s.allocation,i=a.reduce((e,t)=>e+t.resources,0),o=Math.max(...a.map(e=>e.resources),0),l=i>0?o/i:0;l>.6&&t.push({round:s.round,description:`Concentrated ${Math.round(100*l)}% of resources on single project`,impact:l>.8?"positive":"neutral",reasoning:l>.8?"High concentration enabled fast project completion":"Moderate concentration balanced speed and risk"});let c=Object.values(s.constraintStatus).filter(e=>e).length;if(n){let e=Object.values(n.constraintStatus).filter(e=>e).length;c<e?t.push({round:s.round,description:"Resolved constraint violations",impact:"positive",reasoning:"Successfully addressed constraint issues from previous round"}):c>e&&t.push({round:s.round,description:"New constraint violations occurred",impact:"negative",reasoning:"Allocation strategy led to constraint violations"})}s.events.length>0&&t.push({round:s.round,description:`Responded to ${s.events.length} event(s)`,impact:s.metrics.constraintCompliance>80?"positive":"negative",reasoning:s.metrics.constraintCompliance>80?"Successfully managed events without major impact":"Events caused significant disruption"})}return t.sort((e,t)=>{let r={positive:0,neutral:1,negative:2},s=r[e.impact]-r[t.impact];return 0!==s?s:t.round-e.round}),t.slice(0,3)}(e),r=function(e){let t=[],r=a(e);if(r.resourceEfficiency<70&&t.push({round:e.currentRound,description:`Low resource efficiency: ${Math.round(r.resourceEfficiency)}%`,cost:`Wasted ${Math.round(r.waste)} resources`,recommendation:"Allocate resources more strategically, focus on projects with better returns"}),c(e)){let r=e.constraints.filter(e=>e.violated);t.push({round:e.currentRound,description:`Constraint violations: ${r.length} constraint(s) violated`,cost:"Failed scenario due to constraint violations",recommendation:"Monitor constraints more closely, allocate resources within limits"})}if(!o(e)){let r=l(e);t.push({round:e.currentRound,description:`Unmet objectives: ${r.length} objective(s) not achieved`,cost:"Failed scenario due to unmet objectives",recommendation:"Focus allocation on projects that contribute to objectives"})}return r.waste>.1*e.totalBudgetUsed&&t.push({round:e.currentRound,description:`High resource waste: ${Math.round(r.waste)} resources wasted`,cost:`Lost ${Math.round(r.waste)} resources that could have been used`,recommendation:"Avoid over-allocating to completed projects, redistribute resources"}),e.roundHistory.filter(e=>Object.values(e.constraintStatus).some(e=>e)).length>2&&t.push({round:e.currentRound,description:"Late constraint management",cost:"Multiple rounds with constraint violations",recommendation:"Address constraint issues earlier, monitor constraints proactively"}),t.slice(0,3)}(e),s=function(e,t){let r=[],s=a(e);if(s.resourceEfficiency<70&&r.push({type:"allocation",description:"Improve resource allocation efficiency",rationale:"Current efficiency is below optimal. Focus on projects with better progress-to-resource ratios and avoid over-allocation."}),s.riskLevel>50&&r.push({type:"risk-management",description:"Invest in project health buffers",rationale:"High risk level suggests vulnerability to events. Allocate extra resources to build health buffers on critical projects."}),c(e)&&r.push({type:"strategy",description:"Adopt more conservative allocation strategy",rationale:"Constraint violations indicate need for more careful resource management. Monitor constraints closely and stay within limits."}),!o(e)){let t=l(e);r.push({type:"strategy",description:"Prioritize objective-critical projects",rationale:`Focus allocation on projects that directly contribute to unmet objectives: ${t.map(e=>e.name).join(", ")}`})}return r.slice(0,3)}(e,0),n=function(e,t,r){let s="win"===e.outcome?"successful":"unsuccessful",n=a(e),i=`This ${s} run achieved ${Math.round(n.objectiveProgress)}% objective progress `;if(i+=`with ${Math.round(n.resourceEfficiency)}% resource efficiency. `,t.length>0){let e=t.filter(e=>"positive"===e.impact).length;i+=`Key strategic decisions included ${e} positive choices. `}return r.length>0&&(i+=`Areas for improvement include ${r[0].description.toLowerCase()}. `),"win"===e.outcome?i+="Overall, the allocation strategy successfully balanced objectives, constraints, and resource efficiency.":i+="The allocation strategy needs refinement to better balance competing priorities.",i}(e,t,r),{keyDecisions:t,mistakes:r,recommendations:s,summary:n}))},[G]),W=(0,r.useCallback)(()=>{N("idle"),P(null),$({}),T(null),I(null),U(null),O([]),z(null),L(null),H(null)},[]),Z=M?(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-sm font-semibold text-slate-900 mb-2",children:"Round"}),(0,t.jsxs)("div",{className:"text-lg font-bold",children:[M.currentRound," / ",M.totalRounds]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-sm font-semibold text-slate-900 mb-2",children:"Budget"}),(0,t.jsx)("div",{className:"text-lg font-bold",children:M.resourceBudget})]}),M.metrics&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-sm font-semibold text-slate-900 mb-2",children:"Efficiency"}),(0,t.jsxs)("div",{className:"text-lg font-bold text-green-600",children:[Math.round(M.metrics.resourceEfficiency),"%"]})]}),M.constraints.some(e=>e.violated)&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-sm font-semibold text-red-600 mb-2",children:"âš ï¸ Constraints"}),(0,t.jsxs)("div",{className:"text-sm text-red-600",children:[M.constraints.filter(e=>e.violated).length," violated"]})]})]}):null;return(0,t.jsx)(s.default,{config:S,status:e,onStart:J,onReset:W,rightPanel:Z,children:(0,t.jsx)("div",{className:"p-4",children:M?"idle"===e?(0,t.jsxs)("div",{className:"max-w-2xl mx-auto space-y-4",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-slate-900",children:M.scenario.name}),(0,t.jsx)("p",{className:"text-slate-600",children:M.scenario.description}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{children:"Projects:"})," ",M.projects.length]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{children:"Objectives:"})," ",M.objectives.length]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{children:"Constraints:"})," ",M.constraints.length]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{children:"Rounds:"})," ",M.totalRounds]})]}),(0,t.jsx)("button",{onClick:J,className:"w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Start Planning"})]}):"playing"===e||"finished"===e?(0,t.jsxs)("div",{className:"max-w-4xl mx-auto space-y-6",children:[(0,t.jsxs)("div",{className:"rounded-xl border border-slate-200 bg-white p-4",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-slate-900 mb-3",children:"Objectives"}),(0,t.jsx)("div",{className:"space-y-2",children:M.objectives.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("div",{className:"text-sm font-medium text-slate-900",children:e.name}),(0,t.jsx)("div",{className:"text-xs text-slate-600",children:e.description})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-32 bg-slate-200 rounded-full h-2",children:(0,t.jsx)("div",{className:`h-2 rounded-full ${e.met?"bg-green-600":"bg-blue-600"}`,style:{width:`${Math.min(100,e.current/e.target*100)}%`}})}),(0,t.jsxs)("div",{className:"text-sm font-medium w-16 text-right",children:[Math.round(e.current)," / ",e.target]})]})]},e.id))})]}),(0,t.jsxs)("div",{className:"rounded-xl border border-slate-200 bg-white p-4",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-slate-900 mb-3",children:"Projects"}),(0,t.jsx)("div",{className:"space-y-3",children:M.projects.map(r=>{let s=R[r.id]||0,n=r.dependencies.every(e=>{let t=M.projects.find(t=>t.id===e);return!t||t.currentProgress>=100});return(0,t.jsxs)("div",{className:`p-3 border-2 rounded-lg ${r.currentProgress>=100?"border-green-500 bg-green-50":n?"border-slate-300 bg-white":"border-slate-200 bg-slate-50 opacity-60"}`,children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-semibold text-slate-900",children:r.name}),(0,t.jsx)("div",{className:"text-xs text-slate-600",children:r.description})]}),(0,t.jsxs)("div",{className:"text-sm font-medium",children:[Math.round(r.currentProgress),"%"]})]}),(0,t.jsx)("div",{className:"w-full bg-slate-200 rounded-full h-2 mb-2",children:(0,t.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all",style:{width:`${r.currentProgress}%`}})}),"playing"===e&&n&&(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("input",{type:"range",min:"0",max:M.resourceBudget,value:s,onChange:e=>V(r.id,parseInt(e.target.value)),className:"flex-1"}),(0,t.jsx)("div",{className:"w-16 text-sm font-medium text-right",children:s})]}),!n&&r.dependencies.length>0&&(0,t.jsxs)("div",{className:"text-xs text-slate-500",children:["Depends on: ",r.dependencies.join(", ")]})]},r.id)})})]}),(0,t.jsxs)("div",{className:"rounded-xl border border-slate-200 bg-white p-4",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-slate-900 mb-3",children:"Constraints"}),(0,t.jsx)("div",{className:"space-y-2",children:M.constraints.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("div",{className:"text-sm font-medium text-slate-900",children:e.name}),(0,t.jsxs)("div",{className:`text-sm font-medium ${e.violated?"text-red-600":e.current>e.limit*e.warningThreshold?"text-yellow-600":"text-green-600"}`,children:[Math.round(e.current)," / ",e.limit]})]},e.id))})]}),"playing"===e&&(0,t.jsx)("div",{className:"flex gap-2",children:(0,t.jsxs)("button",{onClick:Y,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:["Confirm Round ",M.currentRound]})}),"finished"===e&&E&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:`text-3xl font-bold mb-2 ${"win"===M.outcome?"text-green-600":"text-red-600"}`,children:"win"===M.outcome?"Success!":"Failed"}),M.metrics&&(0,t.jsxs)("div",{className:"text-sm text-slate-600",children:["Efficiency: ",Math.round(M.metrics.resourceEfficiency),"% | Objectives: ",Math.round(M.metrics.objectiveProgress),"%"]})]}),(0,t.jsx)(y.ChallengeCodeShare,{code:E,score:B?.score||0}),A&&(0,t.jsx)("div",{className:"rounded-xl border border-slate-200 bg-white p-4",children:(0,t.jsx)(v.ScoreComparisonDisplay,{comparison:A})}),(0,t.jsx)("div",{className:"rounded-xl border border-slate-200 bg-white p-4",children:(0,t.jsx)(j.LeaderboardView,{challengeCode:E.code,playerScore:B||void 0})}),F.length>0&&(0,t.jsx)("div",{className:"rounded-xl border border-slate-200 bg-white p-4",children:(0,t.jsx)(b.AchievementDisplay,{achievementIds:F,compact:!0})}),q&&(0,t.jsxs)("div",{className:"rounded-xl border border-slate-200 bg-white p-4",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-slate-900 mb-3",children:"Post-Run Analysis"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium text-slate-900 mb-2",children:"Summary"}),(0,t.jsx)("p",{className:"text-sm text-slate-600",children:q.summary})]}),q.keyDecisions&&q.keyDecisions.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium text-slate-900 mb-2",children:"Key Decisions"}),(0,t.jsx)("ul",{className:"text-sm text-slate-600 space-y-2",children:q.keyDecisions.slice(0,3).map((e,r)=>(0,t.jsxs)("li",{className:"border-l-2 border-blue-300 pl-2",children:[(0,t.jsxs)("div",{className:"font-medium",children:["Round ",e.round,": ",e.description]}),(0,t.jsx)("div",{className:"text-xs text-slate-500",children:e.reasoning})]},r))})]}),q.mistakes&&q.mistakes.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium text-slate-900 mb-2",children:"Mistakes & Inefficiencies"}),(0,t.jsx)("ul",{className:"text-sm text-slate-600 space-y-2",children:q.mistakes.slice(0,3).map((e,r)=>(0,t.jsxs)("li",{className:"border-l-2 border-red-300 pl-2",children:[(0,t.jsxs)("div",{className:"font-medium",children:["Round ",e.round,": ",e.description]}),(0,t.jsxs)("div",{className:"text-xs text-slate-500",children:["Cost: ",e.cost]}),(0,t.jsxs)("div",{className:"text-xs text-blue-600",children:["Recommendation: ",e.recommendation]})]},r))})]}),q.recommendations&&q.recommendations.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium text-slate-900 mb-2",children:"Recommended Strategy Adjustment"}),(0,t.jsx)("ul",{className:"text-sm text-slate-600 list-disc list-inside space-y-1",children:q.recommendations.map((e,r)=>(0,t.jsxs)("li",{children:[(0,t.jsxs)("span",{className:"font-medium",children:[e.type,":"]})," ",e.description,(0,t.jsx)("div",{className:"text-xs text-slate-500 ml-4",children:e.rationale})]},r))})]})]})]}),(0,t.jsx)("div",{className:"flex gap-2",children:(0,t.jsx)("button",{onClick:W,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"New Challenge"})})]})]}):null:(0,t.jsx)("div",{className:"text-center text-slate-600",children:"Loading scenario..."})})})}e.s(["default",()=>N],62038)},597065,e=>{e.n(e.i(62038))}]);

//# debugId=c1cbcfdc-0bfe-8088-0c07-f834fd9c6716
//# sourceMappingURL=cbe93efabc8f4d12.js.map