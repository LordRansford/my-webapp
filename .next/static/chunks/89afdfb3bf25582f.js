;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="04a204e8-f68b-a2d1-328a-f615d590e4c5")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,605774,e=>{"use strict";var s=e.i(391398),t=e.i(191788);function a(){let[e,a]=(0,t.useState)(5),[l,r]=(0,t.useState)(2),[i,c]=(0,t.useState)(500),[n,o]=(0,t.useState)(50),x=(0,t.useMemo)(()=>{let s=l+1;return{userFailureProbability:Math.pow(e/100,s),extraLoadFactor:s,likelyCircuitTrip:e>=n?"High chance of opening":"Unlikely to open"}},[e,l,n]);return(0,s.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,s.jsx)("p",{className:"text-sm text-slate-600",children:"This sandbox lets you see how retries, timeouts and circuit breakers interact. It is not a full reliability model. It helps you feel how quickly extra retries can create extra load."}),(0,s.jsxs)("div",{className:"grid gap-4 md:grid-cols-[2fr,1fr]",children:[(0,s.jsx)("div",{className:"rounded-2xl border border-slate-200 bg-white p-3 text-sm",children:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("label",{className:"block text-xs text-slate-600",children:["Base failure rate of a single call",(0,s.jsx)("input",{type:"range",min:1,max:60,value:e,onChange:e=>a(Number(e.target.value)||1),className:"mt-1 w-full"}),(0,s.jsxs)("span",{className:"mt-1 inline-block text-xs text-slate-700",children:[e,"% of calls fail before resilience patterns."]})]}),(0,s.jsxs)("label",{className:"block text-xs text-slate-600",children:["Retries",(0,s.jsx)("input",{type:"range",min:0,max:4,value:l,onChange:e=>r(Number(e.target.value)||0),className:"mt-1 w-full"}),(0,s.jsxs)("span",{className:"mt-1 inline-block text-xs text-slate-700",children:[l," retry attempt",1===l?"":"s"," after the first call."]})]}),(0,s.jsxs)("label",{className:"block text-xs text-slate-600",children:["Timeout per attempt",(0,s.jsx)("input",{type:"range",min:200,max:3e3,step:100,value:i,onChange:e=>c(Number(e.target.value)||200),className:"mt-1 w-full"}),(0,s.jsxs)("span",{className:"mt-1 inline-block text-xs text-slate-700",children:[i," ms per attempt."]})]}),(0,s.jsxs)("label",{className:"block text-xs text-slate-600",children:["Circuit breaker failure threshold",(0,s.jsx)("input",{type:"range",min:10,max:80,step:5,value:n,onChange:e=>o(Number(e.target.value)||10),className:"mt-1 w-full"}),(0,s.jsxs)("span",{className:"mt-1 inline-block text-xs text-slate-700",children:["Circuit opens when failure rate is around ",n,"% or higher."]})]})]})}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"rounded-2xl border border-slate-200 bg-white p-3 text-sm",children:[(0,s.jsx)("p",{className:"mb-2 text-xs font-medium uppercase tracking-wide text-slate-500",children:"Estimated outcomes"}),(0,s.jsxs)("p",{className:"text-xs text-slate-700",children:["Probability that a user still sees a failure after all retries:"," ",(0,s.jsxs)("span",{className:"font-semibold",children:[(100*x.userFailureProbability).toFixed(2),"%"]})]}),(0,s.jsxs)("p",{className:"text-xs text-slate-700",children:["Relative extra load due to retries: ",(0,s.jsxs)("span",{className:"font-semibold",children:[x.extraLoadFactor.toFixed(1)," times"]})," the original request volume."]}),(0,s.jsxs)("p",{className:"text-xs text-slate-700",children:["Circuit breaker behaviour: ",(0,s.jsx)("span",{className:"font-semibold",children:x.likelyCircuitTrip})]}),(0,s.jsxs)("p",{className:"mt-2 text-xs text-slate-600",children:["Total worst case time for one user is roughly ",i*(l+1)/1e3," seconds if every attempt hits the full timeout."]})]}),(0,s.jsxs)("div",{className:"rounded-2xl bg-slate-50 p-3 text-xs text-slate-700",children:[(0,s.jsx)("p",{className:"mb-1 font-medium",children:"Discussion prompts"}),(0,s.jsxs)("ul",{className:"list-disc space-y-1 pl-4",children:[(0,s.jsx)("li",{children:"Is the extra load factor acceptable for the downstream service during an incident."}),(0,s.jsx)("li",{children:"Would a shorter timeout with fewer retries give users a faster, clearer failure."}),(0,s.jsx)("li",{children:"Are there some operations where you prefer no retries at all, for example payments."})]})]})]})]})]})}e.s(["ResiliencePatternSandbox",()=>a])},145625,e=>{e.n(e.i(605774))}]);

//# debugId=04a204e8-f68b-a2d1-328a-f615d590e4c5
//# sourceMappingURL=90c079a543491831.js.map