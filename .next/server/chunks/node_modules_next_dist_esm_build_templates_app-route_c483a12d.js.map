{
  "version": 3,
  "sources": [],
  "debugId": "b602c71a-3ddc-2951-0b9d-7484fb4d06d2",
  "sections": [
    {"offset": {"line": 1, "column": 0}, "map": {"version":3,"sources":["../../../src/app/api/mentor/query/route.ts","../../../src/lib/mentor/sanitize.ts","../../../src/lib/mentor/enhancedRetrieve.ts","../../../node_modules/next/dist/esm/build/templates/app-route.js","../../../src/lib/mentor/vectorStore.ts","../../../src/lib/tools/toolRegistry.ts"],"sourcesContent":["import { NextResponse } from \"next/server\";\nimport { rateLimit } from \"@/lib/security/rateLimit\";\nimport { requireSameOrigin } from \"@/lib/security/origin\";\nimport { withRequestLogging } from \"@/lib/security/requestLog\";\nimport { sanitizeQuestion } from \"@/lib/mentor/sanitize\";\nimport { incrementUsage } from \"@/lib/mentor/usage\";\nimport { retrieveContent } from \"@/lib/mentor/retrieveContent\";\nimport { retrieveVectorContent } from \"@/lib/mentor/vectorStore\";\nimport { findToolSuggestion } from \"@/lib/tools/toolRegistry\";\nimport { enhancedRetrieve } from \"@/lib/mentor/enhancedRetrieve\";\nimport { generateAnswer } from \"@/lib/mentor/llm\";\nimport { getServerSession } from \"next-auth\";\nimport { authOptions } from \"@/lib/auth/options\";\nimport { runWithMetering } from \"@/lib/tools/runWithMetering\";\nimport { attachWorkspaceCookie, getWorkspaceIdentity } from \"@/lib/workspace/request\";\nimport { createRun, createNote, updateRun, getProject } from \"@/lib/workspace/store\";\nimport type { MentorPageContext, MentorRequest } from \"@/lib/contracts/mentor\";\nimport type { MentorResponse, MentorCitationV2 } from \"@/types/mentor\";\n\nconst DISABLED = process.env.MENTOR_ENABLED === \"false\";\nconst RESPONSE_TIMEOUT_MS = 2500; // 2.5 seconds, leaving 0.5s buffer for response\n\ntype PageContext = MentorPageContext;\n\n/**\n * Normalize Mentor Response\n * \n * Ensures all responses conform to the canonical MentorResponse type.\n * This is the SINGLE exit point for all response shapes.\n */\nfunction normalizeMentorResponse(input: Partial<MentorResponse>): MentorResponse {\n  return {\n    answer: input.answer ?? \"No answer available.\",\n    answerMode: input.answerMode ?? \"fallback\",\n    citationsV2: (input.citationsV2 ?? []).map((c) => ({\n      title: c.title ?? \"\",\n      urlOrPath: c.urlOrPath ?? \"\",\n      anchorOrHeading: c.anchorOrHeading,\n    })),\n    suggestedActions: input.suggestedActions ?? [],\n    debug: input.debug,\n  };\n}\n\nfunction clampText(input: unknown, maxLen: number) {\n  const raw = typeof input === \"string\" ? input : \"\";\n  return raw.replace(/[\\u0000-\\u0008\\u000B\\u000C\\u000E-\\u001F\\u007F]/g, \" \").replace(/\\s+/g, \" \").trim().slice(0, maxLen);\n}\n\nfunction normalise(text: string) {\n  return String(text || \"\").toLowerCase().replace(/[^a-z0-9\\s]/g, \" \").replace(/\\s+/g, \" \").trim();\n}\n\nfunction bestExcerptFromContext(query: string, ctx: PageContext | null) {\n  const pageText = clampText(ctx?.text, 8000);\n  if (pageText.length < 200) return null;\n  const q = normalise(query);\n  const terms = q.split(\" \").filter(Boolean).slice(0, 10);\n  if (!terms.length) return null;\n\n  const hay = pageText.toLowerCase();\n  const first = terms.find((t) => hay.includes(t));\n  if (!first) return null;\n\n  const idx = hay.indexOf(first);\n  const start = Math.max(0, idx - 180);\n  const end = Math.min(pageText.length, idx + 260);\n  const excerpt = pageText.slice(start, end).trim();\n\n  const headings = Array.isArray(ctx?.headings) ? ctx!.headings! : [];\n  const heading = headings.find((h) => h?.id && terms.some((t) => String(h.text || \"\").toLowerCase().includes(t))) || null;\n  const href = heading?.id ? `${ctx?.pathname || \"\"}#${heading.id}` : ctx?.pathname || \"\";\n  const title = heading?.text ? String(heading.text).slice(0, 120) : ctx?.title || \"This page\";\n\n  return { title, href, excerpt };\n}\n\n/**\n * Layer 1: Fast local keyword search (no OpenAI needed)\n * Returns a normalized fallback response with at least one citation.\n */\nfunction buildLocalFallback(question: string, pageUrl: string | null): Partial<MentorResponse> {\n  const normalized = normalise(question);\n  const keywords = normalized.split(\" \").filter(Boolean).slice(0, 5);\n  \n  // Try to find relevant tools/pages from keywords\n  const toolSuggestions = [\n    { id: \"python-playground\", title: \"Python Playground\", route: \"/tools/ai/python-playground\" },\n    { id: \"js-sandbox\", title: \"JavaScript Sandbox\", route: \"/tools/software-architecture/js-sandbox\" },\n    { id: \"sql-sqlite\", title: \"SQL Sandbox\", route: \"/tools/data/sql-sandbox\" },\n    { id: \"regex-tester\", title: \"Regex Tester\", route: \"/tools/software-architecture/regex-tester\" },\n    { id: \"password-entropy\", title: \"Password Entropy Meter\", route: \"/tools/cyber/password-entropy\" },\n  ].filter((tool) => \n    keywords.some((kw) => \n      tool.title.toLowerCase().includes(kw) || \n      tool.id.toLowerCase().includes(kw)\n    )\n  ).slice(0, 3);\n\n  const answer = toolSuggestions.length > 0\n    ? `I found ${toolSuggestions.length} relevant tool${toolSuggestions.length > 1 ? \"s\" : \"\"} that might help:\\n\\n${toolSuggestions.map((t, i) => `${i + 1}. [${t.title}](${t.route})`).join(\"\\n\")}\\n\\nVisit these tools to learn more. For deeper answers, the full search system needs to be available.`\n    : `I don't have indexed content for \"${question}\" yet. Here's what you can do:\\n\\n1. Check the [Tools hub](/tools) for interactive tools\\n2. Browse [Notes](/notes) for written content\\n3. Try rephrasing your question with specific tool names or keywords`;\n\n  // Always include at least one citation (Tools hub)\n  const citationsV2: MentorCitationV2[] = toolSuggestions.length > 0\n    ? toolSuggestions.map((t) => ({\n        title: t.title,\n        urlOrPath: t.route,\n        anchorOrHeading: t.title,\n      }))\n    : [\n        {\n          title: \"Tools hub\",\n          urlOrPath: \"/tools\",\n        },\n      ];\n\n  return {\n    answer,\n    answerMode: \"fallback\",\n    citationsV2,\n    suggestedActions: [\n      { label: \"Visit Tools Hub\", href: \"/tools\" },\n      { label: \"Browse Notes\", href: \"/notes\" },\n    ],\n    debug: {\n      retrievalCount: 0,\n      fallbackReason: \"No indexed content found or RAG system unavailable\",\n    },\n  };\n}\n\nexport async function POST(req: Request) {\n  const requestId = crypto.randomUUID();\n  const startTime = Date.now();\n  \n  return withRequestLogging(req, { route: \"POST /api/mentor/query\" }, async () => {\n    let rawResponse: Partial<MentorResponse> = {};\n    \n    try {\n      if (DISABLED) {\n        rawResponse = buildLocalFallback(\"\", null);\n        return NextResponse.json(normalizeMentorResponse(rawResponse));\n      }\n\n      const originBlock = requireSameOrigin(req);\n      if (originBlock) return originBlock;\n\n      const limited = rateLimit(req, { keyPrefix: \"mentor-query\", limit: 10, windowMs: 60_000 });\n      if (limited) return limited;\n\n      const body = (await req.json().catch(() => null)) as MentorRequest | null;\n      const question = typeof body?.question === \"string\" ? body.question : \"\";\n      const pageUrl = typeof body?.pageUrl === \"string\" ? body.pageUrl : \"\";\n      const pageContextRaw = body?.pageContext ?? null;\n      const projectId = typeof body?.projectId === \"string\" ? body.projectId.trim() : \"\";\n      const note = typeof body?.note === \"string\" ? body.note.slice(0, 8000) : \"\";\n      const safe = sanitizeQuestion(question);\n      \n      if (!safe.ok) {\n        rawResponse = {\n          answer: safe.reason === \"too_long\" \n            ? \"Please ask a shorter question so I can match it to the site content.\" \n            : \"Please enter a valid question.\",\n          answerMode: \"fallback\",\n          citationsV2: [{ title: \"Tools hub\", urlOrPath: \"/tools\" }],\n          debug: {\n            retrievalCount: 0,\n            fallbackReason: safe.reason === \"too_long\" ? \"Question too long\" : \"Invalid question\",\n          },\n        };\n        return NextResponse.json(\n          normalizeMentorResponse(rawResponse),\n          { status: safe.reason === \"too_long\" ? 413 : 400 }\n        );\n      }\n\n      const session = await getServerSession(authOptions).catch(() => null);\n      const userId = session?.user?.id || null;\n      const ws = await getWorkspaceIdentity(req);\n\n      // Note: Credit enforcement is handled by runWithMetering below, which checks credits\n      // before execution and returns appropriate error responses if insufficient.\n\n      let runId: string | null = null;\n      if (projectId) {\n        const p = await getProject({ projectId });\n        const allowed = userId ? p?.ownerId === userId : p?.ownerId == null && p?.workspaceSessionId === ws.workspaceSessionId;\n        if (p && allowed) {\n          const run = await createRun({ projectId, toolId: \"mentor-query\", status: \"running\", inputJson: { question, pageUrl } });\n          runId = String(run.id);\n        }\n      }\n\n      // Create abort controller for timeout\n      const abortController = new AbortController();\n      const timeoutId = setTimeout(() => abortController.abort(), RESPONSE_TIMEOUT_MS);\n\n      let retrievalSucceeded = false;\n      let modelSucceeded = false;\n      let fallbackUsed = false;\n      let retrievalCount = 0;\n\n      try {\n        const meteredResult = await Promise.race([\n          runWithMetering<MentorResponse>({\n            req,\n            userId,\n            toolId: \"mentor-query\",\n            inputBytes: Buffer.from(question).byteLength,\n            requestedComplexityPreset: \"standard\",\n            execute: async () => {\n              const ctx: PageContext | null =\n                pageContextRaw && typeof pageContextRaw === \"object\"\n                  ? {\n                      pathname: clampText(pageContextRaw?.pathname, 200) || pageUrl || \"\",\n                      title: clampText(pageContextRaw?.title, 180),\n                      text: clampText(pageContextRaw?.text, 9000),\n                      headings: Array.isArray(pageContextRaw?.headings)\n                        ? pageContextRaw.headings\n                            .map((h: any) => ({ id: clampText(h?.id, 80), text: clampText(h?.text, 140), depth: Number(h?.depth) || undefined }))\n                            .filter((h: any) => h.id && h.text)\n                        : undefined,\n                      toc: Array.isArray(pageContextRaw?.toc)\n                        ? pageContextRaw.toc.map((t: any) => ({ id: clampText(t?.id, 80), text: clampText(t?.text, 140) })).filter((t: any) => t.id && t.text)\n                        : undefined,\n                    }\n                  : null;\n\n              const pageHit = bestExcerptFromContext(safe.cleaned, ctx);\n\n              // Enhanced retrieval combining multiple sources\n              const retrievedItems = await enhancedRetrieve(safe.cleaned, pageUrl || ctx?.pathname || null, 8);\n              retrievalCount = retrievedItems.length;\n              retrievalSucceeded = retrievedItems.length > 0 || pageHit !== null;\n\n              // Add page hit if available\n              if (pageHit && !retrievedItems.some((item) => item.href === pageHit.href)) {\n                retrievedItems.unshift({\n                  title: pageHit.title,\n                  href: pageHit.href,\n                  excerpt: pageHit.excerpt,\n                  text: pageHit.excerpt,\n                  kind: \"section\",\n                  score: 10, // High score for current page\n                });\n              }\n\n              if (!retrievedItems.length) {\n                rawResponse = buildLocalFallback(safe.cleaned, pageUrl || ctx?.pathname || null);\n                fallbackUsed = true;\n                return { \n                  output: normalizeMentorResponse(rawResponse), \n                  outputBytes: Buffer.byteLength(JSON.stringify(normalizeMentorResponse(rawResponse))) \n                };\n              }\n\n              incrementUsage();\n              const top = retrievedItems[0] || null;\n              // Lower threshold for confidence - even weak matches from keyword search (score 4+) are useful\n              const lowConfidence = !top || (top.score < 4 && top.score < 0.15);\n              const tool = findToolSuggestion(safe.cleaned);\n\n              // Try to generate answer using LLM (RAG)\n              let answer = \"\";\n              let citationsV2: MentorCitationV2[] = [];\n              let answerMode: \"rag\" | \"fallback\" = \"fallback\";\n\n              try {\n                const llmResponse = await generateAnswer(\n                  safe.cleaned,\n                  retrievedItems.map((item) => ({\n                    title: item.title,\n                    href: item.href,\n                    excerpt: item.excerpt,\n                    text: item.text,\n                    why: item.why,\n                  })),\n                  ctx ? { title: ctx.title, pathname: ctx.pathname } : undefined,\n                  12000 // 12 second timeout for LLM\n                );\n\n                if (llmResponse && llmResponse.answer) {\n                  answer = llmResponse.answer;\n                  answerMode = \"rag\";\n                  modelSucceeded = true;\n                }\n              } catch (err) {\n                console.error(\"[MENTOR] LLM generation failed:\", err);\n                // Fall through to keyword-based answer\n              }\n\n              // Fallback to keyword-based answer if LLM failed or unavailable\n              if (!answer) {\n                answerMode = \"fallback\";\n                \n                // Build a comprehensive answer from multiple retrieved items\n                const relevantItems = retrievedItems.slice(0, 5).filter(item => item.excerpt || item.text);\n                \n                if (relevantItems.length > 0) {\n                  const primaryItem = relevantItems[0];\n                  \n                  // Build a more comprehensive answer\n                  answer = `Based on the site content, here's what I found about \"${safe.cleaned}\":\\n\\n`;\n                  \n                  // Use the best excerpt or text from the primary item\n                  const primaryText = primaryItem.excerpt || primaryItem.text || primaryItem.why || \"\";\n                  if (primaryText) {\n                    answer += primaryText.slice(0, 400);\n                    if (primaryText.length > 400) answer += \"...\";\n                  } else {\n                    answer += `Relevant information is available in \"${primaryItem.title}\".`;\n                  }\n                  \n                  // Add context from additional items if available\n                  if (relevantItems.length > 1) {\n                    answer += \"\\n\\n**Additional relevant sections:**\";\n                    for (const item of relevantItems.slice(1, 4)) {\n                      const itemText = item.excerpt || item.text || item.why || \"\";\n                      if (itemText) {\n                        answer += `\\n\\n• **[${item.title}](${item.href})**: ${itemText.slice(0, 200)}${itemText.length > 200 ? \"...\" : \"\"}`;\n                      } else {\n                        answer += `\\n\\n• **[${item.title}](${item.href})**`;\n                      }\n                    }\n                  }\n                  \n                  answer += \"\\n\\nVisit the linked pages below for complete information and detailed explanations.\";\n                  \n                  // Add all relevant items as citations\n                  for (const item of relevantItems) {\n                    citationsV2.push({\n                      title: item.title,\n                      urlOrPath: item.href,\n                      anchorOrHeading: item.excerpt ? item.excerpt.slice(0, 100) : undefined,\n                    });\n                  }\n                } else if (pageHit) {\n                  answer = `Based on the current page: ${pageHit.excerpt}\\n\\nFor more details, visit the page sections linked below.`;\n                  citationsV2.push({\n                    title: pageHit.title,\n                    urlOrPath: pageHit.href,\n                    anchorOrHeading: pageHit.title,\n                  });\n                } else if (top && (top.excerpt || top.text)) {\n                  answer = `From the site content: ${top.excerpt || top.text || \"Relevant content found.\"}\\n\\nVisit the linked pages below for more information.`;\n                  citationsV2.push({\n                    title: top.title,\n                    urlOrPath: top.href,\n                    anchorOrHeading: top.excerpt || top.title,\n                  });\n                }\n              } else {\n                // LLM answer - add all retrieved items as citations for transparency\n                answerMode = \"rag\";\n                for (const item of retrievedItems.slice(0, 6)) {\n                  citationsV2.push({\n                    title: item.title,\n                    urlOrPath: item.href,\n                    anchorOrHeading: item.excerpt || undefined,\n                  });\n                }\n              }\n\n              if (!answer || citationsV2.length === 0) {\n                rawResponse = buildLocalFallback(safe.cleaned, pageUrl || ctx?.pathname || null);\n                fallbackUsed = true;\n                return { \n                  output: normalizeMentorResponse(rawResponse), \n                  outputBytes: Buffer.byteLength(JSON.stringify(normalizeMentorResponse(rawResponse))) \n                };\n              }\n\n              rawResponse = {\n                answer: answer.length > 100 ? answer : answer + \"\\n\\nFor more details, visit the linked pages above.\",\n                answerMode,\n                citationsV2,\n                suggestedActions: tool\n                  ? [{ label: `Try ${tool.title}`, href: tool.route }]\n                  : [{ label: \"Visit Tools Hub\", href: \"/tools\" }],\n                debug: {\n                  retrievalCount,\n                  fallbackReason: lowConfidence ? \"Low confidence match\" : undefined,\n                },\n              };\n\n              return { \n                output: normalizeMentorResponse(rawResponse), \n                outputBytes: Buffer.byteLength(JSON.stringify(normalizeMentorResponse(rawResponse))) \n              };\n            },\n          }),\n          new Promise<{ ok: false; status: number; message: string; estimate: any }>((_, reject) => {\n            abortController.signal.addEventListener(\"abort\", () => {\n              reject(new Error(\"TIMEOUT\"));\n            });\n          }),\n        ]) as Awaited<ReturnType<typeof runWithMetering<MentorResponse>>>;\n\n        clearTimeout(timeoutId);\n\n        const duration = Date.now() - startTime;\n        console.log(`[MENTOR] requestId=${requestId} duration=${duration}ms retrieval=${retrievalSucceeded} model=${modelSucceeded} fallback=${fallbackUsed}`);\n\n        if (!meteredResult.ok) {\n          // If metering failed, return fallback\n          rawResponse = buildLocalFallback(safe.cleaned, pageUrl || null);\n          if (runId) {\n            await updateRun({ runId, status: \"failed\", outputJson: normalizeMentorResponse(rawResponse) }).catch(() => {});\n          }\n          return NextResponse.json(normalizeMentorResponse(rawResponse));\n        }\n\n        if (runId) {\n          await updateRun({ runId, status: \"completed\", outputJson: meteredResult.output });\n        }\n\n        return NextResponse.json(meteredResult.output);\n      } catch (err) {\n        clearTimeout(timeoutId);\n        const isTimeout = err instanceof Error && err.message === \"TIMEOUT\";\n        \n        const duration = Date.now() - startTime;\n        console.error(`[MENTOR] requestId=${requestId} duration=${duration}ms error=${isTimeout ? \"TIMEOUT\" : \"ERROR\"}`, err);\n\n        // Return fallback on timeout or error\n        rawResponse = buildLocalFallback(safe.cleaned, pageUrl || null);\n        fallbackUsed = true;\n\n        if (runId) {\n          await updateRun({ runId, status: \"failed\", outputJson: normalizeMentorResponse(rawResponse) }).catch(() => {});\n        }\n\n        return NextResponse.json(normalizeMentorResponse(rawResponse));\n      }\n    } catch (err) {\n      const duration = Date.now() - startTime;\n      console.error(`[MENTOR] requestId=${requestId} duration=${duration}ms fatal_error`, err);\n      \n      // Final fallback\n      rawResponse = buildLocalFallback(\"\", null);\n      return NextResponse.json(normalizeMentorResponse(rawResponse));\n    }\n  });\n}\n\n// TypeScript exhaustiveness guard - forces validation at build time\nconst _assertMentorResponse: MentorResponse = normalizeMentorResponse({});\n","const MAX_LEN = 320;\nconst banned = [\"medical\", \"doctor\", \"diagnosis\", \"legal\", \"lawsuit\", \"attorney\", \"politics\", \"election\", \"crypto\", \"stock\"];\n\nexport function sanitizeQuestion(input: string): { ok: boolean; cleaned: string; reason?: string } {\n  if (!input) return { ok: false, cleaned: \"\", reason: \"empty\" };\n  const stripped = input.replace(/<[^>]+>/g, \" \").trim();\n  if (stripped.length > MAX_LEN) return { ok: false, cleaned: \"\", reason: \"too_long\" };\n  const lower = stripped.toLowerCase();\n  if (banned.some((w) => lower.includes(w))) return { ok: false, cleaned: \"\", reason: \"out_of_scope\" };\n  return { ok: true, cleaned: stripped };\n}\n\n\n","/**\n * Enhanced Content Retrieval for Mentor\n * \n * Retrieves content from multiple sources:\n * 1. Course content (from content-index.json)\n * 2. Tool documentation (from tools-index.json)\n * 3. Full page content for better context\n */\n\nimport fs from \"node:fs\";\nimport path from \"node:path\";\nimport { retrieveContent } from \"./retrieveContent\";\nimport { retrieveVectorContent, type VectorRetrieval } from \"./vectorStore\";\n\nexport type EnhancedRetrievalResult = {\n  title: string;\n  href: string;\n  excerpt: string;\n  text?: string;\n  why?: string;\n  kind: \"course\" | \"tool\" | \"page\" | \"section\";\n  score: number;\n};\n\n/**\n * Load tools index for tool-specific queries\n */\nfunction loadToolsIndex() {\n  const toolsPath = path.join(process.cwd(), \"public\", \"tools-index.json\");\n  if (!fs.existsSync(toolsPath)) return null;\n  try {\n    const raw = fs.readFileSync(toolsPath, \"utf8\");\n    return JSON.parse(raw);\n  } catch {\n    return null;\n  }\n}\n\n/**\n * Retrieve tool information for tool-related questions\n */\nfunction retrieveToolInfo(\n  question: string,\n  limit = 3\n): EnhancedRetrievalResult[] {\n  const toolsIndex = loadToolsIndex();\n  if (!toolsIndex || !Array.isArray(toolsIndex.tools)) return [];\n\n  const q = question.toLowerCase();\n  let terms = q\n    .replace(/[^a-z0-9\\s]/g, \" \")\n    .split(/\\s+/)\n    .filter((t) => t.length >= 2) // Lowered from 3 to 2\n    .slice(0, 12); // Increased from 8 to 12\n  \n  // Expand with variations\n  if (terms.some(t => t.includes(\"digital\"))) {\n    terms.push(\"digitalisation\", \"digitalization\", \"digital\");\n  }\n\n  const scored = toolsIndex.tools\n    .map((tool: any) => {\n      const title = String(tool.title || \"\").toLowerCase();\n      const description = String(tool.description || \"\").toLowerCase();\n      const explain = String(tool.explain || \"\").toLowerCase();\n      const fullText = `${title} ${description} ${explain}`;\n\n      let score = 0;\n      for (const term of terms) {\n        if (title.includes(term)) score += 5;\n        if (description.includes(term)) score += 2;\n        if (explain.includes(term)) score += 3;\n        const matches = fullText.match(new RegExp(`\\\\b${term}\\\\b`, \"g\"));\n        if (matches) score += matches.length;\n      }\n\n      if (score <= 0) return null;\n\n      const excerpt = tool.explain || tool.description || `Tool: ${tool.title}`;\n      const route = tool.route || `/tools/${tool.id}`;\n\n      return {\n        title: tool.title || \"Tool\",\n        href: route,\n        excerpt: excerpt.slice(0, 300),\n        text: `${tool.description || \"\"}\\n\\n${tool.explain || \"\"}`.trim().slice(0, 1000),\n        kind: \"tool\" as const,\n        score,\n      };\n    })\n    .filter((item): item is EnhancedRetrievalResult => item !== null)\n    .sort((a, b) => b.score - a.score)\n    .slice(0, limit);\n\n  return scored;\n}\n\n/**\n * Enhanced retrieval combining multiple sources\n */\nexport async function enhancedRetrieve(\n  question: string,\n  currentRoute: string | null,\n  limit = 8\n): Promise<EnhancedRetrievalResult[]> {\n  const results: EnhancedRetrievalResult[] = [];\n\n  // 1. Try vector search first (semantic similarity)\n  try {\n    const vectorResults = await retrieveVectorContent(question, currentRoute, limit);\n    for (const match of vectorResults.matches) {\n      // Vector results have: title, href, why, pageTitle, pageRoute, anchor, score\n      const excerpt = match.why || \"\";\n      results.push({\n        title: match.title || match.pageTitle || \"Content\",\n        href: match.href,\n        excerpt,\n        text: excerpt,\n        why: match.why,\n        kind: match.href.includes(\"/tools/\") ? \"tool\" : match.href.includes(\"#\") ? \"section\" : \"page\",\n        score: match.score || 0,\n      });\n    }\n  } catch (err) {\n    console.error(\"[MENTOR] Vector retrieval failed:\", err);\n  }\n\n  // 2. Keyword-based content retrieval\n  const keywordResults = retrieveContent(question, currentRoute, limit);\n  for (const match of keywordResults.matches) {\n    // Avoid duplicates from vector search\n    if (!results.some((r) => r.href === match.href)) {\n      const excerpt = match.why || \"\";\n      results.push({\n        title: match.title,\n        href: match.href,\n        excerpt,\n        text: excerpt,\n        why: match.why,\n        kind: match.href.includes(\"#\") ? \"section\" : \"course\",\n        score: match.score || 0.5,\n      });\n    }\n  }\n\n  // 3. Tool-specific retrieval (if question seems tool-related)\n  const toolKeywords = [\"tool\", \"how to use\", \"how do i\", \"tutorial\", \"guide\", \"playground\", \"lab\", \"workshop\"];\n  const isToolQuestion = toolKeywords.some((kw) => question.toLowerCase().includes(kw));\n  \n  if (isToolQuestion || question.toLowerCase().includes(\"use\")) {\n    const toolResults = retrieveToolInfo(question, 3);\n    for (const tool of toolResults) {\n      if (!results.some((r) => r.href === tool.href)) {\n        results.push(tool);\n      }\n    }\n  }\n\n  // Sort by score and return top results\n  return results\n    .sort((a, b) => b.score - a.score)\n    .slice(0, limit);\n}\n\n","import { AppRouteRouteModule } from \"next/dist/esm/server/route-modules/app-route/module.compiled\";\nimport { RouteKind } from \"next/dist/esm/server/route-kind\";\nimport { patchFetch as _patchFetch } from \"next/dist/esm/server/lib/patch-fetch\";\nimport { addRequestMeta, getRequestMeta } from \"next/dist/esm/server/request-meta\";\nimport { getTracer, SpanKind } from \"next/dist/esm/server/lib/trace/tracer\";\nimport { setReferenceManifestsSingleton } from \"next/dist/esm/server/app-render/encryption-utils\";\nimport { createServerModuleMap } from \"next/dist/esm/server/app-render/action-utils\";\nimport { normalizeAppPath } from \"next/dist/esm/shared/lib/router/utils/app-paths\";\nimport { NodeNextRequest, NodeNextResponse } from \"next/dist/esm/server/base-http/node\";\nimport { NextRequestAdapter, signalFromNodeResponse } from \"next/dist/esm/server/web/spec-extension/adapters/next-request\";\nimport { BaseServerSpan } from \"next/dist/esm/server/lib/trace/constants\";\nimport { getRevalidateReason } from \"next/dist/esm/server/instrumentation/utils\";\nimport { sendResponse } from \"next/dist/esm/server/send-response\";\nimport { fromNodeOutgoingHttpHeaders, toNodeOutgoingHttpHeaders } from \"next/dist/esm/server/web/utils\";\nimport { getCacheControlHeader } from \"next/dist/esm/server/lib/cache-control\";\nimport { INFINITE_CACHE, NEXT_CACHE_TAGS_HEADER } from \"next/dist/esm/lib/constants\";\nimport { NoFallbackError } from \"next/dist/esm/shared/lib/no-fallback-error.external\";\nimport { CachedRouteKind } from \"next/dist/esm/server/response-cache\";\nimport * as userland from \"INNER_APP_ROUTE\";\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new AppRouteRouteModule({\n    definition: {\n        kind: RouteKind.APP_ROUTE,\n        page: \"/api/mentor/query/route\",\n        pathname: \"/api/mentor/query\",\n        filename: \"route\",\n        bundlePath: \"\"\n    },\n    distDir: process.env.__NEXT_RELATIVE_DIST_DIR || '',\n    relativeProjectDir: process.env.__NEXT_RELATIVE_PROJECT_DIR || '',\n    resolvedPagePath: \"[project]/src/app/api/mentor/query/route.ts\",\n    nextConfigOutput,\n    userland\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return _patchFetch({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\nexport { routeModule, workAsyncStorage, workUnitAsyncStorage, serverHooks, patchFetch,  };\nexport async function handler(req, res, ctx) {\n    if (routeModule.isDev) {\n        addRequestMeta(req, 'devRequestTimingInternalsEnd', process.hrtime.bigint());\n    }\n    let srcPage = \"/api/mentor/query/route\";\n    // turbopack doesn't normalize `/index` in the page name\n    // so we need to to process dynamic routes properly\n    // TODO: fix turbopack providing differing value from webpack\n    if (process.env.TURBOPACK) {\n        srcPage = srcPage.replace(/\\/index$/, '') || '/';\n    } else if (srcPage === '/index') {\n        // we always normalize /index specifically\n        srcPage = '/';\n    }\n    const multiZoneDraftMode = process.env.__NEXT_MULTI_ZONE_DRAFT_MODE;\n    const prepareResult = await routeModule.prepare(req, res, {\n        srcPage,\n        multiZoneDraftMode\n    });\n    if (!prepareResult) {\n        res.statusCode = 400;\n        res.end('Bad Request');\n        ctx.waitUntil == null ? void 0 : ctx.waitUntil.call(ctx, Promise.resolve());\n        return null;\n    }\n    const { buildId, params, nextConfig, parsedUrl, isDraftMode, prerenderManifest, routerServerContext, isOnDemandRevalidate, revalidateOnlyGenerated, resolvedPathname, clientReferenceManifest, serverActionsManifest } = prepareResult;\n    const normalizedSrcPage = normalizeAppPath(srcPage);\n    let isIsr = Boolean(prerenderManifest.dynamicRoutes[normalizedSrcPage] || prerenderManifest.routes[resolvedPathname]);\n    const render404 = async ()=>{\n        // TODO: should route-module itself handle rendering the 404\n        if (routerServerContext == null ? void 0 : routerServerContext.render404) {\n            await routerServerContext.render404(req, res, parsedUrl, false);\n        } else {\n            res.end('This page could not be found');\n        }\n        return null;\n    };\n    if (isIsr && !isDraftMode) {\n        const isPrerendered = Boolean(prerenderManifest.routes[resolvedPathname]);\n        const prerenderInfo = prerenderManifest.dynamicRoutes[normalizedSrcPage];\n        if (prerenderInfo) {\n            if (prerenderInfo.fallback === false && !isPrerendered) {\n                if (nextConfig.experimental.adapterPath) {\n                    return await render404();\n                }\n                throw new NoFallbackError();\n            }\n        }\n    }\n    let cacheKey = null;\n    if (isIsr && !routeModule.isDev && !isDraftMode) {\n        cacheKey = resolvedPathname;\n        // ensure /index and / is normalized to one key\n        cacheKey = cacheKey === '/index' ? '/' : cacheKey;\n    }\n    const supportsDynamicResponse = // If we're in development, we always support dynamic HTML\n    routeModule.isDev === true || // If this is not SSG or does not have static paths, then it supports\n    // dynamic HTML.\n    !isIsr;\n    // This is a revalidation request if the request is for a static\n    // page and it is not being resumed from a postponed render and\n    // it is not a dynamic RSC request then it is a revalidation\n    // request.\n    const isStaticGeneration = isIsr && !supportsDynamicResponse;\n    // Before rendering (which initializes component tree modules), we have to\n    // set the reference manifests to our global store so Server Action's\n    // encryption util can access to them at the top level of the page module.\n    if (serverActionsManifest && clientReferenceManifest) {\n        setReferenceManifestsSingleton({\n            page: srcPage,\n            clientReferenceManifest,\n            serverActionsManifest,\n            serverModuleMap: createServerModuleMap({\n                serverActionsManifest\n            })\n        });\n    }\n    const method = req.method || 'GET';\n    const tracer = getTracer();\n    const activeSpan = tracer.getActiveScopeSpan();\n    const context = {\n        params,\n        prerenderManifest,\n        renderOpts: {\n            experimental: {\n                authInterrupts: Boolean(nextConfig.experimental.authInterrupts)\n            },\n            cacheComponents: Boolean(nextConfig.cacheComponents),\n            supportsDynamicResponse,\n            incrementalCache: getRequestMeta(req, 'incrementalCache'),\n            cacheLifeProfiles: nextConfig.cacheLife,\n            waitUntil: ctx.waitUntil,\n            onClose: (cb)=>{\n                res.on('close', cb);\n            },\n            onAfterTaskError: undefined,\n            onInstrumentationRequestError: (error, _request, errorContext)=>routeModule.onRequestError(req, error, errorContext, routerServerContext)\n        },\n        sharedContext: {\n            buildId\n        }\n    };\n    const nodeNextReq = new NodeNextRequest(req);\n    const nodeNextRes = new NodeNextResponse(res);\n    const nextReq = NextRequestAdapter.fromNodeNextRequest(nodeNextReq, signalFromNodeResponse(res));\n    try {\n        const invokeRouteModule = async (span)=>{\n            return routeModule.handle(nextReq, context).finally(()=>{\n                if (!span) return;\n                span.setAttributes({\n                    'http.status_code': res.statusCode,\n                    'next.rsc': false\n                });\n                const rootSpanAttributes = tracer.getRootSpanAttributes();\n                // We were unable to get attributes, probably OTEL is not enabled\n                if (!rootSpanAttributes) {\n                    return;\n                }\n                if (rootSpanAttributes.get('next.span_type') !== BaseServerSpan.handleRequest) {\n                    console.warn(`Unexpected root span type '${rootSpanAttributes.get('next.span_type')}'. Please report this Next.js issue https://github.com/vercel/next.js`);\n                    return;\n                }\n                const route = rootSpanAttributes.get('next.route');\n                if (route) {\n                    const name = `${method} ${route}`;\n                    span.setAttributes({\n                        'next.route': route,\n                        'http.route': route,\n                        'next.span_name': name\n                    });\n                    span.updateName(name);\n                } else {\n                    span.updateName(`${method} ${srcPage}`);\n                }\n            });\n        };\n        const isMinimalMode = Boolean(process.env.MINIMAL_MODE || getRequestMeta(req, 'minimalMode'));\n        const handleResponse = async (currentSpan)=>{\n            var _cacheEntry_value;\n            const responseGenerator = async ({ previousCacheEntry })=>{\n                try {\n                    if (!isMinimalMode && isOnDemandRevalidate && revalidateOnlyGenerated && !previousCacheEntry) {\n                        res.statusCode = 404;\n                        // on-demand revalidate always sets this header\n                        res.setHeader('x-nextjs-cache', 'REVALIDATED');\n                        res.end('This page could not be found');\n                        return null;\n                    }\n                    const response = await invokeRouteModule(currentSpan);\n                    req.fetchMetrics = context.renderOpts.fetchMetrics;\n                    let pendingWaitUntil = context.renderOpts.pendingWaitUntil;\n                    // Attempt using provided waitUntil if available\n                    // if it's not we fallback to sendResponse's handling\n                    if (pendingWaitUntil) {\n                        if (ctx.waitUntil) {\n                            ctx.waitUntil(pendingWaitUntil);\n                            pendingWaitUntil = undefined;\n                        }\n                    }\n                    const cacheTags = context.renderOpts.collectedTags;\n                    // If the request is for a static response, we can cache it so long\n                    // as it's not edge.\n                    if (isIsr) {\n                        const blob = await response.blob();\n                        // Copy the headers from the response.\n                        const headers = toNodeOutgoingHttpHeaders(response.headers);\n                        if (cacheTags) {\n                            headers[NEXT_CACHE_TAGS_HEADER] = cacheTags;\n                        }\n                        if (!headers['content-type'] && blob.type) {\n                            headers['content-type'] = blob.type;\n                        }\n                        const revalidate = typeof context.renderOpts.collectedRevalidate === 'undefined' || context.renderOpts.collectedRevalidate >= INFINITE_CACHE ? false : context.renderOpts.collectedRevalidate;\n                        const expire = typeof context.renderOpts.collectedExpire === 'undefined' || context.renderOpts.collectedExpire >= INFINITE_CACHE ? undefined : context.renderOpts.collectedExpire;\n                        // Create the cache entry for the response.\n                        const cacheEntry = {\n                            value: {\n                                kind: CachedRouteKind.APP_ROUTE,\n                                status: response.status,\n                                body: Buffer.from(await blob.arrayBuffer()),\n                                headers\n                            },\n                            cacheControl: {\n                                revalidate,\n                                expire\n                            }\n                        };\n                        return cacheEntry;\n                    } else {\n                        // send response without caching if not ISR\n                        await sendResponse(nodeNextReq, nodeNextRes, response, context.renderOpts.pendingWaitUntil);\n                        return null;\n                    }\n                } catch (err) {\n                    // if this is a background revalidate we need to report\n                    // the request error here as it won't be bubbled\n                    if (previousCacheEntry == null ? void 0 : previousCacheEntry.isStale) {\n                        await routeModule.onRequestError(req, err, {\n                            routerKind: 'App Router',\n                            routePath: srcPage,\n                            routeType: 'route',\n                            revalidateReason: getRevalidateReason({\n                                isStaticGeneration,\n                                isOnDemandRevalidate\n                            })\n                        }, routerServerContext);\n                    }\n                    throw err;\n                }\n            };\n            const cacheEntry = await routeModule.handleResponse({\n                req,\n                nextConfig,\n                cacheKey,\n                routeKind: RouteKind.APP_ROUTE,\n                isFallback: false,\n                prerenderManifest,\n                isRoutePPREnabled: false,\n                isOnDemandRevalidate,\n                revalidateOnlyGenerated,\n                responseGenerator,\n                waitUntil: ctx.waitUntil,\n                isMinimalMode\n            });\n            // we don't create a cacheEntry for ISR\n            if (!isIsr) {\n                return null;\n            }\n            if ((cacheEntry == null ? void 0 : (_cacheEntry_value = cacheEntry.value) == null ? void 0 : _cacheEntry_value.kind) !== CachedRouteKind.APP_ROUTE) {\n                var _cacheEntry_value1;\n                throw Object.defineProperty(new Error(`Invariant: app-route received invalid cache entry ${cacheEntry == null ? void 0 : (_cacheEntry_value1 = cacheEntry.value) == null ? void 0 : _cacheEntry_value1.kind}`), \"__NEXT_ERROR_CODE\", {\n                    value: \"E701\",\n                    enumerable: false,\n                    configurable: true\n                });\n            }\n            if (!isMinimalMode) {\n                res.setHeader('x-nextjs-cache', isOnDemandRevalidate ? 'REVALIDATED' : cacheEntry.isMiss ? 'MISS' : cacheEntry.isStale ? 'STALE' : 'HIT');\n            }\n            // Draft mode should never be cached\n            if (isDraftMode) {\n                res.setHeader('Cache-Control', 'private, no-cache, no-store, max-age=0, must-revalidate');\n            }\n            const headers = fromNodeOutgoingHttpHeaders(cacheEntry.value.headers);\n            if (!(isMinimalMode && isIsr)) {\n                headers.delete(NEXT_CACHE_TAGS_HEADER);\n            }\n            // If cache control is already set on the response we don't\n            // override it to allow users to customize it via next.config\n            if (cacheEntry.cacheControl && !res.getHeader('Cache-Control') && !headers.get('Cache-Control')) {\n                headers.set('Cache-Control', getCacheControlHeader(cacheEntry.cacheControl));\n            }\n            await sendResponse(nodeNextReq, nodeNextRes, // @ts-expect-error - Argument of type 'Buffer<ArrayBufferLike>' is not assignable to parameter of type 'BodyInit | null | undefined'.\n            new Response(cacheEntry.value.body, {\n                headers,\n                status: cacheEntry.value.status || 200\n            }));\n            return null;\n        };\n        // TODO: activeSpan code path is for when wrapped by\n        // next-server can be removed when this is no longer used\n        if (activeSpan) {\n            await handleResponse(activeSpan);\n        } else {\n            await tracer.withPropagatedContext(req.headers, ()=>tracer.trace(BaseServerSpan.handleRequest, {\n                    spanName: `${method} ${srcPage}`,\n                    kind: SpanKind.SERVER,\n                    attributes: {\n                        'http.method': method,\n                        'http.target': req.url\n                    }\n                }, handleResponse));\n        }\n    } catch (err) {\n        if (!(err instanceof NoFallbackError)) {\n            await routeModule.onRequestError(req, err, {\n                routerKind: 'App Router',\n                routePath: normalizedSrcPage,\n                routeType: 'route',\n                revalidateReason: getRevalidateReason({\n                    isStaticGeneration,\n                    isOnDemandRevalidate\n                })\n            });\n        }\n        // rethrow so that we can handle serving error page\n        // If this is during static generation, throw the error again.\n        if (isIsr) throw err;\n        // Otherwise, send a 500 response.\n        await sendResponse(nodeNextReq, nodeNextRes, new Response(null, {\n            status: 500\n        }));\n        return null;\n    }\n}\n\n//# sourceMappingURL=app-route.js.map\n","import fs from \"node:fs\";\nimport path from \"node:path\";\nimport crypto from \"node:crypto\";\n\nconst MODEL = \"text-embedding-3-small\";\nconst DEFAULT_DIM = 128;\nlet cached: null | {\n  model: string;\n  embeddingDim: number;\n  vectors: Array<{\n    id: string;\n    title: string;\n    route: string;\n    anchor: string;\n    kind: string;\n    embedding: number[];\n  }>;\n} = null;\n\ntype Retrieval = {\n  title: string;\n  href: string;\n  why: string;\n  pageTitle: string;\n  pageRoute: string;\n  anchor: string;\n  score: number;\n};\n\nfunction loadStore() {\n  if (cached) return cached;\n  const p = path.join(process.cwd(), \"data\", \"mentor\", \"embeddings.json\");\n  if (!fs.existsSync(p)) {\n    throw new Error(\"Missing data/mentor/embeddings.json. Run npm run build:mentor-embeddings.\");\n  }\n  const json = JSON.parse(fs.readFileSync(p, \"utf8\"));\n  cached = json;\n  return cached!;\n}\n\nfunction hashEmbedding(text: string, dim: number) {\n  const bytes = crypto.createHash(\"sha256\").update(text).digest();\n  const arr = new Float32Array(dim);\n  for (let i = 0; i < dim; i += 1) {\n    arr[i] = (bytes[i % bytes.length] / 255) * 2 - 1;\n  }\n  return Array.from(arr);\n}\n\nasync function embedQuery(text: string, dim: number) {\n  const key = process.env.OPENAI_API_KEY || \"\";\n  if (!key) return hashEmbedding(text, dim);\n  const res = await fetch(\"https://api.openai.com/v1/embeddings\", {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Authorization: `Bearer ${key}`,\n    },\n    body: JSON.stringify({ input: text, model: MODEL }),\n  });\n  if (!res.ok) return hashEmbedding(text, dim);\n  const json = await res.json();\n  const emb = json?.data?.[0]?.embedding;\n  if (!Array.isArray(emb)) return hashEmbedding(text, dim);\n  return emb.map((v: any) => Number(v));\n}\n\nfunction cosine(a: number[], b: number[]) {\n  let dot = 0;\n  let na = 0;\n  let nb = 0;\n  const len = Math.min(a.length, b.length);\n  for (let i = 0; i < len; i += 1) {\n    dot += a[i] * b[i];\n    na += a[i] * a[i];\n    nb += b[i] * b[i];\n  }\n  if (!na || !nb) return 0;\n  return dot / Math.sqrt(na * nb);\n}\n\nexport async function retrieveVectorContent(question: string, currentRoute: string | null, limit = 6) {\n  const store = loadStore();\n  const dim = store.embeddingDim || DEFAULT_DIM;\n  const queryEmbedding = await embedQuery(question.slice(0, 8000), dim);\n  const tokens = String(question || \"\")\n    .toLowerCase()\n    .replace(/[^a-z0-9\\s]/g, \" \")\n    .split(/\\s+/)\n    .filter(Boolean);\n  const scored = store.vectors.map((v) => {\n    const score = cosine(queryEmbedding, v.embedding);\n    const href = v.anchor ? `${v.route}#${v.anchor}` : v.route;\n    const why = `Relevant ${v.kind} section${v.anchor ? ` (${v.anchor})` : \"\"}`;\n    const hay = `${v.title} ${href}`.toLowerCase();\n    const matchCount = tokens.filter((t) => hay.includes(t)).length;\n    const textBonus = matchCount ? 0.12 + matchCount * 0.08 : 0;\n    const kindBonus = v.kind === \"tool\" ? 0.25 : 0;\n    return {\n      title: v.title,\n      href,\n      why,\n      pageTitle: v.title,\n      pageRoute: v.route,\n      anchor: v.anchor,\n      score: score + textBonus + kindBonus,\n      matchCount,\n    } as Retrieval;\n  });\n  scored.sort((a, b) => b.score - a.score);\n  let top = scored.slice(0, limit);\n  const hasTokenMatch = top.some((m) => tokens.some((t) => m.href.toLowerCase().includes(t)));\n  const bestStudio = scored\n    .filter((m: any) => m.href.includes(\"/studios/\") || (m as any).kind === \"tool\")\n    .sort((a: any, b: any) => (b as any).matchCount - (a as any).matchCount || b.score - a.score)[0];\n  if (!hasTokenMatch) {\n    const candidate = scored.find((m: any) => (m as any).matchCount > 0);\n    if (candidate) {\n      top = [candidate, ...top.filter((m) => m.href !== candidate.href)].slice(0, limit);\n    }\n  }\n  if (bestStudio && !top.find((m) => m.href === bestStudio.href)) {\n    top = [bestStudio, ...top].slice(0, limit);\n  }\n  const weak = top.length === 0 || top[0].score < 0.12;\n  return { matches: top, weak };\n}\n\nexport type VectorRetrieval = ReturnType<typeof retrieveVectorContent>;\n\n","export type ToolRegistryEntry = {\n  id: string;\n  title: string;\n  route: string;\n  anchor?: string;\n  tips: string[];\n};\n\n// Minimal registry for mentor suggestions. This can grow over time.\nexport const toolRegistry: ToolRegistryEntry[] = [\n  {\n    id: \"cyber_game_trust_boundary\",\n    title: \"Spot the trust boundary\",\n    route: \"/cybersecurity/summary\",\n    tips: [\"Pick one real system you use daily\", \"Mark where identity or trust changes\", \"Write the first log you would want at that boundary\"],\n  },\n  {\n    id: \"ai-summary-scenario-triage\",\n    title: \"AI scenario triage\",\n    route: \"/ai/summary\",\n    tips: [\"Name the real system (search, recommendations, moderation, automation)\", \"List the quiet failure mode\", \"Decide the smallest safe change\"],\n  },\n];\n\nexport function findToolSuggestion(query: string) {\n  const q = String(query || \"\").toLowerCase();\n  return toolRegistry.find((t) => t.title.toLowerCase().includes(q) || q.includes(t.id.toLowerCase()));\n}\n\n\n"],"names":[],"mappings":"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","ignoreList":[3]}}]
}