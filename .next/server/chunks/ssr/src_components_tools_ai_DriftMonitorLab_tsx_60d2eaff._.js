;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="3cbdd97d-22ce-c0ab-f4e8-0678aa499534")}catch(e){}}();
module.exports=[374749,a=>{"use strict";var b=a.i(508171),c=a.i(127669),d=a.i(889840),e=a.i(613483),f=a.i(524911),g=a.i(612485),h=a.i(379035),i=a.i(698887),j=a.i(190896),k=a.i(742093),l=a.i(739362),m=a.i(778529),n=a.i(324920),o=a.i(742480);function p(a){if(null==a)return null;if("number"==typeof a&&Number.isFinite(a))return a;let b=Number(String(a).replace(",","."));return Number.isFinite(b)?b:null}function q(a){if(!a.length)return{count:0,mean:0,std:0,min:0,max:0};let b=a.length,c=a.reduce((a,b)=>a+b,0)/b,d=Math.sqrt(b>1?a.reduce((a,b)=>a+(b-c)**2,0)/(b-1):0);return{count:b,mean:c,std:d,min:Math.min(...a),max:Math.max(...a)}}function r(){let[a,r]=(0,c.useState)(null),[s,t]=(0,c.useState)(null),[u,v]=(0,c.useState)(""),[w,x]=(0,c.useState)(""),[y,z]=(0,c.useState)("Upload a baseline CSV and a current CSV with the same columns to begin."),A=(0,c.useCallback)(a=>{let{safeFiles:b,errors:c}=(0,n.validateUpload)(a.target.files,{maxBytes:8388608,allowedExtensions:[".csv"]});c.length&&alert(c.join("\n"));let d=b[0];d&&(z("Parsing baseline CSV…"),f.default.parse(d,{header:!0,skipEmptyLines:!0,dynamicTyping:!0,complete:a=>{let b=a.data;if(!b||0===b.length)return void z("The baseline CSV appears to be empty or malformed.");let c=Object.keys(b[0]);c.length?(r({columns:c,rows:b}),z("Baseline loaded. Now upload the current CSV with the same structure."),u||v(c[0])):z("Could not detect any columns in the baseline CSV.")},error:a=>{z(`Failed to parse baseline CSV: ${a.message}`)}}))},[u]),B=(0,c.useCallback)(a=>{let{safeFiles:b,errors:c}=(0,n.validateUpload)(a.target.files,{maxBytes:8388608,allowedExtensions:[".csv"]});c.length&&alert(c.join("\n"));let d=b[0];d&&(z("Parsing current CSV…"),f.default.parse(d,{header:!0,skipEmptyLines:!0,dynamicTyping:!0,complete:a=>{let b=a.data;if(!b||0===b.length)return void z("The current CSV appears to be empty or malformed.");let c=Object.keys(b[0]);c.length?(t({columns:c,rows:b}),z("Current data loaded. Now choose a feature and optional label to compare."),u||v(c[0])):z("Could not detect any columns in the current CSV.")},error:a=>{z(`Failed to parse current CSV: ${a.message}`)}}))},[u]),C=(0,c.useMemo)(()=>{if(!a||!s)return[];let b=new Set(a.columns);return s.columns.filter(a=>b.has(a))},[a,s]),D=(0,c.useMemo)(()=>{if(!a||!u)return[];let b=[];for(let c of a.rows){let a=p(c[u]);null!==a&&b.push(a)}return b},[a,u]),E=(0,c.useMemo)(()=>{if(!s||!u)return[];let a=[];for(let b of s.rows){let c=p(b[u]);null!==c&&a.push(c)}return a},[s,u]),F=(0,c.useMemo)(()=>q(D),[D]),G=(0,c.useMemo)(()=>q(E),[E]),H=(0,c.useMemo)(()=>(function(a,b){if(0===a.count||0===b.count)return{meanDiff:0,stdDiff:0,driftScore:null};let c=b.mean-a.mean,d=b.std-a.std,e=a.std>0?Math.abs(c)/a.std:null;return{meanDiff:c,stdDiff:d,driftScore:e}})(F,G),[F,G]),I=(0,c.useMemo)(()=>{if(!D.length&&!E.length)return[];let a=[...D,...E].sort((a,b)=>a-b),b=a[0],c=a[a.length-1];if(!Number.isFinite(b)||!Number.isFinite(c)||b===c)return[];let d=(c-b)/10,e=Array(10).fill(0),f=Array(10).fill(0);D.forEach(a=>{let c=Math.min(9,Math.max(0,Math.floor((a-b)/d)));e[c]+=1}),E.forEach(a=>{let c=Math.min(9,Math.max(0,Math.floor((a-b)/d)));f[c]+=1});let g=[];for(let a=0;a<10;a+=1){let c=b+a*d,h=c+d;g.push({bin:`${c.toFixed(1)} - ${h.toFixed(1)}`,baseline:e[a],current:f[a]})}return g},[D,E]),J=(0,c.useMemo)(()=>{if(!a||!s||!w)return{baseline:[],current:[]};let b=new Map,c=new Map;a.rows.forEach(a=>{let c=a[w];if(null==c)return;let d=String(c).trim();d&&b.set(d,(b.get(d)??0)+1)}),s.rows.forEach(a=>{let b=a[w];if(null==b)return;let d=String(b).trim();d&&c.set(d,(c.get(d)??0)+1)});let d=new Set;for(let a of b.keys())d.add(a);for(let a of c.keys())d.add(a);return{baseline:Array.from(d).map(a=>({label:a,count:b.get(a)??0})),current:Array.from(d).map(a=>({label:a,count:c.get(a)??0}))}},[a,s,w]),K=D.length>0&&E.length>0,L=!!(a&&s&&u);return(0,b.jsxs)(m.AiToolCard,{id:"drift-monitor-lab-title",title:"Data drift and monitoring explorer",icon:(0,b.jsx)(d.Activity,{className:"h-4 w-4","aria-hidden":"true"}),description:"Upload baseline and current model data to see how feature distributions and label frequencies have shifted over time.",children:[(0,b.jsx)(o.SecurityBanner,{}),(0,b.jsxs)("div",{className:"grid gap-6 xl:grid-cols-3",children:[(0,b.jsxs)("div",{className:"space-y-4 rounded-2xl border border-slate-100 bg-slate-50/60 p-4 xl:col-span-1",children:[(0,b.jsx)("p",{className:"text-xs font-semibold text-slate-700",children:"Step 1 - Upload baseline and current data"}),(0,b.jsx)("p",{className:"text-sm text-slate-600",children:"Use two CSV files with the same structure. Baseline could be a previous time period, current is the time you want to check for drift. Only your browser sees this data."}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{htmlFor:"baseline-upload",className:"block text-sm font-medium text-slate-700",children:"Baseline CSV"}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)("label",{htmlFor:"baseline-upload",className:"inline-flex cursor-pointer items-center gap-2 rounded-2xl border border-slate-200 bg-white px-3 py-1.5 text-xs font-medium text-slate-700 shadow-sm hover:border-sky-300 hover:text-sky-700",children:[(0,b.jsx)(e.UploadCloud,{className:"h-4 w-4","aria-hidden":"true"}),(0,b.jsx)("span",{children:"Choose file"})]}),(0,b.jsx)("input",{id:"baseline-upload",type:"file",accept:".csv,text/csv",className:"hidden",onChange:A}),(0,b.jsx)("span",{className:"text-sm text-slate-500",children:"CSV only, max 8MB. Processed in-browser."})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{htmlFor:"current-upload",className:"block text-sm font-medium text-slate-700",children:"Current CSV"}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)("label",{htmlFor:"current-upload",className:"inline-flex cursor-pointer items-center gap-2 rounded-2xl border border-slate-200 bg-white px-3 py-1.5 text-xs font-medium text-slate-700 shadow-sm hover:border-sky-300 hover:text-sky-700",children:[(0,b.jsx)(e.UploadCloud,{className:"h-4 w-4","aria-hidden":"true"}),(0,b.jsx)("span",{children:"Choose file"})]}),(0,b.jsx)("input",{id:"current-upload",type:"file",accept:".csv,text/csv",className:"hidden",onChange:B}),(0,b.jsx)("span",{className:"text-sm text-slate-500",children:"Use the same schema as baseline. Max 8MB."})]})]})]}),(0,b.jsxs)("div",{className:"space-y-3 pt-2",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{htmlFor:"feature-column",className:"block text-sm font-medium text-slate-700",children:"Numeric feature to compare"}),(0,b.jsxs)("select",{id:"feature-column",value:u,onChange:a=>v(a.target.value),className:"w-full rounded-2xl border border-slate-200 bg-white px-3 py-1.5 text-xs text-slate-800 focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200",children:[(0,b.jsx)("option",{value:"",children:"Select feature column"}),C.map(a=>(0,b.jsx)("option",{value:a,children:a},a))]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{htmlFor:"label-column",className:"block text-sm font-medium text-slate-700",children:"Optional label column"}),(0,b.jsxs)("select",{id:"label-column",value:w,onChange:a=>x(a.target.value),className:"w-full rounded-2xl border border-slate-200 bg-white px-3 py-1.5 text-xs text-slate-800 focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200",children:[(0,b.jsx)("option",{value:"",children:"No label column"}),C.map(a=>(0,b.jsx)("option",{value:a,children:a},a))]}),(0,b.jsx)("p",{className:"text-sm text-slate-500",children:"If you pick a label column, the lab will also compare how label frequencies have shifted between baseline and current."})]})]}),(0,b.jsx)("p",{className:"text-sm text-slate-500",children:y})]}),(0,b.jsxs)("div",{className:"space-y-4 rounded-2xl border border-slate-100 bg-slate-50/60 p-4 xl:col-span-1",children:[(0,b.jsx)("p",{className:"text-xs font-semibold text-slate-700",children:"Step 2 - Inspect feature drift"}),(0,b.jsx)("p",{className:"text-sm text-slate-600",children:"Compare how the distribution of the chosen feature has changed between baseline and current. This is often one of the first signs that a model may be receiving different inputs than it was trained on."}),(0,b.jsxs)("div",{className:"rounded-2xl border border-slate-200 bg-white p-3 text-sm text-slate-700",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-semibold text-slate-900",children:"Baseline"}),(0,b.jsxs)("p",{children:["Count: ",F.count]}),(0,b.jsxs)("p",{children:["Mean: ",F.mean.toFixed(3)]}),(0,b.jsxs)("p",{children:["Std dev: ",F.std.toFixed(3)]}),(0,b.jsxs)("p",{children:["Min: ",F.min.toFixed(3)]}),(0,b.jsxs)("p",{children:["Max: ",F.max.toFixed(3)]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-semibold text-slate-900",children:"Current"}),(0,b.jsxs)("p",{children:["Count: ",G.count]}),(0,b.jsxs)("p",{children:["Mean: ",G.mean.toFixed(3)]}),(0,b.jsxs)("p",{children:["Std dev: ",G.std.toFixed(3)]}),(0,b.jsxs)("p",{children:["Min: ",G.min.toFixed(3)]}),(0,b.jsxs)("p",{children:["Max: ",G.max.toFixed(3)]})]})]}),(0,b.jsxs)("div",{className:"mt-2 text-sm text-slate-600",children:[(0,b.jsx)("p",{children:"Drift score is calculated as the absolute difference in means divided by the baseline standard deviation. This is similar to a simple effect size measure and gives a rough sense of how large the shift is relative to baseline variability."}),null!==H.driftScore&&(0,b.jsxs)("p",{className:"mt-1",children:["Drift score:"," ",(0,b.jsx)("span",{className:"font-semibold text-slate-900",children:H.driftScore.toFixed(3)})," ","(higher values indicate larger mean shifts)."]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-slate-700",children:"Distribution comparison"}),(0,b.jsx)("div",{className:"h-44 rounded-2xl border border-slate-200 bg-white px-3 py-2",children:L&&I.length>0&&K?(0,b.jsx)(i.ResponsiveContainer,{width:"100%",height:"100%",children:(0,b.jsxs)(h.BarChart,{data:I,children:[(0,b.jsx)(k.XAxis,{dataKey:"bin",tick:{fontSize:9},interval:0}),(0,b.jsx)(l.YAxis,{tick:{fontSize:9}}),(0,b.jsx)(j.Tooltip,{contentStyle:{fontSize:10,borderRadius:12,padding:8}}),(0,b.jsx)(g.Bar,{dataKey:"baseline",fill:"#0f766e",name:"Baseline",radius:[8,8,0,0]}),(0,b.jsx)(g.Bar,{dataKey:"current",fill:"#6366f1",name:"Current",radius:[8,8,0,0]})]})}):(0,b.jsx)("p",{className:"text-sm text-slate-500",children:"Once both datasets are loaded and a numeric feature is selected the chart will show how the feature distribution has changed across ten bins."})})]})]}),(0,b.jsxs)("div",{className:"space-y-4 rounded-2xl border border-slate-100 bg-slate-50/60 p-4 xl:col-span-1",children:[(0,b.jsx)("p",{className:"text-xs font-semibold text-slate-700",children:"Step 3 - Optional label drift"}),(0,b.jsx)("p",{className:"text-sm text-slate-600",children:"If you have a label column such as fraud, churn, complaint type or incident severity you can see how the distribution of labels has changed between baseline and current periods."}),(0,b.jsx)("div",{className:"h-44 rounded-2xl border border-slate-200 bg-white px-3 py-2",children:w&&J.baseline.length>0?(0,b.jsx)(i.ResponsiveContainer,{width:"100%",height:"100%",children:(0,b.jsxs)(h.BarChart,{data:J.baseline.map(a=>{let b=J.current.find(b=>b.label===a.label)??null;return{label:a.label,baseline:a.count,current:b?.count??0}}),children:[(0,b.jsx)(k.XAxis,{dataKey:"label",tick:{fontSize:9},interval:0}),(0,b.jsx)(l.YAxis,{tick:{fontSize:9}}),(0,b.jsx)(j.Tooltip,{contentStyle:{fontSize:10,borderRadius:12,padding:8}}),(0,b.jsx)(g.Bar,{dataKey:"baseline",fill:"#0f766e",name:"Baseline",radius:[8,8,0,0]}),(0,b.jsx)(g.Bar,{dataKey:"current",fill:"#f97316",name:"Current",radius:[8,8,0,0]})]})}):(0,b.jsx)("p",{className:"text-sm text-slate-500",children:"Select a label column to see how label frequencies have shifted. This is useful for spotting changes in the underlying population, such as more fraud cases or more high risk customers."})}),(0,b.jsxs)("div",{className:"rounded-2xl border border-slate-200 bg-white p-3 text-sm text-slate-700 space-y-1",children:[(0,b.jsx)("p",{className:"font-semibold text-slate-900",children:"Reasoning about drift"}),(0,b.jsx)("p",{children:"Use the feature stats and histograms to decide whether the model is seeing meaningfully different inputs than when it was trained. Large shifts in key features can explain performance drops and may require retraining, recalibration or tighter monitoring."}),(0,b.jsx)("p",{children:"Label drift can indicate that the real world has changed. For example, if the proportion of fraud cases doubles, a stable model may still look worse if you only watch accuracy. Combining both feature drift and label drift gives a more complete view of what is happening."}),(0,b.jsx)("p",{className:"text-slate-500",children:"This lab is not a full production monitoring stack. It is a practical way for you to upload real data and build an intuitive feel for drift before you invest in heavier infrastructure."})]})]})]})]})}a.s(["DriftMonitorLab",()=>r])},423861,a=>{a.n(a.i(374749))}];

//# debugId=3cbdd97d-22ce-c0ab-f4e8-0678aa499534
//# sourceMappingURL=src_components_tools_ai_DriftMonitorLab_tsx_60d2eaff._.js.map