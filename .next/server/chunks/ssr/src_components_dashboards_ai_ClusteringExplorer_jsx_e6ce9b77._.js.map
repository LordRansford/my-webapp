{
  "version": 3,
  "sources": [],
  "debugId": "d0ff2a3b-a7d1-cfed-72b5-90c62e276f63",
  "sections": [
    {"offset": {"line": 1, "column": 0}, "map": {"version":3,"sources":["../../../../src/components/dashboards/ai/ClusteringExplorer.jsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useMemo, useState } from \"react\";\n\nconst points = [\n  { x: 1, y: 1 },\n  { x: 1.2, y: 1.5 },\n  { x: 3, y: 3.2 },\n  { x: 3.5, y: 3.8 },\n  { x: 5, y: 1.2 },\n  { x: 4.5, y: 1.7 },\n];\n\nfunction randomCentroids(k) {\n  return Array.from({ length: k }, (_, i) => ({\n    x: 1 + i * 1.2,\n    y: 1 + (k - i) * 0.8,\n  }));\n}\n\nfunction assign(points, centroids) {\n  return points.map((p) => {\n    let best = 0;\n    let bestDist = Infinity;\n    centroids.forEach((c, idx) => {\n      const d = (p.x - c.x) ** 2 + (p.y - c.y) ** 2;\n      if (d < bestDist) {\n        bestDist = d;\n        best = idx;\n      }\n    });\n    return best;\n  });\n}\n\nfunction recompute(points, assigns, k) {\n  return Array.from({ length: k }, (_, idx) => {\n    const pts = points.filter((_, i) => assigns[i] === idx);\n    if (!pts.length) return { x: 0, y: 0 };\n    return {\n      x: pts.reduce((a, p) => a + p.x, 0) / pts.length,\n      y: pts.reduce((a, p) => a + p.y, 0) / pts.length,\n    };\n  });\n}\n\nexport default function ClusteringExplorer() {\n  const [k, setK] = useState(2);\n  const [centroids, setCentroids] = useState(() => randomCentroids(2));\n  const assignments = useMemo(() => assign(points, centroids), [centroids]);\n\n  useEffect(() => {\n    // run two light iterations when k changes\n    const init = randomCentroids(k);\n    let assigns = assign(points, init);\n    let cents = recompute(points, assigns, k);\n    assigns = assign(points, cents);\n    setCentroids(cents);\n  }, [k]);\n\n  const avgDist = useMemo(() => {\n    const dists = points.map((p, idx) => {\n      const c = centroids[assignments[idx]] || { x: 0, y: 0 };\n      return Math.sqrt((p.x - c.x) ** 2 + (p.y - c.y) ** 2);\n    });\n    const mean = dists.reduce((a, b) => a + b, 0) / dists.length;\n    return mean.toFixed(2);\n  }, [assignments, centroids]);\n\n  return (\n    <div className=\"rounded-2xl border border-slate-200 bg-white p-4 shadow-sm\">\n      <div className=\"flex items-center justify-between\">\n        <label className=\"text-sm text-slate-700\">\n          <span className=\"font-semibold text-slate-900\">Clusters (k)</span>\n          <input\n            type=\"range\"\n            min=\"2\"\n            max=\"5\"\n            value={k}\n            onChange={(e) => setK(Number(e.target.value))}\n            className=\"ml-2 align-middle accent-blue-600\"\n          />\n          <span className=\"ml-2 text-xs text-slate-600\">{k}</span>\n        </label>\n        <p className=\"text-xs text-slate-700\">Avg distance: {avgDist}</p>\n      </div>\n\n      <div className=\"relative mt-3 h-48 rounded-xl bg-gradient-to-br from-slate-50 to-slate-100\">\n        {points.map((p, idx) => {\n          const cluster = assignments[idx] ?? 0;\n          const colors = [\"bg-blue-500\", \"bg-emerald-500\", \"bg-amber-500\", \"bg-rose-500\", \"bg-violet-500\"];\n          return (\n            <div\n              key={idx}\n              className={`absolute h-3 w-3 -translate-x-1/2 -translate-y-1/2 rounded-full shadow-sm ${colors[cluster]}`}\n              style={{ left: `${(p.x / 6) * 100}%`, top: `${100 - (p.y / 5) * 100}%` }}\n              title={`Cluster ${cluster + 1}`}\n            />\n          );\n        })}\n        {centroids.map((c, idx) => (\n          <div\n            key={idx}\n            className=\"absolute h-4 w-4 -translate-x-1/2 -translate-y-1/2 rounded-full border-2 border-white bg-black/70\"\n            style={{ left: `${(c.x / 6) * 100}%`, top: `${100 - (c.y / 5) * 100}%` }}\n            title={`Centroid ${idx + 1}`}\n          />\n        ))}\n      </div>\n      <p className=\"mt-2 text-xs text-slate-700\">\n        Increase k to see clusters split; watch average distance to judge if extra clusters add clarity.\n      </p>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}