{
  "version": 3,
  "sources": [],
  "debugId": "91db4181-c90c-f266-8e77-3ba0ca86bdce",
  "sections": [
    {"offset": {"line": 1, "column": 0}, "map": {"version":3,"sources":["../../../../src/components/dashboards/ai/EmbeddingVisualizer.jsx"],"sourcesContent":["\"use client\";\n\nimport { useMemo, useState } from \"react\";\n\nconst corpus = [\n  { text: \"How to reset password\", vec: [0.9, 0.1, 0.2] },\n  { text: \"Account security tips\", vec: [0.8, 0.2, 0.3] },\n  { text: \"Refund policy details\", vec: [0.1, 0.9, 0.1] },\n  { text: \"Shipping times\", vec: [0.2, 0.8, 0.2] },\n  { text: \"Two factor setup\", vec: [0.85, 0.15, 0.25] },\n];\n\nfunction cosine(a, b) {\n  const dot = a.reduce((s, v, i) => s + v * b[i], 0);\n  const na = Math.sqrt(a.reduce((s, v) => s + v * v, 0)) || 1;\n  const nb = Math.sqrt(b.reduce((s, v) => s + v * v, 0)) || 1;\n  return dot / (na * nb);\n}\n\nexport default function EmbeddingVisualizer() {\n  const [queryIdx, setQueryIdx] = useState(0);\n\n  const neighbors = useMemo(() => {\n    const q = corpus[queryIdx];\n    return corpus\n      .map((c, idx) => ({ ...c, idx, score: cosine(q.vec, c.vec) }))\n      .sort((a, b) => b.score - a.score);\n  }, [queryIdx]);\n\n  return (\n    <div className=\"rounded-2xl border border-slate-200 bg-white p-4 shadow-sm\">\n      <label className=\"text-sm text-slate-700\">\n        <span className=\"font-semibold text-slate-900\">Example text</span>\n        <select\n          value={queryIdx}\n          onChange={(e) => setQueryIdx(Number(e.target.value))}\n          className=\"ml-2 rounded-lg border border-slate-200 bg-slate-50 px-2 py-1 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-100\"\n        >\n          {corpus.map((c, idx) => (\n            <option key={idx} value={idx}>\n              {c.text}\n            </option>\n          ))}\n        </select>\n      </label>\n\n      <div className=\"mt-3 grid gap-2\">\n        {neighbors.map((n) => (\n          <div\n            key={n.idx}\n            className={`flex items-center justify-between rounded-xl border px-3 py-2 text-sm ${\n              n.idx === queryIdx ? \"border-blue-200 bg-blue-50 text-blue-900\" : \"border-slate-200 bg-slate-50 text-slate-800\"\n            }`}\n          >\n            <span>{n.text}</span>\n            <span className=\"text-xs font-semibold text-slate-700\">sim {n.score.toFixed(2)}</span>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"0DAEA,EAAA,EAAA,CAAA,CAAA,QAEA,IAAM,EAAS,CACb,CAAE,KAAM,wBAAyB,IAAK,CAAC,GAAK,GAAK,GAAI,AAAC,EACtD,CAAE,KAAM,wBAAyB,IAAK,CAAC,GAAK,GAAK,GAAI,AAAC,EACtD,CAAE,KAAM,wBAAyB,IAAK,CAAC,GAAK,GAAK,GAAI,AAAC,EACtD,CAAE,KAAM,iBAAkB,IAAK,CAAC,GAAK,GAAK,GAAI,AAAC,EAC/C,CAAE,KAAM,mBAAoB,IAAK,CAAC,IAAM,IAAM,IAAK,AAAC,EACrD,CASc,SAAS,IACtB,GAAM,CAAC,EAAU,EAAY,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,GAEnC,EAAY,CAAA,EAAA,EAAA,OAAO,AAAP,EAAQ,KACxB,IAAM,EAAI,CAAM,CAAC,EAAS,CAC1B,OAAO,EACJ,GAAG,CAAC,CAAC,EAAG,MAAQ,mBAAC,CAAE,GAAG,CAAC,CAAE,MAAK,KAAA,EAbrB,AAa4B,CAb3B,CAakC,EAAE,GAAG,CAbrC,CAAC,CAasC,EAAE,GAAG,CAZvD,EAAM,EAAE,MAAM,CAAC,CAAC,EAAG,EAAG,IAAM,EAAI,EAAI,CAAC,CAAC,EAAE,CAAE,GAGzC,GAAO,CAFH,EAEE,EAAM,CAFH,IAAI,CAAC,EAAE,MAAM,CAAC,CAAC,EAAG,IAAM,EAAI,EAAI,EAAG,MAAO,GAC/C,KAAK,IAAI,CAAC,EAAE,MAAM,CAAC,CAAC,EAAG,IAAM,EAAI,EAAI,EAAG,MAAO,CACvC,CAAE,CAS0C,CAAC,GAC3D,IAAI,CAAC,CAAC,EAAG,IAAM,EAAE,KAAK,CAAG,EAAE,KAAK,CACrC,EAAG,CAAC,EAAS,EAEb,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,uEACb,CAAA,EAAA,EAAA,IAAA,EAAC,QAAA,CAAM,UAAU,mCACf,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,wCAA+B,iBAC/C,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,MAAO,EACP,SAAU,AAAC,GAAM,EAAY,OAAO,EAAE,MAAM,CAAC,KAAK,GAClD,UAAU,2JAET,EAAO,GAAG,CAAC,CAAC,EAAG,IACd,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAiB,MAAO,WACtB,EAAE,IAAI,EADI,SAOnB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,2BACZ,EAAU,GAAG,CAAC,AAAC,GACd,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAEC,UAAW,CAAC,sEAAsE,EAChF,EAAE,GAAG,GAAK,EAAW,2CAA6C,8CAAA,CAClE,WAEF,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,UAAM,EAAE,IAAI,GACb,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,UAAU,iDAAuC,OAAK,EAAE,KAAK,CAAC,OAAO,CAAC,QANvE,EAAE,GAAG,OAYtB"}}]
}