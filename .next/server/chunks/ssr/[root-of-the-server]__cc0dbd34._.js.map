{
  "version": 3,
  "sources": [],
  "debugId": "a30f98e1-04c5-0480-1348-9e3da42d914f",
  "sections": [
    {"offset": {"line": 1, "column": 0}, "map": {"version":3,"sources":["../../../../src/lib/ai-studio/projects/store.ts","../../../../src/lib/ai-studio/examples/index.ts","../../../../src/lib/ai-studio/projects/export.ts","../../../../src/lib/ai-studio/projects/run.ts"],"sourcesContent":["/**\n * AI Studio Projects (local-first)\n *\n * This store makes \"Load example\" produce a real artefact:\n * - a persisted project record in localStorage\n * - a stable project ID that the UI can re-open\n *\n * It is intentionally conservative: it stores only non-sensitive configuration.\n */\n\nimport type { AIStudioExample } from \"@/lib/ai-studio/examples/types\";\nimport type { UnifiedRunReceipt } from \"@/lib/compute/receipts\";\n\nexport type AIStudioRunReceipt = UnifiedRunReceipt;\n\nexport type AIStudioProject = {\n  id: string;\n  title: string;\n  exampleId: string;\n  audience: AIStudioExample[\"audience\"];\n  difficulty: AIStudioExample[\"difficulty\"];\n  category: AIStudioExample[\"category\"];\n  createdAt: string;\n  updatedAt: string;\n  config: AIStudioExample[\"config\"];\n  runs?: Array<{\n    ranAt: string;\n    input?: unknown;\n    output: unknown;\n    receipt?: AIStudioRunReceipt;\n  }>;\n  lastRun?: {\n    ranAt: string;\n    input?: unknown;\n    output: unknown;\n    receipt?: AIStudioRunReceipt;\n  };\n};\n\nconst STORAGE_KEY = \"ai-studio-projects:v1\";\nconst LAST_OPENED_KEY = \"ai-studio-last-opened-project-id:v1\";\n\nfunction isClient() {\n  return typeof window !== \"undefined\" && typeof window.localStorage !== \"undefined\";\n}\n\nfunction safeParse<T>(raw: string | null): T | null {\n  if (!raw) return null;\n  try {\n    return JSON.parse(raw) as T;\n  } catch {\n    return null;\n  }\n}\n\nfunction nowIso() {\n  return new Date().toISOString();\n}\n\nfunction newId() {\n  // Avoid importing crypto in the browser bundle; use a simple stable ID.\n  return `p_${Math.random().toString(16).slice(2)}_${Date.now().toString(16)}`;\n}\n\nexport function getProjects(): AIStudioProject[] {\n  if (!isClient()) return [];\n  const parsed = safeParse<AIStudioProject[]>(localStorage.getItem(STORAGE_KEY));\n  if (!Array.isArray(parsed)) return [];\n\n  // Lightweight migration:\n  // - tolerate older lastRun shape (without receipt)\n  // - ensure runs[] exists if lastRun exists\n  return parsed.map((p) => {\n    if (!p || typeof p !== \"object\") return p;\n\n    const anyP: any = p as any;\n    const lastRun: any = anyP.lastRun;\n    const runs: any = anyP.runs;\n\n    let normalisedLastRun: AIStudioProject[\"lastRun\"] | undefined = undefined;\n    if (lastRun && typeof lastRun === \"object\") {\n      normalisedLastRun = {\n        ranAt: typeof lastRun.ranAt === \"string\" ? lastRun.ranAt : nowIso(),\n        input: lastRun.input,\n        output: lastRun.output,\n        receipt: lastRun.receipt,\n      };\n    }\n\n    const normalisedRuns =\n      Array.isArray(runs) && runs.length > 0\n        ? runs\n        : normalisedLastRun\n          ? [normalisedLastRun]\n          : undefined;\n\n    return {\n      ...(p as AIStudioProject),\n      lastRun: normalisedLastRun,\n      runs: normalisedRuns,\n    };\n  });\n}\n\nexport function saveProjects(projects: AIStudioProject[]) {\n  if (!isClient()) return;\n  localStorage.setItem(STORAGE_KEY, JSON.stringify(projects.slice(0, 200)));\n}\n\nexport function createProjectFromExample(example: AIStudioExample): AIStudioProject {\n  const projects = getProjects();\n  const createdAt = nowIso();\n  const project: AIStudioProject = {\n    id: newId(),\n    title: example.title,\n    exampleId: example.id,\n    audience: example.audience,\n    difficulty: example.difficulty,\n    category: example.category,\n    createdAt,\n    updatedAt: createdAt,\n    config: example.config,\n  };\n  saveProjects([project, ...projects]);\n  return project;\n}\n\nexport function getProjectById(projectId: string): AIStudioProject | null {\n  const projects = getProjects();\n  return projects.find((p) => p.id === projectId) || null;\n}\n\nexport function setLastOpenedProjectId(projectId: string) {\n  if (!isClient()) return;\n  localStorage.setItem(LAST_OPENED_KEY, projectId);\n}\n\nexport function getLastOpenedProjectId(): string | null {\n  if (!isClient()) return null;\n  return localStorage.getItem(LAST_OPENED_KEY);\n}\n\nexport function updateProjectLastRun(projectId: string, output: unknown) {\n  const projects = getProjects();\n  const idx = projects.findIndex((p) => p.id === projectId);\n  if (idx < 0) return;\n  const updated: AIStudioProject = {\n    ...projects[idx],\n    updatedAt: nowIso(),\n    lastRun: { ranAt: nowIso(), output },\n  };\n  const next = [...projects];\n  next[idx] = updated;\n  saveProjects(next);\n}\n\nexport function updateProjectRun(projectId: string, params: { input?: unknown; output: unknown; receipt?: AIStudioRunReceipt }) {\n  const projects = getProjects();\n  const idx = projects.findIndex((p) => p.id === projectId);\n  if (idx < 0) return;\n  const runEntry = { ranAt: nowIso(), input: params.input, output: params.output, receipt: params.receipt };\n  const existingRuns = Array.isArray(projects[idx].runs) ? projects[idx].runs! : projects[idx].lastRun ? [projects[idx].lastRun] : [];\n  const nextRuns = [runEntry, ...existingRuns].slice(0, 30);\n  const updated: AIStudioProject = {\n    ...projects[idx],\n    updatedAt: nowIso(),\n    runs: nextRuns,\n    lastRun: runEntry,\n  };\n  const next = [...projects];\n  next[idx] = updated;\n  saveProjects(next);\n}\n\nexport function deleteProject(projectId: string) {\n  const projects = getProjects();\n  const next = projects.filter((p) => p.id !== projectId);\n  saveProjects(next);\n  const last = getLastOpenedProjectId();\n  if (last === projectId && isClient()) {\n    localStorage.removeItem(LAST_OPENED_KEY);\n  }\n}\n\nexport function importProject(raw: unknown): { ok: true; project: AIStudioProject } | { ok: false; error: string } {\n  if (!raw || typeof raw !== \"object\") return { ok: false, error: \"Invalid project file.\" };\n  const p = raw as any;\n  if (typeof p.title !== \"string\" || typeof p.exampleId !== \"string\") return { ok: false, error: \"Missing required project fields.\" };\n\n  // Sanitize and avoid ID collisions.\n  const projects = getProjects();\n  const incomingId = typeof p.id === \"string\" ? p.id : newId();\n  const exists = projects.some((x) => x.id === incomingId);\n  const id = exists ? newId() : incomingId;\n\n  const createdAt = typeof p.createdAt === \"string\" ? p.createdAt : nowIso();\n  const updatedAt = typeof p.updatedAt === \"string\" ? p.updatedAt : nowIso();\n\n  const project: AIStudioProject = {\n    id,\n    title: String(p.title).slice(0, 120),\n    exampleId: String(p.exampleId).slice(0, 80),\n    audience: (p.audience || \"all\") as any,\n    difficulty: (p.difficulty || \"beginner\") as any,\n    category: String(p.category || \"unknown\").slice(0, 80),\n    createdAt,\n    updatedAt,\n    config: (p.config || {}) as any,\n    lastRun: p.lastRun && typeof p.lastRun === \"object\" ? (p.lastRun as any) : undefined,\n  };\n\n  saveProjects([project, ...projects]);\n  return { ok: true, project };\n}\n\n","import { AIStudioExample } from \"./types\";\n\nexport const examples: AIStudioExample[] = [\n  // Children Examples\n  {\n    id: \"story-generator\",\n    title: \"Story Generator\",\n    description: \"Create fun, creative stories with AI. Perfect for sparking imagination!\",\n    audience: \"children\",\n    difficulty: \"beginner\",\n    category: \"text-generation\",\n    useCase: \"Creative Writing\",\n    estimatedCredits: 5,\n    estimatedTime: \"15 minutes\",\n    prerequisites: [],\n    config: {\n      model: {\n        type: \"generation\",\n        architecture: \"gpt-3.5-turbo\",\n        parameters: {\n          temperature: 0.8,\n          maxTokens: 500,\n        },\n      },\n      training: {\n        epochs: 0, // Uses pre-trained model\n        batchSize: 1,\n      },\n    },\n    tutorial: [\n      {\n        step: 1,\n        title: \"Choose a story prompt\",\n        description: \"Pick a topic like 'space adventure' or 'magical forest'\",\n        action: \"Select a prompt from the examples\",\n      },\n      {\n        step: 2,\n        title: \"Generate your story\",\n        description: \"Click generate and watch the AI create a story for you!\",\n        action: \"Click the Generate button\",\n      },\n      {\n        step: 3,\n        title: \"Customize and save\",\n        description: \"Edit the story, add your own ideas, and save it\",\n        action: \"Edit and save your story\",\n      },\n    ],\n    preview: {\n      input: \"A brave robot exploring a new planet\",\n      output: \"Once upon a time, a brave robot named R2-D5 discovered a beautiful new planet filled with colorful crystals...\",\n      explanation: \"The AI creates a creative story based on your prompt, using safe, age-appropriate content.\",\n    },\n  },\n  {\n    id: \"drawing-classifier\",\n    title: \"Drawing Classifier\",\n    description: \"Draw pictures and let AI guess what you drew!\",\n    audience: \"children\",\n    difficulty: \"beginner\",\n    category: \"image-classification\",\n    useCase: \"Fun Learning\",\n    estimatedCredits: 10,\n    estimatedTime: \"20 minutes\",\n    prerequisites: [],\n    config: {\n      model: {\n        type: \"classification\",\n        architecture: \"mobilenet-v2\",\n        parameters: {},\n      },\n      training: {\n        epochs: 0,\n        batchSize: 1,\n      },\n    },\n    tutorial: [\n      {\n        step: 1,\n        title: \"Draw a picture\",\n        description: \"Use the drawing tool to create a picture\",\n        action: \"Draw something simple like a cat or a house\",\n      },\n      {\n        step: 2,\n        title: \"Let AI guess\",\n        description: \"The AI will try to identify what you drew\",\n        action: \"Click 'Classify' to see the results\",\n      },\n      {\n        step: 3,\n        title: \"Try again!\",\n        description: \"Draw different things and see how well the AI does\",\n        action: \"Draw more pictures and test the AI\",\n      },\n    ],\n    preview: {\n      input: \"A drawing of a cat\",\n      output: \"I think this is a cat! (85% confidence)\",\n      explanation: \"The AI analyzes your drawing and tries to identify what it is.\",\n    },\n  },\n\n  // Student Examples\n  {\n    id: \"homework-helper\",\n    title: \"Homework Helper\",\n    description: \"Get help understanding concepts and solving problems step-by-step\",\n    audience: \"student\",\n    difficulty: \"beginner\",\n    category: \"education\",\n    useCase: \"Learning Support\",\n    estimatedCredits: 15,\n    estimatedTime: \"30 minutes\",\n    prerequisites: [\"Basic understanding of the subject\"],\n    config: {\n      model: {\n        type: \"generation\",\n        architecture: \"gpt-4\",\n        parameters: {\n          temperature: 0.3,\n          maxTokens: 1000,\n        },\n      },\n      training: {\n        epochs: 0,\n        batchSize: 1,\n      },\n    },\n    tutorial: [\n      {\n        step: 1,\n        title: \"Enter your question\",\n        description: \"Type in a homework question or concept you need help with\",\n        action: \"Enter your question in the input field\",\n      },\n      {\n        step: 2,\n        title: \"Get step-by-step help\",\n        description: \"The AI will break down the problem and explain each step\",\n        action: \"Review the explanation provided\",\n      },\n      {\n        step: 3,\n        title: \"Practice and verify\",\n        description: \"Try similar problems to reinforce your understanding\",\n        action: \"Use the practice mode to test yourself\",\n      },\n    ],\n    preview: {\n      input: \"How do I solve 2x + 5 = 15?\",\n      output: \"Step 1: Subtract 5 from both sides... Step 2: Divide by 2... Answer: x = 5\",\n      explanation: \"The AI provides step-by-step explanations to help you learn, not just get answers.\",\n    },\n  },\n  {\n    id: \"notes-summarizer\",\n    title: \"Study Notes Summarizer\",\n    description: \"Summarize long notes and create study guides automatically\",\n    audience: \"student\",\n    difficulty: \"intermediate\",\n    category: \"text-processing\",\n    useCase: \"Study Tools\",\n    estimatedCredits: 20,\n    estimatedTime: \"25 minutes\",\n    prerequisites: [\"Have notes to summarize\"],\n    config: {\n      model: {\n        type: \"generation\",\n        architecture: \"gpt-3.5-turbo\",\n        parameters: {\n          temperature: 0.2,\n          maxTokens: 800,\n        },\n      },\n      training: {\n        epochs: 0,\n        batchSize: 1,\n      },\n    },\n    tutorial: [\n      {\n        step: 1,\n        title: \"Upload your notes\",\n        description: \"Paste or upload your study notes\",\n        action: \"Upload or paste your notes\",\n      },\n      {\n        step: 2,\n        title: \"Generate summary\",\n        description: \"The AI will create a concise summary with key points\",\n        action: \"Click 'Summarize' to generate\",\n      },\n      {\n        step: 3,\n        title: \"Create study guide\",\n        description: \"Export as flashcards or quiz questions\",\n        action: \"Export in your preferred format\",\n      },\n    ],\n    preview: {\n      input: \"Long lecture notes about photosynthesis...\",\n      output: \"Key Points: 1. Photosynthesis converts light to energy...\",\n      explanation: \"The AI extracts the most important information and presents it clearly.\",\n    },\n  },\n\n  // Professional Examples\n  {\n    id: \"customer-support-bot\",\n    title: \"Customer Support Bot\",\n    description: \"Build an AI assistant to handle common customer inquiries\",\n    audience: \"professional\",\n    difficulty: \"intermediate\",\n    category: \"conversational-ai\",\n    useCase: \"Customer Service\",\n    estimatedCredits: 100,\n    estimatedTime: \"2 hours\",\n    prerequisites: [\"Customer support data\", \"Knowledge base\"],\n    config: {\n      model: {\n        type: \"generation\",\n        architecture: \"gpt-4\",\n        parameters: {\n          temperature: 0.5,\n          maxTokens: 500,\n        },\n      },\n      training: {\n        epochs: 10,\n        batchSize: 16,\n      },\n      deployment: {\n        platform: \"api\",\n        endpoint: \"/api/support\",\n      },\n    },\n    tutorial: [\n      {\n        step: 1,\n        title: \"Prepare your data\",\n        description: \"Upload FAQ documents and support ticket history\",\n        action: \"Upload your support data\",\n      },\n      {\n        step: 2,\n        title: \"Train the model\",\n        description: \"Train on your specific support scenarios\",\n        action: \"Start training with your data\",\n      },\n      {\n        step: 3,\n        title: \"Test and deploy\",\n        description: \"Test with sample queries, then deploy to production\",\n        action: \"Test and deploy your bot\",\n      },\n    ],\n    preview: {\n      input: \"How do I return an item?\",\n      output: \"To return an item, please follow these steps: 1. Log into your account...\",\n      explanation: \"The bot provides accurate, helpful responses based on your knowledge base.\",\n    },\n  },\n  {\n    id: \"document-analyzer\",\n    title: \"Document Analyzer\",\n    description: \"Extract insights and summarize business documents automatically\",\n    audience: \"professional\",\n    difficulty: \"advanced\",\n    category: \"document-processing\",\n    useCase: \"Business Intelligence\",\n    estimatedCredits: 150,\n    estimatedTime: \"3 hours\",\n    prerequisites: [\"Document samples\", \"Extraction requirements\"],\n    config: {\n      model: {\n        type: \"generation\",\n        architecture: \"gpt-4\",\n        parameters: {\n          temperature: 0.2,\n          maxTokens: 2000,\n        },\n      },\n      training: {\n        epochs: 15,\n        batchSize: 8,\n      },\n      deployment: {\n        platform: \"api\",\n        endpoint: \"/api/analyze\",\n      },\n    },\n    tutorial: [\n      {\n        step: 1,\n        title: \"Define extraction fields\",\n        description: \"Specify what information to extract from documents\",\n        action: \"Configure extraction schema\",\n      },\n      {\n        step: 2,\n        title: \"Train on sample documents\",\n        description: \"Provide examples of correctly extracted data\",\n        action: \"Upload training documents\",\n      },\n      {\n        step: 3,\n        title: \"Deploy and integrate\",\n        description: \"Connect to your document workflow\",\n        action: \"Deploy and test integration\",\n      },\n    ],\n    preview: {\n      input: \"Contract document PDF\",\n      output: \"Extracted: Parties: Company A & Company B, Date: 2024-01-15, Value: $50,000...\",\n      explanation: \"The AI extracts structured data from unstructured documents automatically.\",\n    },\n  },\n\n  // All Audience Examples\n  {\n    id: \"sentiment-analyzer\",\n    title: \"Sentiment Analyzer\",\n    description: \"Analyze the sentiment of text - positive, negative, or neutral\",\n    audience: \"all\",\n    difficulty: \"beginner\",\n    category: \"text-analysis\",\n    useCase: \"Text Analysis\",\n    estimatedCredits: 25,\n    estimatedTime: \"20 minutes\",\n    prerequisites: [],\n    config: {\n      model: {\n        type: \"classification\",\n        architecture: \"bert-base\",\n        parameters: {},\n      },\n      training: {\n        epochs: 5,\n        batchSize: 32,\n      },\n    },\n    tutorial: [\n      {\n        step: 1,\n        title: \"Enter text to analyze\",\n        description: \"Paste or type text you want to analyze\",\n        action: \"Enter your text\",\n      },\n      {\n        step: 2,\n        title: \"Get sentiment results\",\n        description: \"See if the text is positive, negative, or neutral\",\n        action: \"Click 'Analyze' to get results\",\n      },\n      {\n        step: 3,\n        title: \"Explore examples\",\n        description: \"Try different types of text to see how it works\",\n        action: \"Test with various examples\",\n      },\n    ],\n    preview: {\n      input: \"I love this product! It's amazing!\",\n      output: \"Sentiment: Positive (95% confidence)\",\n      explanation: \"The AI determines the emotional tone of the text.\",\n    },\n  },\n  {\n    id: \"image-classifier\",\n    title: \"Image Classifier\",\n    description: \"Classify images into categories - perfect for organizing photos\",\n    audience: \"all\",\n    difficulty: \"intermediate\",\n    category: \"image-classification\",\n    useCase: \"Image Organization\",\n    estimatedCredits: 50,\n    estimatedTime: \"45 minutes\",\n    prerequisites: [\"Image dataset\"],\n    config: {\n      model: {\n        type: \"classification\",\n        architecture: \"resnet-50\",\n        parameters: {},\n      },\n      training: {\n        epochs: 20,\n        batchSize: 32,\n      },\n    },\n    tutorial: [\n      {\n        step: 1,\n        title: \"Upload your images\",\n        description: \"Upload images you want to classify\",\n        action: \"Upload image dataset\",\n      },\n      {\n        step: 2,\n        title: \"Define categories\",\n        description: \"Specify what categories to classify into\",\n        action: \"Set up classification categories\",\n      },\n      {\n        step: 3,\n        title: \"Train and test\",\n        description: \"Train the model and test on new images\",\n        action: \"Train model and test results\",\n      },\n    ],\n    preview: {\n      input: \"Photo of a cat\",\n      output: \"Classification: Animal - Cat (92% confidence)\",\n      explanation: \"The AI automatically categorizes your images.\",\n    },\n  },\n];\n\nexport function getExamplesByAudience(audience: string): AIStudioExample[] {\n  if (audience === \"all\") {\n    return examples;\n  }\n  return examples.filter((ex) => ex.audience === audience || ex.audience === \"all\");\n}\n\nexport function getExampleById(id: string): AIStudioExample | undefined {\n  return examples.find((ex) => ex.id === id);\n}\n\nexport function getExamplesByDifficulty(difficulty: string): AIStudioExample[] {\n  return examples.filter((ex) => ex.difficulty === difficulty);\n}\n\nexport function getExamplesByCategory(category: string): AIStudioExample[] {\n  return examples.filter((ex) => ex.category === category);\n}\n\n","/**\n * Export helpers for AI Studio projects (client-side).\n */\n\nimport { PDFDocument, StandardFonts, rgb } from \"pdf-lib\";\nimport JSZip from \"jszip\";\nimport type { AIStudioProject } from \"./store\";\n\nfunction downloadBlob(filename: string, blob: Blob) {\n  const url = URL.createObjectURL(blob);\n  const a = document.createElement(\"a\");\n  a.href = url;\n  a.download = filename;\n  document.body.appendChild(a);\n  a.click();\n  a.remove();\n  URL.revokeObjectURL(url);\n}\n\nexport function exportProjectAsJson(project: AIStudioProject) {\n  const payload = JSON.stringify(project, null, 2);\n  downloadBlob(`${project.title.replace(/[^a-z0-9]+/gi, \"-\").toLowerCase()}-${project.id}.json`, new Blob([payload], { type: \"application/json\" }));\n}\n\nasync function buildProjectPdfBytes(project: AIStudioProject) {\n  const doc = await PDFDocument.create();\n  const page = doc.addPage([595.28, 841.89]); // A4\n  const font = await doc.embedFont(StandardFonts.Helvetica);\n  const fontBold = await doc.embedFont(StandardFonts.HelveticaBold);\n\n  let y = 800;\n  const left = 50;\n  const line = 14;\n\n  const draw = (text: string, opts?: { bold?: boolean; size?: number }) => {\n    page.drawText(text, {\n      x: left,\n      y,\n      size: opts?.size ?? 12,\n      font: opts?.bold ? fontBold : font,\n      color: rgb(0.1, 0.1, 0.1),\n    });\n    y -= line;\n  };\n\n  draw(\"AI Studio Project Summary\", { bold: true, size: 16 });\n  y -= 8;\n\n  draw(`Title: ${project.title}`, { bold: true });\n  draw(`Project ID: ${project.id}`);\n  draw(`Template: ${project.exampleId}`);\n  draw(`Audience: ${project.audience} · Difficulty: ${project.difficulty}`);\n  draw(`Created: ${project.createdAt}`);\n  draw(`Updated: ${project.updatedAt}`);\n  y -= 10;\n\n  draw(\"Latest run\", { bold: true });\n  if (project.lastRun) {\n    draw(`Ran at: ${project.lastRun.ranAt}`);\n    if (project.lastRun.receipt) {\n      const r = project.lastRun.receipt;\n      draw(`Mode: ${r.mode}`);\n      draw(`Duration: ${r.durationMs} ms`);\n      draw(`Input: ${r.inputBytes} bytes · Output: ${r.outputBytes} bytes`);\n      draw(`Credits charged: ${r.creditsCharged}`);\n    } else {\n      draw(\"Receipt: not available\");\n    }\n  } else {\n    draw(\"No runs yet\");\n  }\n\n  y -= 10;\n  draw(\"Notes\", { bold: true });\n  draw(\"This export contains project configuration and the latest run summary only.\");\n\n  const bytes = await doc.save();\n  return bytes;\n}\n\nexport async function exportProjectAsPdf(project: AIStudioProject) {\n  const bytes = await buildProjectPdfBytes(project);\n  // pdf-lib returns Uint8Array<ArrayBufferLike> in some environments; BlobPart expects ArrayBuffer.\n  const safeArrayBuffer = Uint8Array.from(bytes).buffer;\n  downloadBlob(\n    `${project.title.replace(/[^a-z0-9]+/gi, \"-\").toLowerCase()}-${project.id}.pdf`,\n    new Blob([safeArrayBuffer], { type: \"application/pdf\" })\n  );\n}\n\nfunction checklistForExample(exampleId: string) {\n  if (exampleId === \"story-generator\") {\n    return [\n      \"Decide your audience (children, teens, adults).\",\n      \"Define tone rules (kind, non-violent, no personal data).\",\n      \"Add a 'character sheet' section to the prompt.\",\n      \"Add a 'length' parameter (short/medium/long) and test cost vs quality.\",\n      \"Export a few runs and keep the best as a portfolio pack.\",\n    ];\n  }\n  if (exampleId === \"homework-helper\") {\n    return [\n      \"Choose a narrow scope (e.g., linear equations only) and state it clearly.\",\n      \"Always show steps and a final check step (substitution).\",\n      \"Add friendly hints before revealing the answer.\",\n      \"Create 10 sample questions and save the best outputs.\",\n      \"Add a “teacher mode” vs “student mode” toggle later.\",\n    ];\n  }\n  if (exampleId === \"customer-support-bot\") {\n    return [\n      \"Write a safe policy (no sensitive data, no account takeover advice).\",\n      \"Add an intent classifier (returns/refunds/shipping/login).\",\n      \"Add a knowledge base stub (static FAQ snippets) and cite which snippet was used.\",\n      \"Add escalation rules (when to hand off to human).\",\n      \"Export a set of response templates for a portfolio.\",\n    ];\n  }\n  return [\"Add a clear goal for this project.\", \"Make one small improvement, then re-run and compare outputs.\", \"Export a pack and share it.\"];\n}\n\nfunction artefactMarkdown(project: AIStudioProject) {\n  const run = project.lastRun;\n  const header = `# ${project.title}\\n\\nTemplate: \\`${project.exampleId}\\`\\n\\n`;\n  if (!run) {\n    return `${header}No runs yet.\\n`;\n  }\n  const receipt = run.receipt;\n  const receiptLine = receipt\n    ? `Receipt: mode=${receipt.mode} durationMs=${receipt.durationMs} creditsCharged=${receipt.creditsCharged}\\n\\n`\n    : \"Receipt: not available\\n\\n\";\n  return `${header}## Latest run\\n\\nRan at: ${run.ranAt}\\n\\n${receiptLine}## Output\\n\\n\\`\\`\\`json\\n${JSON.stringify(run.output, null, 2)}\\n\\`\\`\\`\\n`;\n}\n\nexport async function exportProjectAsPackZip(project: AIStudioProject) {\n  const slug = project.title.replace(/[^a-z0-9]+/gi, \"-\").toLowerCase();\n  const base = `${slug}-${project.id}`;\n  const zip = new JSZip();\n\n  const runs = Array.isArray(project.runs) ? project.runs : project.lastRun ? [project.lastRun] : [];\n\n  zip.file(\"README.md\", `# ${project.title}\\n\\nTemplate: \\`${project.exampleId}\\`\\n\\n## What this is\\n\\nThis is an AI Studio project pack export.\\n\\n## How to import\\n\\n1. Go to \\`/ai-studio/projects\\`\\n2. Click **Import project JSON**\\n3. Select \\`project.json\\`\\n\\n## What’s inside\\n\\n- \\`project.json\\`: full project (local-first) export\\n- \\`project-summary.pdf\\`: PDF summary\\n- \\`run-history.json\\`: recent runs (output + receipts)\\n- \\`NEXT_STEPS.md\\`: practical next steps\\n`);\n\n  zip.file(\"project.json\", JSON.stringify(project, null, 2));\n  zip.file(\"run-history.json\", JSON.stringify({ projectId: project.id, runs }, null, 2));\n\n  const checklist = checklistForExample(project.exampleId);\n  zip.file(\"NEXT_STEPS.md\", `# Next steps\\n\\n${checklist.map((c) => `- ${c}`).join(\"\\n\")}\\n`);\n  zip.file(\"ARTEFACT.md\", artefactMarkdown(project));\n\n  const pdfBytes = await buildProjectPdfBytes(project);\n  zip.file(\"project-summary.pdf\", pdfBytes);\n\n  const blob = await zip.generateAsync({ type: \"blob\" });\n  downloadBlob(`${base}.zip`, blob);\n}\n\n","/**\n * Run an AI Studio project (local-first).\n *\n * This provides a real, deterministic execution path for flagship templates\n * without requiring external model keys. It also produces a receipt object\n * so users can understand what happened.\n */\n\nimport { getExampleById } from \"@/lib/ai-studio/examples\";\nimport type { AIStudioProject, AIStudioRunReceipt } from \"./store\";\n\nfunction nowIso() {\n  return new Date().toISOString();\n}\n\nfunction newRunId() {\n  return `r_${Math.random().toString(16).slice(2)}_${Date.now().toString(16)}`;\n}\n\nfunction byteSize(value: unknown) {\n  try {\n    return new Blob([typeof value === \"string\" ? value : JSON.stringify(value)]).size;\n  } catch {\n    return 0;\n  }\n}\n\nfunction clampStr(s: string, max: number) {\n  return s.length <= max ? s : s.slice(0, max);\n}\n\nexport async function runAiStudioProjectLocal(params: {\n  project: AIStudioProject;\n  input?: unknown;\n}): Promise<{ output: unknown; receipt: AIStudioRunReceipt }> {\n  const start = typeof performance !== \"undefined\" ? performance.now() : Date.now();\n  const runId = newRunId();\n\n  const example = getExampleById(params.project.exampleId);\n  const defaultInput = example?.preview?.input ?? null;\n  const input = params.input ?? defaultInput;\n\n  let output: unknown;\n\n  // Flagship: Story Generator (child-friendly, deterministic).\n  if (params.project.exampleId === \"story-generator\") {\n    const promptRaw = typeof input === \"string\" ? input : JSON.stringify(input);\n    const prompt = clampStr(promptRaw || \"A kind robot helps a lost astronaut\", 240);\n    output = {\n      prompt,\n      story:\n        `Once upon a time, a brave robot named R2-D5 discovered a quiet planet filled with shimmering crystals.\\n\\n` +\n        `It followed a simple rule: be curious, be careful, and be kind. With a small map and a bright light, ` +\n        `it explored caves, logged the terrain, and helped a lost traveller find the safest path home.\\n\\n` +\n        `In the end, R2-D5 returned with new knowledge and a promise: every adventure is better when you keep people safe.`,\n      notes: [\n        \"This is a safe local demo run (deterministic).\",\n        \"Replace this with real model inference once your compute model endpoint is ready.\",\n      ],\n      ranAt: nowIso(),\n    };\n  } else if (params.project.exampleId === \"homework-helper\") {\n    const questionRaw = typeof input === \"string\" ? input : JSON.stringify(input);\n    const question = clampStr(questionRaw || \"How do I solve 2x + 5 = 15?\", 300);\n\n    // Very small, deterministic “teaching” solver for simple linear equations.\n    // This is intentionally limited: it is a safe demo, not a full math engine.\n    const matched = question.replace(/\\s+/g, \" \").match(/(\\d+)\\s*x\\s*\\+\\s*(\\d+)\\s*=\\s*(\\d+)/i);\n    let outputObj: any;\n    if (matched) {\n      const a = Number(matched[1]);\n      const b = Number(matched[2]);\n      const c = Number(matched[3]);\n      const step1 = `Subtract ${b} from both sides → ${a}x = ${c - b}`;\n      const step2 = `Divide both sides by ${a} → x = ${(c - b) / a}`;\n      outputObj = {\n        question,\n        steps: [step1, step2],\n        answer: `x = ${(c - b) / a}`,\n        safety: {\n          mode: \"safe-demo\",\n          note: \"Deterministic demo: handles only a simple ax + b = c form.\",\n        },\n        ranAt: nowIso(),\n      };\n    } else {\n      outputObj = {\n        question,\n        steps: [\n          \"Rewrite the problem in a simpler form (remove extra words).\",\n          \"Identify what is being asked.\",\n          \"Show one step at a time, and check your result at the end.\",\n        ],\n        answer: \"This demo can only solve simple equations like 2x + 5 = 15.\",\n        safety: {\n          mode: \"safe-demo\",\n          note: \"Deterministic demo: not a general solver.\",\n        },\n        ranAt: nowIso(),\n      };\n    }\n    output = outputObj;\n  } else if (params.project.exampleId === \"customer-support-bot\") {\n    const questionRaw = typeof input === \"string\" ? input : JSON.stringify(input);\n    const question = clampStr(questionRaw || \"How do I return an item?\", 300);\n    const q = question.toLowerCase();\n\n    let reply =\n      \"I can help with orders, returns, delivery, and account questions. Tell me what you need, and include your order number if you have one.\";\n    if (q.includes(\"return\")) {\n      reply =\n        \"To return an item: 1) Sign in, 2) Open Orders, 3) Select the item, 4) Choose Return, 5) Print the label, 6) Drop it off. If the item is damaged, contact support first.\";\n    } else if (q.includes(\"refund\")) {\n      reply =\n        \"Refunds usually process after the return is received. Check your Orders page for the status. If it has been more than 7 days since delivery, contact support with your order number.\";\n    } else if (q.includes(\"delivery\") || q.includes(\"shipping\")) {\n      reply =\n        \"For delivery updates, check the tracking link in your Orders page. If tracking has not updated for 48 hours, contact support and include your order number.\";\n    } else if (q.includes(\"password\") || q.includes(\"sign in\") || q.includes(\"login\")) {\n      reply =\n        \"If you cannot sign in, use the password reset link on the sign-in page. If you do not receive the email, check spam and confirm the address is correct.\";\n    }\n\n    output = {\n      question,\n      reply,\n      safety: {\n        mode: \"safe-demo\",\n        note: \"Deterministic demo: no external model calls.\",\n      },\n      ranAt: nowIso(),\n    };\n  } else {\n    // Generic fallback: return the example preview output if present.\n    output =\n      example?.preview?.output ?? {\n        message: \"This template does not have a runnable demo yet.\",\n        next: \"Pick a different example or add a runnable demo for this project type.\",\n      };\n  }\n\n  const end = typeof performance !== \"undefined\" ? performance.now() : Date.now();\n  const durationMs = Math.max(0, Math.round(end - start));\n\n  const inputBytes = byteSize(input);\n  const outputBytes = byteSize(output);\n\n  const receipt: AIStudioRunReceipt = {\n    runId,\n    toolId: `ai-studio:${params.project.exampleId}`,\n    mode: \"local\",\n    durationMs,\n    inputBytes,\n    outputBytes,\n    freeTierAppliedMs: durationMs,\n    paidMs: 0,\n    creditsCharged: 0,\n    remainingCredits: null,\n    guidanceTips: [\n      \"Start with a small prompt, then add detail.\",\n      \"Write what success looks like before you run.\",\n      \"Save outputs you like, then iterate in small steps.\",\n    ],\n  };\n\n  return { output, receipt };\n}\n\n"],"names":[],"mappings":"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"}}]
}