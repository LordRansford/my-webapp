;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="ac047f2f-7fc9-a808-e3ad-7e68d58ed415")}catch(e){}}();
module.exports=[379996,112882,a=>{"use strict";a.s(["default",0,function(a){return function(){return a}}],379996);let b=Math.PI,c=2*b,d=c-1e-6;function e(a){this._+=a[0];for(let b=1,c=a.length;b<c;++b)this._+=arguments[b]+a[b]}class f{constructor(a){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==a?e:function(a){let b=Math.floor(a);if(!(b>=0))throw Error(`invalid digits: ${a}`);if(b>15)return e;let c=10**b;return function(a){this._+=a[0];for(let b=1,d=a.length;b<d;++b)this._+=Math.round(arguments[b]*c)/c+a[b]}}(a)}moveTo(a,b){this._append`M${this._x0=this._x1=+a},${this._y0=this._y1=+b}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(a,b){this._append`L${this._x1=+a},${this._y1=+b}`}quadraticCurveTo(a,b,c,d){this._append`Q${+a},${+b},${this._x1=+c},${this._y1=+d}`}bezierCurveTo(a,b,c,d,e,f){this._append`C${+a},${+b},${+c},${+d},${this._x1=+e},${this._y1=+f}`}arcTo(a,c,d,e,f){if(a*=1,c*=1,d*=1,e*=1,(f*=1)<0)throw Error(`negative radius: ${f}`);let g=this._x1,h=this._y1,i=d-a,j=e-c,k=g-a,l=h-c,m=k*k+l*l;if(null===this._x1)this._append`M${this._x1=a},${this._y1=c}`;else if(m>1e-6)if(Math.abs(l*i-j*k)>1e-6&&f){let n=d-g,o=e-h,p=i*i+j*j,q=Math.sqrt(p),r=Math.sqrt(m),s=f*Math.tan((b-Math.acos((p+m-(n*n+o*o))/(2*q*r)))/2),t=s/r,u=s/q;Math.abs(t-1)>1e-6&&this._append`L${a+t*k},${c+t*l}`,this._append`A${f},${f},0,0,${+(l*n>k*o)},${this._x1=a+u*i},${this._y1=c+u*j}`}else this._append`L${this._x1=a},${this._y1=c}`}arc(a,e,f,g,h,i){if(a*=1,e*=1,f*=1,i=!!i,f<0)throw Error(`negative radius: ${f}`);let j=f*Math.cos(g),k=f*Math.sin(g),l=a+j,m=e+k,n=1^i,o=i?g-h:h-g;null===this._x1?this._append`M${l},${m}`:(Math.abs(this._x1-l)>1e-6||Math.abs(this._y1-m)>1e-6)&&this._append`L${l},${m}`,f&&(o<0&&(o=o%c+c),o>d?this._append`A${f},${f},0,1,${n},${a-j},${e-k}A${f},${f},0,1,${n},${this._x1=l},${this._y1=m}`:o>1e-6&&this._append`A${f},${f},0,${+(o>=b)},${n},${this._x1=a+f*Math.cos(h)},${this._y1=e+f*Math.sin(h)}`)}rect(a,b,c,d){this._append`M${this._x0=this._x1=+a},${this._y0=this._y1=+b}h${c*=1}v${+d}h${-c}Z`}toString(){return this._}}function g(a){let b=3;return a.digits=function(c){if(!arguments.length)return b;if(null==c)b=null;else{let a=Math.floor(c);if(!(a>=0))throw RangeError(`invalid digits: ${c}`);b=a}return a},()=>new f(b)}f.prototype,a.s(["withPath",()=>g],112882)},884885,a=>{"use strict";Array.prototype.slice,a.s(["default",0,function(a){return"object"==typeof a&&"length"in a?a:Array.from(a)}])},398153,a=>{"use strict";var b=a.i(884885),c=a.i(379996),d=a.i(632794),e=a.i(112882);function f(a){return a[0]}function g(a){return a[1]}a.s(["line",0,function(a,h){var i=(0,c.default)(!0),j=null,k=d.default,l=null,m=(0,e.withPath)(n);function n(c){var d,e,f,g=(c=(0,b.default)(c)).length,n=!1;for(null==j&&(l=k(f=m())),d=0;d<=g;++d)!(d<g&&i(e=c[d],d,c))===n&&((n=!n)?l.lineStart():l.lineEnd()),n&&l.point(+a(e,d,c),+h(e,d,c));if(f)return l=null,f+""||null}return a="function"==typeof a?a:void 0===a?f:(0,c.default)(a),h="function"==typeof h?h:void 0===h?g:(0,c.default)(h),n.x=function(b){return arguments.length?(a="function"==typeof b?b:(0,c.default)(+b),n):a},n.y=function(a){return arguments.length?(h="function"==typeof a?a:(0,c.default)(+a),n):h},n.defined=function(a){return arguments.length?(i="function"==typeof a?a:(0,c.default)(!!a),n):i},n.curve=function(a){return arguments.length?(k=a,null!=j&&(l=k(j)),n):k},n.context=function(a){return arguments.length?(null==a?j=l=null:l=k(j=a),n):j},n}],398153)},133337,a=>{"use strict";var b=a.i(2085);a.s(["default",0,function(a){return(0,b.default)(a,4)}])},255957,a=>{"use strict";var b=a.i(770994),c=a.i(452991);a.s(["channel",0,(a,d)=>b.default.lang.round(c.default.parse(a)[d])],255957)},606891,538309,638568,376358,a=>{"use strict";a.i(975930);var b=a.i(758434),c=a.i(671731),d=a.i(609782),e=a.i(514962);function f(a){return"string"==typeof a?new e.Selection([document.querySelectorAll(a)],[document.documentElement]):new e.Selection([(0,d.default)(a)],e.root)}a.s(["selectAll",0,f],538309);var g=a.i(614437),g=g,h=a.i(782125);function i(a,b){return!!a.children(b).length}function j(a){return l(a.v)+":"+l(a.w)+":"+l(a.name)}var k=/:/g;function l(a){return a?String(a).replace(k,"\\:"):""}function m(a,b){b&&a.attr("style",b)}function n(a,b,c){b&&a.attr("class",b).attr("class",c+" "+a.attr("class"))}function o(a,b){var c=b.graph();if(g.default(c)){var d=c.transition;if(h.isFunction(d))return d(a)}return a}function p(a,b){var c=a.append("foreignObject").attr("width","100000"),d=c.append("xhtml:div");d.attr("xmlns","http://www.w3.org/1999/xhtml");var e=b.label;switch(typeof e){case"function":d.insert(e);break;case"object":d.insert(function(){return e});break;default:d.html(e)}m(d,b.labelStyle),d.style("display","inline-block"),d.style("white-space","nowrap");var f=d.node().getBoundingClientRect();return c.attr("width",f.width).attr("height",f.height),c}a.s(["applyClass",()=>n,"applyStyle",()=>m,"applyTransition",()=>o,"edgeToId",()=>j,"isSubgraph",()=>i],638568),a.s(["addHtmlLabel",()=>p],376358),a.i(797774);var q=a.i(661256),r=a.i(336515),s=a.i(407860),t=a.i(255957),u=a.i(155177);let v={},w=async function(a,b,c,d,e,f){let g=d.select(`[id="${c}"]`);for(let c of Object.keys(a)){let d,h=a[c],i="default";h.classes.length>0&&(i=h.classes.join(" ")),i+=" flowchart-label";let j=(0,s.k)(h.styles),k=void 0!==h.text?h.text:h.id;if(s.l.info("vertex",h,h.labelType),"markdown"===h.labelType)s.l.info("vertex",h,h.labelType);else if((0,s.m)((0,s.c)().flowchart.htmlLabels))(d=p(g,{label:k}).node()).parentNode.removeChild(d);else{let a=e.createElementNS("http://www.w3.org/2000/svg","text");for(let b of(a.setAttribute("style",j.labelStyle.replace("color:","fill:")),k.split(s.e.lineBreakRegex))){let c=e.createElementNS("http://www.w3.org/2000/svg","tspan");c.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),c.setAttribute("dy","1em"),c.setAttribute("x","1"),c.textContent=b,a.appendChild(c)}d=a}let l=0,m="";switch(h.type){case"round":l=5,m="rect";break;case"square":case"group":default:m="rect";break;case"diamond":m="question";break;case"hexagon":m="hexagon";break;case"odd":case"odd_right":m="rect_left_inv_arrow";break;case"lean_right":m="lean_right";break;case"lean_left":m="lean_left";break;case"trapezoid":m="trapezoid";break;case"inv_trapezoid":m="inv_trapezoid";break;case"circle":m="circle";break;case"ellipse":m="ellipse";break;case"stadium":m="stadium";break;case"subroutine":m="subroutine";break;case"cylinder":m="cylinder";break;case"doublecircle":m="doublecircle"}let n=await (0,s.r)(k,(0,s.c)());b.setNode(h.id,{labelStyle:j.labelStyle,shape:m,labelText:n,labelType:h.labelType,rx:l,ry:l,class:i,style:j.style,id:h.id,link:h.link,linkTarget:h.linkTarget,tooltip:f.db.getTooltip(h.id)||"",domId:f.db.lookUpDomId(h.id),haveCallback:h.haveCallback,width:"group"===h.type?500:void 0,dir:h.dir,type:h.type,props:h.props,padding:(0,s.c)().flowchart.padding}),s.l.info("setNode",{labelStyle:j.labelStyle,labelType:h.labelType,shape:m,labelText:n,rx:l,ry:l,class:i,style:j.style,id:h.id,domId:f.db.lookUpDomId(h.id),width:"group"===h.type?500:void 0,type:h.type,dir:h.dir,props:h.props,padding:(0,s.c)().flowchart.padding})}},x=async function(a,c,d){let e,f;s.l.info("abc78 edges = ",a);let g=0,h={};if(void 0!==a.defaultStyle){let b=(0,s.k)(a.defaultStyle);e=b.style,f=b.labelStyle}for(let d of a){g++;let i="L-"+d.start+"-"+d.end;void 0===h[i]?h[i]=0:h[i]++,s.l.info("abc78 new entry",i,h[i]);let j=i+"-"+h[i];s.l.info("abc78 new link id to be used is",i,j,h[i]);let k="LS-"+d.start,l="LE-"+d.end,m={style:"",labelStyle:""};switch(m.minlen=d.length||1,"arrow_open"===d.type?m.arrowhead="none":m.arrowhead="normal",m.arrowTypeStart="arrow_open",m.arrowTypeEnd="arrow_open",d.type){case"double_arrow_cross":m.arrowTypeStart="arrow_cross";case"arrow_cross":m.arrowTypeEnd="arrow_cross";break;case"double_arrow_point":m.arrowTypeStart="arrow_point";case"arrow_point":m.arrowTypeEnd="arrow_point";break;case"double_arrow_circle":m.arrowTypeStart="arrow_circle";case"arrow_circle":m.arrowTypeEnd="arrow_circle"}let n="",o="";switch(d.stroke){case"normal":n="fill:none;",void 0!==e&&(n=e),void 0!==f&&(o=f),m.thickness="normal",m.pattern="solid";break;case"dotted":m.thickness="normal",m.pattern="dotted",m.style="fill:none;stroke-width:2px;stroke-dasharray:3;";break;case"thick":m.thickness="thick",m.pattern="solid",m.style="stroke-width: 3.5px;fill:none;";break;case"invisible":m.thickness="invisible",m.pattern="solid",m.style="stroke-width: 0;fill:none;"}if(void 0!==d.style){let a=(0,s.k)(d.style);n=a.style,o=a.labelStyle}m.style=m.style+=n,m.labelStyle=m.labelStyle+=o,void 0!==d.interpolate?m.curve=(0,s.n)(d.interpolate,b.curveLinear):void 0!==a.defaultInterpolate?m.curve=(0,s.n)(a.defaultInterpolate,b.curveLinear):m.curve=(0,s.n)(v.curve,b.curveLinear),void 0===d.text?void 0!==d.style&&(m.arrowheadStyle="fill: #333"):(m.arrowheadStyle="fill: #333",m.labelpos="c"),m.labelType=d.labelType,m.label=await (0,s.r)(d.text.replace(s.e.lineBreakRegex,"\n"),(0,s.c)()),void 0===d.style&&(m.style=m.style||"stroke: #333; stroke-width: 1.5px;fill:none;"),m.labelStyle=m.labelStyle.replace("color:","fill:"),m.id=j,m.classes="flowchart-link "+k+" "+l,c.setEdge(d.start,d.end,m,g)}},y=async function(a,b,d,e){let g,h;s.l.info("Drawing flowchart");let i=e.db.getDirection();void 0===i&&(i="TD");let{securityLevel:j,flowchart:k}=(0,s.c)(),l=k.nodeSpacing||50,m=k.rankSpacing||50;"sandbox"===j&&(g=(0,c.select)("#i"+b));let n="sandbox"===j?(0,c.select)(g.nodes()[0].contentDocument.body):(0,c.select)("body"),o="sandbox"===j?g.nodes()[0].contentDocument:document,p=new q.Graph({multigraph:!0,compound:!0}).setGraph({rankdir:i,nodesep:l,ranksep:m,marginx:0,marginy:0}).setDefaultEdgeLabel(function(){return{}}),t=e.db.getSubGraphs();s.l.info("Subgraphs - ",t);for(let a=t.length-1;a>=0;a--)h=t[a],s.l.info("Subgraph - ",h),e.db.addVertex(h.id,{text:h.title,type:h.labelType},"group",void 0,h.classes,h.dir);let u=e.db.getVertices(),v=e.db.getEdges();s.l.info("Edges",v);let y=0;for(y=t.length-1;y>=0;y--){h=t[y],f("cluster").append("text");for(let a=0;a<h.nodes.length;a++)s.l.info("Setting up subgraphs",h.nodes[a],h.id),p.setParent(h.nodes[a],h.id)}await w(u,p,b,n,o,e),await x(v,p);let z=n.select(`[id="${b}"]`),A=n.select("#"+b+" g");if(await (0,r.r)(A,p,["point","circle","cross"],"flowchart",b),s.u.insertTitle(z,"flowchartTitleText",k.titleTopMargin,e.db.getDiagramTitle()),(0,s.o)(p,z,k.diagramPadding,k.useMaxWidth),e.db.indexNodes("subGraph"+y),!k.htmlLabels)for(let a of o.querySelectorAll('[id="'+b+'"] .edgeLabel .label')){let b=a.getBBox(),c=o.createElementNS("http://www.w3.org/2000/svg","rect");c.setAttribute("rx",0),c.setAttribute("ry",0),c.setAttribute("width",b.width),c.setAttribute("height",b.height),a.insertBefore(c,a.firstChild)}Object.keys(u).forEach(function(a){let d=u[a];if(d.link){let e=(0,c.select)("#"+b+' [id="'+a+'"]');if(e){let a=o.createElementNS("http://www.w3.org/2000/svg","a");a.setAttributeNS("http://www.w3.org/2000/svg","class",d.classes.join(" ")),a.setAttributeNS("http://www.w3.org/2000/svg","href",d.link),a.setAttributeNS("http://www.w3.org/2000/svg","rel","noopener"),"sandbox"===j?a.setAttributeNS("http://www.w3.org/2000/svg","target","_top"):d.linkTarget&&a.setAttributeNS("http://www.w3.org/2000/svg","target",d.linkTarget);let b=e.insert(function(){return a},":first-child"),c=e.select(".label-container");c&&b.append(function(){return c.node()});let f=e.select(".label");f&&b.append(function(){return f.node()})}}})},z={setConf:function(a){for(let b of Object.keys(a))v[b]=a[b]},addVertices:w,addEdges:x,getClasses:function(a,b){return b.db.getClasses()},draw:y},A=a=>{var b;let c,d,e,f;return`.label {
    font-family: ${a.fontFamily};
    color: ${a.nodeTextColor||a.textColor};
  }
  .cluster-label text {
    fill: ${a.titleColor};
  }
  .cluster-label span,p {
    color: ${a.titleColor};
  }

  .label text,span,p {
    fill: ${a.nodeTextColor||a.textColor};
    color: ${a.nodeTextColor||a.textColor};
  }

  .node rect,
  .node circle,
  .node ellipse,
  .node polygon,
  .node path {
    fill: ${a.mainBkg};
    stroke: ${a.nodeBorder};
    stroke-width: 1px;
  }
  .flowchart-label text {
    text-anchor: middle;
  }
  // .flowchart-label .text-outer-tspan {
  //   text-anchor: middle;
  // }
  // .flowchart-label .text-inner-tspan {
  //   text-anchor: start;
  // }

  .node .katex path {
    fill: #000;
    stroke: #000;
    stroke-width: 1px;
  }

  .node .label {
    text-align: center;
  }
  .node.clickable {
    cursor: pointer;
  }

  .arrowheadPath {
    fill: ${a.arrowheadColor};
  }

  .edgePath .path {
    stroke: ${a.lineColor};
    stroke-width: 2.0px;
  }

  .flowchart-link {
    stroke: ${a.lineColor};
    fill: none;
  }

  .edgeLabel {
    background-color: ${a.edgeLabelBackground};
    rect {
      opacity: 0.5;
      background-color: ${a.edgeLabelBackground};
      fill: ${a.edgeLabelBackground};
    }
    text-align: center;
  }

  /* For html labels only */
  .labelBkg {
    background-color: ${b=a.edgeLabelBackground,d=(c=t.channel)(b,"r"),e=c(b,"g"),f=c(b,"b"),u.rgba(d,e,f,.5)};
    // background-color: 
  }

  .cluster rect {
    fill: ${a.clusterBkg};
    stroke: ${a.clusterBorder};
    stroke-width: 1px;
  }

  .cluster text {
    fill: ${a.titleColor};
  }

  .cluster span,p {
    color: ${a.titleColor};
  }
  /* .cluster div {
    color: ${a.titleColor};
  } */

  div.mermaidTooltip {
    position: absolute;
    text-align: center;
    max-width: 200px;
    padding: 2px;
    font-family: ${a.fontFamily};
    font-size: 12px;
    background: ${a.tertiaryColor};
    border: 1px solid ${a.border2};
    border-radius: 2px;
    pointer-events: none;
    z-index: 100;
  }

  .flowchartTitleText {
    text-anchor: middle;
    font-size: 18px;
    fill: ${a.textColor};
  }
`};a.s(["a",()=>A,"f",()=>z],606891)}];

//# debugId=ac047f2f-7fc9-a808-e3ad-7e68d58ed415
//# sourceMappingURL=node_modules_7b090cba._.js.map