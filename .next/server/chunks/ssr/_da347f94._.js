;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="4be3a381-f01a-73c2-469c-9d2be61db796")}catch(e){}}();
module.exports=[885200,a=>{"use strict";var b=a.i(508171),c=a.i(127669),d=a.i(901257),e=a.i(41910),f=a.i(532572),g=a.i(199987),h=a.i(712361),i=a.i(40654),j=a.i(946032),k=a.i(559708),l=a.i(843052),m=a.i(446607);function n(a){let c=a.receipt;return(0,b.jsxs)("div",{className:"rounded-xl border border-slate-200 bg-slate-50 p-4 text-xs text-slate-700 space-y-2",children:[(0,b.jsxs)("div",{className:"flex flex-wrap gap-2 items-center justify-between",children:[(0,b.jsx)("p",{className:"font-semibold text-slate-900",children:"Receipt"}),(0,b.jsx)("p",{className:"font-mono text-slate-600",children:c.runId})]}),c.toolId?(0,b.jsxs)("p",{className:"text-[11px] text-slate-600",children:["tool: ",(0,b.jsx)("span",{className:"font-mono",children:c.toolId})]}):null,(0,b.jsxs)("div",{className:"grid gap-2 sm:grid-cols-3",children:[(0,b.jsxs)("div",{className:"rounded-lg border border-slate-200 bg-white p-3",children:[(0,b.jsx)("p",{className:"text-[11px] font-semibold text-slate-600",children:"mode"}),(0,b.jsx)("p",{className:"mt-1 text-slate-900",children:c.mode})]}),(0,b.jsxs)("div",{className:"rounded-lg border border-slate-200 bg-white p-3",children:[(0,b.jsx)("p",{className:"text-[11px] font-semibold text-slate-600",children:"duration"}),(0,b.jsxs)("p",{className:"mt-1 text-slate-900",children:[c.durationMs," ms"]})]}),(0,b.jsxs)("div",{className:"rounded-lg border border-slate-200 bg-white p-3",children:[(0,b.jsx)("p",{className:"text-[11px] font-semibold text-slate-600",children:"credits charged"}),(0,b.jsx)("p",{className:"mt-1 text-slate-900",children:c.creditsCharged})]})]}),(0,b.jsxs)("div",{className:"grid gap-2 sm:grid-cols-2",children:[(0,b.jsxs)("div",{className:"rounded-lg border border-slate-200 bg-white p-3",children:[(0,b.jsx)("p",{className:"text-[11px] font-semibold text-slate-600",children:"input / output"}),(0,b.jsxs)("p",{className:"mt-1 text-slate-900",children:[c.inputBytes," bytes / ",c.outputBytes," bytes"]})]}),(0,b.jsxs)("div",{className:"rounded-lg border border-slate-200 bg-white p-3",children:[(0,b.jsx)("p",{className:"text-[11px] font-semibold text-slate-600",children:"free tier applied"}),(0,b.jsxs)("p",{className:"mt-1 text-slate-900",children:[c.freeTierAppliedMs," ms free · ",c.paidMs," ms paid"]})]})]}),Array.isArray(c.guidanceTips)&&c.guidanceTips.length>0?(0,b.jsxs)("div",{className:"rounded-lg border border-slate-200 bg-white p-3",children:[(0,b.jsx)("p",{className:"text-[11px] font-semibold text-slate-600",children:"tips"}),(0,b.jsx)("ul",{className:"mt-2 list-disc pl-5 space-y-1",children:c.guidanceTips.slice(0,4).map((a,c)=>(0,b.jsx)("li",{className:"text-slate-700",children:a},c))})]}):null]})}var o=a.i(427733);function p(){let a=(0,e.useRouter)(),p="string"==typeof a.query?.id?a.query.id:"",[q,r]=(0,c.useState)(null),[s,t]=(0,c.useState)("A brave robot exploring a new planet"),[u,v]=(0,c.useState)(!1),[w,x]=(0,c.useState)(null),[y,z]=(0,c.useState)(null),[A,B]=(0,c.useState)(null),[C,D]=(0,c.useState)("light"),E=q?.exampleId==="story-generator",F=q?.exampleId==="homework-helper",G=q?.exampleId==="customer-support-bot";(0,c.useEffect)(()=>{if(!p)return;let a=(0,k.getProjectById)(p);a?(r(a),(0,k.setLastOpenedProjectId)(a.id),"story-generator"===a.exampleId&&t("string"==typeof a.lastRun?.input?a.lastRun.input:"A brave robot exploring a new planet"),"homework-helper"===a.exampleId&&t("string"==typeof a.lastRun?.input?a.lastRun.input:"How do I solve 2x + 5 = 15?"),"customer-support-bot"===a.exampleId&&t("string"==typeof a.lastRun?.input?a.lastRun.input:"How do I return an item?")):r(null)},[p]),(0,c.useEffect)(()=>{if(!q)return;let a=Array.isArray(q.runs)?q.runs:q.lastRun?[q.lastRun]:[];B(a[0]?.ranAt||null)},[q?.id]);let H=(0,c.useMemo)(()=>q?"story-generator"===q.exampleId?"ai-story-generator":"homework-helper"===q.exampleId?"ai-homework-helper":"customer-support-bot"===q.exampleId?"ai-support-bot":null:null,[q?.exampleId]);(0,c.useEffect)(()=>{let a=!0;return async function(){if(H)try{let b=new Blob([s]).size,c=await fetch("/api/compute/estimate",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({toolId:H,inputBytes:b,requestedComplexityPreset:C})}),d=await c.json().catch(()=>null);if(!a)return;if(!c.ok||!d?.ok)return void z(null);z({ok:!0,allowed:!!d.allowed,estimatedCreditCost:Number(d.estimatedCreditCost||0),estimatedWallTimeMs:Number(d.estimatedWallTimeMs||0),freeTierRemainingMs:Number(d.freeTierRemainingMs||0),willChargeCredits:!!d.willChargeCredits,reasons:Array.isArray(d.reasons)?d.reasons:[]})}catch{if(!a)return;z(null)}}(),()=>{a=!1}},[H,s,C]);let I=async()=>{if(q){v(!0),x(null);try{let a=E||F||G?s:void 0,{output:b,receipt:c}=await (0,m.runAiStudioProjectLocal)({project:q,input:a});(0,k.updateProjectRun)(q.id,{input:a,output:b,receipt:c});let d=(0,k.getProjectById)(q.id);r(d);let e=d?.runs?.[0]?.ranAt||d?.lastRun?.ranAt||null;B(e)}catch(a){x(a instanceof Error?a.message:"Run failed.")}finally{v(!1)}}},J=async()=>{if(q&&H){v(!0),x(null);try{if(!E&&!F&&!G)return void x("Compute runs are not implemented for this project yet.");let a=await fetch("/api/tools/run",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({toolId:H,mode:"compute",inputs:E?{prompt:s}:{question:s},requestedComplexityPreset:C})}),b=await a.json().catch(()=>null);if(!a.ok||!b)return void x("Compute run failed.");if(!b.success)return void x(String(b.error?.message||"Compute run failed."));(0,k.updateProjectRun)(q.id,{input:s,output:b.output,receipt:b.receipt});let c=(0,k.getProjectById)(q.id);r(c);let d=c?.runs?.[0]?.ranAt||c?.lastRun?.ranAt||null;B(d)}catch(a){x(a instanceof Error?a.message:"Compute run failed.")}finally{v(!1)}}};return p?q?(0,b.jsx)("div",{className:"min-h-screen bg-slate-50",children:(0,b.jsxs)("div",{className:"mx-auto max-w-5xl px-4 py-8 sm:px-6 lg:px-8 space-y-6",children:[(0,b.jsxs)("header",{className:"flex flex-wrap items-start justify-between gap-4",children:[(0,b.jsxs)("div",{className:"min-w-0",children:[(0,b.jsx)("p",{className:"text-xs font-semibold text-slate-600",children:"AI Studio · Project"}),(0,b.jsx)("h1",{className:"mt-1 text-3xl font-bold text-slate-900 truncate",children:q.title}),(0,b.jsxs)("p",{className:"mt-2 text-sm text-slate-600",children:[q.exampleId," · ",q.difficulty," · ",q.audience]})]}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,b.jsxs)("button",{type:"button",onClick:()=>(0,l.exportProjectAsJson)(q),className:"inline-flex items-center gap-2 rounded-lg border border-slate-300 bg-white px-4 py-2 text-sm font-semibold text-slate-900 hover:bg-slate-50 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary-500 focus-visible:ring-offset-2",children:[(0,b.jsx)(f.Download,{className:"w-4 h-4","aria-hidden":"true"}),"Export JSON"]}),(0,b.jsxs)("button",{type:"button",onClick:async()=>{let a=(0,o.createProjectShareCode)(q);await navigator.clipboard.writeText(a),alert("Share code copied. Paste it into /ai-studio/projects to import on another device.")},className:"inline-flex items-center gap-2 rounded-lg border border-slate-300 bg-white px-4 py-2 text-sm font-semibold text-slate-900 hover:bg-slate-50 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary-500 focus-visible:ring-offset-2",children:[(0,b.jsx)(h.Link,{className:"w-4 h-4","aria-hidden":"true"}),"Copy share code"]}),(0,b.jsxs)("button",{type:"button",onClick:()=>(0,l.exportProjectAsPackZip)(q),className:"inline-flex items-center gap-2 rounded-lg border border-slate-300 bg-white px-4 py-2 text-sm font-semibold text-slate-900 hover:bg-slate-50 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary-500 focus-visible:ring-offset-2",children:[(0,b.jsx)(f.Download,{className:"w-4 h-4","aria-hidden":"true"}),"Export pack (ZIP)"]}),(0,b.jsxs)("button",{type:"button",onClick:()=>(0,l.exportProjectAsPdf)(q),className:"inline-flex items-center gap-2 rounded-lg border border-slate-300 bg-white px-4 py-2 text-sm font-semibold text-slate-900 hover:bg-slate-50 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary-500 focus-visible:ring-offset-2",children:[(0,b.jsx)(g.FileText,{className:"w-4 h-4","aria-hidden":"true"}),"Export PDF"]}),(0,b.jsxs)("button",{type:"button",onClick:()=>{confirm(`Delete "${q.title}"? This cannot be undone.`)&&((0,k.deleteProject)(q.id),a.push("/ai-studio"))},className:"inline-flex items-center gap-2 rounded-lg border border-rose-200 bg-rose-50 px-4 py-2 text-sm font-semibold text-rose-900 hover:bg-rose-100 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-rose-400 focus-visible:ring-offset-2",children:[(0,b.jsx)(j.Trash2,{className:"w-4 h-4","aria-hidden":"true"}),"Delete"]})]})]}),w?(0,b.jsx)("div",{className:"rounded-xl border border-rose-200 bg-rose-50 p-4 text-sm text-rose-900",role:"alert",children:w}):null,(0,b.jsxs)("section",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm space-y-4",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold text-slate-900",children:"Run"}),E?(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{htmlFor:"prompt",className:"text-sm font-semibold text-slate-900",children:"Prompt"}),(0,b.jsx)("textarea",{id:"prompt",value:s,onChange:a=>t(a.target.value),rows:4,className:"w-full rounded-lg border border-slate-300 p-3 text-sm focus:outline-none focus:ring-2 focus:ring-primary-500"}),(0,b.jsx)("p",{className:"text-xs text-slate-600",children:"Tip: start simple, then add details. Keep it kind and safe for children."})]}):F?(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{htmlFor:"prompt",className:"text-sm font-semibold text-slate-900",children:"Question"}),(0,b.jsx)("textarea",{id:"prompt",value:s,onChange:a=>t(a.target.value),rows:4,className:"w-full rounded-lg border border-slate-300 p-3 text-sm focus:outline-none focus:ring-2 focus:ring-primary-500"}),(0,b.jsx)("p",{className:"text-xs text-slate-600",children:"Tip: write the exact equation if you can (for example, 2x + 5 = 15). This demo is intentionally limited for safety."})]}):G?(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{htmlFor:"prompt",className:"text-sm font-semibold text-slate-900",children:"Customer question"}),(0,b.jsx)("textarea",{id:"prompt",value:s,onChange:a=>t(a.target.value),rows:3,className:"w-full rounded-lg border border-slate-300 p-3 text-sm focus:outline-none focus:ring-2 focus:ring-primary-500"}),(0,b.jsx)("p",{className:"text-xs text-slate-600",children:"Tip: include the intent (return, refund, delivery). This is a safe demo and does not access real customer data."})]}):(0,b.jsx)("p",{className:"text-sm text-slate-700",children:"This project does not have a runnable interface yet. Local demo runs may still work depending on the template."}),y&&H?(0,b.jsxs)("div",{className:"rounded-xl border border-slate-200 bg-slate-50 p-4 text-sm text-slate-800",children:[(0,b.jsx)("p",{className:"font-semibold text-slate-900",children:"Compute estimate"}),(0,b.jsxs)("p",{className:"mt-1 text-xs text-slate-600",children:["Estimated wall time: ~",Math.round(y.estimatedWallTimeMs/1e3),"s · Free tier remaining: ~",Math.round(y.freeTierRemainingMs/1e3),"s · Estimated credits: ",y.estimatedCreditCost]}),(0,b.jsxs)("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[(0,b.jsx)("span",{className:"text-xs font-semibold text-slate-700",children:"Quality"}),(0,b.jsx)("div",{className:"flex gap-1 rounded-lg border border-slate-300 bg-white p-1",children:["light","standard","heavy"].map(a=>(0,b.jsx)("button",{type:"button",onClick:()=>D(a),className:`rounded-md px-3 py-1 text-xs font-semibold transition ${C===a?"bg-slate-900 text-white":"text-slate-700 hover:bg-slate-50"}`,"aria-pressed":C===a,children:a},a))}),(0,b.jsx)("p",{className:"text-[11px] text-slate-600",children:"Higher quality increases compute time and may cost more credits."})]}),y.allowed?null:(0,b.jsxs)("p",{className:"mt-2 text-xs text-rose-700",children:["This run may be blocked: ",y.reasons?.[0]||"not allowed"]})]}):null,(0,b.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,b.jsxs)("button",{type:"button",onClick:I,disabled:u,className:"inline-flex items-center gap-2 rounded-lg bg-slate-900 px-4 py-2 text-sm font-semibold text-white hover:bg-slate-800 disabled:opacity-50 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-500 focus-visible:ring-offset-2",children:[(0,b.jsx)(i.Play,{className:"w-4 h-4","aria-hidden":"true"}),"Run local (free)"]}),(0,b.jsxs)("button",{type:"button",onClick:J,disabled:u||!H||!!y&&!y.allowed,className:"inline-flex items-center gap-2 rounded-lg border border-slate-300 bg-white px-4 py-2 text-sm font-semibold text-slate-900 hover:bg-slate-50 disabled:opacity-50 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary-500 focus-visible:ring-offset-2",children:[(0,b.jsx)(i.Play,{className:"w-4 h-4","aria-hidden":"true"}),"Run compute (metered)"]})]})]}),(0,b.jsxs)("section",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm space-y-4",children:[(0,b.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold text-slate-900",children:"Run history"}),(0,b.jsx)("p",{className:"text-xs text-slate-600",children:"Your last 30 runs are stored on this device."})]}),(()=>{let a=Array.isArray(q.runs)?q.runs:q.lastRun?[q.lastRun]:[];if(0===a.length)return(0,b.jsx)("p",{className:"text-sm text-slate-600",children:"No runs yet."});let c=a.find(a=>a.ranAt===A)||a[0];return(0,b.jsxs)("div",{className:"grid gap-4 lg:grid-cols-[260px_1fr]",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[a.slice(0,10).map(a=>{let d=a.ranAt===c.ranAt,e=new Date(a.ranAt).toLocaleString(),f=a.receipt?.mode||"local",g=a.receipt?.creditsCharged??0;return(0,b.jsxs)("button",{type:"button",onClick:()=>B(a.ranAt),className:`w-full rounded-lg border p-3 text-left text-xs transition focus:outline-none focus:ring-2 focus:ring-primary-500 ${d?"border-primary-500 bg-primary-50":"border-slate-200 bg-white hover:bg-slate-50"}`,"aria-label":`Open run from ${e}`,children:[(0,b.jsx)("p",{className:"font-semibold text-slate-900",children:e}),(0,b.jsxs)("p",{className:"mt-1 text-slate-600",children:[f," · ",g," credits"]})]},a.ranAt)}),a.length>10?(0,b.jsx)("p",{className:"text-[11px] text-slate-500",children:"Showing latest 10 runs here."}):null]}),(0,b.jsxs)("div",{className:"space-y-3",children:[c.receipt?(0,b.jsx)(n,{receipt:c.receipt}):null,(0,b.jsxs)("div",{className:"flex flex-wrap gap-2",children:["string"==typeof c.input?(0,b.jsx)("button",{type:"button",onClick:()=>t(c.input),className:"rounded-lg border border-slate-300 bg-white px-3 py-2 text-xs font-semibold text-slate-900 hover:bg-slate-50",children:"Load this input"}):null,(0,b.jsx)("button",{type:"button",onClick:()=>navigator.clipboard.writeText(JSON.stringify(c.output,null,2)),className:"rounded-lg border border-slate-300 bg-white px-3 py-2 text-xs font-semibold text-slate-900 hover:bg-slate-50",children:"Copy output"})]}),(0,b.jsx)("pre",{className:"rounded-xl border border-slate-200 bg-slate-50 p-4 text-xs text-slate-900 overflow-auto whitespace-pre-wrap",children:JSON.stringify(c.output,null,2)})]})]})})()]}),(0,b.jsxs)("details",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[(0,b.jsx)("summary",{className:"cursor-pointer text-sm font-semibold text-slate-900",children:"Project configuration"}),(0,b.jsx)("pre",{className:"mt-4 rounded-xl border border-slate-200 bg-slate-50 p-4 text-xs text-slate-900 overflow-auto whitespace-pre-wrap",children:JSON.stringify(q,null,2)})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)(d.default,{href:"/ai-studio",className:"text-sm font-semibold text-primary-600 hover:underline",children:"Back to AI Studio"}),(0,b.jsx)(d.default,{href:"/studios",className:"text-sm font-semibold text-slate-700 hover:underline",children:"Go to studios hub"})]})]})}):(0,b.jsxs)("div",{className:"mx-auto max-w-4xl p-6 space-y-4",children:[(0,b.jsx)("h1",{className:"text-2xl font-semibold text-slate-900",children:"Project not found"}),(0,b.jsx)("p",{className:"text-slate-700",children:"This project may have been deleted, or it may not exist on this device."}),(0,b.jsx)(d.default,{href:"/ai-studio",className:"text-sm font-semibold text-primary-600 hover:underline",children:"Back to AI Studio"})]}):(0,b.jsx)("div",{className:"mx-auto max-w-4xl p-6",children:(0,b.jsx)("p",{className:"text-slate-600",children:"Loading…"})})}a.s(["default",()=>p],885200)},244676,a=>a.a(async(b,c)=>{try{var d=a.i(579168),e=a.i(627068),f=a.i(332759),g=a.i(167684),h=a.i(276695),i=a.i(885200),j=a.i(509193),k=b([h]);[h]=k.then?(await k)():k;let l=(0,f.hoist)(i,"default"),m=(0,f.hoist)(i,"getStaticProps"),n=(0,f.hoist)(i,"getStaticPaths"),o=(0,f.hoist)(i,"getServerSideProps"),p=(0,f.hoist)(i,"config"),q=(0,f.hoist)(i,"reportWebVitals"),r=(0,f.hoist)(i,"unstable_getStaticProps"),s=(0,f.hoist)(i,"unstable_getStaticPaths"),t=(0,f.hoist)(i,"unstable_getStaticParams"),u=(0,f.hoist)(i,"unstable_getServerProps"),v=(0,f.hoist)(i,"unstable_getServerSideProps"),w=new d.PagesRouteModule({definition:{kind:e.RouteKind.PAGES,page:"/ai-studio/projects/[id]",pathname:"/ai-studio/projects/[id]",bundlePath:"",filename:""},distDir:".next",relativeProjectDir:"",components:{App:h.default,Document:g.default},userland:i}),x=(0,j.getHandler)({srcPage:"/ai-studio/projects/[id]",config:p,userland:i,routeModule:w,getStaticPaths:n,getStaticProps:m,getServerSideProps:o});a.s(["config",0,p,"default",0,l,"getServerSideProps",0,o,"getStaticPaths",0,n,"getStaticProps",0,m,"handler",0,x,"reportWebVitals",0,q,"routeModule",0,w,"unstable_getServerProps",0,u,"unstable_getServerSideProps",0,v,"unstable_getStaticParams",0,t,"unstable_getStaticPaths",0,s,"unstable_getStaticProps",0,r]),c()}catch(a){c(a)}},!1)];

//# debugId=4be3a381-f01a-73c2-469c-9d2be61db796
//# sourceMappingURL=_da347f94._.js.map