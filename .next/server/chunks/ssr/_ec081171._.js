;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="2ae6331c-59ae-ea11-40c9-38051ffeb8d8")}catch(e){}}();
module.exports=[533441,a=>{"use strict";let b=(0,a.i(883706).default)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);a.s(["Check",()=>b],533441)},596221,a=>{"use strict";let b=(0,a.i(883706).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);a.s(["Loader2",()=>b],596221)},107758,a=>{"use strict";var b=a.i(218282),c=a.i(572131),d=a.i(875003),e=a.i(50944),f=a.i(501027),g=a.i(533441),h=a.i(596221),i=a.i(292e3),j=a.i(238246);let k=[{id:"starter",label:"Starter",price:10,credits:500,pricePerCredit:.02},{id:"standard",label:"Standard",price:25,credits:1400,pricePerCredit:.0179},{id:"professional",label:"Professional",price:50,credits:3e3,pricePerCredit:.0167}];function l(){let{data:a,status:l}=(0,d.useSession)(),m=(0,e.useRouter)(),[n,o]=(0,c.useState)(null),[p,q]=(0,c.useState)(!0),[r,s]=(0,c.useState)(null),[t,u]=(0,c.useState)(null),[v,w]=(0,c.useState)(!1);async function x(){try{q(!0),s(null);let a=await fetch("/api/credits/balance");if(!a.ok)throw Error("Failed to load credit balance");let b=await a.json();o(b)}catch(a){s(a instanceof Error?a.message:"Failed to load balance")}finally{q(!1)}}async function y(b){if(!a?.user)return void m.push("/api/auth/signin?callbackUrl=/account/credits");w(!0),s(null);try{let a=await fetch("/api/billing/checkout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({packId:b})});if(!a.ok){let b=await a.json();throw Error(b.error||"Failed to create checkout session")}let c=await a.json();if(c.url)window.location.href=c.url;else throw Error("No checkout URL returned")}catch(a){s(a instanceof Error?a.message:"Purchase failed"),w(!1)}}return((0,c.useEffect)(()=>{"unauthenticated"===l?m.push("/api/auth/signin?callbackUrl=/account/credits"):"authenticated"===l&&x()},[l,m]),"loading"===l||p)?(0,b.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-sky-50/30 to-slate-50 flex items-center justify-center",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)(h.Loader2,{className:"w-8 h-8 animate-spin text-sky-600 mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-slate-600",children:"Loading credit balance..."})]})}):"unauthenticated"===l?null:(0,b.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-sky-50/30 to-slate-50",children:(0,b.jsxs)("div",{className:"mx-auto max-w-7xl px-4 py-8 sm:px-6 lg:px-8",children:[(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsx)("h1",{className:"text-4xl font-bold text-slate-900 mb-2",children:"Credits"}),(0,b.jsx)("p",{className:"text-lg text-slate-600",children:"Purchase credits to use premium tools and features"})]}),r&&(0,b.jsx)("div",{className:"mb-6 rounded-lg border border-amber-200 bg-amber-50 p-4",children:(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)(i.AlertCircle,{className:"w-5 h-5 text-amber-600 mt-0.5 flex-shrink-0"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"font-semibold text-amber-900",children:"Error"}),(0,b.jsx)("p",{className:"text-sm text-amber-800 mt-1",children:r})]}),(0,b.jsx)("button",{onClick:()=>s(null),className:"text-amber-600 hover:text-amber-800","aria-label":"Dismiss error",children:"×"})]})}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,b.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,b.jsxs)("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold text-slate-900",children:"Current Balance"}),(0,b.jsx)("button",{onClick:x,disabled:p,className:"text-sm text-sky-600 hover:text-sky-700 font-medium",children:"Refresh"})]}),n?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"flex items-baseline gap-3 mb-6",children:[(0,b.jsx)("span",{className:"text-5xl font-bold text-slate-900",children:n.balance.toLocaleString()}),(0,b.jsx)("span",{className:"text-lg text-slate-600",children:"credits"})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsx)("span",{className:"text-sm font-medium text-slate-700",children:"Daily Usage"}),(0,b.jsxs)("span",{className:"text-sm text-slate-600",children:[n.usage.daily.used," / ",n.usage.daily.cap]})]}),(0,b.jsx)("div",{className:"w-full bg-slate-200 rounded-full h-2.5",children:(0,b.jsx)("div",{className:`h-2.5 rounded-full transition-all ${n.alerts.daily?"bg-amber-500":n.usage.daily.percentage>=50?"bg-sky-500":"bg-emerald-500"}`,style:{width:`${Math.min(100,n.usage.daily.percentage)}%`}})}),(0,b.jsxs)("p",{className:"text-xs text-slate-500 mt-1",children:[n.usage.daily.remaining," remaining today"]})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsx)("span",{className:"text-sm font-medium text-slate-700",children:"Monthly Usage"}),(0,b.jsxs)("span",{className:"text-sm text-slate-600",children:[n.usage.monthly.used," / ",n.usage.monthly.cap]})]}),(0,b.jsx)("div",{className:"w-full bg-slate-200 rounded-full h-2.5",children:(0,b.jsx)("div",{className:`h-2.5 rounded-full transition-all ${n.alerts.monthly?"bg-amber-500":n.usage.monthly.percentage>=50?"bg-sky-500":"bg-emerald-500"}`,style:{width:`${Math.min(100,n.usage.monthly.percentage)}%`}})}),(0,b.jsxs)("p",{className:"text-xs text-slate-500 mt-1",children:[n.usage.monthly.remaining," remaining this month"]})]})]}),(0,b.jsxs)("div",{className:"mt-6 pt-6 border-t border-slate-200",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-slate-700",children:"Current Plan"}),(0,b.jsx)("p",{className:"text-lg font-semibold text-slate-900",children:n.plan.label})]}),(0,b.jsx)(j.default,{href:"/account/upgrade",className:"text-sm text-sky-600 hover:text-sky-700 font-medium",children:"Upgrade →"})]}),(0,b.jsxs)("p",{className:"text-xs text-slate-500 mt-2",children:[n.plan.monthlyCredits.toLocaleString()," credits/month,"," ",n.plan.dailyCap.toLocaleString(),"/day cap"]})]})]}):(0,b.jsx)("div",{className:"text-center py-8",children:(0,b.jsx)("p",{className:"text-slate-500",children:"Unable to load balance"})})]}),(0,b.jsxs)("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold text-slate-900 mb-6",children:"Purchase Credits"}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:k.map(a=>(0,b.jsxs)("div",{className:`rounded-xl border-2 p-5 transition-all cursor-pointer ${t===a.id?"border-sky-500 bg-sky-50":"border-slate-200 hover:border-slate-300 bg-white"}`,onClick:()=>u(a.id),children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,b.jsx)("h3",{className:"font-semibold text-slate-900",children:a.label}),t===a.id&&(0,b.jsx)(g.Check,{className:"w-5 h-5 text-sky-600"})]}),(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsx)("div",{className:"flex items-baseline gap-2",children:(0,b.jsxs)("span",{className:"text-3xl font-bold text-slate-900",children:["£",a.price]})}),(0,b.jsxs)("p",{className:"text-sm text-slate-600 mt-1",children:[a.credits.toLocaleString()," credits"]}),"starter"!==a.id&&(0,b.jsxs)("p",{className:"text-xs text-emerald-600 mt-1 font-medium",children:[Math.round((1-a.pricePerCredit/.02)*100),"% savings"]})]}),(0,b.jsx)("button",{onClick:b=>{b.stopPropagation(),y(a.id)},disabled:v,className:"w-full px-4 py-2 bg-sky-600 hover:bg-sky-700 text-white rounded-lg font-semibold transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:v&&t===a.id?(0,b.jsxs)("span",{className:"flex items-center justify-center gap-2",children:[(0,b.jsx)(h.Loader2,{className:"w-4 h-4 animate-spin"}),"Processing..."]}):"Purchase"})]},a.id))}),(0,b.jsx)("p",{className:"text-xs text-slate-500 mt-4 text-center",children:"Credits never expire. All purchases are final."})]})]}),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[(0,b.jsxs)("h2",{className:"text-lg font-semibold text-slate-900 mb-4 flex items-center gap-2",children:[(0,b.jsx)(f.Zap,{className:"w-5 h-5 text-sky-600"}),"How Credits Work"]}),(0,b.jsxs)("div",{className:"space-y-3 text-sm text-slate-700",children:[(0,b.jsx)("p",{children:"Credits are consumed when you use server-side tools and features. Client-side tools are always free."}),(0,b.jsxs)("p",{children:[(0,b.jsx)("strong",{children:"Base fee:"})," 2 credits per server run"]}),(0,b.jsxs)("p",{children:[(0,b.jsx)("strong",{children:"Compute:"})," 1 credit per 2 seconds of CPU time"]}),(0,b.jsxs)("p",{children:[(0,b.jsx)("strong",{children:"Memory:"})," 1 credit per 4 seconds per GB RAM"]}),(0,b.jsxs)("p",{className:"pt-3 border-t border-slate-200",children:[(0,b.jsx)("strong",{children:"Price:"})," £","0.02"," per credit"]})]})]}),(0,b.jsxs)("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Quick Links"}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.default,{href:"/account",className:"block text-sm text-sky-600 hover:text-sky-700 font-medium",children:"Account Settings →"}),(0,b.jsx)(j.default,{href:"/account/settings/credits",className:"block text-sm text-sky-600 hover:text-sky-700 font-medium",children:"Credit Settings →"}),(0,b.jsx)(j.default,{href:"/account/usage",className:"block text-sm text-sky-600 hover:text-sky-700 font-medium",children:"Usage Analytics →"}),(0,b.jsx)(j.default,{href:"/account/upgrade",className:"block text-sm text-sky-600 hover:text-sky-700 font-medium",children:"Upgrade Plan →"})]})]})]})]})]})})}a.s(["default",()=>l],107758)}];

//# debugId=2ae6331c-59ae-ea11-40c9-38051ffeb8d8
//# sourceMappingURL=_ec081171._.js.map