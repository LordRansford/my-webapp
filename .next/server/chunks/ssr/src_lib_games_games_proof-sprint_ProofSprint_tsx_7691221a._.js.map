{
  "version": 3,
  "sources": [],
  "debugId": "8a76e939-ab40-b333-f48a-b56980cdfa4a",
  "sections": [
    {"offset": {"line": 1, "column": 0}, "map": {"version":3,"sources":["../../../../src/lib/games/games/proof-sprint/ProofSprint.tsx","../../../../src/lib/games/games/proof-sprint/puzzleGenerator.ts","../../../../src/lib/games/games/proof-sprint/moveDefinitions.ts","../../../../src/lib/games/games/proof-sprint/gameState.ts","../../../../src/lib/games/games/proof-sprint/persistence.ts","../../../../src/lib/games/games/proof-sprint/explainabilityAnalyzer.ts"],"sourcesContent":["/**\n * Proof Sprint - Main Game Component\n */\n\n\"use client\";\n\nimport React, { useState, useCallback, useEffect } from \"react\";\nimport GameShell from \"@/lib/games/framework/GameShell\";\nimport type { GameConfig, GameStatus } from \"@/lib/games/framework/types\";\nimport type { GameState, Move, Statement } from \"./types\";\nimport { generatePuzzle } from \"./puzzleGenerator\";\nimport { initializeGameState, startGame, executeMove, checkWinCondition } from \"./gameState\";\nimport { getProgress, saveProgress, updateProgressAfterGame } from \"./persistence\";\nimport {\n  getOrGenerateTodayChallenge,\n  completeTodayChallenge,\n} from \"@/lib/games/shared/dailyChallenges\";\nimport {\n  generateTodayChallengeCode,\n  storeChallengeCode,\n} from \"@/lib/games/shared/challengeCodes\";\nimport {\n  updateStreakForGame,\n  getStreakDataForGame,\n} from \"@/lib/games/shared/streakTracking\";\nimport {\n  checkAndUnlockAchievements,\n} from \"@/lib/games/shared/achievements\";\nimport {\n  submitScore,\n} from \"@/lib/games/shared/scoreComparison\";\nimport {\n  ChallengeCodeShare,\n  ScoreComparisonDisplay,\n  AchievementDisplay,\n  LeaderboardView,\n} from \"@/lib/games/shared/components\";\nimport type { ChallengeCode } from \"@/lib/games/shared/challengeCodes/types\";\nimport { analyzeRun } from \"./explainabilityAnalyzer\";\nimport { calculateBaseXP, createRewardContext, generateRewardResult } from \"@/lib/games/shared/variableRewards\";\nimport { getMoveDefinitions } from \"./moveDefinitions\";\n\nconst GAME_CONFIG: GameConfig = {\n  id: \"proof-sprint\",\n  title: \"Proof Sprint\",\n  description: \"Build correct mathematical proofs under step constraints\",\n  category: \"logic\",\n  modes: [\"solo\", \"daily\"],\n  supportsMultiplayer: false,\n  minPlayers: 1,\n  maxPlayers: 1,\n  estimatedMinutes: 10,\n  tutorialAvailable: true,\n};\n\nconst GAME_ID = \"proof-sprint\";\n\nexport default function ProofSprint() {\n  const [status, setStatus] = useState<GameStatus>(\"idle\");\n  const [gameState, setGameState] = useState<GameState | null>(null);\n  const [selectedMove, setSelectedMove] = useState<Move | null>(null);\n  const [selectedStatements, setSelectedStatements] = useState<string[]>([]);\n  const [challengeCodeData, setChallengeCodeData] = useState<ChallengeCode | null>(null);\n  const [scoreComparison, setScoreComparison] = useState<any>(null);\n  const [achievementIds, setAchievementIds] = useState<string[]>([]);\n  const [playerScoreData, setPlayerScoreData] = useState<any>(null);\n  const [analysis, setAnalysis] = useState<any>(null);\n  const [startTime, setStartTime] = useState<number | null>(null);\n\n  useEffect(() => {\n    if (status === \"idle\" && !gameState) {\n      initializeChallenge();\n    }\n  }, [status, gameState]);\n\n  const initializeChallenge = useCallback(() => {\n    try {\n      const dailyChallenge = getOrGenerateTodayChallenge(GAME_ID);\n      const puzzle = generatePuzzle({\n        seed: dailyChallenge.seed,\n        topicTrack: 'algebra',\n        difficulty: 'student',\n      });\n      const state = initializeGameState(puzzle, dailyChallenge.seed);\n      setGameState(state);\n      setSelectedMove(null);\n      setSelectedStatements([]);\n      setChallengeCodeData(null);\n      setScoreComparison(null);\n      setAchievementIds([]);\n      setPlayerScoreData(null);\n      setAnalysis(null);\n    } catch (error) {\n      console.error(\"Error initializing challenge:\", error);\n    }\n  }, []);\n\n  const handleStart = useCallback(() => {\n    if (!gameState) {\n      initializeChallenge();\n      return;\n    }\n    const started = startGame(gameState);\n    setGameState(started);\n    setStatus(\"playing\");\n    setStartTime(Date.now());\n  }, [gameState, initializeChallenge]);\n\n  const handleMoveSelect = useCallback((move: Move) => {\n    if (status !== \"playing\" || !gameState) return;\n    setSelectedMove(move);\n    setSelectedStatements([]);\n  }, [status, gameState]);\n\n  const handleStatementSelect = useCallback((statementId: string) => {\n    if (status !== \"playing\" || !gameState || !selectedMove) return;\n    \n    setSelectedStatements(prev => {\n      if (prev.includes(statementId)) {\n        return prev.filter(id => id !== statementId);\n      }\n      return [...prev, statementId];\n    });\n  }, [status, gameState, selectedMove]);\n\n  const handleExecuteMove = useCallback(() => {\n    if (!gameState || !selectedMove || selectedStatements.length === 0 || status !== \"playing\") return;\n    \n    const newState = executeMove(gameState, selectedMove, selectedStatements);\n    setGameState(newState);\n    setSelectedMove(null);\n    setSelectedStatements([]);\n    \n    if (newState.status === 'finished') {\n      setStatus(\"finished\");\n      handleGameComplete(newState);\n    }\n  }, [gameState, selectedMove, selectedStatements, status]);\n\n  const handleGameComplete = useCallback((state: GameState) => {\n    if (!state.outcome || !startTime) return;\n    \n    const timeUsed = Date.now() - startTime;\n    const win = state.outcome === 'win';\n    const elegance = state.elegance || 0;\n    \n    // Calculate score\n    const stepEfficiency = 1 - (state.stepCount / state.puzzle.maxSteps);\n    const score = win\n      ? Math.round((stepEfficiency * 50 + elegance * 5) * (1 - state.penalty))\n      : Math.round(stepEfficiency * 30);\n    \n    // Generate challenge code\n    const codeData = generateTodayChallengeCode(GAME_ID, state.seed);\n    storeChallengeCode(codeData);\n    setChallengeCodeData(codeData);\n    \n    // Calculate base XP\n    const baseXP = calculateBaseXP({\n      win,\n      score,\n      efficiency: stepEfficiency * 100,\n      time: timeUsed,\n      difficulty: state.puzzle.difficulty,\n      tier: getProgress().currentTier,\n    });\n    \n    // Generate variable rewards\n    const streakData = getStreakDataForGame(GAME_ID);\n    const rewardContext = createRewardContext({\n      gameId: GAME_ID,\n      seed: state.seed,\n      baseXP,\n      performance: {\n        score,\n        steps: state.stepCount,\n        elegance,\n        time: timeUsed,\n      },\n      streak: streakData.currentStreak,\n      tier: getProgress().currentTier,\n    });\n    const rewardResult = generateRewardResult(rewardContext);\n    \n    // Update progress\n    const progress = getProgress();\n    const updatedProgress = updateProgressAfterGame(progress, state, score, elegance);\n    updatedProgress.xp = rewardResult.totalXP;\n    saveProgress(updatedProgress);\n    \n    // Submit score\n    const scoreData = {\n      score,\n      time: timeUsed,\n      scoreValue: score,\n      timestamp: Date.now(),\n    };\n    setPlayerScoreData(scoreData);\n    const comparison = submitScore(codeData.code, scoreData);\n    setScoreComparison(comparison);\n    \n    // Complete daily challenge\n    completeTodayChallenge(GAME_ID, {\n      score,\n      time: timeUsed,\n      scoreValue: score,\n    });\n    \n    // Update streak\n    updateStreakForGame(GAME_ID, true);\n    \n    // Check achievements\n    const achievementResult = checkAndUnlockAchievements({\n      gameId: GAME_ID,\n      currentStreak: streakData.currentStreak + 1,\n      gamesCompleted: updatedProgress.stats.puzzlesSolved,\n      score,\n      time: timeUsed,\n    });\n    setAchievementIds(achievementResult.newlyUnlocked);\n    \n    // Generate analysis\n    const gameAnalysis = analyzeRun(state);\n    setAnalysis(gameAnalysis);\n  }, [startTime]);\n\n  const handleReset = useCallback(() => {\n    setStatus(\"idle\");\n    setGameState(null);\n    setSelectedMove(null);\n    setSelectedStatements([]);\n    setChallengeCodeData(null);\n    setScoreComparison(null);\n    setAchievementIds([]);\n    setPlayerScoreData(null);\n    setAnalysis(null);\n    setStartTime(null);\n  }, []);\n\n  const rightPanel = gameState ? (\n    <div className=\"space-y-4\">\n      <div>\n        <h3 className=\"text-sm font-semibold text-slate-900 mb-2\">Steps</h3>\n        <div className=\"text-lg font-bold\">\n          {gameState.stepCount} / {gameState.puzzle.maxSteps}\n        </div>\n      </div>\n      <div>\n        <h3 className=\"text-sm font-semibold text-slate-900 mb-2\">Penalty</h3>\n        <div className=\"text-lg font-bold text-red-600\">\n          {gameState.penalty.toFixed(2)}\n        </div>\n      </div>\n      {gameState.hintTokens > 0 && (\n        <div>\n          <h3 className=\"text-sm font-semibold text-slate-900 mb-2\">Hints</h3>\n          <div className=\"text-lg font-bold\">\n            {gameState.hintTokens}\n          </div>\n        </div>\n      )}\n    </div>\n  ) : null;\n\n  return (\n    <GameShell\n      config={GAME_CONFIG}\n      status={status}\n      onStart={handleStart}\n      onReset={handleReset}\n      rightPanel={rightPanel}\n    >\n      <div className=\"p-4\">\n        {!gameState ? (\n          <div className=\"text-center text-slate-600\">Loading puzzle...</div>\n        ) : status === \"idle\" ? (\n          <div className=\"max-w-2xl mx-auto space-y-4\">\n            <h2 className=\"text-2xl font-bold text-slate-900\">{gameState.puzzle.name}</h2>\n            <p className=\"text-slate-600\">{gameState.puzzle.description}</p>\n            <div className=\"space-y-2\">\n              <div><strong>Target:</strong> {gameState.puzzle.targetStatement.expression}</div>\n              <div><strong>Max Steps:</strong> {gameState.puzzle.maxSteps}</div>\n              <div><strong>Hints:</strong> {gameState.puzzle.hintTokens}</div>\n            </div>\n            <button\n              onClick={handleStart}\n              className=\"w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700\"\n            >\n              Start Proof\n            </button>\n          </div>\n        ) : status === \"playing\" || status === \"finished\" ? (\n          <div className=\"max-w-4xl mx-auto space-y-6\">\n            {/* Target Statement */}\n            <div className=\"rounded-xl border-2 border-blue-300 bg-blue-50 p-4\">\n              <h3 className=\"text-sm font-semibold text-slate-900 mb-2\">Target</h3>\n              <div className=\"text-lg font-mono font-bold text-blue-900\">\n                {gameState.puzzle.targetStatement.expression}\n              </div>\n            </div>\n\n            {/* Current Statements */}\n            <div className=\"rounded-xl border border-slate-200 bg-white p-4\">\n              <h3 className=\"text-lg font-semibold text-slate-900 mb-3\">Current Statements</h3>\n              <div className=\"space-y-2\">\n                {gameState.currentStatements.map((statement, idx) => (\n                  <div\n                    key={statement.id}\n                    className={`p-2 border rounded ${\n                      selectedStatements.includes(statement.id)\n                        ? 'border-blue-500 bg-blue-50'\n                        : 'border-slate-200'\n                    }`}\n                  >\n                    <div className=\"flex items-center justify-between\">\n                      <div className=\"font-mono text-sm\">\n                        {statement.stepNumber && `Step ${statement.stepNumber}: `}\n                        {statement.expression}\n                      </div>\n                      {status === \"playing\" && selectedMove && (\n                        <button\n                          onClick={() => handleStatementSelect(statement.id)}\n                          className=\"px-2 py-1 text-xs bg-blue-100 rounded hover:bg-blue-200\"\n                        >\n                          {selectedStatements.includes(statement.id) ? 'Selected' : 'Select'}\n                        </button>\n                      )}\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </div>\n\n            {/* Available Moves */}\n            {status === \"playing\" && (\n              <div className=\"rounded-xl border border-slate-200 bg-white p-4\">\n                <h3 className=\"text-lg font-semibold text-slate-900 mb-3\">Available Moves</h3>\n                <div className=\"grid grid-cols-2 md:grid-cols-3 gap-2\">\n                  {gameState.puzzle.availableMoves.map(move => {\n                    const canApply = move.applicable(gameState.currentStatements);\n                    return (\n                      <button\n                        key={move.id}\n                        onClick={() => handleMoveSelect(move)}\n                        disabled={!canApply}\n                        className={`p-3 border-2 rounded-lg text-left ${\n                          selectedMove?.id === move.id\n                            ? 'border-blue-500 bg-blue-50'\n                            : canApply\n                            ? 'border-slate-300 hover:border-blue-300'\n                            : 'border-slate-200 bg-slate-50 opacity-50'\n                        }`}\n                      >\n                        <div className=\"font-semibold text-slate-900\">{move.name}</div>\n                        <div className=\"text-xs text-slate-600\">{move.description}</div>\n                        {move.penalty > 0 && (\n                          <div className=\"text-xs text-red-600\">Penalty: {move.penalty}</div>\n                        )}\n                      </button>\n                    );\n                  })}\n                </div>\n              </div>\n            )}\n\n            {/* Execute Button */}\n            {status === \"playing\" && selectedMove && selectedStatements.length > 0 && (\n              <button\n                onClick={handleExecuteMove}\n                className=\"w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700\"\n              >\n                Execute {selectedMove.name}\n              </button>\n            )}\n\n            {/* Results */}\n            {status === \"finished\" && challengeCodeData && (\n              <div className=\"space-y-6\">\n                <div className=\"text-center\">\n                  <div className={`text-3xl font-bold mb-2 ${\n                    gameState.outcome === 'win' ? 'text-green-600' : 'text-red-600'\n                  }`}>\n                    {gameState.outcome === 'win' ? 'Proof Complete!' : 'Failed'}\n                  </div>\n                  {gameState.elegance !== undefined && (\n                    <div className=\"text-sm text-slate-600\">\n                      Elegance: {gameState.elegance.toFixed(1)}/10 | Steps: {gameState.stepCount}\n                    </div>\n                  )}\n                </div>\n\n                <ChallengeCodeShare code={challengeCodeData} score={playerScoreData?.score || 0} />\n\n                {scoreComparison && (\n                  <div className=\"rounded-xl border border-slate-200 bg-white p-4\">\n                    <ScoreComparisonDisplay comparison={scoreComparison} />\n                  </div>\n                )}\n\n                <div className=\"rounded-xl border border-slate-200 bg-white p-4\">\n                  <LeaderboardView\n                    challengeCode={challengeCodeData.code}\n                    playerScore={playerScoreData || undefined}\n                  />\n                </div>\n\n                {achievementIds.length > 0 && (\n                  <div className=\"rounded-xl border border-slate-200 bg-white p-4\">\n                    <AchievementDisplay achievementIds={achievementIds} compact />\n                  </div>\n                )}\n\n                {analysis && (\n                  <div className=\"rounded-xl border border-slate-200 bg-white p-4\">\n                    <h3 className=\"text-lg font-semibold text-slate-900 mb-3\">Analysis</h3>\n                    <div className=\"space-y-3\">\n                      <div>\n                        <h4 className=\"font-medium text-slate-900 mb-1\">Summary</h4>\n                        <p className=\"text-sm text-slate-600\">{analysis.summary}</p>\n                      </div>\n                      {analysis.recommendations.length > 0 && (\n                        <div>\n                          <h4 className=\"font-medium text-slate-900 mb-1\">Recommendations</h4>\n                          <ul className=\"text-sm text-slate-600 list-disc list-inside space-y-1\">\n                            {analysis.recommendations.map((rec: any, i: number) => (\n                              <li key={i}>{rec.description}</li>\n                            ))}\n                          </ul>\n                        </div>\n                      )}\n                    </div>\n                  </div>\n                )}\n\n                <button\n                  onClick={handleReset}\n                  className=\"w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700\"\n                >\n                  New Puzzle\n                </button>\n              </div>\n            )}\n          </div>\n        ) : null}\n      </div>\n    </GameShell>\n  );\n}\n","/**\n * Proof Sprint - Puzzle Generator\n * \n * Generates deterministic mathematical proof puzzles.\n */\n\nimport { SeededRNG } from '@/lib/games/framework/SeededRNG';\nimport type { Puzzle, Statement, Move, TopicTrack, Difficulty } from './types';\nimport { getMoveDefinitions } from './moveDefinitions';\n\nexport function generatePuzzle(params: {\n  seed: number;\n  topicTrack: TopicTrack;\n  difficulty: Difficulty;\n}): Puzzle {\n  const rng = new SeededRNG(params.seed);\n  const config = getDifficultyConfig(params.difficulty);\n  \n  // Generate puzzle based on topic track\n  const { givenStatements, targetStatement } = generatePuzzleContent(\n    params.topicTrack,\n    params.difficulty,\n    rng\n  );\n  \n  // Get available moves for this difficulty\n  const allMoves = getMoveDefinitions();\n  const availableMoves = allMoves.filter(move => \n    config.availableMoveTypes.includes(move.type)\n  );\n  \n  return {\n    id: `proof-${params.seed}`,\n    seed: params.seed,\n    name: `${params.topicTrack} Proof Puzzle ${params.seed}`,\n    description: `Prove the target statement in ${config.maxSteps} steps or less.`,\n    topicTrack: params.topicTrack,\n    difficulty: params.difficulty,\n    givenStatements,\n    targetStatement,\n    availableMoves,\n    maxSteps: config.maxSteps,\n    hintTokens: config.hintTokens,\n    tier: getTierForDifficulty(params.difficulty),\n  };\n}\n\ninterface DifficultyConfig {\n  maxSteps: number;\n  hintTokens: number;\n  availableMoveTypes: Move['type'][];\n}\n\nfunction getDifficultyConfig(difficulty: Difficulty): DifficultyConfig {\n  switch (difficulty) {\n    case 'beginner':\n      return {\n        maxSteps: 15,\n        hintTokens: 3,\n        availableMoveTypes: ['distribute', 'simplify', 'combine'],\n      };\n    case 'student':\n      return {\n        maxSteps: 12,\n        hintTokens: 2,\n        availableMoveTypes: ['distribute', 'simplify', 'combine', 'factor'],\n      };\n    case 'scholar':\n      return {\n        maxSteps: 10,\n        hintTokens: 2,\n        availableMoveTypes: ['distribute', 'simplify', 'combine', 'factor', 'substitute'],\n      };\n    case 'theorist':\n      return {\n        maxSteps: 8,\n        hintTokens: 1,\n        availableMoveTypes: ['distribute', 'simplify', 'combine', 'factor', 'substitute', 'expand'],\n      };\n    case 'master':\n      return {\n        maxSteps: 6,\n        hintTokens: 0,\n        availableMoveTypes: ['distribute', 'simplify', 'combine', 'factor', 'substitute', 'expand', 'theorem'],\n      };\n  }\n}\n\nfunction generatePuzzleContent(\n  track: TopicTrack,\n  difficulty: Difficulty,\n  rng: SeededRNG\n): { givenStatements: Statement[]; targetStatement: Statement } {\n  // Simplified puzzle generation - in full implementation, this would generate\n  // topic-specific puzzles (algebra, number theory, etc.)\n  \n  const givenStatements: Statement[] = [\n    {\n      id: 'given-1',\n      expression: 'a + b = c',\n      type: 'given',\n    },\n    {\n      id: 'given-2',\n      expression: 'd = 2',\n      type: 'given',\n    },\n  ];\n  \n  const targetStatement: Statement = {\n    id: 'target',\n    expression: '(a + b)^2 = a^2 + 2ab + b^2',\n    type: 'target',\n  };\n  \n  return { givenStatements, targetStatement };\n}\n\nfunction getTierForDifficulty(difficulty: Difficulty): number {\n  switch (difficulty) {\n    case 'beginner': return 0;\n    case 'student': return 100;\n    case 'scholar': return 300;\n    case 'theorist': return 600;\n    case 'master': return 1000;\n  }\n}\n","/**\n * Proof Sprint - Move Definitions\n * \n * Defines available proof moves/techniques.\n */\n\nimport type { Move, Statement } from './types';\n\nexport function getMoveDefinitions(): Move[] {\n  return [\n    {\n      id: 'distribute',\n      type: 'distribute',\n      name: 'Distribute',\n      description: 'Distribute multiplication over addition',\n      penalty: 0,\n      applicable: (statements) => statements.some(s => s.expression.includes('(')),\n    },\n    {\n      id: 'factor',\n      type: 'factor',\n      name: 'Factor',\n      description: 'Factor out common terms',\n      penalty: 0.1,\n      applicable: (statements) => true, // Can always try to factor\n    },\n    {\n      id: 'simplify',\n      type: 'simplify',\n      name: 'Simplify',\n      description: 'Simplify expression',\n      penalty: 0,\n      applicable: (statements) => true,\n    },\n    {\n      id: 'combine',\n      type: 'combine',\n      name: 'Combine Like Terms',\n      description: 'Combine similar terms',\n      penalty: 0,\n      applicable: (statements) => true,\n    },\n    {\n      id: 'substitute',\n      type: 'substitute',\n      name: 'Substitute',\n      description: 'Substitute one expression for another',\n      penalty: 0.05,\n      applicable: (statements) => statements.length >= 2,\n    },\n    {\n      id: 'expand',\n      type: 'expand',\n      name: 'Expand',\n      description: 'Expand expression (powerful but penalized)',\n      penalty: 0.1,\n      applicable: (statements) => statements.some(s => s.expression.includes('^')),\n    },\n    {\n      id: 'theorem',\n      type: 'theorem',\n      name: 'Apply Theorem',\n      description: 'Apply mathematical theorem (very powerful but high penalty)',\n      penalty: 0.2,\n      applicable: (statements) => statements.length >= 2,\n    },\n  ];\n}\n","/**\n * Proof Sprint - Game State Management\n */\n\nimport type { GameState, Puzzle, Move, Statement, ProofStep } from './types';\n\n/**\n * Initialize game state from puzzle\n */\nexport function initializeGameState(puzzle: Puzzle, seed: number): GameState {\n  return {\n    puzzle,\n    currentStatements: [...puzzle.givenStatements],\n    proofSteps: [],\n    stepCount: 0,\n    penalty: 0,\n    hintTokens: puzzle.hintTokens,\n    seed,\n    status: 'idle',\n  };\n}\n\n/**\n * Start the game\n */\nexport function startGame(state: GameState): GameState {\n  return {\n    ...state,\n    status: 'playing',\n  };\n}\n\n/**\n * Execute move\n */\nexport function executeMove(\n  state: GameState,\n  move: Move,\n  inputStatementIds: string[]\n): GameState {\n  if (state.status !== 'playing') return state;\n  \n  // Validate move\n  if (!move.applicable(state.currentStatements)) {\n    return state; // Invalid move\n  }\n  \n  // Check step limit\n  if (state.stepCount >= state.puzzle.maxSteps) {\n    return {\n      ...state,\n      status: 'finished',\n      outcome: 'loss',\n    };\n  }\n  \n  // Apply move (simplified - in full implementation, this would actually transform expressions)\n  const outputStatement: Statement = {\n    id: `derived-${state.stepCount + 1}`,\n    expression: `[Result of ${move.name}]`, // Simplified\n    type: 'derived',\n    stepNumber: state.stepCount + 1,\n  };\n  \n  const proofStep: ProofStep = {\n    stepNumber: state.stepCount + 1,\n    move,\n    inputStatements: inputStatementIds,\n    outputStatement,\n    penalty: move.penalty,\n  };\n  \n  const newState: GameState = {\n    ...state,\n    currentStatements: [...state.currentStatements, outputStatement],\n    proofSteps: [...state.proofSteps, proofStep],\n    stepCount: state.stepCount + 1,\n    penalty: state.penalty + move.penalty,\n  };\n  \n  // Check if target reached (simplified check)\n  if (outputStatement.expression === state.puzzle.targetStatement.expression) {\n    newState.status = 'finished';\n    newState.outcome = 'win';\n    newState.elegance = calculateElegance(newState);\n  }\n  \n  return newState;\n}\n\nfunction calculateElegance(state: GameState): number {\n  // Simplified elegance calculation\n  // In full implementation, would analyze proof structure, move variety, etc.\n  const stepEfficiency = 1 - (state.stepCount / state.puzzle.maxSteps);\n  const penaltyPenalty = state.penalty;\n  const moveVariety = new Set(state.proofSteps.map(s => s.move.type)).size / state.proofSteps.length;\n  \n  return Math.max(0, Math.min(10, (stepEfficiency * 5 + moveVariety * 5 - penaltyPenalty * 2)));\n}\n\n/**\n * Check win condition\n */\nexport function checkWinCondition(state: GameState): boolean {\n  return state.currentStatements.some(s => \n    s.expression === state.puzzle.targetStatement.expression\n  );\n}\n\n/**\n * Check loss condition\n */\nexport function checkLossCondition(state: GameState): boolean {\n  return state.stepCount >= state.puzzle.maxSteps && !checkWinCondition(state);\n}\n","/**\n * Proof Sprint - Persistence\n */\n\nimport type { GameState } from './types';\n\nexport interface ProofSprintProgress {\n  version: 1;\n  xp: number;\n  currentTier: 'beginner' | 'student' | 'scholar' | 'theorist' | 'master';\n  tierProgress: number;\n  unlockedMoves: string[];\n  unlockedTracks: string[];\n  unlockedPuzzlePacks: string[];\n  personalBests: Record<string, {\n    bestSteps: number;\n    bestScore: number;\n    bestElegance: number;\n    completionCount: number;\n  }>;\n  currentStreak: number;\n  longestStreak: number;\n  lastPlayedDate: string;\n  completedChallenges: Array<{\n    challengeCode: string;\n    completedDate: string;\n    steps: number;\n    score: number;\n    elegance: number;\n  }>;\n  stats: {\n    puzzlesSolved: number;\n    totalSteps: number;\n    averageElegance: number;\n    hintsUsed: number;\n    restarts: number;\n    topicTrackStats: Record<string, {\n      puzzlesSolved: number;\n      averageSteps: number;\n      averageElegance: number;\n    }>;\n  };\n}\n\nconst STORAGE_KEY = 'proof-sprint-progress';\n\nexport function getProgress(): ProofSprintProgress {\n  if (typeof window === 'undefined') {\n    return getDefaultProgress();\n  }\n  \n  try {\n    const stored = localStorage.getItem(STORAGE_KEY);\n    if (stored) {\n      return JSON.parse(stored);\n    }\n  } catch (error) {\n    console.error('Error loading progress:', error);\n  }\n  \n  return getDefaultProgress();\n}\n\nexport function saveProgress(progress: ProofSprintProgress): void {\n  if (typeof window === 'undefined') return;\n  \n  try {\n    localStorage.setItem(STORAGE_KEY, JSON.stringify(progress));\n  } catch (error) {\n    console.error('Error saving progress:', error);\n  }\n}\n\nfunction getDefaultProgress(): ProofSprintProgress {\n  return {\n    version: 1,\n    xp: 0,\n    currentTier: 'beginner',\n    tierProgress: 0,\n    unlockedMoves: ['distribute', 'simplify', 'combine'],\n    unlockedTracks: ['algebra', 'logic'],\n    unlockedPuzzlePacks: [],\n    personalBests: {},\n    currentStreak: 0,\n    longestStreak: 0,\n    lastPlayedDate: '',\n    completedChallenges: [],\n    stats: {\n      puzzlesSolved: 0,\n      totalSteps: 0,\n      averageElegance: 0,\n      hintsUsed: 0,\n      restarts: 0,\n      topicTrackStats: {},\n    },\n  };\n}\n\nexport function updateProgressAfterGame(\n  progress: ProofSprintProgress,\n  state: GameState,\n  score: number,\n  elegance: number\n): ProofSprintProgress {\n  const updated = { ...progress };\n  \n  updated.stats.puzzlesSolved += 1;\n  updated.stats.totalSteps += state.stepCount;\n  updated.stats.averageElegance = \n    (updated.stats.averageElegance * (updated.stats.puzzlesSolved - 1) + elegance) / updated.stats.puzzlesSolved;\n  \n  // Update personal bests\n  const puzzleId = `puzzle-${state.seed}`;\n  const currentBest = updated.personalBests[puzzleId];\n  if (!currentBest || score > currentBest.bestScore) {\n    updated.personalBests[puzzleId] = {\n      bestSteps: state.stepCount,\n      bestScore: score,\n      bestElegance: elegance,\n      completionCount: (currentBest?.completionCount || 0) + 1,\n    };\n  }\n  \n  return updated;\n}\n","/**\n * Proof Sprint - Explainability Analyzer\n */\n\nimport type { GameState } from './types';\n\nexport interface Analysis {\n  keyDecisions: Array<{\n    step: number;\n    description: string;\n    impact: 'positive' | 'negative' | 'neutral';\n    reasoning: string;\n  }>;\n  mistakes: Array<{\n    step: number;\n    description: string;\n    cost: string;\n    recommendation: string;\n  }>;\n  recommendations: Array<{\n    type: 'strategy' | 'move-selection' | 'efficiency';\n    description: string;\n    rationale: string;\n  }>;\n  summary: string;\n}\n\nexport function analyzeRun(state: GameState): Analysis {\n  const keyDecisions: Analysis['keyDecisions'] = [];\n  const mistakes: Analysis['mistakes'] = [];\n  const recommendations: Analysis['recommendations'] = [];\n  \n  // Analyze proof steps\n  for (const step of state.proofSteps) {\n    if (step.penalty > 0.1) {\n      keyDecisions.push({\n        step: step.stepNumber,\n        description: `Used ${step.move.name} (penalty: ${step.penalty})`,\n        impact: step.penalty > 0.15 ? 'negative' : 'neutral',\n        reasoning: 'Powerful move used, but incurred penalty',\n      });\n    }\n  }\n  \n  // Check for inefficiencies\n  if (state.stepCount > state.puzzle.maxSteps * 0.8) {\n    mistakes.push({\n      step: state.stepCount,\n      description: 'Used too many steps',\n      cost: 'Reduced efficiency score',\n      recommendation: 'Consider using more powerful moves to reduce step count',\n    });\n  }\n  \n  if (state.penalty > 0.3) {\n    mistakes.push({\n      step: state.stepCount,\n      description: 'Accumulated high penalty',\n      cost: 'Reduced final score',\n      recommendation: 'Balance powerful moves with simple steps',\n    });\n  }\n  \n  // Generate recommendations\n  if (state.stepCount > state.puzzle.maxSteps * 0.7) {\n    recommendations.push({\n      type: 'efficiency',\n      description: 'Focus on reducing step count',\n      rationale: `Used ${state.stepCount} of ${state.puzzle.maxSteps} steps`,\n    });\n  }\n  \n  if (state.penalty > 0.2) {\n    recommendations.push({\n      type: 'move-selection',\n      description: 'Use powerful moves more strategically',\n      rationale: 'High penalty accumulated from powerful moves',\n    });\n  }\n  \n  const win = state.outcome === 'win';\n  const summary = win\n    ? `Successfully completed proof in ${state.stepCount} steps with elegance score ${state.elegance?.toFixed(1) || 0}.`\n    : `Failed to complete proof within ${state.puzzle.maxSteps} steps.`;\n  \n  return {\n    keyDecisions: keyDecisions.slice(0, 3),\n    mistakes: mistakes.slice(0, 3),\n    recommendations,\n    summary,\n  };\n}\n"],"names":[],"mappings":"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"}}]
}