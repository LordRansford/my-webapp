{
  "version": 3,
  "sources": [],
  "debugId": "4cdfd08b-f01e-f922-f708-e2c6c8ebf408",
  "sections": [
    {"offset": {"line": 1, "column": 0}, "map": {"version":3,"sources":["../../../../src/components/notes/tools/network-models/applied/TcpHandshakeTimelineTool.tsx"],"sourcesContent":["\"use client\";\n\nimport { useMemo, useState } from \"react\";\n\ntype Step = {\n  title: string;\n  flags: string;\n  clientSeq: number;\n  serverSeq: number;\n  ack: number | null;\n  note: string;\n};\n\nexport default function TcpHandshakeTimelineTool() {\n  const [clientIsn, setClientIsn] = useState(1200);\n  const [serverIsn, setServerIsn] = useState(7700);\n  const [dropSynAck, setDropSynAck] = useState(false);\n\n  const steps = useMemo(() => {\n    const c = Math.max(0, Math.floor(Number(clientIsn) || 0));\n    const s = Math.max(0, Math.floor(Number(serverIsn) || 0));\n\n    const syn: Step = {\n      title: \"Client to server\",\n      flags: \"SYN\",\n      clientSeq: c,\n      serverSeq: s,\n      ack: null,\n      note: \"Client proposes a new connection and picks an initial sequence number.\",\n    };\n\n    const synAck: Step = {\n      title: \"Server to client\",\n      flags: \"SYN, ACK\",\n      clientSeq: c,\n      serverSeq: s,\n      ack: c + 1,\n      note: \"Server acknowledges the client sequence and sends its own initial sequence number.\",\n    };\n\n    const ack: Step = {\n      title: \"Client to server\",\n      flags: \"ACK\",\n      clientSeq: c + 1,\n      serverSeq: s,\n      ack: s + 1,\n      note: \"Client acknowledges the server sequence. The connection is established.\",\n    };\n\n    const out: Step[] = [syn];\n    if (!dropSynAck) out.push(synAck, ack);\n    if (dropSynAck) {\n      out.push({\n        title: \"Network behaviour\",\n        flags: \"Timeout\",\n        clientSeq: c,\n        serverSeq: s,\n        ack: null,\n        note: \"If SYN, ACK is lost, the client will retransmit SYN after a timeout. This is one reason TCP is considered reliable.\",\n      });\n    }\n    return out;\n  }, [clientIsn, serverIsn, dropSynAck]);\n\n  return (\n    <div className=\"not-prose space-y-4\">\n      <div className=\"rounded-2xl border border-slate-200 bg-white p-4 shadow-sm\">\n        <div className=\"text-xs font-semibold uppercase tracking-wide text-slate-600\">TCP</div>\n        <div className=\"mt-1 text-base font-semibold text-slate-900\">Three way handshake timeline</div>\n        <div className=\"mt-2 text-sm text-slate-700\">\n          This shows the minimum control messages used to start a TCP connection. It is a teaching model. Real stacks include options such as MSS and window scaling.\n        </div>\n      </div>\n\n      <div className=\"grid gap-3 md:grid-cols-3\">\n        <div className=\"rounded-2xl border border-slate-200 bg-white p-4 shadow-sm\">\n          <div className=\"text-xs font-semibold uppercase tracking-wide text-slate-600\">Client ISN</div>\n          <input\n            value={clientIsn}\n            onChange={(e) => setClientIsn(Number(e.target.value))}\n            type=\"number\"\n            className=\"mt-2 w-full rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm text-slate-900 shadow-inner focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-500\"\n          />\n        </div>\n        <div className=\"rounded-2xl border border-slate-200 bg-white p-4 shadow-sm\">\n          <div className=\"text-xs font-semibold uppercase tracking-wide text-slate-600\">Server ISN</div>\n          <input\n            value={serverIsn}\n            onChange={(e) => setServerIsn(Number(e.target.value))}\n            type=\"number\"\n            className=\"mt-2 w-full rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm text-slate-900 shadow-inner focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-500\"\n          />\n        </div>\n        <div className=\"rounded-2xl border border-slate-200 bg-white p-4 shadow-sm\">\n          <div className=\"text-xs font-semibold uppercase tracking-wide text-slate-600\">Failure mode</div>\n          <button\n            type=\"button\"\n            onClick={() => setDropSynAck((v) => !v)}\n            className={[\n              \"mt-2 w-full rounded-xl border px-3 py-2 text-sm font-semibold shadow-sm transition\",\n              dropSynAck ? \"border-rose-200 bg-rose-50 text-rose-900\" : \"border-slate-200 bg-white text-slate-900 hover:bg-slate-50\",\n            ].join(\" \")}\n          >\n            {dropSynAck ? \"Simulating lost SYN, ACK\" : \"Simulate lost SYN, ACK\"}\n          </button>\n          <div className=\"mt-2 text-xs text-slate-600\">This is passive reasoning. It does not generate real traffic.</div>\n        </div>\n      </div>\n\n      <div className=\"rounded-2xl border border-slate-200 bg-white p-4 shadow-sm\">\n        <div className=\"text-xs font-semibold uppercase tracking-wide text-slate-600\">Timeline</div>\n        <div className=\"mt-3 space-y-3\">\n          {steps.map((s, idx) => (\n            <div key={idx} className=\"rounded-2xl border border-slate-200 bg-slate-50 p-3\">\n              <div className=\"flex flex-wrap items-start justify-between gap-2\">\n                <div className=\"text-sm font-semibold text-slate-900\">{s.title}</div>\n                <div className=\"rounded-full border border-slate-200 bg-white px-3 py-1 text-xs font-semibold text-slate-700\">{s.flags}</div>\n              </div>\n              <div className=\"mt-2 grid gap-2 sm:grid-cols-3\">\n                <div className=\"rounded-xl border border-slate-200 bg-white p-2\">\n                  <div className=\"text-xs font-semibold text-slate-600\">Client seq</div>\n                  <div className=\"mt-1 text-sm font-semibold text-slate-900\">{s.clientSeq}</div>\n                </div>\n                <div className=\"rounded-xl border border-slate-200 bg-white p-2\">\n                  <div className=\"text-xs font-semibold text-slate-600\">Server seq</div>\n                  <div className=\"mt-1 text-sm font-semibold text-slate-900\">{s.serverSeq}</div>\n                </div>\n                <div className=\"rounded-xl border border-slate-200 bg-white p-2\">\n                  <div className=\"text-xs font-semibold text-slate-600\">Ack</div>\n                  <div className=\"mt-1 text-sm font-semibold text-slate-900\">{s.ack === null ? \"None\" : s.ack}</div>\n                </div>\n              </div>\n              <div className=\"mt-2 text-sm text-slate-700\">{s.note}</div>\n            </div>\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n}\n\n"],"names":[],"mappings":"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"}}]
}