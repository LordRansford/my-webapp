;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="59774be5-f0dd-40fd-368e-b8fa1a630d15")}catch(e){}}();
module.exports=[508773,a=>{"use strict";var b=a.i(508171),c=a.i(127669),d=a.i(901257),e=a.i(292354);let f={js:[{title:"Hello world",code:'console.log("Hello world")'},{title:"Simple loop",code:`let sum = 0;
for (let i = 1; i <= 5; i++) sum += i;
console.log("sum", sum);`},{title:"Tiny transform",code:`const nums = [1, 2, 3, 4];
const doubled = nums.map((n) => n * 2);
console.log(doubled.join(", "));`}],py:[{title:"Hello world",code:'print("Hello world")'},{title:"Simple loop",code:`total = 0
for i in range(1, 6):
  total += i
print("sum", total)`},{title:"Tiny transform",code:`nums = [1, 2, 3, 4]
doubled = [n * 2 for n in nums]
print(",".join(str(n) for n in doubled))`}]};async function g(a){return new Promise(b=>setTimeout(b,a))}function h(){let[a,h]=(0,c.useState)("js"),[i,j]=(0,c.useState)(0),[k,l]=(0,c.useState)(f.js[0].code),[m,n]=(0,c.useState)(""),[o,p]=(0,c.useState)(!1),[q,r]=(0,c.useState)(null),[s,t]=(0,c.useState)("idle"),[u,v]=(0,c.useState)(""),[w,x]=(0,c.useState)(""),[y,z]=(0,c.useState)(null),[A,B]=(0,c.useState)(null),C=(0,c.useMemo)(()=>f[a],[a]);(0,c.useEffect)(()=>{j(0),l(f[a][0].code),v(""),x(""),z(null),B(null),r(null),t("idle"),p(!1)},[a]),(0,c.useEffect)(()=>{let a=!0;async function b(b){t("queued");for(let c=0;c<60;c++){if(!a)return;let c=await fetch(`/api/jobs/${encodeURIComponent(b)}`),d=await c.json().catch(()=>null),e=d?.job?.status||null;if(e&&t(String(e)),"succeeded"===e){v(String(d?.job?.resultJson?.stdout||"")),x(String(d?.job?.resultJson?.stderr||"")),z({durationMs:Number(d?.job?.durationMs||0),freeTierAppliedMs:Number(d?.job?.freeTierAppliedMs||0),chargedCredits:Number(d?.job?.chargedCredits||0)}),p(!1);return}if("denied"===e||"failed"===e||"cancelled"===e){B(String(d?.job?.errorMessage||"Job did not complete.")),p(!1);return}await g(600)}B("Timed out waiting for job."),p(!1)}return q&&b(q),()=>{a=!1}},[q]);let D=async()=>{try{await navigator.clipboard.writeText(k)}catch{B("Could not copy to clipboard. Please copy manually.")}},E=async()=>{p(!0),B(null),v(""),x(""),z(null),t("creating"),r(null);let b=await fetch("/api/jobs/create",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({toolId:"code-runner",mode:"enqueue",inputBytes:k.length,payload:{language:a,code:k,input:m,presets:[]}})}),c=await b.json().catch(()=>null);if(!b.ok||!c?.jobId){B(String(c?.error||"Unable to create job.")),p(!1),t("idle");return}r(String(c.jobId))};return(0,b.jsx)(e.MarketingPageTemplate,{breadcrumbs:[{label:"Home",href:"/"},{label:"Tools",href:"/tools"},{label:"Code Lab"}],children:(0,b.jsxs)("main",{className:"mx-auto max-w-4xl px-4 py-12 md:px-6 lg:px-8 space-y-8",children:[(0,b.jsxs)("header",{className:"space-y-2",children:[(0,b.jsx)("p",{className:"text-xs font-semibold text-slate-600",children:"Tools"}),(0,b.jsx)("h1",{className:"text-3xl font-semibold text-slate-900",children:"Code Lab"}),(0,b.jsx)("p",{className:"text-slate-700",children:"Run small snippets in a secure sandbox. No network. No filesystem. No OS shell access."}),(0,b.jsx)("div",{className:"rounded-2xl border border-slate-200 bg-slate-50 p-4 text-sm text-slate-800",children:"Runs in a secure sandbox with limits: 8 seconds, 128 MB, no network. JS runs in-browser; Python runs in a remote locked-down runner."})]}),(0,b.jsxs)("section",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm space-y-4",children:[(0,b.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,b.jsx)("button",{type:"button",onClick:()=>h("js"),className:`rounded-full px-4 py-2 text-sm font-semibold border ${"js"===a?"bg-slate-900 text-white border-slate-900":"bg-white text-slate-900 border-slate-300"}`,children:"JavaScript (runs in browser)"}),(0,b.jsx)("button",{type:"button",onClick:()=>h("py"),className:`rounded-full px-4 py-2 text-sm font-semibold border ${"py"===a?"bg-slate-900 text-white border-slate-900":"bg-white text-slate-900 border-slate-300"}`,children:"Python (sandboxed runner)"})]}),(0,b.jsx)("div",{className:"flex flex-wrap gap-2",children:C.map((a,c)=>(0,b.jsx)("button",{type:"button",onClick:()=>{j(c),l(C[c].code)},className:`rounded-full px-3 py-1 text-xs font-semibold border ${i===c?"bg-emerald-50 text-emerald-900 border-emerald-200":"bg-white text-slate-700 border-slate-200"}`,children:a.title},a.title))}),(0,b.jsxs)("div",{className:"grid gap-3 md:grid-cols-2",children:[(0,b.jsxs)("label",{className:"space-y-1",children:[(0,b.jsx)("span",{className:"text-xs font-semibold text-slate-700",children:"Code"}),(0,b.jsx)("textarea",{value:k,onChange:a=>l(a.target.value),rows:12,className:"w-full rounded-2xl border border-slate-200 bg-white p-3 font-mono text-sm text-slate-900"})]}),(0,b.jsxs)("label",{className:"space-y-1",children:[(0,b.jsx)("span",{className:"text-xs font-semibold text-slate-700",children:"Input (optional)"}),(0,b.jsx)("textarea",{value:m,onChange:a=>n(a.target.value),rows:12,className:"w-full rounded-2xl border border-slate-200 bg-white p-3 font-mono text-sm text-slate-900"})]})]}),A?(0,b.jsx)("div",{className:"rounded-2xl border border-rose-200 bg-rose-50 p-4 text-sm text-rose-900",children:A}):null,(0,b.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[(0,b.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,b.jsx)("button",{type:"button",onClick:E,disabled:o,className:"rounded-full bg-slate-900 px-4 py-2 text-sm font-semibold text-white hover:bg-slate-800 disabled:bg-slate-300",children:o?"Running...":"Run"}),(0,b.jsx)("button",{type:"button",onClick:()=>{l(C[i].code),n(""),v(""),x(""),z(null),B(null),t("idle"),r(null),p(!1)},disabled:o,className:"rounded-full border border-slate-200 bg-white px-4 py-2 text-sm font-semibold text-slate-900 hover:bg-slate-50 disabled:bg-slate-200",children:"Reset"}),(0,b.jsx)("button",{type:"button",onClick:D,className:"rounded-full border border-slate-200 bg-white px-4 py-2 text-sm font-semibold text-slate-900 hover:bg-slate-50",children:"Copy"})]}),(0,b.jsx)("p",{className:"text-xs text-slate-600",children:"No network. No filesystem. CPU/Memory/Time limited. Python runs in remote sandbox; JS runs in-browser."})]}),(0,b.jsxs)("div",{className:"rounded-2xl border border-slate-200 bg-slate-50 p-3 text-xs text-slate-700 space-y-1",children:[(0,b.jsx)("p",{className:"m-0 font-semibold text-slate-800",children:"Status"}),(0,b.jsx)("p",{className:"m-0",children:"idle"===s?"Idle":"creating"===s?"Submitting job":"queued"===s?"Queued (waiting for runner)":"running"===s?"Running in sandbox":s}),y?(0,b.jsxs)("p",{className:"m-0 text-slate-700",children:["Duration: ",y.durationMs," ms · Free tier: ",y.freeTierAppliedMs," ms · Charged credits: ",y.chargedCredits]}):null]})]}),(0,b.jsxs)("section",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm space-y-4",children:[(0,b.jsxs)("div",{className:"grid gap-3 md:grid-cols-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-lg font-semibold text-slate-900",children:"Stdout"}),(0,b.jsx)("pre",{className:"mt-2 min-h-[140px] overflow-auto rounded-2xl border border-slate-200 bg-slate-50 p-4 text-sm text-slate-900 whitespace-pre-wrap",children:u||"No output yet."})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-lg font-semibold text-slate-900",children:"Stderr"}),(0,b.jsx)("pre",{className:"mt-2 min-h-[140px] overflow-auto rounded-2xl border border-slate-200 bg-slate-50 p-4 text-sm text-slate-900 whitespace-pre-wrap",children:w||"No errors."})]})]}),y?(0,b.jsxs)("div",{className:"grid gap-3 sm:grid-cols-3",children:[(0,b.jsxs)("div",{className:"rounded-2xl border border-slate-200 bg-slate-50/70 p-4",children:[(0,b.jsx)("p",{className:"text-xs font-semibold text-slate-700",children:"runtime (ms)"}),(0,b.jsx)("p",{className:"mt-1 text-sm text-slate-900",children:y.durationMs})]}),(0,b.jsxs)("div",{className:"rounded-2xl border border-slate-200 bg-slate-50/70 p-4",children:[(0,b.jsx)("p",{className:"text-xs font-semibold text-slate-700",children:"free tier applied (ms)"}),(0,b.jsx)("p",{className:"mt-1 text-sm text-slate-900",children:y.freeTierAppliedMs})]}),(0,b.jsxs)("div",{className:"rounded-2xl border border-slate-200 bg-slate-50/70 p-4",children:[(0,b.jsx)("p",{className:"text-xs font-semibold text-slate-700",children:"credits charged"}),(0,b.jsx)("p",{className:"mt-1 text-sm text-slate-900",children:y.chargedCredits})]})]}):null]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)(d.default,{href:"/tools",className:"text-sm font-semibold text-emerald-700 hover:underline",children:"Back to tools"}),(0,b.jsx)(d.default,{href:"/studios",className:"text-sm font-semibold text-slate-700 hover:underline",children:"Go to studios"})]})]})})}a.s(["default",()=>h])},358410,a=>a.a(async(b,c)=>{try{var d=a.i(579168),e=a.i(627068),f=a.i(332759),g=a.i(167684),h=a.i(276695),i=a.i(508773),j=a.i(509193),k=b([h]);[h]=k.then?(await k)():k;let l=(0,f.hoist)(i,"default"),m=(0,f.hoist)(i,"getStaticProps"),n=(0,f.hoist)(i,"getStaticPaths"),o=(0,f.hoist)(i,"getServerSideProps"),p=(0,f.hoist)(i,"config"),q=(0,f.hoist)(i,"reportWebVitals"),r=(0,f.hoist)(i,"unstable_getStaticProps"),s=(0,f.hoist)(i,"unstable_getStaticPaths"),t=(0,f.hoist)(i,"unstable_getStaticParams"),u=(0,f.hoist)(i,"unstable_getServerProps"),v=(0,f.hoist)(i,"unstable_getServerSideProps"),w=new d.PagesRouteModule({definition:{kind:e.RouteKind.PAGES,page:"/tools/code-lab",pathname:"/tools/code-lab",bundlePath:"",filename:""},distDir:".next",relativeProjectDir:"",components:{App:h.default,Document:g.default},userland:i}),x=(0,j.getHandler)({srcPage:"/tools/code-lab",config:p,userland:i,routeModule:w,getStaticPaths:n,getStaticProps:m,getServerSideProps:o});a.s(["config",0,p,"default",0,l,"getServerSideProps",0,o,"getStaticPaths",0,n,"getStaticProps",0,m,"handler",0,x,"reportWebVitals",0,q,"routeModule",0,w,"unstable_getServerProps",0,u,"unstable_getServerSideProps",0,v,"unstable_getStaticParams",0,t,"unstable_getStaticPaths",0,s,"unstable_getStaticProps",0,r]),c()}catch(a){c(a)}},!1)];

//# debugId=59774be5-f0dd-40fd-368e-b8fa1a630d15
//# sourceMappingURL=_2d5f78b8._.js.map