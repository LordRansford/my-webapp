;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="ee2320e6-f818-2530-a0fe-1c3a30a68b79")}catch(e){}}();
module.exports=[138573,a=>{"use strict";var b=a.i(508171),c=a.i(127669),d=a.i(901257),e=a.i(2026),f=a.i(100865),g=a.i(493901),h=a.i(946032),i=a.i(532572),j=a.i(357026),k=a.i(5826),l=a.i(767099),m=a.i(403859),n=a.i(421690);function o(){let[a,o]=(0,c.useState)([]),[p,q]=(0,c.useState)([]),[r,s]=(0,c.useState)(null),[t,u]=(0,c.useState)(!1),[v,w]=(0,c.useState)("");function x(b,c){o(a.map(a=>a.id===b?{...a,...c}:a))}function y(b,c,d){let e=a.find(a=>a.id===b);e&&x(b,{fields:e.fields.map(a=>a.id===c?{...a,...d}:a)})}let z=a.find(a=>a.id===r);return(0,b.jsx)(k.default,{studio:"dev-studio",children:(0,b.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-indigo-50/30 to-slate-50",children:(0,b.jsxs)("div",{className:"mx-auto max-w-7xl px-4 py-6 sm:py-8 sm:px-6 lg:px-8",children:[(0,b.jsx)("header",{className:"mb-6 sm:mb-8",children:(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(d.default,{href:"/dev-studio",className:"text-slate-600 hover:text-slate-900 transition-colors","aria-label":"Back to Dev Studio",children:(0,b.jsx)(e.ArrowLeft,{className:"w-5 h-5"})}),(0,b.jsx)("div",{className:"flex h-12 w-12 items-center justify-center rounded-xl bg-gradient-to-br from-indigo-500 to-indigo-600 text-white",children:(0,b.jsx)(f.Database,{className:"w-6 h-6"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl sm:text-4xl font-bold text-slate-900",children:"Database Schema Designer"}),(0,b.jsx)("p",{className:"text-base sm:text-lg text-slate-600 mt-1",children:"Visual schema builder with migration generation"})]}),(0,b.jsx)(m.default,{title:"Database Schema Designer",content:(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("p",{children:"The Schema Designer helps you plan how information is organized in a database. A database is like a digital filing cabinet, and a schema is like the labels and folders you use to organize information."}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-semibold text-slate-900 mb-2",children:"Features:"}),(0,b.jsxs)("ul",{className:"list-disc list-inside space-y-1 text-sm text-slate-700",children:[(0,b.jsx)("li",{children:"Create tables and define fields"}),(0,b.jsx)("li",{children:"Set up relationships between tables"}),(0,b.jsx)("li",{children:"Validate schema design"}),(0,b.jsx)("li",{children:"Generate migration scripts"})]})]})]})})]}),(0,b.jsx)(l.default,{studioType:"dev",showHub:!0})]})}),(0,b.jsxs)("div",{className:"rounded-3xl bg-white border border-slate-200 p-8 shadow-sm",children:[(0,b.jsx)("div",{className:"mb-6",children:(0,b.jsx)(n.default,{toolId:"dev-studio-schema-designer"})}),t?(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-emerald-600",children:[(0,b.jsx)(j.CheckCircle2,{className:"w-5 h-5"}),(0,b.jsx)("span",{className:"font-semibold",children:"SQL migration script generated successfully!"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-slate-900 mb-3",children:"SQL Migration Script"}),(0,b.jsx)("div",{className:"rounded-lg border border-slate-200 bg-slate-50 p-4 max-h-96 overflow-y-auto",children:(0,b.jsx)("pre",{className:"text-xs font-mono text-slate-700 whitespace-pre-wrap",children:v})})]}),(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,b.jsxs)("button",{onClick:function(){if(!v)return;let a=new Blob([v],{type:"text/plain"}),b=URL.createObjectURL(a),c=document.createElement("a");c.href=b,c.download="schema.sql",document.body.appendChild(c),c.click(),document.body.removeChild(c),URL.revokeObjectURL(b)},className:"flex items-center justify-center gap-2 px-6 py-3 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-semibold transition-colors",children:[(0,b.jsx)(i.Download,{className:"w-4 h-4"}),"Download SQL Script"]}),(0,b.jsx)("button",{onClick:function(){o([]),q([]),s(null),u(!1),w("")},className:"px-6 py-3 bg-white hover:bg-slate-50 text-slate-900 border border-slate-300 rounded-lg font-semibold transition-colors",children:"Create Another Schema"})]})]}):(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,b.jsxs)("div",{className:"lg:col-span-1",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-slate-900",children:"Tables"}),(0,b.jsxs)("button",{onClick:function(){let b={id:Date.now().toString(),name:`table_${a.length+1}`,fields:[{id:Date.now().toString()+"_1",name:"id",type:"number",nullable:!1,unique:!0,primaryKey:!0,defaultValue:"AUTO_INCREMENT"}]};o([...a,b]),s(b.id)},className:"flex items-center gap-2 px-3 py-1.5 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg text-sm font-semibold transition-colors",children:[(0,b.jsx)(g.Plus,{className:"w-4 h-4"}),"Add Table"]})]}),(0,b.jsx)("div",{className:"space-y-2",children:a.map(a=>(0,b.jsxs)("button",{onClick:()=>s(a.id),className:`w-full p-3 rounded-lg border-2 text-left transition-all ${r===a.id?"border-indigo-500 bg-indigo-50":"border-slate-200 hover:border-slate-300"}`,children:[(0,b.jsx)("div",{className:"font-semibold text-slate-900",children:a.name}),(0,b.jsxs)("div",{className:"text-xs text-slate-600 mt-1",children:[a.fields.length," fields"]})]},a.id))})]}),(0,b.jsx)("div",{className:"lg:col-span-2",children:z?(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Table Name"}),(0,b.jsx)("input",{type:"text",value:z.name,onChange:a=>x(z.id,{name:a.target.value}),className:"w-full rounded-lg border border-slate-300 px-4 py-2 text-slate-900 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500"})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-slate-700",children:"Fields"}),(0,b.jsxs)("button",{onClick:()=>(function(b){let c=a.find(a=>a.id===b);if(!c)return;let d={id:Date.now().toString(),name:"new_field",type:"string",nullable:!0,unique:!1,primaryKey:!1};x(b,{fields:[...c.fields,d]})})(z.id),className:"flex items-center gap-2 px-3 py-1.5 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg text-sm font-semibold transition-colors",children:[(0,b.jsx)(g.Plus,{className:"w-4 h-4"}),"Add Field"]})]}),(0,b.jsx)("div",{className:"space-y-3",children:z.fields.map(c=>(0,b.jsxs)("div",{className:"p-4 rounded-lg border border-slate-200 bg-slate-50",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 mb-3",children:[(0,b.jsx)("input",{type:"text",value:c.name,onChange:a=>y(z.id,c.id,{name:a.target.value}),placeholder:"Field name",className:"rounded-lg border border-slate-300 px-3 py-2 text-sm text-slate-900 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500"}),(0,b.jsxs)("select",{value:c.type,onChange:a=>y(z.id,c.id,{type:a.target.value}),className:"rounded-lg border border-slate-300 px-3 py-2 text-sm text-slate-900 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500",children:[(0,b.jsx)("option",{value:"string",children:"String"}),(0,b.jsx)("option",{value:"number",children:"Number"}),(0,b.jsx)("option",{value:"boolean",children:"Boolean"}),(0,b.jsx)("option",{value:"date",children:"Date"}),(0,b.jsx)("option",{value:"text",children:"Text"}),(0,b.jsx)("option",{value:"json",children:"JSON"})]})]}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-3 mb-3",children:[(0,b.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,b.jsx)("input",{type:"checkbox",checked:c.nullable,onChange:a=>y(z.id,c.id,{nullable:a.target.checked}),className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500"}),(0,b.jsx)("span",{className:"text-sm text-slate-700",children:"Nullable"})]}),(0,b.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,b.jsx)("input",{type:"checkbox",checked:c.unique,onChange:a=>y(z.id,c.id,{unique:a.target.checked}),className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500"}),(0,b.jsx)("span",{className:"text-sm text-slate-700",children:"Unique"})]}),(0,b.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,b.jsx)("input",{type:"checkbox",checked:c.primaryKey,onChange:a=>y(z.id,c.id,{primaryKey:a.target.checked}),className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500"}),(0,b.jsx)("span",{className:"text-sm text-slate-700",children:"Primary Key"})]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("input",{type:"text",value:c.defaultValue||"",onChange:a=>y(z.id,c.id,{defaultValue:a.target.value}),placeholder:"Default value (optional)",className:"flex-1 rounded-lg border border-slate-300 px-3 py-2 text-sm text-slate-900 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500 mr-2"}),(0,b.jsx)("button",{onClick:()=>{var b,d;let e;return b=z.id,d=c.id,void((e=a.find(a=>a.id===b))&&x(b,{fields:e.fields.filter(a=>a.id!==d)}))},className:"px-3 py-2 bg-red-50 hover:bg-red-100 text-red-600 rounded-lg transition-colors",children:(0,b.jsx)(h.Trash2,{className:"w-4 h-4"})})]})]},c.id))})]})]}):(0,b.jsxs)("div",{className:"text-center py-12 text-slate-500",children:[(0,b.jsx)(f.Database,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),(0,b.jsx)("p",{children:"Select a table to edit, or create a new one."})]})})]}),!t&&(0,b.jsx)("div",{className:"mt-6 pt-6 border-t border-slate-200",children:(0,b.jsx)("button",{onClick:function(){if(0===a.length)return void alert("Please add at least one table");let b="-- Generated by Ransford's Notes Schema Designer\n\n";a.forEach(a=>{b+=`CREATE TABLE ${a.name} (
`;let c=a.fields.map(a=>{let b=`  ${a.name} `;switch(a.type){case"string":b+="VARCHAR(255)";break;case"number":b+="INT";break;case"boolean":b+="BOOLEAN";break;case"date":b+="DATE";break;case"text":b+="TEXT";break;case"json":b+="JSON"}return a.nullable||(b+=" NOT NULL"),a.unique&&(b+=" UNIQUE"),a.primaryKey&&(b+=" PRIMARY KEY"),a.defaultValue&&(b+=` DEFAULT ${a.defaultValue}`),b});b+=c.join(",\n"),b+="\n);\n\n"}),p.forEach(c=>{let d=a.find(a=>a.id===c.fromTable),e=a.find(a=>a.id===c.toTable),f=d?.fields.find(a=>a.id===c.fromField),g=e?.fields.find(a=>a.id===c.toField);d&&e&&f&&g&&(b+=`ALTER TABLE ${d.name}
`,b+=`  ADD CONSTRAINT fk_${d.name}_${e.name}
`,b+=`  FOREIGN KEY (${f.name}) REFERENCES ${e.name}(${g.name});

`)}),w(b),u(!0)},disabled:0===a.length,className:"w-full sm:w-auto px-6 py-3 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-semibold transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Generate SQL Migration"})})]})]})})})}a.s(["default",()=>o])},798861,a=>a.a(async(b,c)=>{try{var d=a.i(579168),e=a.i(627068),f=a.i(332759),g=a.i(167684),h=a.i(276695),i=a.i(138573),j=a.i(509193),k=b([h]);[h]=k.then?(await k)():k;let l=(0,f.hoist)(i,"default"),m=(0,f.hoist)(i,"getStaticProps"),n=(0,f.hoist)(i,"getStaticPaths"),o=(0,f.hoist)(i,"getServerSideProps"),p=(0,f.hoist)(i,"config"),q=(0,f.hoist)(i,"reportWebVitals"),r=(0,f.hoist)(i,"unstable_getStaticProps"),s=(0,f.hoist)(i,"unstable_getStaticPaths"),t=(0,f.hoist)(i,"unstable_getStaticParams"),u=(0,f.hoist)(i,"unstable_getServerProps"),v=(0,f.hoist)(i,"unstable_getServerSideProps"),w=new d.PagesRouteModule({definition:{kind:e.RouteKind.PAGES,page:"/dev-studio/schema-designer",pathname:"/dev-studio/schema-designer",bundlePath:"",filename:""},distDir:".next",relativeProjectDir:"",components:{App:h.default,Document:g.default},userland:i}),x=(0,j.getHandler)({srcPage:"/dev-studio/schema-designer",config:p,userland:i,routeModule:w,getStaticPaths:n,getStaticProps:m,getServerSideProps:o});a.s(["config",0,p,"default",0,l,"getServerSideProps",0,o,"getStaticPaths",0,n,"getStaticProps",0,m,"handler",0,x,"reportWebVitals",0,q,"routeModule",0,w,"unstable_getServerProps",0,u,"unstable_getServerSideProps",0,v,"unstable_getStaticParams",0,t,"unstable_getStaticPaths",0,s,"unstable_getStaticProps",0,r]),c()}catch(a){c(a)}},!1)];

//# debugId=ee2320e6-f818-2530-a0fe-1c3a30a68b79
//# sourceMappingURL=_975a7942._.js.map