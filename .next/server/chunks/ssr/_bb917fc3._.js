;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="bb3c78b7-f89d-8749-4dd1-9769d07b74fe")}catch(e){}}();
module.exports=[589379,a=>{"use strict";var b=a.i(508171),c=a.i(127669),d=a.i(584326),e=a.i(360938),f=a.i(455756),g=a.i(73679),h=a.i(248586),i=a.i(311988),j=a.i(388194),k=a.i(111319);function l({onUploadComplete:a,onError:d,maxSize:e=0x6400000,allowedTypes:l=[".csv",".json",".jsonl",".parquet"]}){let[m,n]=(0,c.useState)(!1),[o,p]=(0,c.useState)(0),[q,r]=(0,c.useState)(null),[s,t]=(0,c.useState)(!1),u=(0,c.useCallback)(async b=>{let c=b.target.files?.[0];if(!c)return;r(null),t(!1);let f=(0,j.sanitizeFileName)(c.name),g=f!==c.name?new File([c],f,{type:c.type}):c;if(g.size>e){let a=`File size exceeds maximum of ${e/1048576}MB`;r(a),d&&d(Error(a)),k.auditLogger.log(k.AuditActions.ERROR_OCCURRED,"ai-studio",{error:"file_too_large",fileName:f,fileSize:g.size,maxSize:e});return}let h="."+g.name.split(".").pop()?.toLowerCase(),i=(0,j.validateFileType)(g,[],l);if(!i.valid){let a=i.error||`File type ${h} not allowed. Allowed types: ${l.join(", ")}`;r(a),d&&d(Error(a)),k.auditLogger.log(k.AuditActions.ERROR_OCCURRED,"ai-studio",{error:"invalid_file_type",fileName:f,fileType:g.type,extension:h});return}if([".exe",".bat",".cmd",".com",".pif",".scr",".vbs",".js",".jar"].includes(h)){let a="This file type is not allowed for security reasons.";r(a),d&&d(Error(a)),k.auditLogger.log(k.AuditActions.ERROR_OCCURRED,"ai-studio",{error:"dangerous_file_type",fileName:f,extension:h});return}n(!0),p(0);try{k.auditLogger.log(k.AuditActions.FILE_UPLOADED,"ai-studio",{fileName:f,fileSize:g.size,fileType:g.type,extension:h});let c=new FormData;c.append("file",g);let d=setInterval(()=>{p(a=>Math.min(a+10,90))},200),e=await fetch("/api/ai-studio/datasets/upload",{method:"POST",body:c});if(clearInterval(d),p(100),!e.ok){let a=await e.json();throw Error(a.error?.message||"Upload failed")}let i=await e.json();t(!0),a&&a(i.data),setTimeout(()=>{t(!1),p(0),b.target&&(b.target.value="")},2e3)}catch(b){let a=b instanceof Error?b:Error("Upload failed");r(a.message),d&&d(a)}finally{n(!1)}},[e,l,a,d]);return(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("input",{type:"file",id:"dataset-upload",onChange:u,disabled:m,accept:l.join(","),className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer disabled:cursor-not-allowed"}),(0,b.jsx)("label",{htmlFor:"dataset-upload",className:`flex flex-col items-center justify-center w-full h-32 border-2 border-dashed rounded-2xl transition-all ${m?"border-primary-500 bg-primary-50":s?"border-green-500 bg-green-50":q?"border-red-500 bg-red-50":"border-slate-300 bg-slate-50 hover:border-slate-400 hover:bg-slate-100"} ${m?"cursor-wait":"cursor-pointer"}`,children:m?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(i.Loader2,{className:"w-8 h-8 text-primary-600 animate-spin mb-2"}),(0,b.jsx)("span",{className:"text-sm font-medium text-primary-900",children:"Uploading..."}),(0,b.jsxs)("span",{className:"text-xs text-primary-700 mt-1",children:[o,"%"]})]}):s?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(g.CheckCircle,{className:"w-8 h-8 text-green-600 mb-2"}),(0,b.jsx)("span",{className:"text-sm font-medium text-green-900",children:"Upload successful!"})]}):q?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(h.XCircle,{className:"w-8 h-8 text-red-600 mb-2"}),(0,b.jsx)("span",{className:"text-sm font-medium text-red-900",children:q})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(f.Upload,{className:"w-8 h-8 text-slate-400 mb-2"}),(0,b.jsx)("span",{className:"text-sm font-medium text-slate-900",children:"Click to upload dataset"}),(0,b.jsxs)("span",{className:"text-xs text-slate-600 mt-1",children:["Max ",e/1048576,"MB • ",l.join(", ")]})]})})]}),m&&(0,b.jsx)("div",{className:"w-full h-2 bg-slate-200 rounded-full overflow-hidden",children:(0,b.jsx)("div",{className:"h-full bg-primary-500 transition-all duration-300",style:{width:`${o}%`}})})]})}var m=a.i(100865),n=a.i(120327),o=a.i(957143),p=a.i(34371),p=p,q=a.i(901257);function r({onSelectDataset:a}){let[d,e]=(0,c.useState)(""),[f,g]=(0,c.useState)(""),{datasets:h,isLoading:j,error:k,refetch:l}=function({limit:a=50,offset:b=0,status:d,autoFetch:e=!0,onError:f}={}){let[g,h]=(0,c.useState)([]),[i,j]=(0,c.useState)(!1),[k,l]=(0,c.useState)(null),[m,n]=(0,c.useState)(0),o=(0,c.useCallback)(async()=>{try{j(!0),l(null);let c=new URLSearchParams({limit:a.toString(),offset:b.toString()});d&&c.append("status",d);let e=await fetch(`/api/ai-studio/datasets?${c}`);if(!e.ok)throw Error("Failed to fetch datasets");let f=await e.json();h(f.data.datasets),n(f.data.pagination.total)}catch(b){let a=b instanceof Error?b:Error("Unknown error");l(a),f&&f(a)}finally{j(!1)}},[a,b,d,f]);return(0,c.useEffect)(()=>{e&&o()},[e,o]),{datasets:g,isLoading:i,error:k,total:m,refetch:o,create:(0,c.useCallback)(async a=>{try{j(!0),l(null);let b=await fetch("/api/ai-studio/datasets",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!b.ok)throw Error("Failed to create dataset");let c=await b.json();return h(a=>[c.data.dataset,...a]),c.data.dataset}catch(b){let a=b instanceof Error?b:Error("Unknown error");throw l(a),f&&f(a),a}finally{j(!1)}},[f])}}({status:d||void 0,autoFetch:!0}),r=h.filter(a=>!f||a.name.toLowerCase().includes(f.toLowerCase()));return k?(0,b.jsxs)("div",{className:"rounded-2xl border border-red-200 bg-red-50 p-6",children:[(0,b.jsx)("p",{className:"text-sm font-semibold text-red-900",children:"Error loading datasets"}),(0,b.jsx)("p",{className:"text-sm text-red-700 mt-1",children:k.message}),(0,b.jsx)("button",{onClick:()=>l(),className:"mt-4 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm font-semibold",children:"Retry"})]}):(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,b.jsxs)("div",{className:"flex-1 relative",children:[(0,b.jsx)(o.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400"}),(0,b.jsx)("input",{type:"text",placeholder:"Search datasets...",value:f,onChange:a=>g(a.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(n.Filter,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400"}),(0,b.jsxs)("select",{value:d,onChange:a=>e(a.target.value),className:"pl-10 pr-8 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 appearance-none bg-white",children:[(0,b.jsx)("option",{value:"",children:"All Status"}),(0,b.jsx)("option",{value:"verified",children:"Verified"}),(0,b.jsx)("option",{value:"processing",children:"Processing"}),(0,b.jsx)("option",{value:"uploaded",children:"Uploaded"}),(0,b.jsx)("option",{value:"rejected",children:"Rejected"})]})]})]}),j?(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)(i.Loader2,{className:"w-8 h-8 animate-spin text-slate-400 mx-auto"}),(0,b.jsx)("p",{className:"text-sm text-slate-600 mt-2",children:"Loading datasets..."})]}):0===r.length?(0,b.jsxs)("div",{className:"text-center py-12 rounded-2xl border border-slate-200 bg-slate-50",children:[(0,b.jsx)(m.Database,{className:"w-12 h-12 text-slate-400 mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-sm font-medium text-slate-900",children:"No datasets found"}),(0,b.jsx)("p",{className:"text-sm text-slate-600 mt-1",children:f||d?"Try adjusting your filters":"Upload your first dataset to get started"})]}):(0,b.jsx)("div",{className:"space-y-3",children:r.map(c=>(0,b.jsx)("div",{className:"p-4 bg-white border border-slate-200 rounded-lg hover:border-slate-300 hover:shadow-sm transition-all cursor-pointer",onClick:()=>a?.(c.id),children:(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsxs)("div",{className:"flex items-start gap-4 flex-1 min-w-0",children:[(0,b.jsx)("div",{className:"p-2 bg-primary-100 rounded-lg flex-shrink-0",children:(0,b.jsx)(m.Database,{className:"w-5 h-5 text-primary-600"})}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("h3",{className:"font-semibold text-slate-900 truncate",children:c.name}),(0,b.jsxs)("div",{className:"flex items-center gap-3 mt-1 text-sm text-slate-600",children:[(0,b.jsx)("span",{className:"capitalize",children:c.type}),(0,b.jsx)("span",{className:"text-slate-300",children:"•"}),(0,b.jsx)("span",{children:(a=>{if(0===a)return"0 Bytes";let b=Math.floor(Math.log(a)/Math.log(1024));return Math.round(a/Math.pow(1024,b)*100)/100+" "+["Bytes","KB","MB","GB"][b]})(c.size)}),(0,b.jsx)("span",{className:"text-slate-300",children:"•"}),(0,b.jsx)("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium border ${(a=>{switch(a){case"verified":return"bg-green-100 text-green-800 border-green-200";case"processing":return"bg-amber-100 text-amber-800 border-amber-200";case"rejected":return"bg-red-100 text-red-800 border-red-200";default:return"bg-slate-100 text-slate-800 border-slate-200"}})(c.status)}`,children:c.status})]})]})]}),(0,b.jsx)(q.default,{href:`/ai-studio/datasets/${c.id}`,onClick:a=>a.stopPropagation(),className:"p-2 text-slate-400 hover:text-slate-600 transition-colors",children:(0,b.jsx)(p.default,{className:"w-5 h-5"})})]})},c.id))})]})}var s=a.i(494127),t=a.i(232431),u=a.i(445167);let v=(0,d.default)(()=>a.A(313457).then(a=>({default:a.default})),{loadableGenerated:{modules:[488007]},ssr:!1,loading:()=>(0,b.jsx)(t.default,{message:"Loading dataset explorer..."})});function w(){let{error:a,handleError:d,clearError:g}=(0,u.useApiError)(),[h,i]=(0,c.useState)(null),[j,k]=(0,c.useState)(!1),{dataset:n}=function({datasetId:a,autoFetch:b=!0,onError:d}){let[e,f]=(0,c.useState)(null),[g,h]=(0,c.useState)(!1),[i,j]=(0,c.useState)(null),k=(0,c.useCallback)(async()=>{if(a)try{h(!0),j(null);let b=await fetch(`/api/ai-studio/datasets/${a}`);if(!b.ok)throw Error("Failed to fetch dataset");let c=await b.json();f(c.data.dataset)}catch(b){let a=b instanceof Error?b:Error("Unknown error");j(a),d&&d(a)}finally{h(!1)}},[a,d]);return(0,c.useEffect)(()=>{b&&a&&k()},[a,b,k]),{dataset:e,isLoading:g,error:i,refetch:k,update:(0,c.useCallback)(async b=>{if(a)try{h(!0),j(null);let c=await fetch(`/api/ai-studio/datasets/${a}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)});if(!c.ok)throw Error("Failed to update dataset");let d=await c.json();f(d.data.dataset)}catch(b){let a=b instanceof Error?b:Error("Unknown error");j(a),d&&d(a)}finally{h(!1)}},[a,d]),delete:(0,c.useCallback)(async()=>{if(a)try{if(h(!0),j(null),!(await fetch(`/api/ai-studio/datasets/${a}`,{method:"DELETE"})).ok)throw Error("Failed to delete dataset");f(null)}catch(b){let a=b instanceof Error?b:Error("Unknown error");j(a),d&&d(a)}finally{h(!1)}},[a,d])}}({datasetId:h,autoFetch:!!h,onError:d}),o=a=>{i(a)};return(0,b.jsx)(e.AIStudioErrorBoundary,{children:(0,b.jsx)("div",{className:"min-h-screen bg-slate-50",children:(0,b.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,b.jsx)("div",{className:"mb-8",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("h1",{className:"text-3xl font-bold text-slate-900 flex items-center gap-3",children:[(0,b.jsx)(m.Database,{className:"w-8 h-8 text-primary-600"}),"Datasets"]}),(0,b.jsx)("p",{className:"text-slate-600 mt-2",children:"Manage your training datasets. Upload, validate, and prepare data for AI model training."})]}),(0,b.jsxs)("button",{onClick:()=>k(!j),className:"button primary flex items-center gap-2",children:[(0,b.jsx)(f.Upload,{className:"w-4 h-4"}),"Upload Dataset"]})]})}),a&&(0,b.jsx)("div",{className:"mb-6",children:(0,b.jsx)(s.default,{error:a,onDismiss:g})}),j&&(0,b.jsxs)("div",{className:"mb-8 rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"Upload New Dataset"}),(0,b.jsx)(l,{onUploadComplete:a=>{console.log("Dataset uploaded:",a),k(!1)},onError:d})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,b.jsx)("div",{className:"lg:col-span-2",children:(0,b.jsxs)("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"Your Datasets"}),(0,b.jsx)(r,{onSelectDataset:o})]})}),(0,b.jsx)("div",{className:"lg:col-span-1",children:h?(0,b.jsxs)("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm sticky top-8",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"Dataset Details"}),n?(0,b.jsx)(v,{dataset:n,onSelect:o}):(0,b.jsx)(t.default,{message:"Loading dataset..."})]}):(0,b.jsx)("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:(0,b.jsx)("p",{className:"text-sm text-slate-600 text-center py-8",children:"Select a dataset to view details"})})})]})]})})})}a.s(["default",()=>w],589379)},139294,a=>a.a(async(b,c)=>{try{var d=a.i(579168),e=a.i(627068),f=a.i(332759),g=a.i(167684),h=a.i(276695),i=a.i(589379),j=a.i(509193),k=b([h]);[h]=k.then?(await k)():k;let l=(0,f.hoist)(i,"default"),m=(0,f.hoist)(i,"getStaticProps"),n=(0,f.hoist)(i,"getStaticPaths"),o=(0,f.hoist)(i,"getServerSideProps"),p=(0,f.hoist)(i,"config"),q=(0,f.hoist)(i,"reportWebVitals"),r=(0,f.hoist)(i,"unstable_getStaticProps"),s=(0,f.hoist)(i,"unstable_getStaticPaths"),t=(0,f.hoist)(i,"unstable_getStaticParams"),u=(0,f.hoist)(i,"unstable_getServerProps"),v=(0,f.hoist)(i,"unstable_getServerSideProps"),w=new d.PagesRouteModule({definition:{kind:e.RouteKind.PAGES,page:"/ai-studio/datasets",pathname:"/ai-studio/datasets",bundlePath:"",filename:""},distDir:".next",relativeProjectDir:"",components:{App:h.default,Document:g.default},userland:i}),x=(0,j.getHandler)({srcPage:"/ai-studio/datasets",config:p,userland:i,routeModule:w,getStaticPaths:n,getStaticProps:m,getServerSideProps:o});a.s(["config",0,p,"default",0,l,"getServerSideProps",0,o,"getStaticPaths",0,n,"getStaticProps",0,m,"handler",0,x,"reportWebVitals",0,q,"routeModule",0,w,"unstable_getServerProps",0,u,"unstable_getServerSideProps",0,v,"unstable_getStaticParams",0,t,"unstable_getStaticPaths",0,s,"unstable_getStaticProps",0,r]),c()}catch(a){c(a)}},!1)];

//# debugId=bb3c78b7-f89d-8749-4dd1-9769d07b74fe
//# sourceMappingURL=_bb917fc3._.js.map