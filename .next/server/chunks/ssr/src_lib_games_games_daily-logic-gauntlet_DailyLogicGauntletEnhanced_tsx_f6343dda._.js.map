{
  "version": 3,
  "sources": [],
  "debugId": "be05988b-04c2-4c61-af85-85a8b11e1b78",
  "sections": [
    {"offset": {"line": 1, "column": 0}, "map": {"version":3,"sources":["../../../../src/lib/games/games/daily-logic-gauntlet/DailyLogicGauntletEnhanced.tsx","../../../../src/lib/games/framework/index.ts","../../../../src/lib/games/framework/PlayerModel.ts","../../../../src/lib/games/framework/AdaptiveDifficultyEngine.ts","../../../../src/lib/games/framework/PersistenceManager.ts","../../../../src/lib/games/framework/usePerformanceMonitor.ts","../../../../src/lib/games/games/daily-logic-gauntlet/puzzleTemplates.ts","../../../../src/lib/games/games/daily-logic-gauntlet/puzzleGenerator.ts","../../../../src/lib/games/games/daily-logic-gauntlet/progression.ts","../../../../src/lib/games/games/daily-logic-gauntlet/streakTracker.ts","../../../../src/lib/games/games/daily-logic-gauntlet/analysisReport.ts","../../../../src/lib/games/games/daily-logic-gauntlet/AnalysisReportComponent.tsx","../../../../src/lib/games/games/daily-logic-gauntlet/archive.ts","../../../../src/lib/games/games/daily-logic-gauntlet/tutorial.ts","../../../../src/lib/games/games/daily-logic-gauntlet/achievements.ts"],"sourcesContent":["/**\n * Daily Logic Gauntlet - Enhanced Version\n * \n * Gold-standard implementation with:\n * - Player capability modeling\n * - Adaptive difficulty\n * - Persistence with versioning\n * - Progression and mastery system\n * - Streak tracking\n * - Daily seed integration\n */\n\n\"use client\";\n\nimport React, { useState, useCallback, useMemo, useEffect } from \"react\";\nimport GameShell from \"@/lib/games/framework/GameShell\";\nimport {\n  getDailySeed,\n  StateManager,\n  PersistenceManager,\n  createDefaultPlayerModel,\n  AdaptiveDifficultyEngine,\n  type PlayerCapabilityModel,\n  type PlayerProfile,\n} from \"@/lib/games/framework\";\nimport { useGameAnalytics } from \"@/lib/games/framework/useGameAnalytics\";\nimport type { GameConfig, GameStatus } from \"@/lib/games/framework/types\";\nimport type { Puzzle, PuzzlePerformance, DifficultyTier } from './types';\nimport { generateDailyPuzzleSet } from './puzzleGenerator';\nimport {\n  calculateSessionXP,\n  getTierFromXP,\n  getTierProgress,\n  getNextTier,\n  type MasteryTier,\n} from './progression';\nimport {\n  updateStreak,\n  getTodayDateString,\n  createDefaultStreak,\n  type StreakData,\n} from './streakTracker';\nimport { generateAnalysisReport, type AnalysisReport } from './analysisReport';\nimport { AnalysisReportComponent } from './AnalysisReportComponent';\nimport { archivePuzzleSet, getArchiveStats, type ArchiveStats } from './archive';\nimport {\n  loadTutorialState,\n  createDefaultTutorialState,\n  startTutorial,\n  nextTutorialStep,\n  previousTutorialStep,\n  getCurrentTutorialStep,\n  skipTutorial,\n  shouldShowTutorial,\n  TUTORIAL_STEPS,\n  type TutorialState,\n  type TutorialStepData,\n} from './tutorial';\nimport {\n  checkAndUnlockAchievements,\n  getUnlockedAchievements,\n  getAchievementStats,\n  ALL_ACHIEVEMENTS,\n  type Achievement,\n  type AchievementStats,\n} from './achievements';\n\nconst GAME_CONFIG: GameConfig = {\n  id: \"daily-logic-gauntlet\",\n  title: \"Daily Logic Gauntlet\",\n  description: \"Multi-puzzle challenge with daily seeded challenges. Same seed for all users on the same day.\",\n  category: \"puzzle\",\n  modes: [\"solo\", \"daily\"],\n  supportsMultiplayer: false,\n  minPlayers: 1,\n  maxPlayers: 1,\n  estimatedMinutes: 15,\n  tutorialAvailable: true,\n};\n\nexport default function DailyLogicGauntletEnhanced() {\n  // Game state\n  const [status, setStatus] = useState<GameStatus>(\"idle\");\n  const [currentPuzzleIndex, setCurrentPuzzleIndex] = useState(0);\n  const [puzzles, setPuzzles] = useState<Puzzle[]>([]);\n  const [selectedAnswer, setSelectedAnswer] = useState<number | null>(null);\n  const [hintsUsed, setHintsUsed] = useState<number[]>([]); // Per puzzle\n  const [performances, setPerformances] = useState<PuzzlePerformance[]>([]);\n  const [sessionStartTime, setSessionStartTime] = useState<number | null>(null);\n  const [puzzleStartTime, setPuzzleStartTime] = useState<number | null>(null);\n  \n  // Player data\n  const [playerXP, setPlayerXP] = useState<number>(0);\n  const [playerModel, setPlayerModel] = useState<PlayerCapabilityModel>(createDefaultPlayerModel());\n  const [streakData, setStreakData] = useState<StreakData>(createDefaultStreak());\n  const [analysisReport, setAnalysisReport] = useState<AnalysisReport | null>(null);\n  \n  // Tutorial state - only load on client side\n  const [tutorialState, setTutorialState] = useState<TutorialState>(() => {\n    if (typeof window === 'undefined') {\n      return createDefaultTutorialState();\n    }\n    return loadTutorialState();\n  });\n  const [showTutorial, setShowTutorial] = useState(false);\n  const currentTutorialStep = useMemo(() => getCurrentTutorialStep(tutorialState), [tutorialState]);\n  \n  // Achievement notifications\n  const [newlyUnlockedAchievements, setNewlyUnlockedAchievements] = useState<Achievement[]>([]);\n  \n  // Daily seed\n  const dailySeed = useMemo(() => getDailySeed(), []);\n  const today = useMemo(() => getTodayDateString(), []);\n  \n  // Framework systems\n  const stateManager = useMemo(() => new StateManager({ status: \"idle\" }, dailySeed), [dailySeed]);\n  const persistenceManager = useMemo(() => new PersistenceManager(GAME_CONFIG.id), []);\n  const adaptiveDifficulty = useMemo(\n    () => new AdaptiveDifficultyEngine(playerModel),\n    [playerModel]\n  );\n  \n  // Load player data on mount\n  useEffect(() => {\n    async function loadPlayerData() {\n      const profile = await persistenceManager.loadPlayerProfile();\n      if (profile) {\n        const gameXP = profile.mastery[GAME_CONFIG.id]?.xp || 0;\n        setPlayerXP(gameXP);\n        // Load player model from profile if available\n        if (profile.mastery[GAME_CONFIG.id]?.playerModel) {\n          setPlayerModel(profile.mastery[GAME_CONFIG.id].playerModel as PlayerCapabilityModel);\n        }\n      }\n      \n      // Load streak data (simplified - in production would be in profile)\n      const savedStreak = localStorage.getItem('daily-logic-gauntlet-streak');\n      if (savedStreak) {\n        try {\n          setStreakData(JSON.parse(savedStreak));\n        } catch (e) {\n          // Invalid data, use default\n        }\n      }\n    }\n    \n    loadPlayerData();\n  }, [persistenceManager]);\n  \n  // Save streak data\n  useEffect(() => {\n    localStorage.setItem('daily-logic-gauntlet-streak', JSON.stringify(streakData));\n  }, [streakData]);\n  \n  // Check if tutorial should be shown on mount\n  useEffect(() => {\n    if (shouldShowTutorial() && status === 'idle') {\n      const state = startTutorial();\n      setTutorialState(state);\n      setShowTutorial(true);\n    }\n  }, [status]);\n  \n  // Generate puzzles for daily challenge\n  const generatePuzzles = useCallback(() => {\n    const tier = getTierFromXP(playerXP);\n    const generated = generateDailyPuzzleSet(dailySeed, tier, 10);\n    setPuzzles(generated);\n    return generated;\n  }, [dailySeed, playerXP]);\n  \n  // Start game\n  const handleStart = useCallback(() => {\n    const newPuzzles = generatePuzzles();\n    setStatus(\"playing\");\n    setCurrentPuzzleIndex(0);\n    setSelectedAnswer(null);\n    setHintsUsed(new Array(newPuzzles.length).fill(0));\n    setPerformances([]);\n    setSessionStartTime(Date.now());\n    setPuzzleStartTime(Date.now());\n    stateManager.updateState({ status: \"playing\", timestamp: Date.now() });\n    stateManager.recordMove(\"start\", { seed: dailySeed, date: today });\n  }, [generatePuzzles, dailySeed, today, stateManager]);\n  \n  // Finish game\n  const handleFinish = useCallback(async () => {\n    setStatus(\"finished\");\n    \n    // Calculate XP\n    const sessionXP = calculateSessionXP(\n      performances.length > 0 ? performances : [],\n      hintsUsed,\n      streakData.currentStreak\n    );\n    const newXP = playerXP + sessionXP;\n    setPlayerXP(newXP);\n    \n    // Generate analysis report\n    if (puzzles.length > 0 && performances.length > 0) {\n      const report = generateAnalysisReport(\n        puzzles,\n        performances,\n        hintsUsed,\n        sessionXP,\n        playerXP\n      );\n      setAnalysisReport(report);\n    }\n    \n    // Update streak\n    const updatedStreak = updateStreak(streakData, true);\n    setStreakData(updatedStreak);\n    \n    // Archive the completed puzzle set\n    if (puzzles.length > 0 && performances.length > 0) {\n      const totalTimeSpent = performances.reduce((sum, p) => sum + p.timeSpent, 0);\n      const archiveScore = performances.filter(p => p.correct).length;\n      archivePuzzleSet(puzzles, archiveScore, totalTimeSpent, newXP);\n    }\n    \n    // Check and unlock achievements\n    const archiveStats = getArchiveStats();\n    let profile: PlayerProfile | null = null;\n    try {\n      profile = await persistenceManager.loadPlayerProfile();\n    } catch (error) {\n      // Will create new profile below\n    }\n    \n    if (!profile) {\n      profile = persistenceManager.createDefaultProfile();\n    }\n    \n    const mastery = profile.mastery[GAME_CONFIG.id];\n    const achievementContext = {\n      totalXP: newXP,\n      currentTier: getTierFromXP(newXP),\n      currentStreak: updatedStreak.currentStreak,\n      gamesCompleted: (mastery?.stats?.gamesPlayed || 0) + 1,\n      perfectScores: performances.every(p => p.correct) ? 1 : 0,\n      archivedSets: archiveStats.totalArchived + (puzzles.length > 0 ? 1 : 0),\n      fastestCompletion: performances.reduce((sum, p) => sum + p.timeSpent, 0),\n      hintFreeCompletions: hintsUsed.length === 0 || hintsUsed.every(h => h === 0) ? 1 : 0,\n    };\n    \n    const newlyUnlockedIds = checkAndUnlockAchievements(achievementContext);\n    if (newlyUnlockedIds && newlyUnlockedIds.length > 0) {\n      const unlocked = newlyUnlockedIds.map(id => {\n        const ach = ALL_ACHIEVEMENTS.find(a => a.id === id);\n        return ach!;\n      }).filter(Boolean);\n      setNewlyUnlockedAchievements(unlocked);\n    }\n    \n    // Save progress\n    try {\n      const currentStats = mastery?.stats || {\n        gamesPlayed: 0,\n        wins: 0,\n        bestScore: 0,\n        averageScore: 0,\n      };\n      \n      profile.mastery[GAME_CONFIG.id] = {\n        tier: getTierFromXP(newXP),\n        xp: newXP,\n        unlocks: mastery?.unlocks || [],\n        stats: {\n          gamesPlayed: currentStats.gamesPlayed + 1,\n          wins: currentStats.wins + (performances.length > 0 && performances.every(p => p.correct) ? 1 : 0),\n          bestScore: Math.max(currentStats.bestScore, performances.filter(p => p.correct).length),\n          averageScore: currentStats.gamesPlayed > 0\n            ? (currentStats.averageScore * (currentStats.gamesPlayed - 1) + performances.filter(p => p.correct).length) / currentStats.gamesPlayed\n            : performances.filter(p => p.correct).length,\n        },\n        playerModel: playerModel,\n      };\n      profile.lastPlayed[GAME_CONFIG.id] = Date.now();\n      await persistenceManager.savePlayerProfile(profile);\n    } catch (error) {\n      console.error('Failed to save progress:', error);\n    }\n    \n    stateManager.updateState({ status: \"finished\" });\n  }, [performances, hintsUsed, streakData, playerXP, puzzles, persistenceManager, stateManager, playerModel]);\n  \n  // Handle answer selection\n  const handleAnswer = useCallback(\n    (answerIndex: number) => {\n      if (status !== \"playing\" || selectedAnswer !== null) return;\n      \n      const puzzle = puzzles[currentPuzzleIndex];\n      if (!puzzle) return;\n      \n      const timeSpent = puzzleStartTime ? Date.now() - puzzleStartTime : 0;\n      const isCorrect = answerIndex === puzzle.correctAnswer;\n      const currentHints = hintsUsed[currentPuzzleIndex] || 0;\n      \n      // Record performance\n      const performance: PuzzlePerformance = {\n        puzzleId: puzzle.id,\n        correct: isCorrect,\n        timeSpent,\n        attempts: 1, // Simplified - would track retries\n        hintsUsed: currentHints,\n        timestamp: Date.now(),\n      };\n      \n      // Update adaptive difficulty\n      adaptiveDifficulty.update({\n        ...performance,\n        puzzleType: puzzle.type,\n        difficulty: puzzle.difficulty,\n      });\n      \n      // Update player model\n      const newModel = adaptiveDifficulty.getModel();\n      setPlayerModel(newModel);\n      \n      // Record move\n      stateManager.recordMove(\"answer\", {\n        puzzleId: puzzle.id,\n        answerIndex,\n        isCorrect,\n        timeSpent,\n      });\n      \n      setSelectedAnswer(answerIndex);\n      setPerformances(prev => [...prev, performance]);\n      \n      // Move to next puzzle after delay\n      setTimeout(() => {\n        if (currentPuzzleIndex < puzzles.length - 1) {\n          setCurrentPuzzleIndex(currentPuzzleIndex + 1);\n          setSelectedAnswer(null);\n          setPuzzleStartTime(Date.now());\n        } else {\n          // Game finished\n          handleFinish();\n        }\n      }, 2000);\n    },\n    [\n      status,\n      currentPuzzleIndex,\n      puzzles,\n      selectedAnswer,\n      hintsUsed,\n      puzzleStartTime,\n      adaptiveDifficulty,\n      stateManager,\n      handleFinish,\n    ]\n  );\n  \n  // Handle hint request\n  const handleHint = useCallback(() => {\n    if (status !== \"playing\" || selectedAnswer !== null) return;\n    \n    const currentHints = hintsUsed[currentPuzzleIndex] || 0;\n    if (currentHints >= 3) return; // Max 3 hints per puzzle\n    \n    setHintsUsed(prev => {\n      const newHints = [...prev];\n      newHints[currentPuzzleIndex] = currentHints + 1;\n      return newHints;\n    });\n    \n    stateManager.recordMove(\"hint\", { puzzleId: puzzles[currentPuzzleIndex]?.id });\n  }, [status, currentPuzzleIndex, hintsUsed, puzzles, selectedAnswer, stateManager]);\n  \n  // Reset game\n  const handleReset = useCallback(() => {\n    setStatus(\"idle\");\n    setCurrentPuzzleIndex(0);\n    setSelectedAnswer(null);\n    setPuzzles([]);\n    setHintsUsed([]);\n    setPerformances([]);\n    setSessionStartTime(null);\n    setPuzzleStartTime(null);\n    setAnalysisReport(null);\n    setNewlyUnlockedAchievements([]);\n    stateManager.updateState({ status: \"idle\", moves: [], score: 0 });\n    adaptiveDifficulty.reset();\n  }, [stateManager, adaptiveDifficulty]);\n  \n  // Tutorial handlers\n  const handleTutorialNext = useCallback(() => {\n    setTutorialState(prev => nextTutorialStep(prev));\n  }, []);\n  \n  const handleTutorialPrevious = useCallback(() => {\n    setTutorialState(prev => previousTutorialStep(prev));\n  }, []);\n  \n  const handleTutorialSkip = useCallback(() => {\n    skipTutorial();\n    setShowTutorial(false);\n    setTutorialState(prev => ({ ...prev, isActive: false }));\n  }, []);\n  \n  const handleStartTutorial = useCallback(() => {\n    const state = startTutorial();\n    setTutorialState(state);\n    setShowTutorial(true);\n  }, []);\n  \n  // Current puzzle\n  const currentPuzzle = puzzles[currentPuzzleIndex];\n  const currentTier = getTierFromXP(playerXP);\n  const tierProgress = getTierProgress(playerXP);\n  const nextTier = getNextTier(playerXP);\n  \n  // Score calculation\n  const score = performances.filter(p => p.correct).length;\n  const totalXP = playerXP;\n  const hintsRemaining = 3 - (hintsUsed[currentPuzzleIndex] || 0);\n  \n  // Analytics\n  useGameAnalytics(GAME_CONFIG.id, status, stateManager.getState());\n  \n  // Keyboard navigation\n  useEffect(() => {\n    if (status !== \"playing\") return;\n    \n    const handleKeyPress = (e: KeyboardEvent) => {\n      if (selectedAnswer !== null) return;\n      \n      const key = e.key;\n      // Number keys 1-4 for answer selection\n      if (key >= \"1\" && key <= \"4\") {\n        const index = parseInt(key) - 1;\n        if (currentPuzzle && index < currentPuzzle.options.length) {\n          e.preventDefault();\n          handleAnswer(index);\n        }\n      }\n      // H for hint\n      if (key === \"h\" || key === \"H\") {\n        e.preventDefault();\n        handleHint();\n      }\n    };\n    \n    window.addEventListener(\"keydown\", handleKeyPress);\n    return () => window.removeEventListener(\"keydown\", handleKeyPress);\n  }, [status, selectedAnswer, currentPuzzle, handleAnswer, handleHint]);\n  \n  return (\n    <>\n      {/* Achievement Notification */}\n      {newlyUnlockedAchievements.length > 0 && (\n        <div className=\"fixed top-4 right-4 z-50 max-w-sm space-y-2\">\n          {newlyUnlockedAchievements.map((achievement) => (\n            <div\n              key={achievement.id}\n              className=\"rounded-lg border-2 border-amber-400 bg-amber-50 p-4 shadow-lg\"\n              role=\"alert\"\n              aria-live=\"polite\"\n            >\n              <div className=\"flex items-start gap-3\">\n                <span className=\"text-3xl flex-shrink-0\" aria-hidden=\"true\">\n                  {achievement.icon}\n                </span>\n                <div className=\"flex-1 min-w-0\">\n                  <div className=\"font-semibold text-amber-900 text-sm\">\n                    Achievement Unlocked!\n                  </div>\n                  <div className=\"font-bold text-amber-950 text-base\">\n                    {achievement.name}\n                  </div>\n                  <div className=\"text-sm text-amber-800 mt-1\">\n                    {achievement.description}\n                  </div>\n                  <div className=\"mt-1 text-xs text-amber-700 capitalize\">\n                    {achievement.rarity}\n                  </div>\n                </div>\n                <button\n                  onClick={() => setNewlyUnlockedAchievements(prev => prev.filter(a => a.id !== achievement.id))}\n                  className=\"text-amber-600 hover:text-amber-800 flex-shrink-0\"\n                  aria-label=\"Dismiss notification\"\n                >\n                  ✕\n                </button>\n              </div>\n            </div>\n          ))}\n        </div>\n      )}\n      \n      {/* Tutorial Overlay */}\n      {showTutorial && currentTutorialStep && (\n        <div\n          className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4\"\n          role=\"dialog\"\n          aria-modal=\"true\"\n          aria-labelledby=\"tutorial-title\"\n        >\n          <div className=\"mx-4 max-w-2xl w-full rounded-lg bg-white p-6 shadow-xl max-h-[90vh] overflow-y-auto\">\n            <h2 id=\"tutorial-title\" className=\"text-2xl font-bold text-slate-900 mb-4\">\n              {currentTutorialStep.title}\n            </h2>\n            <div className=\"text-slate-700 whitespace-pre-line mb-6\">\n              {currentTutorialStep.content}\n            </div>\n            \n            {currentTutorialStep.interactive && currentTutorialStep.actions && (\n              <div className=\"mb-6 rounded-lg bg-sky-50 border border-sky-200 p-4\">\n                <div className=\"text-sm font-semibold text-sky-900 mb-2\">\n                  Try this:\n                </div>\n                <ul className=\"space-y-1\">\n                  {currentTutorialStep.actions.map((action, i) => (\n                    <li key={i} className=\"text-sm text-sky-800\">\n                      • {action}\n                    </li>\n                  ))}\n                </ul>\n              </div>\n            )}\n            \n            <div className=\"flex items-center justify-between flex-wrap gap-3\">\n              <div className=\"text-sm text-slate-500\">\n                Step {tutorialState.currentStep + 1} of {TUTORIAL_STEPS.length}\n              </div>\n              <div className=\"flex gap-2\">\n                {tutorialState.currentStep > 0 && (\n                  <button\n                    onClick={handleTutorialPrevious}\n                    className=\"px-4 py-2 text-sm font-medium text-slate-700 bg-slate-100 rounded-lg hover:bg-slate-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-sky-500\"\n                  >\n                    Previous\n                  </button>\n                )}\n                <button\n                  onClick={handleTutorialSkip}\n                  className=\"px-4 py-2 text-sm font-medium text-slate-700 bg-slate-100 rounded-lg hover:bg-slate-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-sky-500\"\n                >\n                  Skip\n                </button>\n                <button\n                  onClick={handleTutorialNext}\n                  className=\"px-4 py-2 text-sm font-medium text-white bg-sky-600 rounded-lg hover:bg-sky-700 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-sky-500\"\n                >\n                  {tutorialState.currentStep < TUTORIAL_STEPS.length - 1\n                    ? 'Next'\n                    : 'Start Playing'}\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n      \n      <GameShell\n        config={GAME_CONFIG}\n        status={status}\n        onStart={status === \"idle\" ? handleStart : undefined}\n        onReset={handleReset}\n      rightPanel={\n        <div className=\"space-y-4\">\n          {/* Progress */}\n          <div>\n            <h3 className=\"text-sm font-semibold text-slate-900 mb-2\">Progress</h3>\n            <div className=\"text-2xl font-bold text-slate-900\">\n              {status === \"playing\" ? currentPuzzleIndex + 1 : 0} / {puzzles.length || 10}\n            </div>\n            {status === \"playing\" && (\n              <div className=\"mt-2 text-sm text-slate-600\">\n                Score: {score} / {currentPuzzleIndex + 1}\n              </div>\n            )}\n          </div>\n          \n          {/* Tier Progress */}\n          <div>\n            <h3 className=\"text-sm font-semibold text-slate-900 mb-2\">Mastery</h3>\n            <div className=\"text-sm text-slate-700 mb-1\">\n              {currentTier.charAt(0).toUpperCase() + currentTier.slice(1)}\n            </div>\n            {nextTier && (\n              <div className=\"w-full bg-slate-200 rounded-full h-2\">\n                <div\n                  className=\"bg-sky-600 h-2 rounded-full transition-all\"\n                  style={{ width: `${tierProgress * 100}%` }}\n                  role=\"progressbar\"\n                  aria-valuenow={tierProgress * 100}\n                  aria-valuemin={0}\n                  aria-valuemax={100}\n                />\n              </div>\n            )}\n            <div className=\"text-xs text-slate-500 mt-1\">\n              {totalXP} XP\n            </div>\n          </div>\n          \n          {/* Streak */}\n          {streakData.currentStreak > 0 && (\n            <div>\n              <h3 className=\"text-sm font-semibold text-slate-900 mb-2\">Streak</h3>\n              <div className=\"text-lg font-bold text-slate-900\">\n                {streakData.currentStreak} days\n              </div>\n            </div>\n          )}\n          \n          {/* Hints */}\n          {status === \"playing\" && (\n            <div>\n              <h3 className=\"text-sm font-semibold text-slate-900 mb-2\">Hints</h3>\n              <div className=\"text-sm text-slate-700\">\n                {hintsRemaining} remaining\n              </div>\n              <button\n                onClick={handleHint}\n                disabled={hintsRemaining === 0 || selectedAnswer !== null}\n                className=\"mt-2 px-4 py-2 text-sm bg-slate-100 text-slate-700 rounded hover:bg-slate-200 disabled:opacity-50 disabled:cursor-not-allowed touch-manipulation min-h-[44px] min-w-[44px]\"\n                aria-label={`Use hint. ${hintsRemaining} hints remaining.`}\n              >\n                Use Hint (H)\n              </button>\n            </div>\n          )}\n        </div>\n      }\n    >\n      {status === \"idle\" && (\n        <div className=\"text-center py-8 sm:py-12\" role=\"region\" aria-label=\"Game introduction\">\n          <h2 className=\"text-xl sm:text-2xl font-semibold text-slate-900 mb-4\">Daily Logic Gauntlet</h2>\n          <p className=\"text-slate-600 mb-4 text-sm sm:text-base\">Ready to start today&apos;s challenge?</p>\n          <p className=\"text-xs sm:text-sm text-slate-500 mb-2 break-all\">\n            Today&apos;s seed: <span className=\"font-mono\">{dailySeed}</span>\n          </p>\n          <p className=\"text-xs text-slate-400 mt-4 px-2\">\n            Use number keys (1-4) or tap to select answers. Press H for hint.\n          </p>\n        </div>\n      )}\n      \n      {status === \"playing\" && currentPuzzle && (\n        <div className=\"space-y-6\">\n          {/* Puzzle */}\n          <div>\n            <div className=\"flex items-center gap-2 mb-4\">\n              <span className=\"px-2 py-1 text-xs font-medium bg-sky-100 text-sky-700 rounded\">\n                {currentPuzzle.type}\n              </span>\n              <span className=\"text-sm text-slate-500\">\n                Puzzle {currentPuzzleIndex + 1} of {puzzles.length}\n              </span>\n            </div>\n            \n            <h2 className=\"text-xl sm:text-2xl font-semibold text-slate-900 mb-4 break-words\">\n              {currentPuzzle.question}\n            </h2>\n          </div>\n          \n          {/* Answer Options */}\n          <div\n            className=\"grid grid-cols-1 gap-3 sm:grid-cols-2\"\n            role=\"radiogroup\"\n            aria-label=\"Answer options\"\n          >\n            {currentPuzzle.options.map((option, index) => {\n              const isSelected = selectedAnswer === index;\n              const isCorrect = index === currentPuzzle.correctAnswer;\n              const showResult = selectedAnswer !== null;\n              \n              let bgColor = \"bg-white border-slate-200 hover:bg-slate-50\";\n              if (showResult) {\n                if (isCorrect) {\n                  bgColor = \"bg-emerald-100 border-emerald-300\";\n                } else if (isSelected && !isCorrect) {\n                  bgColor = \"bg-rose-100 border-rose-300\";\n                }\n              }\n              \n              return (\n                <button\n                  key={index}\n                  onClick={() => handleAnswer(index)}\n                  disabled={selectedAnswer !== null}\n                  className={`rounded-lg border-2 p-4 text-left transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-sky-500 ${bgColor} ${\n                    selectedAnswer !== null ? \"cursor-not-allowed opacity-60\" : \"cursor-pointer\"\n                  }`}\n                  type=\"button\"\n                  role=\"radio\"\n                  aria-checked={isSelected}\n                  aria-label={`Option ${index + 1}: ${option}${showResult ? (isCorrect ? \". Correct answer\" : isSelected ? \". Incorrect answer\" : \"\") : \"\"}`}\n                >\n                  <div className=\"flex items-center gap-3\">\n                    <span className=\"font-semibold text-slate-700\" aria-hidden=\"true\">\n                      {index + 1}.\n                    </span>\n                    <span className=\"text-slate-900 flex-1\">{option}</span>\n                    {showResult && isCorrect && (\n                      <span className=\"text-emerald-700 font-semibold\" aria-label=\"Correct\">\n                        ✓\n                      </span>\n                    )}\n                    {showResult && isSelected && !isCorrect && (\n                      <span className=\"text-rose-700 font-semibold\" aria-label=\"Incorrect\">\n                        ✗\n                      </span>\n                    )}\n                  </div>\n                </button>\n              );\n            })}\n          </div>\n          \n          {/* Explanation */}\n          {selectedAnswer !== null && (\n            <div className=\"rounded-lg bg-sky-50 border border-sky-200 p-4\" role=\"region\" aria-live=\"polite\">\n              <p className=\"text-sm font-medium text-sky-900 mb-2\">Explanation</p>\n              <p className=\"text-sm text-sky-800\">{currentPuzzle.explanation}</p>\n            </div>\n          )}\n        </div>\n      )}\n      \n      {status === \"finished\" && (\n        <div className=\"space-y-6\">\n          <div className=\"text-center py-8\">\n            <h2 className=\"text-3xl font-bold text-slate-900 mb-2\">Challenge Complete!</h2>\n            <p className=\"text-xl text-slate-600 mb-4\">\n              Score: {score} / {puzzles.length}\n            </p>\n            {performances.length > 0 && (\n              <p className=\"text-sm text-slate-500\">\n                XP Gained: {calculateSessionXP(performances, hintsUsed, streakData.currentStreak)}\n              </p>\n            )}\n          </div>\n          \n          {/* Analysis Report */}\n          {analysisReport && (\n            <AnalysisReportComponent report={analysisReport} />\n          )}\n        </div>\n      )}\n      </GameShell>\n    </>\n  );\n}\n","/**\n * Games Framework - Core Exports\n * \n * Central export point for all framework components\n */\n\n// Core types\nexport * from './types';\n\n// RNG System\nexport { SeededRNG, getDailySeed, getDailySeedVariant, hashString } from './SeededRNG';\n\n// State Management\nexport { StateManager } from './StateManager';\n\n// Player Modeling\nexport {\n  type PlayerCapabilityModel,\n  type PuzzlePerformance,\n  createDefaultPlayerModel,\n  updatePlayerModel,\n  calculateAverageSkill,\n  predictOptimalDifficulty,\n  calculateSkillMatch,\n} from './PlayerModel';\n\n// Adaptive Difficulty\nexport { AdaptiveDifficultyEngine } from './AdaptiveDifficultyEngine';\n\n// Persistence\nexport {\n  PersistenceManager,\n  type GameSave,\n  type PlayerProfile,\n} from './PersistenceManager';\n\n// Existing framework components\nexport { DifficultyEngine } from './DifficultyEngine';\nexport { ExplainabilityEngine } from './ExplainabilityEngine';\nexport { InputLayer } from './InputLayer';\nexport { useGameAnalytics } from './useGameAnalytics';\nexport { usePerformanceMonitor } from './usePerformanceMonitor';\nexport { useReducedMotion } from './useReducedMotion';\n\n// React components\nexport { default as GameShell } from './GameShell';\nexport { GameErrorBoundary } from './GameErrorBoundary';\n","/**\n * Player Capability Model\n * \n * Multi-dimensional player skill profiling for adaptive difficulty and personalized learning.\n * Tracks skills, behaviors, and learning patterns without external APIs - all client-side.\n * \n * Based on technical architecture specification for gold-standard implementation.\n */\n\n/**\n * Multi-dimensional player capability model\n */\nexport interface PlayerCapabilityModel {\n  // Skill dimensions (0-1, normalized)\n  logicSkill: number;\n  patternSkill: number;\n  deductionSkill: number;\n  constraintSkill: number;\n  speedSkill: number;\n  \n  // Behavioral metrics\n  confidence: number;           // Based on hesitation patterns\n  riskTolerance: number;        // Based on hint usage\n  persistence: number;          // Based on retry behavior\n  \n  // Weakness identification\n  weaknessAreas: string[];      // Puzzle types where performance is low\n  strengthAreas: string[];       // Puzzle types where performance is high\n  \n  // Learning patterns\n  improvementVelocity: number;   // Rate of skill improvement\n  plateauDetected: boolean;      // Stagnation detection\n  learningStyle: 'visual' | 'textual' | 'interactive' | 'mixed';\n  \n  // Temporal data\n  lastUpdated: number;\n  dataPoints: number;            // Number of puzzles used to build model\n}\n\n/**\n * Puzzle performance data\n */\nexport interface PuzzlePerformance {\n  puzzleType: string;\n  correct: boolean;\n  difficulty: number;\n  timeSpent: number;             // milliseconds\n  hesitationTime?: number;       // Time before first action\n  hintsUsed: number;\n  attempts: number;\n  timestamp: number;\n}\n\n/**\n * Create default player model\n */\nexport function createDefaultPlayerModel(): PlayerCapabilityModel {\n  return {\n    logicSkill: 0.5,\n    patternSkill: 0.5,\n    deductionSkill: 0.5,\n    constraintSkill: 0.5,\n    speedSkill: 0.5,\n    confidence: 0.5,\n    riskTolerance: 0.5,\n    persistence: 0.5,\n    weaknessAreas: [],\n    strengthAreas: [],\n    improvementVelocity: 0,\n    plateauDetected: false,\n    learningStyle: 'mixed',\n    lastUpdated: Date.now(),\n    dataPoints: 0,\n  };\n}\n\n/**\n * Calculate average skill level\n */\nexport function calculateAverageSkill(model: PlayerCapabilityModel): number {\n  return (\n    model.logicSkill +\n    model.patternSkill +\n    model.deductionSkill +\n    model.constraintSkill +\n    model.speedSkill\n  ) / 5;\n}\n\n/**\n * Update player model based on performance\n */\nexport function updatePlayerModel(\n  model: PlayerCapabilityModel,\n  performance: PuzzlePerformance\n): PlayerCapabilityModel {\n  const alpha = 0.1; // Learning rate (exponential moving average)\n  const dataPoints = model.dataPoints + 1;\n  \n  // Map puzzle type to skill dimension\n  const skillMap: Record<string, keyof PlayerCapabilityModel> = {\n    'logic': 'logicSkill',\n    'pattern': 'patternSkill',\n    'deduction': 'deductionSkill',\n    'constraint': 'constraintSkill',\n  };\n  \n  // Update skill dimensions based on puzzle type\n  const skillKey = skillMap[performance.puzzleType];\n  if (skillKey) {\n    const currentSkill = model[skillKey] as number;\n    const performanceScore = performance.correct ? 1 : 0;\n    // Also factor in time (faster = better, normalized)\n    const timeBonus = performance.correct \n      ? Math.max(0, 1 - (performance.timeSpent / 60000)) // 1 minute = baseline\n      : 0;\n    const adjustedScore = performanceScore * (0.7 + timeBonus * 0.3);\n    const newSkill = currentSkill * (1 - alpha) + adjustedScore * alpha;\n    (model[skillKey] as number) = Math.max(0, Math.min(1, newSkill));\n  }\n  \n  // Update speed skill (based on time spent)\n  const speedScore = performance.correct \n    ? Math.max(0, 1 - (performance.timeSpent / 60000))\n    : 0;\n  model.speedSkill = model.speedSkill * (1 - alpha) + speedScore * alpha;\n  \n  // Update confidence based on hesitation\n  if (performance.hesitationTime !== undefined) {\n    // Lower hesitation = higher confidence (normalized to 10 seconds)\n    const hesitationScore = Math.max(0, 1 - (performance.hesitationTime / 10000));\n    model.confidence = model.confidence * (1 - alpha) + hesitationScore * alpha;\n  }\n  \n  // Update risk tolerance based on hint usage\n  // More hints = lower risk tolerance (they prefer safety)\n  const riskScore = 1 - (performance.hintsUsed / 3); // 3 hints max\n  model.riskTolerance = model.riskTolerance * (1 - alpha) + riskScore * alpha;\n  \n  // Update persistence based on attempts\n  // More attempts = higher persistence (they don't give up)\n  const persistenceScore = Math.min(1, performance.attempts / 3);\n  model.persistence = model.persistence * (1 - alpha) + persistenceScore * alpha;\n  \n  // Update weakness/strength areas\n  if (performance.correct) {\n    if (!model.strengthAreas.includes(performance.puzzleType)) {\n      model.strengthAreas.push(performance.puzzleType);\n    }\n    model.weaknessAreas = model.weaknessAreas.filter(a => a !== performance.puzzleType);\n  } else {\n    if (!model.weaknessAreas.includes(performance.puzzleType)) {\n      model.weaknessAreas.push(performance.puzzleType);\n    }\n    // Remove from strengths if performance drops\n    if (model.strengthAreas.includes(performance.puzzleType) && performance.attempts > 2) {\n      model.strengthAreas = model.strengthAreas.filter(a => a !== performance.puzzleType);\n    }\n  }\n  \n  // Update improvement velocity\n  const previousAvgSkill = calculateAverageSkill(model);\n  // Temporarily calculate new average\n  const tempModel = { ...model };\n  if (skillKey) {\n    (tempModel[skillKey] as number) = model[skillKey] as number;\n  }\n  const newAvgSkill = calculateAverageSkill(tempModel);\n  model.improvementVelocity = (newAvgSkill - previousAvgSkill) / dataPoints;\n  \n  // Detect plateau (no significant improvement over many data points)\n  model.plateauDetected = Math.abs(model.improvementVelocity) < 0.001 && dataPoints > 20;\n  \n  // Infer learning style based on performance patterns\n  // This is simplified - in reality would analyze more data\n  if (performance.correct && performance.timeSpent < 30000) {\n    // Fast success might indicate visual/interactive preference\n    if (model.learningStyle === 'mixed') {\n      model.learningStyle = performance.puzzleType === 'pattern' ? 'visual' : 'interactive';\n    }\n  }\n  \n  model.lastUpdated = Date.now();\n  model.dataPoints = dataPoints;\n  \n  return model;\n}\n\n/**\n * Predict optimal difficulty for player\n */\nexport function predictOptimalDifficulty(\n  model: PlayerCapabilityModel,\n  puzzleType: string\n): number {\n  // Map puzzle type to skill dimension\n  const skillMap: Record<string, keyof PlayerCapabilityModel> = {\n    'logic': 'logicSkill',\n    'pattern': 'patternSkill',\n    'deduction': 'deductionSkill',\n    'constraint': 'constraintSkill',\n  };\n  \n  // Base difficulty on skill level for this puzzle type\n  const skillKey = skillMap[puzzleType];\n  const skill = skillKey ? (model[skillKey] as number) : calculateAverageSkill(model);\n  \n  // Adjust for confidence\n  const confidenceAdjustment = (model.confidence - 0.5) * 0.2;\n  \n  // Adjust for weakness areas\n  const weaknessPenalty = model.weaknessAreas.includes(puzzleType) ? -0.1 : 0;\n  \n  // Target: slightly above current skill (optimal challenge zone)\n  // Zone of Proximal Development: skill + 0.15\n  const targetDifficulty = skill + 0.15 + confidenceAdjustment + weaknessPenalty;\n  \n  // Clamp to valid range [0.1, 0.95]\n  return Math.max(0.1, Math.min(0.95, targetDifficulty));\n}\n\n/**\n * Calculate skill match for puzzle type\n */\nexport function calculateSkillMatch(\n  model: PlayerCapabilityModel,\n  puzzleType: string\n): number {\n  const skillMap: Record<string, keyof PlayerCapabilityModel> = {\n    'logic': 'logicSkill',\n    'pattern': 'patternSkill',\n    'deduction': 'deductionSkill',\n    'constraint': 'constraintSkill',\n  };\n  \n  const skillKey = skillMap[puzzleType];\n  return skillKey ? (model[skillKey] as number) : calculateAverageSkill(model);\n}\n","/**\n * Adaptive Difficulty Engine\n * \n * Predicts optimal difficulty for each puzzle based on player capability model.\n * Adjusts difficulty in real-time based on performance to maintain optimal challenge.\n * \n * Based on technical architecture specification for gold-standard implementation.\n */\n\nimport type { PlayerCapabilityModel, PuzzlePerformance } from './PlayerModel';\nimport { predictOptimalDifficulty, updatePlayerModel } from './PlayerModel';\n\n/**\n * Performance history entry\n */\ninterface PerformanceHistory {\n  timestamp: number;\n  performance: PuzzlePerformance;\n  difficulty: number;\n}\n\n/**\n * Adaptive difficulty engine with predictive modeling\n */\nexport class AdaptiveDifficultyEngine {\n  private playerModel: PlayerCapabilityModel;\n  private history: PerformanceHistory[];\n  private readonly maxHistorySize = 50;\n  \n  constructor(initialModel: PlayerCapabilityModel) {\n    this.playerModel = initialModel;\n    this.history = [];\n  }\n  \n  /**\n   * Calculate next puzzle difficulty\n   */\n  calculateNextDifficulty(\n    puzzleType: string,\n    currentPosition: number,\n    totalPuzzles: number\n  ): number {\n    // Base difficulty from player model prediction\n    const predictedDifficulty = predictOptimalDifficulty(this.playerModel, puzzleType);\n    \n    // Adjust for position in gauntlet (progressive difficulty)\n    const positionFactor = currentPosition / totalPuzzles;\n    const progressionDifficulty = 0.3 + (positionFactor * 0.5);\n    \n    // Blend predicted and progression (70% prediction, 30% progression)\n    const blendedDifficulty = (\n      predictedDifficulty * 0.7 + \n      progressionDifficulty * 0.3\n    );\n    \n    // Adjust for recent performance\n    if (this.history.length > 0) {\n      const recentPerformance = this.getRecentPerformance(5);\n      const performanceAdjustment = this.calculatePerformanceAdjustment(recentPerformance);\n      return Math.max(0.1, Math.min(0.95, blendedDifficulty + performanceAdjustment));\n    }\n    \n    return blendedDifficulty;\n  }\n  \n  /**\n   * Update engine after puzzle completion\n   */\n  update(performance: PuzzlePerformance): void {\n    // Update player model\n    this.playerModel = updatePlayerModel(this.playerModel, performance);\n    \n    // Add to history\n    this.history.push({\n      timestamp: Date.now(),\n      performance,\n      difficulty: performance.difficulty,\n    });\n    \n    // Keep only last N entries\n    if (this.history.length > this.maxHistorySize) {\n      this.history.shift();\n    }\n  }\n  \n  /**\n   * Get recent performance metrics\n   */\n  private getRecentPerformance(count: number): PuzzlePerformance[] {\n    return this.history\n      .slice(-count)\n      .map(h => h.performance);\n  }\n  \n  /**\n   * Calculate adjustment based on recent performance\n   */\n  private calculatePerformanceAdjustment(\n    recentPerformance: PuzzlePerformance[]\n  ): number {\n    if (recentPerformance.length === 0) return 0;\n    \n    const accuracy = recentPerformance.filter(p => p.correct).length / recentPerformance.length;\n    const avgTime = recentPerformance.reduce((sum, p) => sum + p.timeSpent, 0) / recentPerformance.length;\n    \n    // If accuracy too high (>90%) and fast, increase difficulty\n    if (accuracy > 0.9 && avgTime < 30000) {\n      return 0.1;\n    }\n    \n    // If accuracy too low (<60%) or very slow, decrease difficulty\n    if (accuracy < 0.6 || avgTime > 120000) {\n      return -0.1;\n    }\n    \n    // If accuracy good (70-90%) but slow, slightly increase (more time pressure)\n    if (accuracy >= 0.7 && accuracy <= 0.9 && avgTime > 60000) {\n      return 0.05;\n    }\n    \n    // Otherwise, maintain current level\n    return 0;\n  }\n  \n  /**\n   * Get current player model\n   */\n  getModel(): PlayerCapabilityModel {\n    return { ...this.playerModel };\n  }\n  \n  /**\n   * Reset engine (for new session)\n   */\n  reset(): void {\n    this.history = [];\n    // Keep player model (it persists across sessions)\n  }\n  \n  /**\n   * Get performance statistics\n   */\n  getStats(): {\n    totalPuzzles: number;\n    accuracy: number;\n    averageTime: number;\n    averageDifficulty: number;\n  } {\n    if (this.history.length === 0) {\n      return {\n        totalPuzzles: 0,\n        accuracy: 0,\n        averageTime: 0,\n        averageDifficulty: 0,\n      };\n    }\n    \n    const correct = this.history.filter(h => h.performance.correct).length;\n    const totalTime = this.history.reduce((sum, h) => sum + h.performance.timeSpent, 0);\n    const totalDifficulty = this.history.reduce((sum, h) => sum + h.difficulty, 0);\n    \n    return {\n      totalPuzzles: this.history.length,\n      accuracy: correct / this.history.length,\n      averageTime: totalTime / this.history.length,\n      averageDifficulty: totalDifficulty / this.history.length,\n    };\n  }\n}\n","/**\n * Persistence Manager with Versioning\n * \n * Handles game state persistence with versioning and migration support.\n * Supports both localStorage (quick access) and IndexedDB (larger data).\n * \n * Based on technical architecture specification for gold-standard implementation.\n */\n\n/**\n * Game save data structure\n */\nexport interface GameSave<T = unknown> {\n  version: string;\n  gameId: string;\n  timestamp: number;\n  state: T;\n  metadata?: {\n    difficulty?: number;\n    score?: number;\n    moves?: number;\n    duration?: number;\n    [key: string]: unknown;\n  };\n}\n\n/**\n * Player profile structure\n */\nexport interface PlayerProfile {\n  version: string;\n  pseudonym: string;\n  mastery: Record<string, {\n    tier: string;\n    xp: number;\n    unlocks: string[];\n    stats: {\n      gamesPlayed: number;\n      wins: number;\n      bestScore: number;\n      averageScore: number;\n    };\n    playerModel?: unknown; // Player capability model (game-specific)\n  }>;\n  achievements: string[];\n  settings: {\n    audioEnabled: boolean;\n    reducedMotion: boolean;\n    highContrast: boolean;\n    tutorialCompleted: boolean;\n    [key: string]: unknown;\n  };\n  lastPlayed: Record<string, number>; // gameId -> timestamp\n  createdAt: number;\n  lastUpdated: number;\n}\n\n/**\n * Migration function type\n */\ntype MigrationFunction<T = unknown> = (data: GameSave<T>) => GameSave<T>;\n\n/**\n * Persistence manager with versioning and migration\n */\nexport class PersistenceManager {\n  private readonly STORAGE_KEY_PREFIX = 'ransford-games';\n  private readonly CURRENT_VERSION = '2.0.0';\n  private readonly MAX_BACKUPS = 5;\n  \n  private migrations: Map<string, MigrationFunction> = new Map();\n  \n  constructor(gameId: string) {\n    this.gameId = gameId;\n    this.registerMigrations();\n  }\n  \n  private gameId: string;\n  \n  /**\n   * Register migration functions\n   */\n  private registerMigrations(): void {\n    // Migration from 1.0.0 to 2.0.0\n    this.migrations.set('1.0.0->2.0.0', (data: GameSave) => {\n      // Add new fields with defaults\n      const v2Data: GameSave = {\n        ...data,\n        version: '2.0.0',\n        metadata: {\n          ...data.metadata,\n          // Add any new metadata fields with defaults\n        },\n      };\n      return v2Data;\n    });\n  }\n  \n  /**\n   * Get storage key for game\n   */\n  private getStorageKey(type: 'save' | 'profile' | 'backup' = 'save'): string {\n    if (type === 'profile') {\n      return `${this.STORAGE_KEY_PREFIX}-profile`;\n    }\n    if (type === 'backup') {\n      return `${this.STORAGE_KEY_PREFIX}-${this.gameId}-backup-${Date.now()}`;\n    }\n    return `${this.STORAGE_KEY_PREFIX}-${this.gameId}`;\n  }\n  \n  /**\n   * Save game state\n   */\n  async saveGameState<T>(state: T, metadata?: GameSave['metadata']): Promise<void> {\n    const saveData: GameSave<T> = {\n      version: this.CURRENT_VERSION,\n      gameId: this.gameId,\n      timestamp: Date.now(),\n      state,\n      metadata,\n    };\n    \n    try {\n      // Save to localStorage (quick access)\n      const key = this.getStorageKey();\n      localStorage.setItem(key, JSON.stringify(saveData));\n    } catch (error) {\n      // Handle quota exceeded error\n      if (error instanceof DOMException && error.name === 'QuotaExceededError') {\n        // Try to free up space\n        await this.cleanupOldSaves();\n        // Retry once\n        try {\n          localStorage.setItem(this.getStorageKey(), JSON.stringify(saveData));\n        } catch (retryError) {\n          console.error('Failed to save game state after cleanup:', retryError);\n          throw new Error('Storage quota exceeded. Please free up space.');\n        }\n      } else {\n        console.error('Failed to save game state:', error);\n        throw error;\n      }\n    }\n  }\n  \n  /**\n   * Load game state with automatic migration\n   */\n  async loadGameState<T>(): Promise<GameSave<T> | null> {\n    try {\n      const key = this.getStorageKey();\n      const data = localStorage.getItem(key);\n      \n      if (!data) {\n        return null;\n      }\n      \n      const saveData: GameSave<T> = JSON.parse(data);\n      return await this.migrateAndLoad(saveData);\n    } catch (error) {\n      console.error('Failed to load game state:', error);\n      return null;\n    }\n  }\n  \n  /**\n   * Migrate save data to current version\n   */\n  private async migrateAndLoad<T>(saveData: GameSave<T>): Promise<GameSave<T>> {\n    if (saveData.version === this.CURRENT_VERSION) {\n      return saveData;\n    }\n    \n    // Create backup before migration\n    await this.createBackup(saveData);\n    \n    // Apply migrations\n    let migratedData: GameSave<T> = saveData;\n    const migrationPath = this.getMigrationPath(saveData.version, this.CURRENT_VERSION);\n    \n    for (const migrationKey of migrationPath) {\n      const migration = this.migrations.get(migrationKey);\n      if (migration) {\n        // Type assertion: migrations preserve the structure and state type\n        migratedData = migration(migratedData) as GameSave<T>;\n      }\n    }\n    \n    // Save migrated data\n    await this.saveGameState(migratedData.state, migratedData.metadata);\n    \n    return migratedData;\n  }\n  \n  /**\n   * Get migration path between versions\n   */\n  private getMigrationPath(fromVersion: string, toVersion: string): string[] {\n    const path: string[] = [];\n    \n    // Simple migration path (can be enhanced for complex migrations)\n    if (fromVersion === '1.0.0' && toVersion === '2.0.0') {\n      path.push('1.0.0->2.0.0');\n    }\n    \n    return path;\n  }\n  \n  /**\n   * Create backup before migration\n   */\n  private async createBackup<T>(saveData: GameSave<T>): Promise<void> {\n    try {\n      const backupKey = this.getStorageKey('backup');\n      localStorage.setItem(backupKey, JSON.stringify(saveData));\n      \n      // Keep only last N backups\n      await this.cleanupOldBackups();\n    } catch (error) {\n      console.warn('Failed to create backup:', error);\n      // Don't throw - backup failure shouldn't block migration\n    }\n  }\n  \n  /**\n   * Clean up old backups\n   */\n  private async cleanupOldBackups(): Promise<void> {\n    const backupKeys: Array<{ key: string; timestamp: number }> = [];\n    \n    // Find all backup keys\n    for (let i = 0; i < localStorage.length; i++) {\n      const key = localStorage.key(i);\n      if (key?.startsWith(`${this.STORAGE_KEY_PREFIX}-${this.gameId}-backup-`)) {\n        const timestamp = parseInt(key.split('-').pop() || '0');\n        backupKeys.push({ key, timestamp });\n      }\n    }\n    \n    // Sort by timestamp (oldest first)\n    backupKeys.sort((a, b) => a.timestamp - b.timestamp);\n    \n    // Remove oldest backups (keep only last N)\n    const toRemove = backupKeys.slice(0, Math.max(0, backupKeys.length - this.MAX_BACKUPS));\n    for (const { key } of toRemove) {\n      localStorage.removeItem(key);\n    }\n  }\n  \n  /**\n   * Clean up old saves (for quota management)\n   */\n  private async cleanupOldSaves(): Promise<void> {\n    // Remove backups first (they're less critical)\n    await this.cleanupOldBackups();\n    \n    // Could also implement LRU cache for game saves if needed\n  }\n  \n  /**\n   * Delete game state\n   */\n  async deleteGameState(): Promise<void> {\n    try {\n      localStorage.removeItem(this.getStorageKey());\n    } catch (error) {\n      console.error('Failed to delete game state:', error);\n      throw error;\n    }\n  }\n  \n  /**\n   * Save player profile\n   */\n  async savePlayerProfile(profile: PlayerProfile): Promise<void> {\n    try {\n      const updatedProfile: PlayerProfile = {\n        ...profile,\n        version: this.CURRENT_VERSION,\n        lastUpdated: Date.now(),\n      };\n      \n      const key = this.getStorageKey('profile');\n      localStorage.setItem(key, JSON.stringify(updatedProfile));\n    } catch (error) {\n      console.error('Failed to save player profile:', error);\n      throw error;\n    }\n  }\n  \n  /**\n   * Load player profile\n   */\n  async loadPlayerProfile(): Promise<PlayerProfile | null> {\n    try {\n      const key = this.getStorageKey('profile');\n      const data = localStorage.getItem(key);\n      \n      if (!data) {\n        return null;\n      }\n      \n      const profile: PlayerProfile = JSON.parse(data);\n      \n      // Migrate if needed\n      if (profile.version !== this.CURRENT_VERSION) {\n        // Profile migrations would go here\n        profile.version = this.CURRENT_VERSION;\n        await this.savePlayerProfile(profile);\n      }\n      \n      return profile;\n    } catch (error) {\n      console.error('Failed to load player profile:', error);\n      return null;\n    }\n  }\n  \n  /**\n   * Create default player profile\n   */\n  createDefaultProfile(pseudonym: string = 'Player'): PlayerProfile {\n    return {\n      version: this.CURRENT_VERSION,\n      pseudonym,\n      mastery: {},\n      achievements: [],\n      settings: {\n        audioEnabled: false,\n        reducedMotion: false,\n        highContrast: false,\n        tutorialCompleted: false,\n      },\n      lastPlayed: {},\n      createdAt: Date.now(),\n      lastUpdated: Date.now(),\n    };\n  }\n  \n  /**\n   * Compare version strings\n   */\n  private compareVersions(v1: string, v2: string): number {\n    const parts1 = v1.split('.').map(Number);\n    const parts2 = v2.split('.').map(Number);\n    \n    for (let i = 0; i < Math.max(parts1.length, parts2.length); i++) {\n      const part1 = parts1[i] || 0;\n      const part2 = parts2[i] || 0;\n      \n      if (part1 < part2) return -1;\n      if (part1 > part2) return 1;\n    }\n    \n    return 0;\n  }\n}\n","/**\n * Performance monitoring hook for games\n * \n * Tracks frame rate and performance metrics\n * Only active in development mode\n */\n\nimport { useEffect, useRef } from \"react\";\n\nexport function usePerformanceMonitor(enabled: boolean = process.env.NODE_ENV === \"development\") {\n  const frameCountRef = useRef(0);\n  const lastTimeRef = useRef(performance.now());\n  const fpsRef = useRef<number[]>([]);\n\n  useEffect(() => {\n    if (!enabled || typeof window === \"undefined\") return;\n\n    const measureFPS = () => {\n      frameCountRef.current++;\n      const now = performance.now();\n      const delta = now - lastTimeRef.current;\n\n      if (delta >= 1000) {\n        const fps = Math.round((frameCountRef.current * 1000) / delta);\n        fpsRef.current.push(fps);\n        if (fpsRef.current.length > 60) {\n          fpsRef.current.shift();\n        }\n\n        const avgFPS = fpsRef.current.reduce((a, b) => a + b, 0) / fpsRef.current.length;\n        if (avgFPS < 50 && fpsRef.current.length >= 10) {\n          console.warn(`Low FPS detected: ${avgFPS.toFixed(1)} fps`);\n        }\n\n        frameCountRef.current = 0;\n        lastTimeRef.current = now;\n      }\n\n      requestAnimationFrame(measureFPS);\n    };\n\n    const rafId = requestAnimationFrame(measureFPS);\n    return () => cancelAnimationFrame(rafId);\n  }, [enabled]);\n\n  return {\n    getAverageFPS: () => {\n      if (fpsRef.current.length === 0) return 60;\n      return fpsRef.current.reduce((a, b) => a + b, 0) / fpsRef.current.length;\n    },\n  };\n}\n","/**\n * Puzzle Templates - Curated puzzle templates for Daily Logic Gauntlet\n * \n * Phase 1: Use curated templates. Phase 2: Add procedural generation.\n */\n\nimport type { Puzzle, PuzzleType } from './types';\nimport { SeededRNG } from '../../framework/SeededRNG';\n\n/**\n * Logic puzzle template\n */\nexport interface LogicPuzzleTemplate {\n  id: string;\n  type: 'logic';\n  baseDifficulty: number;\n  entities: string[];\n  constraints: Array<{\n    description: string;\n    apply: (entities: string[], rng: SeededRNG) => string[];\n  }>;\n  questionTemplate: string;\n  explanationTemplate: string;\n}\n\n/**\n * Pattern puzzle template\n */\nexport interface PatternPuzzleTemplate {\n  id: string;\n  type: 'pattern';\n  baseDifficulty: number;\n  sequence: Array<{\n    generate: (index: number, rng: SeededRNG) => number | string;\n    pattern: string;\n  }>;\n  questionTemplate: string;\n  explanationTemplate: string;\n}\n\n/**\n * Curated logic puzzle templates\n */\nexport const LOGIC_PUZZLE_TEMPLATES: LogicPuzzleTemplate[] = [\n  {\n    id: 'logic-ordering-simple',\n    type: 'logic',\n    baseDifficulty: 0.2,\n    entities: ['First', 'Second', 'Third'],\n    constraints: [\n      {\n        description: 'First comes before Second, Second comes before Third',\n        apply: (entities) => {\n          // Fixed order: First, Second, Third\n          return ['First', 'Second', 'Third'];\n        },\n      },\n    ],\n    questionTemplate: 'Three items (First, Second, Third) must be arranged. First comes before Second, and Second comes before Third. What is the correct order?',\n    explanationTemplate: 'The order must be First → Second → Third to satisfy all constraints.',\n  },\n  {\n    id: 'logic-if-then',\n    type: 'logic',\n    baseDifficulty: 0.3,\n    entities: ['If A then B'],\n    constraints: [\n      {\n        description: 'If A then B is true',\n        apply: (entities) => entities,\n      },\n    ],\n    questionTemplate: 'Given the statement \"If it rains, then the ground is wet\", which statement is always true?',\n    explanationTemplate: 'If the condition \"it rains\" occurs, then \"the ground is wet\" must follow. This is the logical implication.',\n  },\n  {\n    id: 'logic-exclusion',\n    type: 'logic',\n    baseDifficulty: 0.35,\n    entities: ['A', 'B', 'C'],\n    constraints: [\n      {\n        description: 'Not A',\n        apply: (entities) => {\n          return entities.filter(e => e !== 'A');\n        },\n      },\n    ],\n    questionTemplate: 'If you have A, B, and C, but not A, what do you have?',\n    explanationTemplate: 'Excluding A leaves B and C.',\n  },\n  {\n    id: 'logic-transitive',\n    type: 'logic',\n    baseDifficulty: 0.4,\n    entities: ['A', 'B', 'C'],\n    constraints: [\n      {\n        description: 'A > B and B > C implies A > C',\n        apply: (entities) => entities,\n      },\n    ],\n    questionTemplate: 'If A is taller than B, and B is taller than C, what can we conclude about A and C?',\n    explanationTemplate: 'By transitivity, A must be taller than C.',\n  },\n  {\n    id: 'logic-chain',\n    type: 'logic',\n    baseDifficulty: 0.5,\n    entities: ['A', 'B', 'C', 'D'],\n    constraints: [\n      {\n        description: 'A → B → C → D',\n        apply: (entities) => ['A', 'B', 'C', 'D'],\n      },\n    ],\n    questionTemplate: 'Given: A leads to B, B leads to C, C leads to D. What follows?',\n    explanationTemplate: 'By chaining the conditions, we can conclude A leads to D.',\n  },\n  {\n    id: 'logic-negation',\n    type: 'logic',\n    baseDifficulty: 0.35,\n    entities: ['True', 'False'],\n    constraints: [\n      {\n        description: 'Not False',\n        apply: () => ['True'],\n      },\n    ],\n    questionTemplate: 'If \"not false\" is true, what is the value?',\n    explanationTemplate: 'The negation of false is true.',\n  },\n  {\n    id: 'logic-conjunction',\n    type: 'logic',\n    baseDifficulty: 0.4,\n    entities: ['A and B'],\n    constraints: [\n      {\n        description: 'Both A and B must be true',\n        apply: (entities) => entities,\n      },\n    ],\n    questionTemplate: 'If \"A and B\" is true, what can we conclude?',\n    explanationTemplate: 'For \"A and B\" to be true, both A and B must be true.',\n  },\n  {\n    id: 'logic-disjunction',\n    type: 'logic',\n    baseDifficulty: 0.3,\n    entities: ['A or B'],\n    constraints: [\n      {\n        description: 'At least one of A or B is true',\n        apply: (entities) => entities,\n      },\n    ],\n    questionTemplate: 'If \"A or B\" is true, what can we conclude?',\n    explanationTemplate: 'For \"A or B\" to be true, at least one of A or B must be true.',\n  },\n  {\n    id: 'logic-equivalence',\n    type: 'logic',\n    baseDifficulty: 0.45,\n    entities: ['A', 'B'],\n    constraints: [\n      {\n        description: 'A if and only if B',\n        apply: (entities) => entities,\n      },\n    ],\n    questionTemplate: 'If \"A if and only if B\" is true, and A is true, what can we conclude about B?',\n    explanationTemplate: 'If A is true and \"A if and only if B\" is true, then B must also be true.',\n  },\n];\n\n/**\n * Curated pattern puzzle templates\n */\nexport const PATTERN_PUZZLE_TEMPLATES: PatternPuzzleTemplate[] = [\n  {\n    id: 'pattern-arithmetic',\n    type: 'pattern',\n    baseDifficulty: 0.2,\n    sequence: [\n      { generate: () => 2, pattern: 'start' },\n      { generate: (i, rng) => {\n        const start = rng ? rng.nextInt(1, 10) : 2;\n        const diff = rng ? rng.nextInt(1, 5) : 2;\n        return start + i * diff;\n      }, pattern: 'arithmetic progression' },\n    ],\n    questionTemplate: 'What comes next in the sequence: ?',\n    explanationTemplate: 'Each number increases by a constant amount, so the next number continues the pattern.',\n  },\n  {\n    id: 'pattern-geometric',\n    type: 'pattern',\n    baseDifficulty: 0.3,\n    sequence: [\n      { generate: () => 2, pattern: 'start' },\n      { generate: (i, rng) => {\n        const start = rng ? rng.nextInt(1, 5) : 2;\n        const ratio = rng ? (rng.next() < 0.5 ? 2 : 3) : 2;\n        return start * (ratio ** i);\n      }, pattern: 'geometric progression' },\n    ],\n    questionTemplate: 'What comes next in the sequence: ?',\n    explanationTemplate: 'Each number is multiplied by a constant factor, so the next number continues the geometric pattern.',\n  },\n  {\n    id: 'pattern-fibonacci',\n    type: 'pattern',\n    baseDifficulty: 0.35,\n    sequence: [\n      { generate: () => 1, pattern: 'fibonacci start' },\n      { generate: (i) => {\n        // Fibonacci: 1, 1, 2, 3, 5, 8, 13, ...\n        const fib = [1, 1, 2, 3, 5, 8, 13, 21, 34];\n        return fib[i] || fib[fib.length - 1];\n      }, pattern: 'fibonacci' },\n    ],\n    questionTemplate: 'What comes next in the sequence: ?',\n    explanationTemplate: 'Each number is the sum of the two previous numbers (Fibonacci sequence).',\n  },\n  {\n    id: 'pattern-squares',\n    type: 'pattern',\n    baseDifficulty: 0.4,\n    sequence: [\n      { generate: () => 1, pattern: 'start' },\n      { generate: (i) => (i + 1) ** 2, pattern: 'squares' },\n    ],\n    questionTemplate: 'What comes next in the sequence: ?',\n    explanationTemplate: 'Each number is a perfect square: 1², 2², 3², 4², so the next is 5² = 25.',\n  },\n  {\n    id: 'pattern-even',\n    type: 'pattern',\n    baseDifficulty: 0.25,\n    sequence: [\n      { generate: () => 2, pattern: 'start' },\n      { generate: (i, rng) => {\n        const start = rng ? rng.nextInt(2, 10) * 2 : 2;\n        return start + i * 2;\n      }, pattern: 'even numbers' },\n    ],\n    questionTemplate: 'What comes next in the sequence: ?',\n    explanationTemplate: 'The sequence consists of even numbers, each increasing by 2.',\n  },\n  {\n    id: 'pattern-triangular',\n    type: 'pattern',\n    baseDifficulty: 0.4,\n    sequence: [\n      { generate: () => 1, pattern: 'start' },\n      { generate: (i) => {\n        // Triangular numbers: 1, 3, 6, 10, 15, 21, ...\n        return ((i + 1) * (i + 2)) / 2;\n      }, pattern: 'triangular numbers' },\n    ],\n    questionTemplate: 'What comes next in the sequence: ?',\n    explanationTemplate: 'These are triangular numbers: each number is the sum of all previous natural numbers plus the current position.',\n  },\n  {\n    id: 'pattern-prime-gap',\n    type: 'pattern',\n    baseDifficulty: 0.45,\n    sequence: [\n      { generate: () => 2, pattern: 'start' },\n      { generate: (i) => {\n        const primes = [2, 3, 5, 7, 11, 13, 17, 19, 23, 29];\n        return primes[i] || primes[primes.length - 1];\n      }, pattern: 'prime numbers' },\n    ],\n    questionTemplate: 'What comes next in the sequence: ?',\n    explanationTemplate: 'The sequence consists of prime numbers in ascending order.',\n  },\n  {\n    id: 'pattern-cubes',\n    type: 'pattern',\n    baseDifficulty: 0.35,\n    sequence: [\n      { generate: () => 1, pattern: 'start' },\n      { generate: (i) => (i + 1) ** 3, pattern: 'cubes' },\n    ],\n    questionTemplate: 'What comes next in the sequence: ?',\n    explanationTemplate: 'Each number is a perfect cube: 1³, 2³, 3³, 4³, so the next is 5³ = 125.',\n  },\n  {\n    id: 'pattern-alternating-sign',\n    type: 'pattern',\n    baseDifficulty: 0.3,\n    sequence: [\n      { generate: () => 1, pattern: 'start' },\n      { generate: (i, rng) => {\n        const base = rng ? rng.nextInt(2, 8) : 3;\n        return (i % 2 === 0 ? 1 : -1) * base * (i + 1);\n      }, pattern: 'alternating signs' },\n    ],\n    questionTemplate: 'What comes next in the sequence: ?',\n    explanationTemplate: 'The sequence alternates between positive and negative values, with increasing magnitude.',\n  },\n];\n\n/**\n * Generate puzzle from template\n */\nexport function generatePuzzleFromTemplate(\n  template: LogicPuzzleTemplate | PatternPuzzleTemplate,\n  difficulty: number,\n  rng: SeededRNG\n): Puzzle {\n  if (template.type === 'logic') {\n    return generateLogicPuzzle(template as LogicPuzzleTemplate, difficulty, rng);\n  } else {\n    return generatePatternPuzzle(template as PatternPuzzleTemplate, difficulty, rng);\n  }\n}\n\n/**\n * Generate logic puzzle from template\n */\nfunction generateLogicPuzzle(\n  template: LogicPuzzleTemplate,\n  difficulty: number,\n  rng: SeededRNG\n): Puzzle {\n  // Apply constraints to generate valid solution\n  let arrangement = [...template.entities];\n  for (const constraint of template.constraints) {\n    arrangement = constraint.apply(arrangement, rng);\n  }\n  \n  // Generate question\n  const question = template.questionTemplate;\n  \n  // Generate answer options\n  const options: string[] = [];\n  \n  // Correct answer\n  const correctAnswer = arrangement.join('-');\n  options.push(correctAnswer);\n  \n  // Generate wrong answers (shuffled versions)\n  for (let i = 0; i < 3; i++) {\n    const wrongArrangement = rng.shuffle([...template.entities]);\n    const wrongAnswer = wrongArrangement.join('-');\n    if (wrongAnswer !== correctAnswer && !options.includes(wrongAnswer)) {\n      options.push(wrongAnswer);\n    }\n  }\n  \n  // Shuffle options\n  const shuffledOptions = rng.shuffle(options);\n  const correctIndex = shuffledOptions.indexOf(correctAnswer);\n  \n  // Generate explanation\n  const explanation = template.explanationTemplate;\n  \n  return {\n    id: `${template.id}-${rng.nextInt(1000, 9999)}`,\n    type: 'logic',\n    difficulty,\n    question,\n    options: shuffledOptions,\n    correctAnswer: correctIndex,\n    explanation,\n    metadata: {\n      constraints: template.constraints.length,\n      problemSpaceSize: template.entities.length,\n    },\n  };\n}\n\n/**\n * Generate pattern puzzle from template\n */\nfunction generatePatternPuzzle(\n  template: PatternPuzzleTemplate,\n  difficulty: number,\n  rng: SeededRNG\n): Puzzle {\n  // Generate sequence using the generator function\n  const sequence: (number | string)[] = [];\n  const generator = template.sequence[1] || template.sequence[0];\n  \n  for (let i = 0; i < 4; i++) {\n    const item = generator.generate(i, rng);\n    sequence.push(item);\n  }\n  \n  // Generate next item (correct answer)\n  const nextItem = generator.generate(4, rng);\n  \n  // Generate question - replace ? with sequence or use template directly\n  const question = template.questionTemplate.includes('?')\n    ? template.questionTemplate.replace('?', sequence.join(', ') + ', ?')\n    : template.questionTemplate;\n  \n  // Generate answer options\n  const options: string[] = [];\n  const nextItemStr = String(nextItem);\n  options.push(nextItemStr);\n  \n  // Generate wrong answers (variations)\n  const nextNum = typeof nextItem === 'number' ? nextItem : parseInt(nextItemStr) || 0;\n  const wrongAnswers = [\n    nextNum + 1,\n    nextNum - 1,\n    typeof nextItem === 'number' ? nextNum * 2 : nextNum + 5,\n    typeof nextItem === 'number' ? Math.floor(nextNum / 2) : nextNum - 2,\n  ].map(String);\n  \n  // Add unique wrong answers\n  for (const wrong of wrongAnswers) {\n    if (!options.includes(wrong) && wrong !== nextItemStr) {\n      options.push(wrong);\n      if (options.length >= 4) break;\n    }\n  }\n  \n  // Ensure we have 4 options\n  while (options.length < 4) {\n    const extra = String((typeof nextItem === 'number' ? nextItem : parseInt(nextItemStr) || 0) + options.length);\n    if (!options.includes(extra)) {\n      options.push(extra);\n    } else {\n      break;\n    }\n  }\n  \n  // Shuffle options\n  const shuffledOptions = rng.shuffle(options);\n  const correctIndex = shuffledOptions.indexOf(nextItemStr);\n  \n  // Generate explanation\n  const explanation = template.explanationTemplate;\n  \n  return {\n    id: `${template.id}-${rng.nextInt(1000, 9999)}`,\n    type: 'pattern',\n    difficulty,\n    question,\n    options: shuffledOptions,\n    correctAnswer: correctIndex,\n    explanation,\n    metadata: {\n      patternComplexity: template.sequence.length,\n    },\n  };\n}\n\n/**\n * Get template by difficulty\n */\nexport function getTemplatesByDifficulty(\n  type: PuzzleType,\n  difficulty: number\n): Array<LogicPuzzleTemplate | PatternPuzzleTemplate> {\n  if (type === 'logic') {\n    return LOGIC_PUZZLE_TEMPLATES.filter(\n      t => Math.abs(t.baseDifficulty - difficulty) < 0.2\n    );\n  } else if (type === 'pattern') {\n    return PATTERN_PUZZLE_TEMPLATES.filter(\n      t => Math.abs(t.baseDifficulty - difficulty) < 0.2\n    );\n  }\n  return [];\n}\n","/**\n * Puzzle Generator\n * \n * Generates puzzles for Daily Logic Gauntlet using templates and seeds.\n * Phase 1: Uses curated templates. Phase 2: Will add procedural generation.\n */\n\nimport type { Puzzle, PuzzleType, PuzzleGenerationConfig, DifficultyTier } from './types';\nimport { SeededRNG } from '../../framework/SeededRNG';\nimport { generatePuzzleFromTemplate, getTemplatesByDifficulty } from './puzzleTemplates';\n\n/**\n * Generate a single puzzle\n */\nexport function generatePuzzle(config: PuzzleGenerationConfig): Puzzle {\n  const rng = new SeededRNG(config.seed);\n  \n  // Get templates for this type and difficulty\n  const templates = getTemplatesByDifficulty(config.type, config.difficulty);\n  \n  if (templates.length === 0) {\n    // Fallback: create simple puzzle\n    return createFallbackPuzzle(config, rng);\n  }\n  \n  // Select template randomly\n  const template = rng.choice(templates);\n  \n  // Generate puzzle from template\n  return generatePuzzleFromTemplate(template, config.difficulty, rng);\n}\n\n/**\n * Generate daily puzzle set\n */\nexport function generateDailyPuzzleSet(\n  seed: number,\n  playerTier: DifficultyTier = 'novice',\n  puzzleCount: number = 10\n): Puzzle[] {\n  const rng = new SeededRNG(seed);\n  const puzzles: Puzzle[] = [];\n  \n  // Mix of puzzle types based on tier\n  const typeWeights = getTypeWeightsForTier(playerTier);\n  const types: PuzzleType[] = ['logic', 'pattern', 'deduction', 'constraint'];\n  const weights = typeWeights[0]; // Get first (and only) weight set\n  \n  for (let i = 0; i < puzzleCount; i++) {\n    // Select puzzle type based on weights\n    const type = rng.weightedChoice(types, types.map(t => weights[t] || 0));\n    \n    // Calculate difficulty (progressive: easier to harder)\n    const positionFactor = i / puzzleCount;\n    const baseDifficulty = 0.3 + (positionFactor * 0.4); // 0.3 to 0.7 range\n    \n    // Adjust for tier\n    const tierAdjustment = getTierDifficultyAdjustment(playerTier);\n    const difficulty = Math.max(0.1, Math.min(0.95, baseDifficulty + tierAdjustment));\n    \n    // Generate puzzle\n    const puzzle = generatePuzzle({\n      type,\n      difficulty,\n      seed: seed + i, // Different seed for each puzzle\n      playerTier,\n    });\n    \n    puzzles.push(puzzle);\n  }\n  \n  return puzzles;\n}\n\n/**\n * Get type weights for tier\n */\nfunction getTypeWeightsForTier(tier: DifficultyTier): [Record<PuzzleType, number>] {\n  // Novice: Mostly logic and pattern (easier)\n  if (tier === 'novice') {\n    return [{ logic: 0.4, pattern: 0.4, deduction: 0.1, constraint: 0.1 }];\n  }\n  \n  // Apprentice: More balanced\n  if (tier === 'apprentice') {\n    return [{ logic: 0.3, pattern: 0.3, deduction: 0.2, constraint: 0.2 }];\n  }\n  \n  // Adept: More deduction and constraint\n  if (tier === 'adept') {\n    return [{ logic: 0.25, pattern: 0.25, deduction: 0.25, constraint: 0.25 }];\n  }\n  \n  // Expert+: Balanced with all types\n  return [{ logic: 0.25, pattern: 0.25, deduction: 0.25, constraint: 0.25 }];\n}\n\n/**\n * Get difficulty adjustment for tier\n */\nfunction getTierDifficultyAdjustment(tier: DifficultyTier): number {\n  const adjustments: Record<DifficultyTier, number> = {\n    novice: -0.2,\n    apprentice: 0,\n    adept: 0.1,\n    expert: 0.2,\n    master: 0.3,\n  };\n  return adjustments[tier];\n}\n\n/**\n * Create fallback puzzle (when no templates available)\n */\nfunction createFallbackPuzzle(\n  config: PuzzleGenerationConfig,\n  rng: SeededRNG\n): Puzzle {\n  // Simple fallback puzzle\n  const question = `What is the next number in the sequence: 1, 2, 3, 4, ?`;\n  const correctAnswer = 5;\n  const options = [\n    String(correctAnswer),\n    String(correctAnswer + 1),\n    String(correctAnswer - 1),\n    String(correctAnswer * 2),\n  ];\n  \n  const shuffled = rng.shuffle(options);\n  const correctIndex = shuffled.indexOf(String(correctAnswer));\n  \n  return {\n    id: `fallback-${rng.nextInt(1000, 9999)}`,\n    type: config.type,\n    difficulty: config.difficulty,\n    question,\n    options: shuffled,\n    correctAnswer: correctIndex,\n    explanation: 'Each number increases by 1, so the next number is 5.',\n  };\n}\n\n/**\n * Validate puzzle quality\n */\nexport function validatePuzzle(puzzle: Puzzle): { valid: boolean; issues: string[] } {\n  const issues: string[] = [];\n  \n  // Check required fields\n  if (!puzzle.question || puzzle.question.length < 10) {\n    issues.push('Question too short or missing');\n  }\n  \n  if (!puzzle.options || puzzle.options.length < 4) {\n    issues.push('Need at least 4 answer options');\n  }\n  \n  if (puzzle.correctAnswer < 0 || puzzle.correctAnswer >= puzzle.options.length) {\n    issues.push('Correct answer index out of range');\n  }\n  \n  // Check for duplicate options\n  const uniqueOptions = new Set(puzzle.options);\n  if (uniqueOptions.size !== puzzle.options.length) {\n    issues.push('Duplicate answer options');\n  }\n  \n  // Check explanation\n  if (!puzzle.explanation || puzzle.explanation.length < 20) {\n    issues.push('Explanation too short or missing');\n  }\n  \n  return {\n    valid: issues.length === 0,\n    issues,\n  };\n}\n","/**\n * Progression System\n * \n * XP calculation, tier progression, and unlock management for Daily Logic Gauntlet\n */\n\nimport type { DifficultyTier, PuzzlePerformance } from './types';\n\n/**\n * Mastery tier definitions\n */\nexport interface MasteryTier {\n  id: DifficultyTier;\n  name: string;\n  minXP: number;\n  unlocks: string[];\n}\n\nexport const MASTERY_TIERS: MasteryTier[] = [\n  {\n    id: 'novice',\n    name: 'Novice',\n    minXP: 0,\n    unlocks: ['basic-puzzles', 'practice-mode'],\n  },\n  {\n    id: 'apprentice',\n    name: 'Apprentice',\n    minXP: 100,\n    unlocks: ['intermediate-puzzles', 'archive-access'],\n  },\n  {\n    id: 'adept',\n    name: 'Adept',\n    minXP: 300,\n    unlocks: ['advanced-puzzles', 'custom-seeds'],\n  },\n  {\n    id: 'expert',\n    name: 'Expert',\n    minXP: 600,\n    unlocks: ['expert-puzzles', 'puzzle-creator'],\n  },\n  {\n    id: 'master',\n    name: 'Master',\n    minXP: 1000,\n    unlocks: ['master-puzzles', 'all-features'],\n  },\n];\n\n/**\n * Calculate XP for puzzle performance\n */\nexport function calculateXP(\n  performance: PuzzlePerformance,\n  hintsUsed: number,\n  perfectGauntlet: boolean\n): number {\n  let xp = 0;\n  \n  // Base XP for correct answer\n  if (performance.correct) {\n    xp += 10;\n    \n    // Speed bonus (faster = more XP, up to +10)\n    const timeBonus = Math.max(0, 10 - (performance.timeSpent / 10000)); // 10 seconds = baseline\n    xp += Math.floor(timeBonus);\n  }\n  \n  // Hint penalty (-2 XP per hint)\n  xp -= hintsUsed * 2;\n  \n  // Perfect gauntlet bonus (+50 XP)\n  if (perfectGauntlet) {\n    xp += 50;\n  }\n  \n  // Minimum 0 XP\n  return Math.max(0, xp);\n}\n\n/**\n * Calculate total XP for a session\n */\nexport function calculateSessionXP(\n  performances: PuzzlePerformance[],\n  hintsUsed: number[],\n  streakBonus: number = 0\n): number {\n  const perfectGauntlet = performances.every(p => p.correct);\n  \n  let totalXP = 0;\n  for (let i = 0; i < performances.length; i++) {\n    totalXP += calculateXP(performances[i], hintsUsed[i] || 0, false);\n  }\n  \n  // Perfect gauntlet bonus\n  if (perfectGauntlet) {\n    totalXP += 50;\n  }\n  \n  // Streak bonus (+5 XP per day in streak)\n  totalXP += streakBonus * 5;\n  \n  return totalXP;\n}\n\n/**\n * Get tier from XP\n */\nexport function getTierFromXP(xp: number): DifficultyTier {\n  // Find highest tier that player has reached\n  for (let i = MASTERY_TIERS.length - 1; i >= 0; i--) {\n    if (xp >= MASTERY_TIERS[i].minXP) {\n      return MASTERY_TIERS[i].id;\n    }\n  }\n  return 'novice';\n}\n\n/**\n * Get tier information\n */\nexport function getTierInfo(tier: DifficultyTier): MasteryTier {\n  return MASTERY_TIERS.find(t => t.id === tier) || MASTERY_TIERS[0];\n}\n\n/**\n * Get next tier information\n */\nexport function getNextTier(currentXP: number): MasteryTier | null {\n  const currentTier = getTierFromXP(currentXP);\n  const currentIndex = MASTERY_TIERS.findIndex(t => t.id === currentTier);\n  \n  if (currentIndex >= MASTERY_TIERS.length - 1) {\n    return null; // Already at max tier\n  }\n  \n  return MASTERY_TIERS[currentIndex + 1];\n}\n\n/**\n * Calculate progress to next tier (0-1)\n */\nexport function getTierProgress(currentXP: number): number {\n  const currentTier = getTierFromXP(currentXP);\n  const nextTier = getNextTier(currentXP);\n  \n  if (!nextTier) {\n    return 1; // Max tier reached\n  }\n  \n  const currentTierInfo = getTierInfo(currentTier);\n  const xpInCurrentTier = currentXP - currentTierInfo.minXP;\n  const xpNeededForNextTier = nextTier.minXP - currentTierInfo.minXP;\n  \n  return Math.min(1, Math.max(0, xpInCurrentTier / xpNeededForNextTier));\n}\n\n/**\n * Get all unlocked features for XP level\n */\nexport function getUnlockedFeatures(xp: number): string[] {\n  const tier = getTierFromXP(xp);\n  const unlocks: string[] = [];\n  \n  // Add unlocks from all tiers up to current\n  for (const tierInfo of MASTERY_TIERS) {\n    if (xp >= tierInfo.minXP) {\n      unlocks.push(...tierInfo.unlocks);\n    }\n  }\n  \n  return [...new Set(unlocks)]; // Remove duplicates\n}\n","/**\n * Streak Tracker\n * \n * Tracks daily streaks for Daily Logic Gauntlet\n */\n\n/**\n * Streak data\n */\nexport interface StreakData {\n  currentStreak: number;\n  longestStreak: number;\n  lastPlayedDate: string; // YYYY-MM-DD\n  freePassesUsed: number;\n  freePassesAvailable: number;\n}\n\n/**\n * Get today's date string (YYYY-MM-DD UTC)\n */\nexport function getTodayDateString(): string {\n  const today = new Date();\n  const year = today.getUTCFullYear();\n  const month = String(today.getUTCMonth() + 1).padStart(2, '0');\n  const day = String(today.getUTCDate()).padStart(2, '0');\n  return `${year}-${month}-${day}`;\n}\n\n/**\n * Check if streak should continue\n */\nexport function shouldContinueStreak(\n  streakData: StreakData,\n  completedToday: boolean\n): boolean {\n  const today = getTodayDateString();\n  \n  // If already played today, streak continues\n  if (streakData.lastPlayedDate === today) {\n    return completedToday;\n  }\n  \n  // Check if yesterday (streak continuation)\n  const yesterday = getYesterdayDateString();\n  if (streakData.lastPlayedDate === yesterday) {\n    return completedToday;\n  }\n  \n  // Streak broken (more than 1 day gap)\n  return false;\n}\n\n/**\n * Get yesterday's date string\n */\nfunction getYesterdayDateString(): string {\n  const yesterday = new Date();\n  yesterday.setUTCDate(yesterday.getUTCDate() - 1);\n  const year = yesterday.getUTCFullYear();\n  const month = String(yesterday.getUTCMonth() + 1).padStart(2, '0');\n  const day = String(yesterday.getUTCDate()).padStart(2, '0');\n  return `${year}-${month}-${day}`;\n}\n\n/**\n * Update streak after completion\n */\nexport function updateStreak(\n  streakData: StreakData,\n  completed: boolean\n): StreakData {\n  const today = getTodayDateString();\n  \n  if (!completed) {\n    // No change if not completed\n    return streakData;\n  }\n  \n  // If already played today, no change\n  if (streakData.lastPlayedDate === today) {\n    return streakData;\n  }\n  \n  const yesterday = getYesterdayDateString();\n  let newStreak = streakData.currentStreak;\n  \n  // Continue streak if played yesterday\n  if (streakData.lastPlayedDate === yesterday) {\n    newStreak += 1;\n  } else if (streakData.lastPlayedDate !== today) {\n    // Reset streak if gap > 1 day\n    newStreak = 1;\n  }\n  \n  // Update longest streak\n  const longestStreak = Math.max(streakData.longestStreak, newStreak);\n  \n  return {\n    currentStreak: newStreak,\n    longestStreak,\n    lastPlayedDate: today,\n    freePassesUsed: streakData.freePassesUsed,\n    freePassesAvailable: streakData.freePassesAvailable,\n  };\n}\n\n/**\n * Use free pass (skip one day without breaking streak)\n */\nexport function useFreePass(streakData: StreakData): StreakData {\n  if (streakData.freePassesAvailable <= 0) {\n    return streakData; // No free passes available\n  }\n  \n  const today = getTodayDateString();\n  \n  return {\n    ...streakData,\n    lastPlayedDate: today, // Mark as played today (using free pass)\n    freePassesUsed: streakData.freePassesUsed + 1,\n    freePassesAvailable: streakData.freePassesAvailable - 1,\n  };\n}\n\n/**\n * Check if free pass can be used today\n */\nexport function canUseFreePass(streakData: StreakData): boolean {\n  const today = getTodayDateString();\n  \n  // Can't use if already played today\n  if (streakData.lastPlayedDate === today) {\n    return false;\n  }\n  \n  // Can use if have available passes\n  return streakData.freePassesAvailable > 0;\n}\n\n/**\n * Create default streak data\n */\nexport function createDefaultStreak(): StreakData {\n  return {\n    currentStreak: 0,\n    longestStreak: 0,\n    lastPlayedDate: '',\n    freePassesUsed: 0,\n    freePassesAvailable: 1, // Start with 1 free pass\n  };\n}\n\n/**\n * Reset free passes (monthly)\n */\nexport function resetFreePasses(streakData: StreakData): StreakData {\n  return {\n    ...streakData,\n    freePassesUsed: 0,\n    freePassesAvailable: 1, // Reset to 1 per month\n  };\n}\n","/**\n * Analysis Report Generator\n * \n * Generates detailed post-game analysis reports with performance metrics,\n * learning insights, and recommendations.\n */\n\nimport type { Puzzle, PuzzlePerformance } from './types';\nimport { calculateSessionXP } from './progression';\n\n/**\n * Analysis report data structure\n */\nexport interface AnalysisReport {\n  summary: {\n    totalPuzzles: number;\n    correct: number;\n    accuracy: number;\n    totalTime: number;\n    averageTime: number;\n    xpGained: number;\n    hintsUsed: number;\n  };\n  \n  performance: {\n    byType: Record<string, {\n      count: number;\n      correct: number;\n      accuracy: number;\n      averageTime: number;\n    }>;\n    byDifficulty: Array<{\n      difficulty: string;\n      count: number;\n      accuracy: number;\n    }>;\n    speed: {\n      fastest: number;\n      slowest: number;\n      average: number;\n    };\n  };\n  \n  insights: {\n    strengths: string[];\n    weaknesses: string[];\n    recommendations: string[];\n  };\n  \n  progression: {\n    skillImprovements: Record<string, number>;\n    nextMilestone: string;\n    estimatedGamesToNextTier: number;\n  };\n}\n\n/**\n * Generate analysis report from session data\n */\nexport function generateAnalysisReport(\n  puzzles: Puzzle[],\n  performances: PuzzlePerformance[],\n  hintsUsed: number[],\n  totalXP: number,\n  currentXP: number\n): AnalysisReport {\n  const correct = performances.filter(p => p.correct).length;\n  const totalTime = performances.reduce((sum, p) => sum + p.timeSpent, 0);\n  const totalHints = hintsUsed.reduce((sum, h) => sum + h, 0);\n  const accuracy = puzzles.length > 0 ? correct / puzzles.length : 0;\n  const averageTime = performances.length > 0 ? totalTime / performances.length : 0;\n  \n  // Performance by type\n  const byType: Record<string, { count: number; correct: number; accuracy: number; averageTime: number }> = {};\n  puzzles.forEach((puzzle, index) => {\n    const perf = performances[index];\n    if (!perf) return;\n    \n    if (!byType[puzzle.type]) {\n      byType[puzzle.type] = { count: 0, correct: 0, accuracy: 0, averageTime: 0 };\n    }\n    \n    byType[puzzle.type].count++;\n    if (perf.correct) byType[puzzle.type].correct++;\n    byType[puzzle.type].averageTime += perf.timeSpent;\n  });\n  \n  // Calculate averages for types\n  Object.keys(byType).forEach(type => {\n    const stats = byType[type];\n    stats.accuracy = stats.count > 0 ? stats.correct / stats.count : 0;\n    stats.averageTime = stats.count > 0 ? stats.averageTime / stats.count : 0;\n  });\n  \n  // Performance by difficulty (buckets)\n  const difficultyBuckets: Record<string, { count: number; correct: number }> = {\n    'Easy (0.0-0.3)': { count: 0, correct: 0 },\n    'Medium (0.3-0.5)': { count: 0, correct: 0 },\n    'Hard (0.5-0.7)': { count: 0, correct: 0 },\n    'Expert (0.7+)': { count: 0, correct: 0 },\n  };\n  \n  puzzles.forEach((puzzle, index) => {\n    const perf = performances[index];\n    if (!perf) return;\n    \n    let bucket: string;\n    if (puzzle.difficulty < 0.3) bucket = 'Easy (0.0-0.3)';\n    else if (puzzle.difficulty < 0.5) bucket = 'Medium (0.3-0.5)';\n    else if (puzzle.difficulty < 0.7) bucket = 'Hard (0.5-0.7)';\n    else bucket = 'Expert (0.7+)';\n    \n    difficultyBuckets[bucket].count++;\n    if (perf.correct) difficultyBuckets[bucket].correct++;\n  });\n  \n  const byDifficulty = Object.entries(difficultyBuckets)\n    .filter(([_, stats]) => stats.count > 0)\n    .map(([difficulty, stats]) => ({\n      difficulty,\n      count: stats.count,\n      accuracy: stats.count > 0 ? stats.correct / stats.count : 0,\n    }));\n  \n  // Speed analysis\n  const times = performances.map(p => p.timeSpent).filter(t => t > 0);\n  const speed = {\n    fastest: times.length > 0 ? Math.min(...times) : 0,\n    slowest: times.length > 0 ? Math.max(...times) : 0,\n    average: averageTime,\n  };\n  \n  // Generate insights\n  const strengths: string[] = [];\n  const weaknesses: string[] = [];\n  const recommendations: string[] = [];\n  \n  // Type-based insights\n  Object.entries(byType).forEach(([type, stats]) => {\n    if (stats.accuracy >= 0.8) {\n      strengths.push(`Excellent performance on ${type} puzzles (${Math.round(stats.accuracy * 100)}% accuracy)`);\n    } else if (stats.accuracy < 0.5) {\n      weaknesses.push(`Struggling with ${type} puzzles (${Math.round(stats.accuracy * 100)}% accuracy)`);\n      recommendations.push(`Practice more ${type} puzzles to improve your skills`);\n    }\n  });\n  \n  // Difficulty-based insights\n  byDifficulty.forEach(({ difficulty, accuracy }) => {\n    if (accuracy >= 0.8) {\n      strengths.push(`Strong performance on ${difficulty} puzzles`);\n    } else if (accuracy < 0.5 && difficulty.includes('Easy')) {\n      weaknesses.push(`Found ${difficulty} puzzles challenging`);\n      recommendations.push('Consider reviewing fundamental concepts');\n    }\n  });\n  \n  // Speed insights\n  if (speed.average < 30000) {\n    strengths.push('Fast problem-solving speed');\n  } else if (speed.average > 90000) {\n    weaknesses.push('Slow problem-solving (consider using hints)');\n    recommendations.push('Try to work more efficiently or use hints when stuck');\n  }\n  \n  // Accuracy insights\n  if (accuracy >= 0.9) {\n    strengths.push('High accuracy overall');\n  } else if (accuracy < 0.6) {\n    weaknesses.push('Low accuracy - many mistakes');\n    recommendations.push('Take more time to think through each puzzle carefully');\n  }\n  \n  // Hint usage insights\n  if (totalHints === 0 && accuracy >= 0.8) {\n    strengths.push('Completed without hints');\n  } else if (totalHints > puzzles.length * 0.5) {\n    weaknesses.push('Relied heavily on hints');\n    recommendations.push('Try to solve puzzles independently before using hints');\n  }\n  \n  // Default recommendations if none generated\n  if (recommendations.length === 0) {\n    if (accuracy >= 0.8) {\n      recommendations.push('Great performance! Try increasing difficulty for more challenge');\n    } else {\n      recommendations.push('Continue practicing to improve your skills');\n    }\n  }\n  \n  // Progression insights\n  const skillImprovements: Record<string, number> = {};\n  Object.entries(byType).forEach(([type, stats]) => {\n    skillImprovements[type] = stats.accuracy;\n  });\n  \n  // Estimate games to next tier (simplified: assume ~100 XP per game on average)\n  const xpPerGame = totalXP > 0 ? totalXP : 50;\n  const xpNeeded = Math.max(0, 100 - (currentXP % 100)); // Simplified tier calculation\n  const estimatedGamesToNextTier = Math.ceil(xpNeeded / xpPerGame);\n  \n  const nextMilestone = estimatedGamesToNextTier <= 1 \n    ? 'You\\'re very close to your next tier!'\n    : `About ${estimatedGamesToNextTier} more games until next tier`;\n  \n  return {\n    summary: {\n      totalPuzzles: puzzles.length,\n      correct,\n      accuracy,\n      totalTime,\n      averageTime,\n      xpGained: totalXP,\n      hintsUsed: totalHints,\n    },\n    performance: {\n      byType,\n      byDifficulty,\n      speed,\n    },\n    insights: {\n      strengths,\n      weaknesses,\n      recommendations,\n    },\n    progression: {\n      skillImprovements,\n      nextMilestone,\n      estimatedGamesToNextTier,\n    },\n  };\n}\n","/**\n * Analysis Report Component\n * \n * Displays detailed post-game analysis with performance metrics,\n * insights, and recommendations.\n */\n\n\"use client\";\n\nimport React from 'react';\nimport type { AnalysisReport } from './analysisReport';\n\ninterface AnalysisReportComponentProps {\n  report: AnalysisReport;\n}\n\nexport function AnalysisReportComponent({ report }: AnalysisReportComponentProps) {\n  const formatTime = (ms: number): string => {\n    const seconds = Math.round(ms / 1000);\n    if (seconds < 60) return `${seconds}s`;\n    const minutes = Math.floor(seconds / 60);\n    const remainingSeconds = seconds % 60;\n    return `${minutes}m ${remainingSeconds}s`;\n  };\n\n  return (\n    <div className=\"space-y-6\" role=\"region\" aria-label=\"Game analysis report\">\n      {/* Summary Section */}\n      <div className=\"rounded-lg bg-slate-50 border border-slate-200 p-6\">\n        <h3 className=\"text-xl font-semibold text-slate-900 mb-4\">Session Summary</h3>\n        <div className=\"grid grid-cols-2 md:grid-cols-3 gap-3 sm:gap-4\">\n          <div>\n            <div className=\"text-sm text-slate-600\">Accuracy</div>\n            <div className=\"text-xl sm:text-2xl font-bold text-slate-900\">\n              {Math.round(report.summary.accuracy * 100)}%\n            </div>\n          </div>\n          <div>\n            <div className=\"text-sm text-slate-600\">Score</div>\n            <div className=\"text-2xl font-bold text-slate-900\">\n              {report.summary.correct} / {report.summary.totalPuzzles}\n            </div>\n          </div>\n          <div>\n            <div className=\"text-sm text-slate-600\">Total Time</div>\n            <div className=\"text-xl sm:text-2xl font-bold text-slate-900\">\n              {formatTime(report.summary.totalTime)}\n            </div>\n          </div>\n          <div>\n            <div className=\"text-sm text-slate-600\">Average Time</div>\n            <div className=\"text-lg font-semibold text-slate-700\">\n              {formatTime(report.summary.averageTime)}\n            </div>\n          </div>\n          <div>\n            <div className=\"text-sm text-slate-600\">XP Gained</div>\n            <div className=\"text-lg font-semibold text-sky-600\">\n              +{report.summary.xpGained}\n            </div>\n          </div>\n          <div>\n            <div className=\"text-sm text-slate-600\">Hints Used</div>\n            <div className=\"text-lg font-semibold text-slate-700\">\n              {report.summary.hintsUsed}\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Performance by Type */}\n      {Object.keys(report.performance.byType).length > 0 && (\n        <div className=\"rounded-lg bg-slate-50 border border-slate-200 p-6\">\n          <h3 className=\"text-xl font-semibold text-slate-900 mb-4\">Performance by Type</h3>\n          <div className=\"space-y-3\">\n            {Object.entries(report.performance.byType).map(([type, stats]) => (\n              <div key={type} className=\"flex items-center justify-between\">\n                <div className=\"flex-1\">\n                  <div className=\"flex items-center justify-between mb-1\">\n                    <span className=\"font-medium text-slate-900 capitalize\">{type}</span>\n                    <span className=\"text-sm text-slate-600\">\n                      {stats.correct}/{stats.count} ({Math.round(stats.accuracy * 100)}%)\n                    </span>\n                  </div>\n                  <div className=\"w-full bg-slate-200 rounded-full h-2\">\n                    <div\n                      className={`h-2 rounded-full transition-all ${\n                        stats.accuracy >= 0.8\n                          ? 'bg-emerald-500'\n                          : stats.accuracy >= 0.6\n                          ? 'bg-sky-500'\n                          : 'bg-amber-500'\n                      }`}\n                      style={{ width: `${stats.accuracy * 100}%` }}\n                      role=\"progressbar\"\n                      aria-valuenow={stats.accuracy * 100}\n                      aria-valuemin={0}\n                      aria-valuemax={100}\n                    />\n                  </div>\n                  <div className=\"text-xs text-slate-500 mt-1\">\n                    Avg time: {formatTime(stats.averageTime)}\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n\n      {/* Performance by Difficulty */}\n      {report.performance.byDifficulty.length > 0 && (\n        <div className=\"rounded-lg bg-slate-50 border border-slate-200 p-6\">\n          <h3 className=\"text-lg sm:text-xl font-semibold text-slate-900 mb-4\">Performance by Difficulty</h3>\n          <div className=\"space-y-3\">\n            {report.performance.byDifficulty.map(({ difficulty, count, accuracy }) => (\n              <div key={difficulty} className=\"flex items-center justify-between\">\n                <span className=\"font-medium text-slate-900\">{difficulty}</span>\n                <div className=\"flex items-center gap-3\">\n                  <span className=\"text-sm text-slate-600\">{count} puzzles</span>\n                  <span className=\"text-sm font-semibold text-slate-700\">\n                    {Math.round(accuracy * 100)}%\n                  </span>\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n\n      {/* Insights */}\n      <div className=\"rounded-lg bg-slate-50 border border-slate-200 p-6\">\n        <h3 className=\"text-xl font-semibold text-slate-900 mb-4\">Insights</h3>\n        \n        {report.insights.strengths.length > 0 && (\n          <div className=\"mb-4\">\n            <h4 className=\"text-sm font-semibold text-emerald-700 mb-2\">Strengths</h4>\n            <ul className=\"space-y-1\">\n              {report.insights.strengths.map((strength, index) => (\n                <li key={index} className=\"text-sm text-slate-700 flex items-start gap-2\">\n                  <span className=\"text-emerald-600\" aria-hidden=\"true\">✓</span>\n                  <span>{strength}</span>\n                </li>\n              ))}\n            </ul>\n          </div>\n        )}\n        \n        {report.insights.weaknesses.length > 0 && (\n          <div className=\"mb-4\">\n            <h4 className=\"text-sm font-semibold text-amber-700 mb-2\">Areas for Improvement</h4>\n            <ul className=\"space-y-1\">\n              {report.insights.weaknesses.map((weakness, index) => (\n                <li key={index} className=\"text-sm text-slate-700 flex items-start gap-2\">\n                  <span className=\"text-amber-600\" aria-hidden=\"true\">!</span>\n                  <span>{weakness}</span>\n                </li>\n              ))}\n            </ul>\n          </div>\n        )}\n        \n        {report.insights.recommendations.length > 0 && (\n          <div>\n            <h4 className=\"text-sm font-semibold text-sky-700 mb-2\">Recommendations</h4>\n            <ul className=\"space-y-1\">\n              {report.insights.recommendations.map((rec, index) => (\n                <li key={index} className=\"text-sm text-slate-700 flex items-start gap-2\">\n                  <span className=\"text-sky-600\" aria-hidden=\"true\">→</span>\n                  <span>{rec}</span>\n                </li>\n              ))}\n            </ul>\n          </div>\n        )}\n      </div>\n\n      {/* Progression */}\n      <div className=\"rounded-lg bg-sky-50 border border-sky-200 p-6\">\n        <h3 className=\"text-lg sm:text-xl font-semibold text-slate-900 mb-4\">Progression</h3>\n        <div className=\"space-y-2\">\n          <div className=\"text-sm text-slate-700\">\n            <strong>Next Milestone:</strong> {report.progression.nextMilestone}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","/**\n * Archive System\n * \n * Stores and retrieves completed daily puzzle sets for replay and review.\n * Uses localStorage with versioning and migration support.\n */\n\nimport type { Puzzle, DailyPuzzleSet } from './types';\nimport { getDailySeed, getDailySeedVariant } from '../../framework/SeededRNG';\nimport { generateDailyPuzzleSet } from './puzzleGenerator';\n\nconst ARCHIVE_STORAGE_KEY = 'daily-logic-gauntlet-archive';\nconst ARCHIVE_VERSION = 1;\n\nexport interface ArchivedPuzzleSet {\n  date: string; // YYYY-MM-DD\n  seed: number;\n  puzzles: Puzzle[];\n  completedAt: number; // Timestamp\n  score: number;\n  totalPuzzles: number;\n  accuracy: number;\n  timeSpent: number; // Milliseconds\n  playerXP: number; // XP at time of completion\n}\n\nexport interface ArchiveData {\n  version: number;\n  archivedSets: ArchivedPuzzleSet[];\n  lastArchivedDate: string;\n}\n\n/**\n * Get today's date string (YYYY-MM-DD UTC)\n */\nfunction getTodayDateString(): string {\n  const today = new Date();\n  const year = today.getUTCFullYear();\n  const month = String(today.getUTCMonth() + 1).padStart(2, '0');\n  const day = String(today.getUTCDate()).padStart(2, '0');\n  return `${year}-${month}-${day}`;\n}\n\n/**\n * Load archive data from localStorage\n */\nexport function loadArchive(): ArchiveData {\n  try {\n    const stored = localStorage.getItem(ARCHIVE_STORAGE_KEY);\n    if (!stored) {\n      return {\n        version: ARCHIVE_VERSION,\n        archivedSets: [],\n        lastArchivedDate: '',\n      };\n    }\n    \n    const data = JSON.parse(stored) as ArchiveData;\n    \n    // Migrate if needed\n    if (data.version !== ARCHIVE_VERSION) {\n      return migrateArchive(data);\n    }\n    \n    return data;\n  } catch (error) {\n    console.error('Failed to load archive:', error);\n    return {\n      version: ARCHIVE_VERSION,\n      archivedSets: [],\n      lastArchivedDate: '',\n    };\n  }\n}\n\n/**\n * Save archive data to localStorage\n */\nexport function saveArchive(data: ArchiveData): void {\n  try {\n    localStorage.setItem(ARCHIVE_STORAGE_KEY, JSON.stringify(data));\n  } catch (error) {\n    console.error('Failed to save archive:', error);\n  }\n}\n\n/**\n * Migrate archive data to current version\n */\nfunction migrateArchive(data: ArchiveData): ArchiveData {\n  // Future: Add migration logic as archive structure evolves\n  return {\n    ...data,\n    version: ARCHIVE_VERSION,\n  };\n}\n\n/**\n * Archive a completed daily puzzle set\n */\nexport function archivePuzzleSet(\n  puzzles: Puzzle[],\n  score: number,\n  timeSpent: number,\n  playerXP: number\n): void {\n  const today = getTodayDateString();\n  const seed = getDailySeed();\n  \n  const archive = loadArchive();\n  \n  // Check if today's set is already archived\n  const existingIndex = archive.archivedSets.findIndex(set => set.date === today);\n  if (existingIndex !== -1) {\n    // Update existing archive entry (player may have improved score)\n    archive.archivedSets[existingIndex] = {\n      date: today,\n      seed,\n      puzzles: puzzles.map(p => ({ ...p })), // Deep copy\n      completedAt: Date.now(),\n      score,\n      totalPuzzles: puzzles.length,\n      accuracy: score / puzzles.length,\n      timeSpent,\n      playerXP,\n    };\n  } else {\n    // Add new archive entry\n    archive.archivedSets.push({\n      date: today,\n      seed,\n      puzzles: puzzles.map(p => ({ ...p })), // Deep copy\n      completedAt: Date.now(),\n      score,\n      totalPuzzles: puzzles.length,\n      accuracy: score / puzzles.length,\n      timeSpent,\n      playerXP,\n    });\n  }\n  \n  // Sort by date descending (newest first)\n  archive.archivedSets.sort((a, b) => b.date.localeCompare(a.date));\n  \n  // Keep only last 365 days (1 year)\n  if (archive.archivedSets.length > 365) {\n    archive.archivedSets = archive.archivedSets.slice(0, 365);\n  }\n  \n  archive.lastArchivedDate = today;\n  saveArchive(archive);\n}\n\n/**\n * Get archived puzzle set for a specific date\n */\nexport function getArchivedSet(date: string): ArchivedPuzzleSet | null {\n  const archive = loadArchive();\n  return archive.archivedSets.find(set => set.date === date) || null;\n}\n\n/**\n * Get all archived sets (sorted by date, newest first)\n */\nexport function getAllArchivedSets(): ArchivedPuzzleSet[] {\n  const archive = loadArchive();\n  return [...archive.archivedSets];\n}\n\n/**\n * Check if a date is archived\n */\nexport function isDateArchived(date: string): boolean {\n  const archive = loadArchive();\n  return archive.archivedSets.some(set => set.date === date);\n}\n\n/**\n * Reconstruct puzzle set from archive (for replay)\n */\nexport function reconstructPuzzleSet(archivedSet: ArchivedPuzzleSet): Puzzle[] {\n  // Return the stored puzzles directly\n  return archivedSet.puzzles.map(p => ({ ...p }));\n}\n\n/**\n * Regenerate puzzle set from seed (for comparison/verification)\n */\nexport function regeneratePuzzleSetFromSeed(seed: number, playerTier: string = 'novice'): Puzzle[] {\n  return generateDailyPuzzleSet(seed, playerTier as any, 10);\n}\n\n/**\n * Get archive statistics\n */\nexport interface ArchiveStats {\n  totalArchived: number;\n  totalPerfectScores: number;\n  averageScore: number;\n  averageAccuracy: number;\n  bestScore: number;\n  longestStreak: number;\n  firstArchivedDate: string | null;\n  lastArchivedDate: string | null;\n}\n\nexport function getArchiveStats(): ArchiveStats {\n  const archive = loadArchive();\n  const sets = archive.archivedSets;\n  \n  if (sets.length === 0) {\n    return {\n      totalArchived: 0,\n      totalPerfectScores: 0,\n      averageScore: 0,\n      averageAccuracy: 0,\n      bestScore: 0,\n      longestStreak: 0,\n      firstArchivedDate: null,\n      lastArchivedDate: null,\n    };\n  }\n  \n  const perfectScores = sets.filter(s => s.score === s.totalPuzzles).length;\n  const totalScore = sets.reduce((sum, s) => sum + s.score, 0);\n  const totalAccuracy = sets.reduce((sum, s) => sum + s.accuracy, 0);\n  const bestScore = Math.max(...sets.map(s => s.score));\n  \n  // Calculate longest streak\n  let longestStreak = 0;\n  let currentStreak = 0;\n  const sortedDates = sets.map(s => s.date).sort().reverse();\n  \n  for (let i = 0; i < sortedDates.length; i++) {\n    if (i === 0) {\n      currentStreak = 1;\n    } else {\n      const prevDate = new Date(sortedDates[i - 1]);\n      const currDate = new Date(sortedDates[i]);\n      const diffDays = Math.floor((prevDate.getTime() - currDate.getTime()) / (1000 * 60 * 60 * 24));\n      \n      if (diffDays === 1) {\n        currentStreak++;\n      } else {\n        longestStreak = Math.max(longestStreak, currentStreak);\n        currentStreak = 1;\n      }\n    }\n  }\n  longestStreak = Math.max(longestStreak, currentStreak);\n  \n  return {\n    totalArchived: sets.length,\n    totalPerfectScores: perfectScores,\n    averageScore: totalScore / sets.length,\n    averageAccuracy: totalAccuracy / sets.length,\n    bestScore,\n    longestStreak,\n    firstArchivedDate: sortedDates[sortedDates.length - 1] || null,\n    lastArchivedDate: sortedDates[0] || null,\n  };\n}\n\n/**\n * Clear archive (for testing/reset)\n */\nexport function clearArchive(): void {\n  localStorage.removeItem(ARCHIVE_STORAGE_KEY);\n}\n","/**\n * Tutorial System\n * \n * Interactive tutorial that guides new players through the game mechanics.\n * Uses a step-by-step approach with highlights and interactive elements.\n */\n\nexport type TutorialStep = \n  | 'welcome'\n  | 'objective'\n  | 'puzzle-types'\n  | 'answering'\n  | 'hints'\n  | 'progress'\n  | 'analysis'\n  | 'streaks'\n  | 'complete';\n\nexport interface TutorialStepData {\n  id: TutorialStep;\n  title: string;\n  content: string;\n  highlights?: string[]; // Element IDs or selectors to highlight\n  interactive?: boolean; // Whether user needs to interact to proceed\n  actions?: string[]; // Actions user needs to perform\n}\n\nexport const TUTORIAL_STEPS: TutorialStepData[] = [\n  {\n    id: 'welcome',\n    title: 'Welcome to Daily Logic Gauntlet!',\n    content: 'Test your logic and pattern recognition skills with daily challenges. Each day brings a new set of 10 puzzles with the same seed for all players.',\n  },\n  {\n    id: 'objective',\n    title: 'Your Goal',\n    content: 'Answer all 10 puzzles correctly to maximize your score. You can take your time - accuracy matters more than speed. Each puzzle tests different logical reasoning skills.',\n  },\n  {\n    id: 'puzzle-types',\n    title: 'Puzzle Types',\n    content: 'You\\'ll encounter different puzzle types:\\n\\n• Logic Puzzles: Deductive reasoning and logical inference\\n• Pattern Puzzles: Sequences, patterns, and number relationships\\n• Deduction Puzzles: Information gathering and elimination\\n• Constraint Puzzles: Rules and constraints that must be satisfied',\n    highlights: ['puzzle-type-badge'],\n  },\n  {\n    id: 'answering',\n    title: 'How to Answer',\n    content: 'Click or tap an answer option, or use keyboard keys 1-4. After selecting, you\\'ll see if you\\'re correct and get an explanation. The next puzzle will appear automatically.',\n    highlights: ['answer-options'],\n    interactive: true,\n    actions: ['Select an answer option to continue'],\n  },\n  {\n    id: 'hints',\n    title: 'Using Hints',\n    content: 'You have 3 hints per puzzle. Press H or click the hint button to get help. Hints reduce your XP but can help you learn. Use them wisely!',\n    highlights: ['hint-button'],\n    interactive: true,\n    actions: ['Try using a hint'],\n  },\n  {\n    id: 'progress',\n    title: 'Tracking Progress',\n    content: 'Watch your progress in the sidebar. You\\'ll see:\\n\\n• Current puzzle number\\n• Your score\\n• XP and mastery tier\\n• Daily streak\\n\\nProgress is saved automatically!',\n    highlights: ['progress-panel'],\n  },\n  {\n    id: 'analysis',\n    title: 'Post-Game Analysis',\n    content: 'After completing all 10 puzzles, you\\'ll see a detailed analysis report showing:\\n\\n• Performance by puzzle type\\n• Performance by difficulty\\n• Insights about your strengths\\n• Recommendations for improvement',\n    highlights: ['analysis-report'],\n  },\n  {\n    id: 'streaks',\n    title: 'Daily Streaks',\n    content: 'Play every day to build your streak! Longer streaks give XP bonuses. You can use free passes if you miss a day (1 per month).',\n    highlights: ['streak-display'],\n  },\n  {\n    id: 'complete',\n    title: 'Ready to Play!',\n    content: 'You\\'re all set! Click \"Start\" to begin today\\'s challenge. Good luck, and remember - practice makes perfect!',\n    interactive: false,\n  },\n];\n\nexport interface TutorialState {\n  isActive: boolean;\n  currentStep: number;\n  completedSteps: Set<TutorialStep>;\n  skipped: boolean;\n}\n\n/**\n * Create default tutorial state\n */\nexport function createDefaultTutorialState(): TutorialState {\n  return {\n    isActive: false,\n    currentStep: 0,\n    completedSteps: new Set(),\n    skipped: false,\n  };\n}\n\n/**\n * Load tutorial state from localStorage\n */\nexport function loadTutorialState(): TutorialState {\n  // Check if we're in a browser environment\n  if (typeof window === 'undefined') {\n    return createDefaultTutorialState();\n  }\n  \n  try {\n    const stored = localStorage.getItem('daily-logic-gauntlet-tutorial');\n    if (!stored) {\n      return createDefaultTutorialState();\n    }\n    \n    const data = JSON.parse(stored);\n    return {\n      ...data,\n      completedSteps: new Set(data.completedSteps || []),\n    };\n  } catch (error) {\n    console.error('Failed to load tutorial state:', error);\n    return createDefaultTutorialState();\n  }\n}\n\n/**\n * Save tutorial state to localStorage\n */\nexport function saveTutorialState(state: TutorialState): void {\n  try {\n    const data = {\n      ...state,\n      completedSteps: Array.from(state.completedSteps),\n    };\n    localStorage.setItem('daily-logic-gauntlet-tutorial', JSON.stringify(data));\n  } catch (error) {\n    console.error('Failed to save tutorial state:', error);\n  }\n}\n\n/**\n * Check if tutorial should be shown (first-time player)\n */\nexport function shouldShowTutorial(): boolean {\n  const state = loadTutorialState();\n  return !state.skipped && state.completedSteps.size === 0;\n}\n\n/**\n * Mark tutorial step as completed\n */\nexport function completeTutorialStep(step: TutorialStep): void {\n  const state = loadTutorialState();\n  state.completedSteps.add(step);\n  saveTutorialState(state);\n}\n\n/**\n * Skip tutorial\n */\nexport function skipTutorial(): void {\n  const state = loadTutorialState();\n  state.skipped = true;\n  state.isActive = false;\n  saveTutorialState(state);\n}\n\n/**\n * Reset tutorial (for testing)\n */\nexport function resetTutorial(): void {\n  localStorage.removeItem('daily-logic-gauntlet-tutorial');\n}\n\n/**\n * Get current tutorial step\n */\nexport function getCurrentTutorialStep(state: TutorialState): TutorialStepData | null {\n  if (state.currentStep < 0 || state.currentStep >= TUTORIAL_STEPS.length) {\n    return null;\n  }\n  return TUTORIAL_STEPS[state.currentStep];\n}\n\n/**\n * Move to next tutorial step\n */\nexport function nextTutorialStep(state: TutorialState): TutorialState {\n  const newState = { ...state };\n  if (newState.currentStep < TUTORIAL_STEPS.length - 1) {\n    newState.currentStep++;\n  } else {\n    // Tutorial complete\n    newState.isActive = false;\n    TUTORIAL_STEPS.forEach(step => newState.completedSteps.add(step.id));\n  }\n  saveTutorialState(newState);\n  return newState;\n}\n\n/**\n * Move to previous tutorial step\n */\nexport function previousTutorialStep(state: TutorialState): TutorialState {\n  const newState = { ...state };\n  if (newState.currentStep > 0) {\n    newState.currentStep--;\n  }\n  saveTutorialState(newState);\n  return newState;\n}\n\n/**\n * Start tutorial\n */\nexport function startTutorial(): TutorialState {\n  const state = loadTutorialState();\n  state.isActive = true;\n  state.currentStep = 0;\n  saveTutorialState(state);\n  return state;\n}\n","/**\n * Achievement System\n * \n * Tracks player achievements and unlocks badges for various accomplishments.\n * Achievements unlock features and provide progression goals.\n */\n\nexport type AchievementId =\n  | 'first-puzzle'\n  | 'first-complete'\n  | 'perfect-score'\n  | 'streak-3'\n  | 'streak-7'\n  | 'streak-30'\n  | 'streak-100'\n  | 'xp-1000'\n  | 'xp-5000'\n  | 'xp-10000'\n  | 'master-novice'\n  | 'master-apprentice'\n  | 'master-adept'\n  | 'master-expert'\n  | 'master-master'\n  | 'speed-demon'\n  | 'persistent'\n  | 'hint-free'\n  | 'archive-7'\n  | 'archive-30'\n  | 'archive-100';\n\nexport interface Achievement {\n  id: AchievementId;\n  name: string;\n  description: string;\n  category: 'progress' | 'skill' | 'streak' | 'milestone' | 'special';\n  icon: string; // Emoji or icon identifier\n  rarity: 'common' | 'uncommon' | 'rare' | 'epic' | 'legendary';\n  unlockedAt?: number; // Timestamp when unlocked\n  progress?: number; // Current progress (0-1)\n  maxProgress?: number; // Maximum progress needed\n}\n\nexport interface AchievementData {\n  version: number;\n  unlocked: Set<AchievementId>;\n  progress: Map<AchievementId, number>; // Progress for progress-based achievements\n  unlockedTimestamps: Map<AchievementId, number>;\n}\n\nexport const ALL_ACHIEVEMENTS: Achievement[] = [\n  // Progress Achievements\n  {\n    id: 'first-puzzle',\n    name: 'First Steps',\n    description: 'Complete your first puzzle',\n    category: 'progress',\n    icon: '🎯',\n    rarity: 'common',\n  },\n  {\n    id: 'first-complete',\n    name: 'Gauntlet Runner',\n    description: 'Complete your first daily gauntlet',\n    category: 'progress',\n    icon: '🏁',\n    rarity: 'common',\n  },\n  {\n    id: 'perfect-score',\n    name: 'Perfect Score',\n    description: 'Answer all 10 puzzles correctly in a single day',\n    category: 'skill',\n    icon: '⭐',\n    rarity: 'rare',\n  },\n  \n  // Streak Achievements\n  {\n    id: 'streak-3',\n    name: 'Getting Started',\n    description: 'Maintain a 3-day streak',\n    category: 'streak',\n    icon: '🔥',\n    rarity: 'common',\n  },\n  {\n    id: 'streak-7',\n    name: 'Week Warrior',\n    description: 'Maintain a 7-day streak',\n    category: 'streak',\n    icon: '💪',\n    rarity: 'uncommon',\n  },\n  {\n    id: 'streak-30',\n    name: 'Monthly Master',\n    description: 'Maintain a 30-day streak',\n    category: 'streak',\n    icon: '👑',\n    rarity: 'rare',\n  },\n  {\n    id: 'streak-100',\n    name: 'Centurion',\n    description: 'Maintain a 100-day streak',\n    category: 'streak',\n    icon: '🏆',\n    rarity: 'legendary',\n  },\n  \n  // XP Achievements\n  {\n    id: 'xp-1000',\n    name: 'Aspiring Learner',\n    description: 'Reach 1,000 XP',\n    category: 'milestone',\n    icon: '📚',\n    rarity: 'common',\n  },\n  {\n    id: 'xp-5000',\n    name: 'Dedicated Scholar',\n    description: 'Reach 5,000 XP',\n    category: 'milestone',\n    icon: '🎓',\n    rarity: 'uncommon',\n  },\n  {\n    id: 'xp-10000',\n    name: 'Logic Legend',\n    description: 'Reach 10,000 XP',\n    category: 'milestone',\n    icon: '🌟',\n    rarity: 'rare',\n  },\n  \n  // Mastery Tier Achievements\n  {\n    id: 'master-novice',\n    name: 'Novice',\n    description: 'Reach Novice tier',\n    category: 'progress',\n    icon: '🌱',\n    rarity: 'common',\n  },\n  {\n    id: 'master-apprentice',\n    name: 'Apprentice',\n    description: 'Reach Apprentice tier',\n    category: 'progress',\n    icon: '🌿',\n    rarity: 'common',\n  },\n  {\n    id: 'master-adept',\n    name: 'Adept',\n    description: 'Reach Adept tier',\n    category: 'progress',\n    icon: '🌳',\n    rarity: 'uncommon',\n  },\n  {\n    id: 'master-expert',\n    name: 'Expert',\n    description: 'Reach Expert tier',\n    category: 'progress',\n    icon: '🌲',\n    rarity: 'rare',\n  },\n  {\n    id: 'master-master',\n    name: 'Master',\n    description: 'Reach Master tier',\n    category: 'progress',\n    icon: '👑',\n    rarity: 'epic',\n  },\n  \n  // Special Achievements\n  {\n    id: 'speed-demon',\n    name: 'Speed Demon',\n    description: 'Complete a gauntlet in under 5 minutes',\n    category: 'special',\n    icon: '⚡',\n    rarity: 'uncommon',\n  },\n  {\n    id: 'persistent',\n    name: 'Persistent',\n    description: 'Complete 50 gauntlets',\n    category: 'special',\n    icon: '💎',\n    rarity: 'rare',\n  },\n  {\n    id: 'hint-free',\n    name: 'Hint-Free Hero',\n    description: 'Complete a gauntlet without using any hints',\n    category: 'special',\n    icon: '🎖️',\n    rarity: 'uncommon',\n  },\n  \n  // Archive Achievements\n  {\n    id: 'archive-7',\n    name: 'Week Collector',\n    description: 'Archive 7 different daily sets',\n    category: 'milestone',\n    icon: '📦',\n    rarity: 'common',\n  },\n  {\n    id: 'archive-30',\n    name: 'Monthly Archive',\n    description: 'Archive 30 different daily sets',\n    category: 'milestone',\n    icon: '📚',\n    rarity: 'uncommon',\n  },\n  {\n    id: 'archive-100',\n    name: 'Century Archive',\n    description: 'Archive 100 different daily sets',\n    category: 'milestone',\n    icon: '🏛️',\n    rarity: 'rare',\n  },\n];\n\n/**\n * Create default achievement data\n */\nexport function createDefaultAchievementData(): AchievementData {\n  return {\n    version: 1,\n    unlocked: new Set(),\n    progress: new Map(),\n    unlockedTimestamps: new Map(),\n  };\n}\n\n/**\n * Load achievement data from localStorage\n */\nexport function loadAchievements(): AchievementData {\n  try {\n    const stored = localStorage.getItem('daily-logic-gauntlet-achievements');\n    if (!stored) {\n      return createDefaultAchievementData();\n    }\n    \n    const data = JSON.parse(stored);\n    return {\n      ...data,\n      unlocked: new Set(data.unlocked || []),\n      progress: new Map(data.progress || []),\n      unlockedTimestamps: new Map(data.unlockedTimestamps || []),\n    };\n  } catch (error) {\n    console.error('Failed to load achievements:', error);\n    return createDefaultAchievementData();\n  }\n}\n\n/**\n * Save achievement data to localStorage\n */\nexport function saveAchievements(data: AchievementData): void {\n  try {\n    const saveData = {\n      ...data,\n      unlocked: Array.from(data.unlocked),\n      progress: Array.from(data.progress),\n      unlockedTimestamps: Array.from(data.unlockedTimestamps),\n    };\n    localStorage.setItem('daily-logic-gauntlet-achievements', JSON.stringify(saveData));\n  } catch (error) {\n    console.error('Failed to save achievements:', error);\n  }\n}\n\n/**\n * Check if achievement is unlocked\n */\nexport function isAchievementUnlocked(achievementId: AchievementId): boolean {\n  const data = loadAchievements();\n  return data.unlocked.has(achievementId);\n}\n\n/**\n * Unlock an achievement\n */\nexport function unlockAchievement(achievementId: AchievementId): boolean {\n  const data = loadAchievements();\n  \n  if (data.unlocked.has(achievementId)) {\n    return false; // Already unlocked\n  }\n  \n  data.unlocked.add(achievementId);\n  data.unlockedTimestamps.set(achievementId, Date.now());\n  saveAchievements(data);\n  \n  return true; // Newly unlocked\n}\n\n/**\n * Update achievement progress\n */\nexport function updateAchievementProgress(achievementId: AchievementId, progress: number): void {\n  const data = loadAchievements();\n  \n  if (data.unlocked.has(achievementId)) {\n    return; // Already unlocked, no need to track progress\n  }\n  \n  data.progress.set(achievementId, progress);\n  saveAchievements(data);\n}\n\n/**\n * Get achievement progress\n */\nexport function getAchievementProgress(achievementId: AchievementId): number {\n  const data = loadAchievements();\n  return data.progress.get(achievementId) || 0;\n}\n\n/**\n * Check and unlock achievements based on game state\n */\nexport interface AchievementCheckContext {\n  totalXP: number;\n  currentTier: string;\n  currentStreak: number;\n  gamesCompleted: number;\n  perfectScores: number;\n  archivedSets: number;\n  fastestCompletion?: number; // milliseconds\n  hintFreeCompletions: number;\n}\n\nexport function checkAndUnlockAchievements(context: AchievementCheckContext): AchievementId[] {\n  const data = loadAchievements();\n  const newlyUnlocked: AchievementId[] = [];\n  \n  // Check XP achievements\n  if (context.totalXP >= 1000 && !data.unlocked.has('xp-1000')) {\n    if (unlockAchievement('xp-1000')) newlyUnlocked.push('xp-1000');\n  }\n  if (context.totalXP >= 5000 && !data.unlocked.has('xp-5000')) {\n    if (unlockAchievement('xp-5000')) newlyUnlocked.push('xp-5000');\n  }\n  if (context.totalXP >= 10000 && !data.unlocked.has('xp-10000')) {\n    if (unlockAchievement('xp-10000')) newlyUnlocked.push('xp-10000');\n  }\n  \n  // Check tier achievements\n  const tierMap: Record<string, AchievementId> = {\n    'novice': 'master-novice',\n    'apprentice': 'master-apprentice',\n    'adept': 'master-adept',\n    'expert': 'master-expert',\n    'master': 'master-master',\n  };\n  const tierAchievement = tierMap[context.currentTier];\n  if (tierAchievement && !data.unlocked.has(tierAchievement)) {\n    if (unlockAchievement(tierAchievement)) newlyUnlocked.push(tierAchievement);\n  }\n  \n  // Check streak achievements\n  if (context.currentStreak >= 3 && !data.unlocked.has('streak-3')) {\n    if (unlockAchievement('streak-3')) newlyUnlocked.push('streak-3');\n  }\n  if (context.currentStreak >= 7 && !data.unlocked.has('streak-7')) {\n    if (unlockAchievement('streak-7')) newlyUnlocked.push('streak-7');\n  }\n  if (context.currentStreak >= 30 && !data.unlocked.has('streak-30')) {\n    if (unlockAchievement('streak-30')) newlyUnlocked.push('streak-30');\n  }\n  if (context.currentStreak >= 100 && !data.unlocked.has('streak-100')) {\n    if (unlockAchievement('streak-100')) newlyUnlocked.push('streak-100');\n  }\n  \n  // Check archive achievements\n  if (context.archivedSets >= 7 && !data.unlocked.has('archive-7')) {\n    if (unlockAchievement('archive-7')) newlyUnlocked.push('archive-7');\n  }\n  if (context.archivedSets >= 30 && !data.unlocked.has('archive-30')) {\n    if (unlockAchievement('archive-30')) newlyUnlocked.push('archive-30');\n  }\n  if (context.archivedSets >= 100 && !data.unlocked.has('archive-100')) {\n    if (unlockAchievement('archive-100')) newlyUnlocked.push('archive-100');\n  }\n  \n  // Check completion achievements\n  if (context.gamesCompleted >= 50 && !data.unlocked.has('persistent')) {\n    if (unlockAchievement('persistent')) newlyUnlocked.push('persistent');\n  }\n  \n  // Check perfect score\n  if (context.perfectScores > 0 && !data.unlocked.has('perfect-score')) {\n    if (unlockAchievement('perfect-score')) newlyUnlocked.push('perfect-score');\n  }\n  \n  // Check speed demon\n  if (context.fastestCompletion && context.fastestCompletion < 5 * 60 * 1000 && !data.unlocked.has('speed-demon')) {\n    if (unlockAchievement('speed-demon')) newlyUnlocked.push('speed-demon');\n  }\n  \n  // Check hint-free\n  if (context.hintFreeCompletions > 0 && !data.unlocked.has('hint-free')) {\n    if (unlockAchievement('hint-free')) newlyUnlocked.push('hint-free');\n  }\n  \n  return newlyUnlocked;\n}\n\n/**\n * Get all unlocked achievements\n */\nexport function getUnlockedAchievements(): Achievement[] {\n  const data = loadAchievements();\n  return ALL_ACHIEVEMENTS.filter(a => data.unlocked.has(a.id));\n}\n\n/**\n * Get achievement by ID\n */\nexport function getAchievement(achievementId: AchievementId): Achievement | undefined {\n  return ALL_ACHIEVEMENTS.find(a => a.id === achievementId);\n}\n\n/**\n * Get achievements by category\n */\nexport function getAchievementsByCategory(category: Achievement['category']): Achievement[] {\n  return ALL_ACHIEVEMENTS.filter(a => a.category === category);\n}\n\n/**\n * Get achievement statistics\n */\nexport interface AchievementStats {\n  total: number;\n  unlocked: number;\n  progress: number; // Percentage\n  byCategory: Record<Achievement['category'], { total: number; unlocked: number }>;\n  byRarity: Record<Achievement['rarity'], { total: number; unlocked: number }>;\n}\n\nexport function getAchievementStats(): AchievementStats {\n  const data = loadAchievements();\n  const unlocked = Array.from(data.unlocked);\n  \n  const byCategory: Record<string, { total: number; unlocked: number }> = {};\n  const byRarity: Record<string, { total: number; unlocked: number }> = {};\n  \n  ALL_ACHIEVEMENTS.forEach(achievement => {\n    // Category stats\n    if (!byCategory[achievement.category]) {\n      byCategory[achievement.category] = { total: 0, unlocked: 0 };\n    }\n    byCategory[achievement.category].total++;\n    if (unlocked.includes(achievement.id)) {\n      byCategory[achievement.category].unlocked++;\n    }\n    \n    // Rarity stats\n    if (!byRarity[achievement.rarity]) {\n      byRarity[achievement.rarity] = { total: 0, unlocked: 0 };\n    }\n    byRarity[achievement.rarity].total++;\n    if (unlocked.includes(achievement.id)) {\n      byRarity[achievement.rarity].unlocked++;\n    }\n  });\n  \n  return {\n    total: ALL_ACHIEVEMENTS.length,\n    unlocked: unlocked.length,\n    progress: (unlocked.length / ALL_ACHIEVEMENTS.length) * 100,\n    byCategory: byCategory as Record<Achievement['category'], { total: number; unlocked: number }>,\n    byRarity: byRarity as Record<Achievement['rarity'], { total: number; unlocked: number }>,\n  };\n}\n\n/**\n * Clear achievements (for testing)\n */\nexport function clearAchievements(): void {\n  localStorage.removeItem('daily-logic-gauntlet-achievements');\n}\n"],"names":[],"mappings":"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"}}]
}