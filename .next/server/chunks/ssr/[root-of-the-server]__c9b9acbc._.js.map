{
  "version": 3,
  "sources": [],
  "debugId": "24409297-3b3c-4ec8-99b9-ce99495f0ced",
  "sections": [
    {"offset": {"line": 1, "column": 0}, "map": {"version":3,"sources":["../../../../src/pages/internal/cpd.tsx","../../../../node_modules/next/src/build/templates/pages.ts"],"sourcesContent":["import fs from \"node:fs\";\nimport path from \"node:path\";\nimport Layout from \"@/components/Layout\";\n\ntype MappingSummary = {\n  courseId: string;\n  status: string;\n  generatedAt?: string;\n  levels?: Array<{\n    levelId: string;\n    estimatedHours?: number;\n    sections?: any[];\n    quizzesPresent?: boolean;\n    toolsPresent?: boolean;\n  }>;\n};\n\ntype Props = {\n  enabled: boolean;\n  status: Record<string, string>;\n  mappings: MappingSummary[];\n};\n\nexport default function InternalCpdPage({ enabled, status, mappings }: Props) {\n  if (!enabled) {\n    return (\n      <Layout title=\"Not found\" description=\"\">\n        <main className=\"page\">\n          <h1>Not found</h1>\n        </main>\n      </Layout>\n    );\n  }\n  return (\n    <Layout title=\"Internal CPD preview\" description=\"Internal CPD status and pack links.\">\n      <main className=\"page\">\n        <header className=\"page-header\">\n          <p className=\"eyebrow\">Internal</p>\n          <h1>CPD preview</h1>\n          <p className=\"lead\">Status and mapping summary for each course (internal only).</p>\n        </header>\n\n        <section className=\"section\">\n          <table className=\"table\">\n            <thead>\n              <tr>\n                <th>Course</th>\n                <th>Status</th>\n                <th>Generated</th>\n                <th>Levels</th>\n                <th>Packs</th>\n              </tr>\n            </thead>\n            <tbody>\n              {mappings.map((m) => (\n                <tr key={m.courseId}>\n                  <td>{m.courseId}</td>\n                  <td>{status[m.courseId] || \"Unknown\"}</td>\n                  <td>{m.generatedAt ? new Date(m.generatedAt).toLocaleString() : \"n/a\"}</td>\n                  <td>\n                    {m.levels?.map((l) => (\n                      <div key={l.levelId}>\n                        {l.levelId}: {l.estimatedHours || 0}h | Quiz {l.quizzesPresent ? \"✓\" : \"✗\"} | Tool {l.toolsPresent ? \"✓\" : \"✗\"}\n                      </div>\n                    )) || \"n/a\"}\n                  </td>\n                  <td>\n                    <a href={`/cpd/courses/${m.courseId}/cpd-pack.md`}>pack</a>{\" | \"}\n                    <a href={`/cpd/courses/${m.courseId}/mapping.md`}>mapping</a>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </section>\n      </main>\n    </Layout>\n  );\n}\n\nexport async function getServerSideProps() {\n  if (process.env.INTERNAL_TOOLS_ENABLED !== \"true\") {\n    return { props: { enabled: false, status: {}, mappings: [] }, notFound: true };\n  }\n\n  const statusPath = path.join(process.cwd(), \"cpd\", \"courses\", \"course-status.json\");\n  const status = fs.existsSync(statusPath) ? JSON.parse(fs.readFileSync(statusPath, \"utf8\")) : {};\n\n  const coursesDir = path.join(process.cwd(), \"cpd\", \"courses\");\n  const mappings: MappingSummary[] = [];\n  if (fs.existsSync(coursesDir)) {\n    for (const courseId of fs.readdirSync(coursesDir)) {\n      const mappingPath = path.join(coursesDir, courseId, \"mapping.json\");\n      if (fs.existsSync(mappingPath)) {\n        try {\n          const data = JSON.parse(fs.readFileSync(mappingPath, \"utf8\"));\n          mappings.push({\n            courseId: data.courseId || courseId,\n            status: data.status || status[courseId] || \"Unknown\",\n            generatedAt: data.generatedAt,\n            levels: data.levels || [],\n          });\n        } catch {\n          mappings.push({ courseId, status: status[courseId] || \"Unknown\", levels: [] });\n        }\n      }\n    }\n  }\n\n  return { props: { enabled: true, status, mappings } };\n}\n\n\n","import { PagesRouteModule } from '../../server/route-modules/pages/module.compiled'\nimport { RouteKind } from '../../server/route-kind'\n\nimport { hoist } from './helpers'\n\n// Import the app and document modules.\nimport * as document from 'VAR_MODULE_DOCUMENT'\nimport * as app from 'VAR_MODULE_APP'\n\n// Import the userland code.\nimport * as userland from 'VAR_USERLAND'\nimport { getHandler } from '../../server/route-modules/pages/pages-handler'\n\n// Re-export the component (should be the default export).\nexport default hoist(userland, 'default')\n\n// Re-export methods.\nexport const getStaticProps = hoist(userland, 'getStaticProps')\nexport const getStaticPaths = hoist(userland, 'getStaticPaths')\nexport const getServerSideProps = hoist(userland, 'getServerSideProps')\nexport const config = hoist(userland, 'config')\nexport const reportWebVitals = hoist(userland, 'reportWebVitals')\n\n// Re-export legacy methods.\nexport const unstable_getStaticProps = hoist(\n  userland,\n  'unstable_getStaticProps'\n)\nexport const unstable_getStaticPaths = hoist(\n  userland,\n  'unstable_getStaticPaths'\n)\nexport const unstable_getStaticParams = hoist(\n  userland,\n  'unstable_getStaticParams'\n)\nexport const unstable_getServerProps = hoist(\n  userland,\n  'unstable_getServerProps'\n)\nexport const unstable_getServerSideProps = hoist(\n  userland,\n  'unstable_getServerSideProps'\n)\n\n// Create and export the route module that will be consumed.\nexport const routeModule = new PagesRouteModule({\n  definition: {\n    kind: RouteKind.PAGES,\n    page: 'VAR_DEFINITION_PAGE',\n    pathname: 'VAR_DEFINITION_PATHNAME',\n    // The following aren't used in production.\n    bundlePath: '',\n    filename: '',\n  },\n  distDir: process.env.__NEXT_RELATIVE_DIST_DIR || '',\n  relativeProjectDir: process.env.__NEXT_RELATIVE_PROJECT_DIR || '',\n  components: {\n    // default export might not exist when optimized for data only\n    App: app.default,\n    Document: document.default,\n  },\n  userland,\n})\n\nexport const handler = getHandler({\n  srcPage: 'VAR_DEFINITION_PAGE',\n  config,\n  userland,\n  routeModule,\n  getStaticPaths,\n  getStaticProps,\n  getServerSideProps,\n})\n"],"names":["PagesRouteModule","RouteKind","hoist","document","app","userland","getHandler","getStaticProps","getStaticPaths","getServerSideProps","config","reportWebVitals","unstable_getStaticProps","unstable_getStaticPaths","unstable_getStaticParams","unstable_getServerProps","unstable_getServerSideProps","routeModule","definition","kind","PAGES","page","pathname","bundlePath","filename","distDir","process","env","__NEXT_RELATIVE_DIST_DIR","relativeProjectDir","__NEXT_RELATIVE_PROJECT_DIR","components","App","default","Document","handler","srcPage"],"mappings":"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","ignoreList":[1]}}]
}