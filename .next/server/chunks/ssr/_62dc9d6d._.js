;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="946b37d8-cace-cc32-a8e1-01009f8cb44e")}catch(e){}}();
module.exports=[522154,a=>{"use strict";var b=a.i(508171),c=a.i(127669),d=a.i(901257),e=a.i(921173);let f=[{id:"vars",title:"JS basics (variables)",description:"Assign values and print them.",starter:`const name = "Ransford";
console.log("Hello", name);`},{id:"loops",title:"JS loops",description:"Loop from 1 to 5 and sum the numbers.",starter:`let sum = 0;
for (let i = 1; i <= 5; i++) sum += i;
console.log("sum", sum);`},{id:"funcs",title:"JS functions",description:"Write a small function and call it.",starter:`function square(n) {
  return n * n;
}
console.log(square(8));`},{id:"transform",title:"JS data transform",description:"Transform an array with map.",starter:`const nums = [1, 2, 3, 4];
const doubled = nums.map((n) => n * 2);
console.log(doubled.join(", "));`},{id:"debug",title:"Debugging example",description:"This step intentionally has an error. Fix it and run again.",starter:`const user = { name: "Asha" };
console.log(user.fullName.toUpperCase());`},{id:"challenge",title:"Mini challenge",description:"Write a function that returns true if a word is a palindrome.",starter:`function isPalindrome(word) {
  // TODO
}

console.log(isPalindrome("level"));
console.log(isPalindrome("hello"));`}];async function g(a){return new Promise(b=>setTimeout(b,a))}function h(){let[a,h]=(0,c.useState)([]),[j,k]=(0,c.useState)(""),[l,m]=(0,c.useState)(null),[n,o]=(0,c.useState)(!1),[p,q]=(0,c.useState)(null),[r,s]=(0,c.useState)(!1),[t,u]=(0,c.useState)(()=>Object.fromEntries(f.map(a=>[a.id,a.starter]))),[v,w]=(0,c.useState)({}),[x,y]=(0,c.useState)({}),[z,A]=(0,c.useState)({}),[B,C]=(0,c.useState)({}),[D,E]=(0,c.useState)({}),[F,G]=(0,c.useState)({}),[H,I]=(0,c.useState)({}),[J,K]=(0,c.useState)({}),[L,M]=(0,c.useState)({}),[N,O]=(0,c.useState)(null),[P,Q]=(0,c.useState)({}),[R,S]=(0,c.useState)("js"),T=(0,c.useMemo)(()=>a.find(a=>a.id===j)||null,[a,j]),U=async()=>{let a=await fetch("/api/workspace/projects"),b=await a.json().catch(()=>null);b?.ok&&(h(b.projects||[]),!j&&b.projects?.[0]?.id&&k(String(b.projects[0].id)))};(0,c.useEffect)(()=>{U()},[]);let V=async a=>{if(!a)return void m(null);let b=await fetch(`/api/workspace/projects/${encodeURIComponent(a)}`),c=await b.json().catch(()=>null);c?.ok&&m(c.project)};(0,c.useEffect)(()=>{j?V(j):m(null)},[j]);let W=async()=>{o(!0),q(null);let a=await fetch("/api/workspace/projects",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({title:"Code notebook",topic:"software"})}),b=await a.json().catch(()=>null);if(!a.ok||!b?.ok){q(String(b?.error||"Could not create project.")),o(!1);return}await U(),k(String(b.project.id)),await V(String(b.project.id)),o(!1)},X=async(a,b="standard")=>{if(q(null),!j)return void q("Select a project first.");if(O(a.id),w(b=>({...b,[a.id]:""})),y(b=>({...b,[a.id]:""})),A(b=>({...b,[a.id]:{durationMs:0,freeTierAppliedMs:0,chargedCredits:0}})),E(b=>({...b,[a.id]:null})),G(b=>({...b,[a.id]:"success"})),M(b=>({...b,[a.id]:null})),"py"===R){y(b=>({...b,[a.id]:"Python sandbox coming soon."})),O(null);return}let c={language:R,code:t[a.id]||"",input:"",presets:[]};try{let d=await fetch("/api/compute/estimate",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({toolId:"code-runner",inputBytes:c.code.length,requestedComplexityPreset:b})}),e=await d.json().catch(()=>null);e?.ok&&(C(b=>({...b,[a.id]:{estimatedCpuMs:Number(e.estimatedCpuMs||0),estimatedWallTimeMs:Number(e.estimatedWallTimeMs||0),estimatedCreditCost:Number(e.estimatedCreditCost||0),freeTierAppliedMs:Number(e.freeTierAppliedMs||0),paidMs:Number(e.paidMs||0),allowed:!!e.allowed,reasons:Array.isArray(e.reasons)?e.reasons:[]}})),I(b=>({...b,[a.id]:Array.isArray(e.costHints)?e.costHints:[]})),K(b=>({...b,[a.id]:Number(e.freeTierRemainingMs||0)})))}catch{}let d=await fetch("/api/jobs/create",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({toolId:"code-runner",mode:"enqueue",inputBytes:c.code.length,payload:c,projectId:j,note:P[a.id]||"",requestedComplexityPreset:b})}),e=await d.json().catch(()=>null),f=String(e?.jobId||"");if(402===d.status){G(b=>({...b,[a.id]:"blocked"}));let b=String(e?.error||"Run blocked.");y(c=>({...c,[a.id]:b})),M(b=>({...b,[a.id]:e?.errorObj||null})),O(null);return}if(!d.ok||!f){G(b=>({...b,[a.id]:"error"})),q(String(e?.error||"Could not start run.")),O(null);return}for(let b=0;b<60;b++){let b=await fetch(`/api/jobs/${encodeURIComponent(f)}`),c=await b.json().catch(()=>null),d=c?.job?.status||null;if("succeeded"===d){G(b=>({...b,[a.id]:"success"})),w(b=>({...b,[a.id]:String(c?.job?.resultJson?.stdout||"")})),y(b=>({...b,[a.id]:String(c?.job?.resultJson?.stderr||"")}));let b=Number(c?.job?.durationMs||0),d=Number(c?.job?.freeTierAppliedMs||0),e=Number(c?.job?.chargedCredits||0);A(c=>({...c,[a.id]:{durationMs:b,freeTierAppliedMs:d,chargedCredits:e}})),E(c=>({...c,[a.id]:{durationMs:b,freeTierAppliedMs:d,paidMs:Math.max(0,b-d),creditsCharged:e}})),O(null),await U(),await V(j);return}if("denied"===d||"failed"===d||"cancelled"===d){G(b=>({...b,[a.id]:"cancelled"===d?"aborted":"error"})),y(b=>({...b,[a.id]:String(c?.job?.errorMessage||"Run did not complete.")})),O(null),await U(),await V(j);return}await g(600)}G(b=>({...b,[a.id]:"error"})),y(b=>({...b,[a.id]:"Timed out waiting for run."})),O(null)};return(0,b.jsxs)("main",{className:"mx-auto max-w-5xl px-4 py-12 md:px-6 lg:px-8 space-y-8",children:[(0,b.jsxs)("header",{className:"space-y-2",children:[(0,b.jsx)("p",{className:"text-xs font-semibold text-slate-600",children:"Software labs"}),(0,b.jsx)("h1",{className:"text-3xl font-semibold text-slate-900",children:"Code notebook"}),(0,b.jsx)("p",{className:"text-slate-700",children:"Step by step practice with saved runs and notes."})]}),p?(0,b.jsx)("div",{className:"rounded-2xl border border-rose-200 bg-rose-50 p-4 text-sm text-rose-900",children:p}):null,(0,b.jsxs)("section",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm space-y-4",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold text-slate-900",children:"Project"}),(0,b.jsxs)("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[(0,b.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,b.jsx)("label",{className:"text-xs font-semibold text-slate-700",children:"Select a project"}),(0,b.jsxs)("select",{value:j,onChange:a=>k(a.target.value),className:"w-full md:w-96 rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm text-slate-900",children:[(0,b.jsx)("option",{value:"",children:"Select..."}),a.map(a=>(0,b.jsxs)("option",{value:a.id,children:[a.title," (",a.topic,")"]},a.id))]}),T?(0,b.jsxs)("p",{className:"text-xs text-slate-600",children:["Saving runs to: ",T.title]}):null]}),(0,b.jsx)("button",{type:"button",onClick:W,disabled:n,className:"rounded-full bg-slate-900 px-4 py-2 text-sm font-semibold text-white hover:bg-slate-800 disabled:bg-slate-300",children:n?"Creating...":"Create project"})]}),T?(0,b.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[(0,b.jsx)("button",{type:"button",onClick:()=>s(!0),className:"rounded-full border border-slate-300 px-4 py-2 text-sm font-semibold text-slate-900 hover:border-slate-400 lg:hidden",children:"Outline"}),(0,b.jsx)(d.default,{href:`/workspace/${encodeURIComponent(T.id)}`,className:"text-sm font-semibold text-emerald-700 hover:underline",children:"Open this project in Workspace"})]}):null]}),r?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("button",{type:"button",className:"fixed inset-0 z-30 bg-black/35 lg:hidden","aria-label":"Close outline",onClick:()=>s(!1)}),(0,b.jsxs)("aside",{className:"fixed inset-y-0 left-0 z-40 w-10/12 max-w-sm overflow-y-auto bg-white p-4 shadow-xl lg:hidden",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("h2",{className:"text-sm font-semibold text-slate-900",children:"Project outline"}),(0,b.jsx)("button",{type:"button",className:"rounded-full border border-slate-300 px-3 py-1 text-sm font-semibold text-slate-900",onClick:()=>s(!1),children:"Close"})]}),(0,b.jsx)("div",{className:"mt-4 space-y-4",children:(0,b.jsx)(i,{project:l})})]})]}):null,(0,b.jsx)("div",{className:"hidden lg:block",children:(0,b.jsx)(i,{project:l})}),(0,b.jsxs)("section",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm space-y-3",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold text-slate-900",children:"Language"}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,b.jsx)("button",{type:"button",onClick:()=>S("js"),className:`rounded-full px-4 py-2 text-sm font-semibold border ${"js"===R?"bg-slate-900 text-white border-slate-900":"bg-white text-slate-900 border-slate-300"}`,children:"JavaScript"}),(0,b.jsx)("button",{type:"button",onClick:()=>S("py"),className:`rounded-full px-4 py-2 text-sm font-semibold border ${"py"===R?"bg-slate-900 text-white border-slate-900":"bg-white text-slate-900 border-slate-300"}`,children:"Python"})]}),"py"===R?(0,b.jsx)("div",{className:"rounded-2xl border border-amber-200 bg-amber-50 p-4 text-sm text-amber-900",children:"Python sandbox coming soon."}):null]}),(0,b.jsx)("section",{className:"space-y-4",children:f.map(a=>(0,b.jsxs)("div",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-xl font-semibold text-slate-900",children:a.title}),(0,b.jsx)("p",{className:"text-slate-700",children:a.description})]}),(0,b.jsx)("button",{type:"button",onClick:()=>X(a,"standard"),disabled:N===a.id,className:"rounded-full bg-emerald-700 px-4 py-2 text-sm font-semibold text-white hover:bg-emerald-800 disabled:bg-slate-300",children:N===a.id?"Running...":"Run"})]}),(0,b.jsx)("textarea",{value:t[a.id]||"",onChange:b=>u(c=>({...c,[a.id]:b.target.value})),rows:10,className:"w-full rounded-2xl border border-slate-200 bg-white p-3 font-mono text-sm text-slate-900"}),(0,b.jsxs)("div",{className:"grid gap-3 md:grid-cols-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs font-semibold text-slate-700",children:"Stdout"}),(0,b.jsx)("pre",{className:"mt-2 min-h-[90px] overflow-auto rounded-2xl border border-slate-200 bg-slate-50 p-4 font-mono text-sm text-slate-900 whitespace-pre-wrap",children:v[a.id]||"No output yet."})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs font-semibold text-slate-700",children:"Errors"}),(0,b.jsx)("pre",{className:"mt-2 min-h-[90px] overflow-auto rounded-2xl border border-slate-200 bg-slate-50 p-4 font-mono text-sm text-slate-900 whitespace-pre-wrap",children:x[a.id]||"No errors."})]})]}),(0,b.jsxs)("div",{className:"grid gap-3 sm:grid-cols-3",children:[(0,b.jsxs)("div",{className:"rounded-2xl border border-slate-200 bg-slate-50/70 p-4",children:[(0,b.jsx)("p",{className:"text-xs font-semibold text-slate-700",children:"runtime (ms)"}),(0,b.jsx)("p",{className:"mt-1 text-sm text-slate-900",children:z[a.id]?.durationMs??0})]}),(0,b.jsxs)("div",{className:"rounded-2xl border border-slate-200 bg-slate-50/70 p-4",children:[(0,b.jsx)("p",{className:"text-xs font-semibold text-slate-700",children:"free tier applied (ms)"}),(0,b.jsx)("p",{className:"mt-1 text-sm text-slate-900",children:z[a.id]?.freeTierAppliedMs??0})]}),(0,b.jsxs)("div",{className:"rounded-2xl border border-slate-200 bg-slate-50/70 p-4",children:[(0,b.jsx)("p",{className:"text-xs font-semibold text-slate-700",children:"credits charged"}),(0,b.jsx)("p",{className:"mt-1 text-sm text-slate-900",children:z[a.id]?.chargedCredits??0})]})]}),(0,b.jsx)(e.default,{estimate:B[a.id]||null,actual:D[a.id]||null,tier:"number"==typeof J[a.id]?{freeMsRemainingToday:J[a.id]}:null,remainingCredits:null,runStatus:F[a.id]||"success",costHints:H[a.id]||[],error:L[a.id]||null,compact:!0}),"blocked"===F[a.id]?(0,b.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[(0,b.jsx)("p",{className:"text-sm text-slate-700",children:"Try a free tier run to get a smaller result."}),(0,b.jsx)("button",{type:"button",onClick:()=>X(a,"light"),className:"rounded-full border border-slate-300 px-4 py-2 text-sm font-semibold text-slate-900 hover:border-slate-400",children:"Run in free tier mode"})]}):null,(0,b.jsxs)("div",{className:"rounded-2xl border border-slate-200 bg-slate-50 p-4 space-y-2",children:[(0,b.jsx)("p",{className:"text-xs font-semibold text-slate-700",children:"Save note (plain text)"}),(0,b.jsx)("textarea",{value:P[a.id]||"",onChange:b=>Q(c=>({...c,[a.id]:b.target.value})),rows:3,className:"w-full rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm text-slate-900",placeholder:"What did you learn?"}),(0,b.jsx)("p",{className:"text-xs text-slate-600",children:"Notes are saved when you run the step."})]})]},a.id))}),(0,b.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[(0,b.jsx)(d.default,{href:"/studios",className:"text-sm font-semibold text-slate-700 hover:underline",children:"Back to Studio"}),(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)(d.default,{href:"/workspace",className:"text-sm font-semibold text-emerald-700 hover:underline",children:"Open Workspace"}),j?(0,b.jsx)(d.default,{href:`/workspace/${encodeURIComponent(j)}`,className:"text-sm font-semibold text-slate-700 hover:underline",children:"View project"}):null]})]})]})}function i({project:a}){let c=Array.isArray(a?.runs)?a.runs:[],e=Array.isArray(a?.notes)?a.notes:[];return(0,b.jsxs)("section",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-lg font-semibold text-slate-900",children:"Project outline"}),(0,b.jsx)("p",{className:"text-sm text-slate-700",children:"Saved runs and notes update after each run."})]}),a?.id?(0,b.jsx)(d.default,{href:`/workspace/${encodeURIComponent(a.id)}`,className:"text-sm font-semibold text-emerald-700 hover:underline",children:"View project"}):null]}),a?null:(0,b.jsx)("p",{className:"mt-3 text-sm text-slate-700",children:"Select a project to see saved runs and notes."}),a?(0,b.jsxs)("div",{className:"mt-4 grid gap-4 lg:grid-cols-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs font-semibold text-slate-700",children:"Recent runs"}),(0,b.jsx)("div",{className:"mt-2 space-y-2",children:0===c.length?(0,b.jsx)("p",{className:"text-sm text-slate-700",children:"No runs yet."}):c.slice(0,6).map(a=>(0,b.jsxs)("div",{className:"rounded-2xl border border-slate-200 bg-slate-50 p-3",children:[(0,b.jsx)("p",{className:"text-sm font-semibold text-slate-900",children:a.toolId}),(0,b.jsxs)("p",{className:"text-xs text-slate-700",children:[a.status," • ",a.metricsJson?.durationMs??"?"," ms • ",a.metricsJson?.chargedCredits??0," credits"]})]},a.id))})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs font-semibold text-slate-700",children:"Recent notes"}),(0,b.jsx)("div",{className:"mt-2 space-y-2",children:0===e.length?(0,b.jsx)("p",{className:"text-sm text-slate-700",children:"No notes yet."}):e.slice(0,4).map(a=>(0,b.jsxs)("div",{className:"rounded-2xl border border-slate-200 bg-white p-3",children:[(0,b.jsx)("p",{className:"text-xs text-slate-600",children:new Date(a.createdAt).toLocaleString()}),(0,b.jsx)("p",{className:"text-sm text-slate-900 whitespace-pre-wrap",children:String(a.content||"")})]},a.id))})]})]}):null]})}a.s(["default",()=>h])},674579,a=>a.a(async(b,c)=>{try{var d=a.i(579168),e=a.i(627068),f=a.i(332759),g=a.i(167684),h=a.i(276695),i=a.i(522154),j=a.i(509193),k=b([h]);[h]=k.then?(await k)():k;let l=(0,f.hoist)(i,"default"),m=(0,f.hoist)(i,"getStaticProps"),n=(0,f.hoist)(i,"getStaticPaths"),o=(0,f.hoist)(i,"getServerSideProps"),p=(0,f.hoist)(i,"config"),q=(0,f.hoist)(i,"reportWebVitals"),r=(0,f.hoist)(i,"unstable_getStaticProps"),s=(0,f.hoist)(i,"unstable_getStaticPaths"),t=(0,f.hoist)(i,"unstable_getStaticParams"),u=(0,f.hoist)(i,"unstable_getServerProps"),v=(0,f.hoist)(i,"unstable_getServerSideProps"),w=new d.PagesRouteModule({definition:{kind:e.RouteKind.PAGES,page:"/studios/software/labs/code-notebook",pathname:"/studios/software/labs/code-notebook",bundlePath:"",filename:""},distDir:".next",relativeProjectDir:"",components:{App:h.default,Document:g.default},userland:i}),x=(0,j.getHandler)({srcPage:"/studios/software/labs/code-notebook",config:p,userland:i,routeModule:w,getStaticPaths:n,getStaticProps:m,getServerSideProps:o});a.s(["config",0,p,"default",0,l,"getServerSideProps",0,o,"getStaticPaths",0,n,"getStaticProps",0,m,"handler",0,x,"reportWebVitals",0,q,"routeModule",0,w,"unstable_getServerProps",0,u,"unstable_getServerSideProps",0,v,"unstable_getStaticParams",0,t,"unstable_getStaticPaths",0,s,"unstable_getStaticProps",0,r]),c()}catch(a){c(a)}},!1)];

//# debugId=946b37d8-cace-cc32-a8e1-01009f8cb44e
//# sourceMappingURL=_62dc9d6d._.js.map