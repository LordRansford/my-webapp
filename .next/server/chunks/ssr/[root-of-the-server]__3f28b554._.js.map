{
  "version": 3,
  "sources": [],
  "debugId": "1e0e0e24-c07f-eb1e-1c0c-646f867754ce",
  "sections": [
    {"offset": {"line": 1, "column": 0}, "map": {"version":3,"sources":["../../../../src/app/admin/billing/stripe/ui.client.tsx/__nextjs-internal-proxy.mjs","../../../../src/app/admin/billing/stripe/page.tsx"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/app/admin/billing/stripe/ui.client.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/admin/billing/stripe/ui.client.tsx\",\n    \"default\",\n);\n","import StripeReadinessClient from \"./ui.client\";\nimport { prisma } from \"@/lib/db/prisma\";\n\nexport const dynamic = \"force-dynamic\";\n\nexport const metadata = {\n  title: \"Admin: Stripe readiness\",\n  robots: { index: false, follow: false },\n};\n\nfunction badge(isReady: boolean) {\n  return isReady ? \"Ready\" : \"Not ready\";\n}\n\nexport default async function AdminStripeReadinessPage() {\n  const stripeSecretPresent = Boolean(process.env.STRIPE_SECRET_KEY);\n  const webhookSecretPresent = Boolean(process.env.STRIPE_WEBHOOK_SECRET);\n  const stripeEnabledFlag = Boolean(process.env.STRIPE_ENABLED);\n\n  let lastWebhookAt: string | null = null;\n  try {\n    const row = await (prisma as any).stripeWebhookEvent.findFirst({\n      orderBy: { receivedAt: \"desc\" },\n      select: { receivedAt: true, eventType: true },\n    });\n    if (row?.receivedAt) lastWebhookAt = new Date(row.receivedAt).toISOString();\n  } catch {\n    lastWebhookAt = null;\n  }\n\n  const isReady = stripeSecretPresent && webhookSecretPresent;\n\n  return (\n    <main className=\"mx-auto max-w-4xl px-4 py-10 md:px-6 lg:px-8 space-y-6\">\n      <header className=\"space-y-2\">\n        <p className=\"text-xs font-semibold text-slate-600\">Billing</p>\n        <h1 className=\"text-2xl font-semibold text-slate-900\">Stripe readiness</h1>\n        <p className=\"text-slate-700\">Status only. No real payments in this phase.</p>\n      </header>\n\n      <section className=\"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm space-y-3\">\n        <div className=\"flex items-center justify-between\">\n          <p className=\"text-sm font-semibold text-slate-900\">Status</p>\n          <span className={`rounded-full px-3 py-1 text-xs font-semibold ${isReady ? \"bg-emerald-50 text-emerald-900 border border-emerald-200\" : \"bg-amber-50 text-amber-900 border border-amber-200\"}`}>\n            {badge(isReady)}\n          </span>\n        </div>\n        <div className=\"grid gap-3 sm:grid-cols-2\">\n          <div className=\"rounded-2xl border border-slate-200 bg-slate-50/70 p-4\">\n            <p className=\"text-xs font-semibold text-slate-700\">Stripe enabled flag</p>\n            <p className=\"mt-1 text-sm text-slate-900\">{stripeEnabledFlag ? \"present\" : \"missing\"}</p>\n          </div>\n          <div className=\"rounded-2xl border border-slate-200 bg-slate-50/70 p-4\">\n            <p className=\"text-xs font-semibold text-slate-700\">Webhook secret</p>\n            <p className=\"mt-1 text-sm text-slate-900\">{webhookSecretPresent ? \"present\" : \"missing\"}</p>\n          </div>\n          <div className=\"rounded-2xl border border-slate-200 bg-slate-50/70 p-4\">\n            <p className=\"text-xs font-semibold text-slate-700\">Secret key</p>\n            <p className=\"mt-1 text-sm text-slate-900\">{stripeSecretPresent ? \"present\" : \"missing\"}</p>\n          </div>\n          <div className=\"rounded-2xl border border-slate-200 bg-slate-50/70 p-4\">\n            <p className=\"text-xs font-semibold text-slate-700\">Last webhook received</p>\n            <p className=\"mt-1 text-sm text-slate-900\">{lastWebhookAt ? new Date(lastWebhookAt).toLocaleString() : \"No webhooks recorded\"}</p>\n          </div>\n        </div>\n      </section>\n\n      <StripeReadinessClient />\n    </main>\n  );\n}\n\n\n"],"names":[],"mappings":"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","ignoreList":[0]}}]
}