;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="f7591dcd-6af5-99a4-44ee-ee6f37654e09")}catch(e){}}();
module.exports=[583693,a=>{"use strict";var b=a.i(218282),c=a.i(572131),d=a.i(469124),e=a.i(831866);function f(a,b){let c=[],d=0;for(let e of b.requiredSymmetry)!function(a,b){let c=a.grid,d=c.length;switch(b){case"horizontal":for(let a=0;a<Math.floor(d/2);a++)for(let b=0;b<d;b++)if(c[a][b]!==c[d-1-a][b])return!1;return!0;case"vertical":for(let a=0;a<d;a++)for(let b=0;b<Math.floor(d/2);b++)if(c[a][b]!==c[a][d-1-b])return!1;return!0;case"rotational":for(let a=0;a<d;a++)for(let b=0;b<d;b++)if(c[a][b]!==c[d-1-a][d-1-b])return!1;return!0;default:return!1}}(a,e)?c.push(`Missing ${e} symmetry`):d+=1;for(let d of b.rules)"count"===d.type&&d.requiredCount&&a.elements.length<d.requiredCount&&c.push(d.description);return{valid:0===c.length,violations:c,symmetryScore:d/b.requiredSymmetry.length}}let g="pattern-architect-profile";a.i(260054);var h=a.i(389158);a.i(671016);var i=a.i(682313),j=a.i(485827);a.i(264057);var k=a.i(648309);a.i(126482);var l=a.i(196613);a.i(649317);var m=a.i(301944);let n={id:"pattern-architect",title:"Pattern Architect",description:"Create beautiful symmetric patterns",category:"puzzle",modes:["solo","daily"],supportsMultiplayer:!1,minPlayers:1,maxPlayers:1,estimatedMinutes:10,tutorialAvailable:!0},o="pattern-architect";function p(){let[a,p]=(0,c.useState)("idle"),[q,r]=(0,c.useState)(null),[s,t]=(0,c.useState)(null),[u,v]=(0,c.useState)(null),[w,x]=(0,c.useState)(null),[y,z]=(0,c.useState)(null),[A,B]=(0,c.useState)(null),[C,D]=(0,c.useState)(null),[E,F]=(0,c.useState)([]);(0,c.useEffect)(()=>{"idle"!==a||q||G()},[a,q]);let G=(0,c.useCallback)(()=>{try{var a,b,c;let d,f,g,i,j,k=(a={seed:(0,h.getOrGenerateTodayChallenge)(o).seed,difficulty:"designer"},f=new e.SeededRNG(a.seed),g=function(a){switch(a){case"novice":return{gridSize:4,ruleCount:2,symmetryCount:1};case"designer":return{gridSize:5,ruleCount:3,symmetryCount:1};case"architect":return{gridSize:6,ruleCount:4,symmetryCount:2};case"master-architect":return{gridSize:7,ruleCount:5,symmetryCount:2};case"pattern-master":return{gridSize:8,ruleCount:6,symmetryCount:3}}}(a.difficulty),i=function(a,b){let c=[],d=["horizontal","vertical","rotational"];for(let b=0;b<a.ruleCount;b++)0===b?c.push({id:`rule-${b}`,type:"symmetry",description:`Must have ${d[b%d.length]} symmetry`,symmetryType:d[b%d.length]}):c.push({id:`rule-${b}`,type:"count",description:`Must have at least ${3+b} elements`,requiredCount:3+b});return c}(g,0),b=g,c=f,d=["horizontal","vertical","rotational"],j=c.sample(d,Math.min(b.symmetryCount,d.length)),{id:`pattern-${a.seed}`,seed:a.seed,name:`Pattern Challenge ${a.seed}`,description:`Create a ${g.gridSize}x${g.gridSize} pattern following the rules with ${j.length} symmetry type(s).`,gridSize:g.gridSize,rules:i,requiredSymmetry:j,difficulty:a.difficulty,tier:function(a){switch(a){case"novice":return 0;case"designer":return 100;case"architect":return 300;case"master-architect":return 600;case"pattern-master":return 1e3}}(a.difficulty)});r(k);let l=[];for(let a=0;a<k.gridSize;a++){l[a]=[];for(let b=0;b<k.gridSize;b++)l[a][b]="dot"}t({grid:l,elements:[]}),v(null)}catch(a){console.error("Error initializing challenge:",a)}},[]),H=(0,c.useCallback)((b,c)=>{"playing"===a&&s&&q&&t(a=>{if(!a)return a;let d=a.grid.map(a=>[...a]),e=[...a.elements];if("dot"===d[b][c])d[b][c]="shape",e.push({row:b,col:c,type:"shape"});else{d[b][c]="dot";let a=e.findIndex(a=>a.row===b&&a.col===c);a>=0&&e.splice(a,1)}return{grid:d,elements:e}})},[a,s,q]),I=(0,c.useCallback)(()=>{let a,b,c,d,e,n,r;if(!q||!s||!w)return;let t=(a=f(s,q).symmetryScore,b=function(a){if(0===a.elements.length)return 0;let b=a.grid.length,c=b/2,d=b/2,e=0;for(let b of a.elements){let a=Math.abs(b.row-c),f=Math.abs(b.col-d);e+=Math.sqrt(a*a+f*f)}return Math.max(0,Math.min(1,1-2*Math.abs(e/a.elements.length/Math.sqrt(c*c+d*d)-.5)))}(s),C=s,E=q,d=C.elements.length,n=.3*(e=E.gridSize*E.gridSize),r=.5*e,{symmetry:100*a,balance:100*b,complexity:100*(c=d<n?d/n:d>r?1-(d-r)/(e-r):1),total:Math.round((.4*a+.3*b+.3*c)*1e4)/100});v(t.total),p("finished");let u=(0,i.generateTodayChallengeCode)(o,q.seed);(0,j.storeChallengeCode)(u),z(u);let x=Date.now()-w,y={score:t.total,time:x,scoreValue:t.total,timestamp:Date.now()};D(y),(0,m.submitScore)(u.code,y),B((0,m.getScoreComparison)(u.code,y)),(0,h.completeTodayChallenge)(o,{score:t.total,time:x,scoreValue:t.total}),(0,k.updateStreakForGame)(o,!0);let A=(0,k.getStreakDataForGame)(o);F((0,l.checkAndUnlockAchievements)({gameId:o,currentStreak:A.currentStreak,gamesCompleted:1}).newlyUnlocked);var C,E,G=q.id;try{let a=`pattern-architect-pattern-${G}`;localStorage.setItem(a,JSON.stringify(s))}catch(a){console.error("Error saving pattern:",a)}let H=function(){try{let a=localStorage.getItem(g);if(a)return JSON.parse(a)}catch(a){console.error("Error loading progress:",a)}return{xp:0,tier:"novice",challengesCompleted:0,personalBests:{},achievements:[]}}();H.challengesCompleted+=1;try{localStorage.setItem(g,JSON.stringify(H))}catch(a){console.error("Error saving progress:",a)}},[q,s,w]),J=(0,c.useCallback)(()=>{q?(p("playing"),v(null),x(Date.now())):G()},[q,G]),K=(0,c.useCallback)(()=>{p("idle"),v(null),x(null),r(null),t(null),z(null),B(null),F([]),D(null)},[]),L=s&&q?f(s,q):null,M=q?(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-sm font-semibold text-slate-900 mb-2",children:"Rules"}),(0,b.jsx)("div",{className:"space-y-2",children:q.rules.map(a=>(0,b.jsx)("div",{className:"text-sm text-slate-600",children:a.description},a.id))})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-sm font-semibold text-slate-900 mb-2",children:"Required Symmetry"}),(0,b.jsx)("div",{className:"text-sm text-slate-600",children:q.requiredSymmetry.join(", ")})]}),s&&(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-sm font-semibold text-slate-900 mb-2",children:"Elements"}),(0,b.jsxs)("div",{className:"text-lg font-bold",children:[s.elements.length," placed"]})]}),L&&(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-sm font-semibold text-slate-900 mb-2",children:"Status"}),(0,b.jsx)("div",{className:`text-sm font-medium ${L.valid?"text-green-600":"text-red-600"}`,children:L.valid?"✓ Valid":`✗ ${L.violations.length} issues`})]}),null!==u&&(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-sm font-semibold text-slate-900 mb-2",children:"Beauty Score"}),(0,b.jsx)("div",{className:"text-2xl font-bold text-green-600",children:u.toFixed(1)})]})]}):null;return(0,b.jsx)(d.default,{config:n,status:a,onStart:J,onReset:K,rightPanel:M,children:(0,b.jsx)("div",{className:"p-4",children:q&&s?"idle"===a?(0,b.jsxs)("div",{className:"max-w-2xl mx-auto space-y-4",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-slate-900",children:q.name}),(0,b.jsx)("p",{className:"text-slate-600",children:q.description}),(0,b.jsx)("button",{onClick:J,className:"w-full px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Start Challenge"})]}):"playing"===a||"finished"===a?(0,b.jsxs)("div",{className:"max-w-4xl mx-auto space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-slate-900 mb-3",children:"Pattern Grid"}),(0,b.jsx)("div",{className:"inline-grid gap-1 p-4 bg-slate-100 rounded-lg",children:s.grid.map((c,d)=>(0,b.jsx)("div",{className:"flex gap-1",children:c.map((c,e)=>(0,b.jsx)("button",{onClick:()=>H(d,e),disabled:"finished"===a,className:`w-10 h-10 rounded border-2 transition-colors ${"shape"===c?"bg-purple-600 border-purple-700":"bg-white border-slate-300 hover:border-purple-400"}`,"aria-label":`Cell ${d},${e}`},`${d}-${e}`))},d))})]}),"playing"===a&&(0,b.jsx)("button",{onClick:I,className:"w-full px-4 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Submit Pattern"}),"finished"===a&&null!==u&&(0,b.jsxs)("div",{className:"text-center space-y-4",children:[(0,b.jsxs)("div",{className:"text-3xl font-bold text-purple-600",children:["Beauty Score: ",u.toFixed(1)]}),(0,b.jsx)("button",{onClick:K,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"New Challenge"})]})]}):null:(0,b.jsx)("div",{className:"text-center text-slate-600",children:"Loading challenge..."})})})}a.s(["default",()=>p],583693)}];

//# debugId=f7591dcd-6af5-99a4-44ee-ee6f37654e09
//# sourceMappingURL=src_lib_games_games_pattern-architect_PatternArchitect_tsx_235cada6._.js.map