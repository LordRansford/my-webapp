{
  "version": 3,
  "sources": [],
  "debugId": "51952bca-844a-c775-5714-c9e64065ad24",
  "sections": [
    {"offset": {"line": 1, "column": 0}, "map": {"version":3,"sources":["../../../../src/app/account/certificates/ui.client.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\n\nexport default function CertificatesClient(\n  props:\n    | { kind: \"issue\"; courseId: string }\n    | { kind: \"download\"; certificateId: string },\n) {\n  const [busy, setBusy] = useState(false);\n  const [error, setError] = useState<string>(\"\");\n\n  if (props.kind === \"download\") {\n    return (\n      <div className=\"flex items-center gap-2\">\n        <a\n          className=\"rounded-lg bg-slate-900 px-3 py-2 text-xs font-semibold text-white hover:bg-slate-800\"\n          href={`/api/certificates/download?certificateId=${encodeURIComponent(props.certificateId)}`}\n        >\n          Download\n        </a>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"flex flex-col items-end gap-2\">\n      <button\n        type=\"button\"\n        disabled={busy}\n        className=\"rounded-lg bg-slate-900 px-3 py-2 text-xs font-semibold text-white hover:bg-slate-800 disabled:opacity-60\"\n        onClick={async () => {\n          setBusy(true);\n          setError(\"\");\n          try {\n            const res = await fetch(\"/api/certificates/issue\", {\n              method: \"POST\",\n              headers: { \"content-type\": \"application/json\" },\n              body: JSON.stringify({ courseId: props.courseId }),\n            });\n            const data = await res.json().catch(() => null);\n            if (!res.ok) {\n              const reasons = Array.isArray(data?.reasons) ? data.reasons.join(\" \") : \"\";\n              setError(reasons || data?.message || \"Unable to issue certificate.\");\n              return;\n            }\n            if (data?.certificateId) {\n              window.location.href = `/api/certificates/download?certificateId=${encodeURIComponent(data.certificateId)}`;\n            }\n          } catch {\n            setError(\"Unable to issue certificate.\");\n          } finally {\n            setBusy(false);\n          }\n        }}\n      >\n        {busy ? \"Issuing...\" : \"Issue certificate\"}\n      </button>\n      {error ? <div className=\"text-xs text-rose-700\">{error}</div> : null}\n    </div>\n  );\n}\n\n\n"],"names":[],"mappings":"0DAEA,EAAA,EAAA,CAAA,CAAA,QAEe,SAAS,EACtB,CAE+C,EAE/C,GAAM,CAAC,EAAM,EAAQ,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GAC3B,CAAC,EAAO,EAAS,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAS,UAE3C,AAAmB,YAAY,CAA3B,EAAM,IAAI,CAEV,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,mCACb,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CACC,UAAU,wFACV,KAAM,CAAC,yCAAyC,EAAE,mBAAmB,EAAM,aAAa,EAAA,CAAG,UAC5F,eAQL,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,0CACb,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,KAAK,SACL,SAAU,EACV,UAAU,4GACV,QAAS,UACP,GAAQ,GACR,EAAS,IACT,GAAI,CACF,IAAM,EAAM,MAAM,MAAM,0BAA2B,CACjD,OAAQ,OACR,QAAS,CAAE,eAAgB,kBAAmB,EAC9C,KAAM,KAAK,SAAS,CAAC,CAAE,SAAU,EAAM,QAAQ,AAAC,EAClD,GACM,EAAO,MAAM,EAAI,IAAI,GAAG,KAAK,CAAC,IAAM,MAC1C,GAAI,CAAC,EAAI,EAAE,CAAE,CACX,IAAM,EAAU,MAAM,OAAO,CAAC,GAAM,SAAW,EAAK,OAAO,CAAC,IAAI,CAAC,KAAO,GACxE,EAAS,GAAW,GAAM,SAAW,gCACrC,MACF,CACI,GAAM,eAAe,CACvB,OAAO,QAAQ,CAAC,IAAI,CAAG,CAAC,yCAAyC,EAAE,mBAAmB,EAAK,aAAa,EAAA,CAAA,AAAG,CAE/G,CAAE,KAAM,CACN,EAAS,+BACX,QAAU,CACR,GAAQ,EACV,CACF,WAEC,EAAO,aAAe,sBAExB,EAAQ,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,iCAAyB,IAAe,OAGtE"}}]
}