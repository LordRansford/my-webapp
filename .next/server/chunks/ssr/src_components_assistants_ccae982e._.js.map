{
  "version": 3,
  "sources": [],
  "debugId": "52815c4b-7af9-2c9c-fbaa-6bc3ebe50653",
  "sections": [
    {"offset": {"line": 1, "column": 0}, "map": {"version":3,"sources":["../../../../src/components/assistants/MentorAssistant.tsx","../../../../src/components/assistants/CitationChip.tsx","../../../../src/components/assistants/FeedbackAssistant.tsx","../../../../src/components/assistants/state.ts","../../../../src/components/assistants/AssistantShell.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useMemo, useState } from \"react\";\nimport { usePathname } from \"next/navigation\";\nimport { GraduationCap, X } from \"lucide-react\";\nimport CitationChip from \"@/components/assistants/CitationChip\";\nimport ComputeMeter from \"@/components/ComputeMeter\";\nimport CreditConsent, { useCreditConsent } from \"@/components/credits/CreditConsent\";\nimport type { ComputeActual, ComputeEstimate } from \"@/lib/contracts/compute\";\n\ntype MentorCitation = { title: string; href: string; why?: string };\ntype MentorSource = { title: string; href: string; excerpt?: string };\ntype MentorTryNext = { title: string; href: string; steps: string[] };\nexport type MentorMsg = {\n  role: \"user\" | \"mentor\";\n  content: string;\n  answerMode?: \"site-grounded\" | \"general-guidance\" | \"mixed\";\n  answerFromSite?: string;\n  refusalReason?: { code: string; message: string } | null;\n  suggestedNextActions?: string[];\n  citationsTitle?: string;\n  citations?: MentorCitation[];\n  citationsV2?: Array<{ title: string; urlOrPath: string; anchorOrHeading?: string }>;\n  sources?: MentorSource[];\n  tryNext?: MentorTryNext | null;\n  lowConfidence?: boolean;\n  receipt?: any;\n};\n\nconst MSG_KEY_PREFIX = \"rn_mentor_msgs_v1:\";\n\nfunction sanitizeText(input: unknown, maxLen: number) {\n  const raw = typeof input === \"string\" ? input : \"\";\n  return raw.replace(/[\\u0000-\\u0008\\u000B\\u000C\\u000E-\\u001F\\u007F]/g, \"\").trim().slice(0, maxLen);\n}\n\nfunction collectHeadings(): Array<{ id: string; text: string; depth: number }> {\n  try {\n    const nodes = Array.from(document.querySelectorAll(\"article h2, article h3\"));\n    return nodes\n      .map((n: any) => ({\n        id: String(n?.id || \"\").trim(),\n        text: String(n?.textContent || \"\").trim().slice(0, 120),\n        depth: n?.tagName === \"H2\" ? 2 : 3,\n      }))\n      .filter((h) => h.id && h.text);\n  } catch {\n    return [];\n  }\n}\n\nfunction collectToolTitles(): Array<{ id?: string; title: string }> {\n  try {\n    const nodes = Array.from(document.querySelectorAll(\"[data-tool-id][data-tool-title]\"));\n    if (nodes.length) {\n      return nodes\n        .map((n: any) => ({ id: String(n?.dataset?.toolId || \"\").trim(), title: String(n?.dataset?.toolTitle || \"\").trim().slice(0, 120) }))\n        .filter((t) => t.title);\n    }\n    const fallback = Array.from(document.querySelectorAll(\".notes-tool-card h3\"));\n    return fallback.map((n: any) => ({ title: String(n?.textContent || \"\").trim().slice(0, 120) })).filter((t) => t.title);\n  } catch {\n    return [];\n  }\n}\n\nfunction readMsgs(key: string): MentorMsg[] {\n  try {\n    const raw = window.sessionStorage.getItem(key);\n    if (!raw) return [];\n    const parsed = JSON.parse(raw);\n    return Array.isArray(parsed) ? (parsed as MentorMsg[]) : [];\n  } catch {\n    return [];\n  }\n}\n\nfunction writeMsgs(key: string, msgs: MentorMsg[]) {\n  try {\n    window.sessionStorage.setItem(key, JSON.stringify(msgs.slice(-30)));\n  } catch {\n    // ignore\n  }\n}\n\nfunction collectVisibleText(maxLen = 8000) {\n  try {\n    const root = document.querySelector(\"article\") || document.querySelector(\"main\") || document.body;\n    const raw = String((root as any)?.innerText || (root as any)?.textContent || \"\");\n    return raw.replace(/[\\u0000-\\u0008\\u000B\\u000C\\u000E-\\u001F\\u007F]/g, \" \").replace(/\\s+/g, \" \").trim().slice(0, maxLen);\n  } catch {\n    return \"\";\n  }\n}\n\nexport default function MentorAssistant({\n  open,\n  onClose,\n}: {\n  open: boolean;\n  onClose: () => void;\n}) {\n  const pathname = usePathname() || \"/\";\n  const storageKey = useMemo(() => `${MSG_KEY_PREFIX}${pathname}`, [pathname]);\n\n  const [messages, setMessages] = useState<MentorMsg[]>([]);\n  const [input, setInput] = useState(\"\");\n  const [status, setStatus] = useState<\"idle\" | \"loading\">(\"idle\");\n  const [estimate, setEstimate] = useState<ComputeEstimate | null>(null);\n  const [estimateFreeRemainingMs, setEstimateFreeRemainingMs] = useState<number | null>(null);\n  const [actual, setActual] = useState<ComputeActual | null>(null);\n  const [remainingCredits, setRemainingCredits] = useState<number | null>(null);\n  const [costHints, setCostHints] = useState<string[]>([]);\n  const [balance, setBalance] = useState<number | null>(null);\n\n  // Estimate credits based on query complexity (variable, but use a base estimate)\n  // Use estimate if available, otherwise default to 0 (will be updated when estimate loads)\n  const estimatedCredits = estimate?.estimatedCreditCost || 0;\n  const { accepted, canProceed } = useCreditConsent(estimatedCredits, balance);\n\n  useEffect(() => {\n    if (typeof window === \"undefined\") return;\n    setMessages(readMsgs(storageKey));\n    // Fetch credit balance\n    fetch(\"/api/credits/status\")\n      .then((r) => (r.ok ? r.json() : null))\n      .then((d) => {\n        setBalance(typeof d?.balance === \"number\" ? d.balance : 0);\n      })\n      .catch(() => setBalance(0));\n  }, [storageKey]);\n\n  useEffect(() => {\n    if (typeof window === \"undefined\") return;\n    writeMsgs(storageKey, messages);\n  }, [storageKey, messages]);\n\n  const ask = async () => {\n    const question = sanitizeText(input, 320);\n    if (!question) return;\n    \n    // Check credit consent if estimate is available and requires credits\n    if (estimatedCredits > 0 && !canProceed) {\n      setMessages((m) => [\n        ...m,\n        {\n          role: \"mentor\",\n          content: \"Please accept the credit estimate and ensure sufficient credits before submitting your question.\",\n        },\n      ]);\n      return;\n    }\n    \n    setStatus(\"loading\");\n    setActual(null);\n    setRemainingCredits(null);\n\n    const headings = collectHeadings();\n    const tools = collectToolTitles();\n    const text = collectVisibleText(9000);\n\n    try {\n      // Pre-run estimate (authoritative)\n      try {\n        const er = await fetch(\"/api/compute/estimate\", {\n          method: \"POST\",\n          headers: { \"content-type\": \"application/json\" },\n          body: JSON.stringify({ toolId: \"mentor-query\", inputBytes: question.length, requestedComplexityPreset: \"standard\" }),\n        });\n        const ej = await er.json().catch(() => null);\n        if (ej?.ok) {\n          setEstimate({\n            estimatedCpuMs: Number(ej.estimatedCpuMs || 0),\n            estimatedWallTimeMs: Number(ej.estimatedWallTimeMs || 0),\n            estimatedCreditCost: Number(ej.estimatedCreditCost || 0),\n            freeTierAppliedMs: Number(ej.freeTierAppliedMs || 0),\n            paidMs: Number(ej.paidMs || 0),\n            allowed: Boolean(ej.allowed),\n            reasons: Array.isArray(ej.reasons) ? ej.reasons : [],\n          });\n          setEstimateFreeRemainingMs(typeof ej?.freeTierRemainingMs === \"number\" ? ej.freeTierRemainingMs : null);\n          setCostHints(Array.isArray(ej.costHints) ? ej.costHints : []);\n        }\n      } catch {\n        // ignore\n      }\n\n      const res = await fetch(\"/api/mentor/query\", {\n        method: \"POST\",\n        headers: { \"content-type\": \"application/json\" },\n        body: JSON.stringify({\n          question,\n          pageUrl: pathname,\n          pageContext: {\n            pathname,\n            title: document.title || \"\",\n            text,\n            headings,\n            // Tools are not used server-side today, but keep them for future expansion.\n            tools,\n          },\n        }),\n      });\n      const data = await res.json().catch(() => ({}));\n      const receipt = data?.receipt || null;\n      if (receipt) {\n        const durationMs = Number(receipt?.durationMs || 0);\n        const freeTierAppliedMs = Number(receipt?.freeTierAppliedMs || 0);\n        const creditsCharged = Number(receipt?.creditsCharged || 0);\n        setActual({ durationMs, freeTierAppliedMs, paidMs: Math.max(0, durationMs - freeTierAppliedMs), creditsCharged });\n        setRemainingCredits(typeof receipt?.remainingCredits === \"number\" ? receipt.remainingCredits : null);\n      }\n\n      const citations: MentorCitation[] = Array.isArray(data?.citations) ? data.citations : [];\n      const filtered = citations.filter((c) => {\n        const href = typeof c?.href === \"string\" ? c.href : \"\";\n        if (!href) return false;\n        if (!href.includes(\"#\")) return true;\n        const hash = href.split(\"#\")[1] || \"\";\n        if (!hash) return false;\n        const routePart = href.split(\"#\")[0] || \"\";\n        const sameRoute = routePart === \"\" || routePart === pathname;\n        if (!sameRoute) return true;\n        return Boolean(document.getElementById(hash));\n      });\n\n      setMessages((m) => [\n        ...m,\n        { role: \"user\", content: question },\n        {\n          role: \"mentor\",\n          content:\n            typeof data?.answer === \"string\"\n              ? data.answer\n              : \"I could not find an exact match in the site content. I can still give general guidance, and I will list the closest sections when available.\",\n          answerFromSite: typeof data?.answerFromSite === \"string\" ? data.answerFromSite : undefined,\n          answerMode: data?.answerMode === \"site-grounded\" || data?.answerMode === \"general-guidance\" || data?.answerMode === \"mixed\" ? data.answerMode : undefined,\n          citationsTitle: typeof data?.citationsTitle === \"string\" ? data.citationsTitle : undefined,\n          citations: filtered.length ? filtered : undefined,\n          citationsV2: Array.isArray(data?.citationsV2)\n            ? data.citationsV2\n                .map((c: any) => ({\n                  title: sanitizeText(c?.title, 140),\n                  urlOrPath: sanitizeText(c?.urlOrPath, 240),\n                  anchorOrHeading: sanitizeText(c?.anchorOrHeading, 140) || undefined,\n                }))\n                .filter((c: any) => c.title && c.urlOrPath)\n                .slice(0, 6)\n            : undefined,\n          sources: Array.isArray(data?.sources)\n            ? data.sources\n                .map((s: any) => ({ title: sanitizeText(s?.title, 140), href: sanitizeText(s?.href, 240), excerpt: sanitizeText(s?.excerpt, 240) }))\n                .filter((s: any) => s.title && s.href)\n            : undefined,\n          refusalReason: data?.refusalReason && typeof data.refusalReason === \"object\"\n            ? { code: sanitizeText((data.refusalReason as any)?.code, 40), message: sanitizeText((data.refusalReason as any)?.message, 240) }\n            : null,\n          suggestedNextActions: Array.isArray(data?.suggestedNextActions)\n            ? data.suggestedNextActions.map((x: any) => sanitizeText(x, 160)).filter(Boolean).slice(0, 5)\n            : undefined,\n          tryNext: data?.tryNext || null,\n          lowConfidence: Boolean(data?.lowConfidence),\n          receipt: data?.receipt || null,\n        },\n      ]);\n      setInput(\"\");\n    } catch {\n      setMessages((m) => [\n        ...m,\n        {\n          role: \"mentor\",\n          content: \"Something went wrong while looking up the site content. If you rephrase using a heading keyword, I can usually find the right section.\",\n        },\n      ]);\n    } finally {\n      setStatus(\"idle\");\n    }\n  };\n\n  if (!open) return null;\n\n  return (\n    <div className=\"fixed inset-0 z-50\">\n      <button type=\"button\" className=\"absolute inset-0 bg-black/35\" aria-label=\"Close mentor\" onClick={onClose} />\n      <aside className=\"absolute right-0 top-0 h-full w-full max-w-sm overflow-y-auto bg-white p-4 shadow-xl\" aria-label=\"Mentor drawer\">\n        <div className=\"flex items-center justify-between gap-2\">\n          <div className=\"flex items-center gap-2\">\n            <GraduationCap className=\"h-4 w-4 text-slate-800\" aria-hidden=\"true\" />\n            <h2 className=\"text-base font-semibold text-slate-900\">Mentor</h2>\n          </div>\n          <button type=\"button\" className=\"rounded-full border px-3 py-1 text-sm\" onClick={onClose} aria-label=\"Close mentor panel\">\n            <X className=\"h-4 w-4\" aria-hidden=\"true\" />\n          </button>\n        </div>\n\n        <div className=\"mt-2 rounded-2xl border border-slate-200 bg-slate-50/70 p-3 text-xs text-slate-700\">\n          Educational support only. Not medical advice. Not legal advice.\n        </div>\n\n        <div className=\"mt-3 space-y-3\">\n          {messages.length === 0 ? <p className=\"text-sm text-slate-700\">Ask a question to see an answer.</p> : null}\n          {messages.map((msg, idx) => (\n            <div\n              key={idx}\n              className={`rounded-2xl border p-3 text-sm ${msg.role === \"user\" ? \"border-sky-200 bg-sky-50\" : \"border-slate-200 bg-white\"}`}\n            >\n              <div className=\"text-xs font-semibold uppercase tracking-wide text-slate-600\">{msg.role === \"user\" ? \"You\" : \"Mentor\"}</div>\n              {msg.role === \"mentor\" ? (\n                <div className=\"mt-2 text-xs font-semibold text-slate-700\">\n                  {msg.answerMode === \"site-grounded\" ? \"From this site\" : msg.answerMode === \"general-guidance\" ? \"General guidance\" : msg.answerMode === \"mixed\" ? \"Mixed\" : \"Mentor reply\"}\n                </div>\n              ) : null}\n              <div className=\"mt-1 whitespace-pre-wrap text-slate-900\">{msg.content}</div>\n              {msg.lowConfidence ? <p className=\"mt-2 text-xs text-amber-800\">I might be wrong here. Please check the citations.</p> : null}\n              {msg.refusalReason?.message ? (\n                <div className=\"mt-3 rounded-xl border border-amber-200 bg-amber-50 p-3 text-sm text-amber-900\">\n                  <p className=\"m-0 font-semibold\">Why I could not answer from the site</p>\n                  <p className=\"mt-1 m-0\">{msg.refusalReason.message}</p>\n                </div>\n              ) : null}\n              {msg.suggestedNextActions && msg.suggestedNextActions.length ? (\n                <div className=\"mt-3\">\n                  <div className=\"text-xs font-semibold text-slate-700\">Suggested next actions</div>\n                  <ul className=\"mt-2 list-disc space-y-1 pl-5 text-sm text-slate-800\">\n                    {msg.suggestedNextActions.slice(0, 4).map((a) => (\n                      <li key={a}>{a}</li>\n                    ))}\n                  </ul>\n                </div>\n              ) : null}\n              {msg.sources && msg.sources.length ? (\n                <div className=\"mt-3\">\n                  <div className=\"text-xs font-semibold text-slate-700\">Sources</div>\n                  <ul className=\"mt-2 space-y-1\">\n                    {msg.sources.slice(0, 6).map((s) => (\n                      <li key={`${s.href}-${s.title}`} className=\"text-xs text-slate-700\">\n                        <a className=\"underline hover:no-underline\" href={s.href}>\n                          {s.title}\n                        </a>\n                        {s.excerpt ? <span className=\"text-slate-500\"> | {s.excerpt}</span> : null}\n                      </li>\n                    ))}\n                  </ul>\n                </div>\n              ) : null}\n              {msg.citations && msg.citations.length ? (\n                <div className=\"mt-3\">\n                  <div className=\"text-xs font-semibold text-slate-700\">{msg.citationsTitle || \"Where this is covered on the site\"}</div>\n                  <div className=\"mt-2 flex flex-wrap gap-2\">\n                    {msg.citations.slice(0, 6).map((c) => (\n                      <CitationChip key={c.href} href={c.href} title={c.title} why={c.why} />\n                    ))}\n                  </div>\n                </div>\n              ) : null}\n            </div>\n          ))}\n        </div>\n\n        <div className=\"mt-4\">\n          <ComputeMeter\n            estimate={estimate}\n            actual={actual}\n            tier={typeof estimateFreeRemainingMs === \"number\" ? { freeMsRemainingToday: estimateFreeRemainingMs } : null}\n            remainingCredits={remainingCredits}\n            runStatus={actual ? \"success\" : status === \"loading\" ? \"success\" : estimate && !estimate.allowed ? \"blocked\" : \"success\"}\n            costHints={costHints}\n            compact\n          />\n        </div>\n\n        {estimatedCredits > 0 && estimate && (\n          <div className=\"mt-4\">\n            <CreditConsent\n              estimatedCredits={estimatedCredits}\n              currentBalance={balance}\n              onAccept={() => {}}\n              onDecline={() => {}}\n            />\n          </div>\n        )}\n\n        <div className=\"mt-4 flex flex-col gap-2\">\n          <label className=\"text-sm font-semibold text-slate-800\" htmlFor=\"mentor-question\">\n                Ask about this page\n          </label>\n              <p className=\"text-xs text-slate-600 m-0\">\n                I answer from the site when possible. If the page is thin, I will provide brief general guidance and link to nearby sections.\n              </p>\n          <input\n            id=\"mentor-question\"\n            value={input}\n            onChange={(e) => setInput(e.target.value)}\n            onKeyDown={(e) => {\n              if (e.key === \"Enter\") ask();\n            }}\n            className=\"w-full rounded-xl border border-slate-200 p-3 text-base shadow-sm focus:outline-none focus:ring-2 focus:ring-slate-400\"\n            placeholder=\"Ask about the notes or tools\"\n            maxLength={320}\n          />\n          <button \n            type=\"button\" \n            className=\"button primary\" \n            onClick={ask} \n            disabled={!input.trim() || status === \"loading\" || (estimatedCredits > 0 && !canProceed)}\n          >\n            {status === \"loading\" ? \"Thinking...\" : \"Send\"}\n          </button>\n        </div>\n      </aside>\n    </div>\n  );\n}\n\n\n","\"use client\";\n\nimport Link from \"next/link\";\nimport { highlightAnchorFromLocation } from \"@/lib/mentor/highlight\";\n\nexport default function CitationChip({ href, title, why }: { href: string; title: string; why?: string }) {\n  return (\n    <Link\n      href={href}\n      className=\"inline-flex max-w-full items-center gap-2 rounded-full border border-slate-200 bg-white px-3 py-1 text-xs font-semibold text-slate-900 shadow-sm hover:bg-slate-50 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-400\"\n      title={why || title}\n      onClick={() => {\n        // Highlight the target section if this is an in-page anchor link.\n        window.setTimeout(() => highlightAnchorFromLocation(), 0);\n      }}\n    >\n      <span className=\"truncate\">{title}</span>\n    </Link>\n  );\n}\n\n\n","\"use client\";\n\nimport { useEffect, useMemo, useState } from \"react\";\nimport Image from \"next/image\";\nimport { Image as ImageIcon, LifeBuoy, X } from \"lucide-react\";\n\nconst feedbackOptions = [\"Family\", \"Friend\", \"Work colleague\", \"Other\"] as const;\nconst feedbackCategories = [\"Bug\", \"Content\", \"UX\", \"Idea\", \"Other\"] as const;\nconst SCREENSHOT_MAX_BYTES = 600_000;\n\nfunction sanitizeText(input: unknown, maxLen: number) {\n  const raw = typeof input === \"string\" ? input : \"\";\n  return raw.replace(/[\\u0000-\\u0008\\u000B\\u000C\\u000E-\\u001F\\u007F]/g, \"\").trim().slice(0, maxLen);\n}\n\nfunction cryptoRandomId() {\n  try {\n    const bytes = new Uint8Array(12);\n    window.crypto.getRandomValues(bytes);\n    return Array.from(bytes)\n      .map((b) => b.toString(16).padStart(2, \"0\"))\n      .join(\"\");\n  } catch {\n    return `${Date.now().toString(16)}${Math.random().toString(16).slice(2, 10)}`;\n  }\n}\n\nfunction getSessionId() {\n  try {\n    const key = \"rn_assistants_session_v1\";\n    const existing = window.sessionStorage.getItem(key);\n    if (existing) return existing;\n    const id = cryptoRandomId();\n    window.sessionStorage.setItem(key, id);\n    return id;\n  } catch {\n    return cryptoRandomId();\n  }\n}\n\nasync function fileToDataUrl(file: File): Promise<string> {\n  const buf = await file.arrayBuffer();\n  if (buf.byteLength > SCREENSHOT_MAX_BYTES) {\n    throw new Error(\"Screenshot is too large. Please use a smaller image.\");\n  }\n  return await new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    reader.onerror = () => reject(new Error(\"Could not read screenshot.\"));\n    reader.onload = () => resolve(String(reader.result || \"\"));\n    reader.readAsDataURL(file);\n  });\n}\n\nfunction summariseFeedback(message: string, category: string, followUp: string) {\n  const m = sanitizeText(message, 240);\n  const f = sanitizeText(followUp, 180);\n  const parts = [category ? `Category: ${category}.` : \"\", m ? `Message: ${m}` : \"\", f ? `Expectation: ${f}` : \"\"].filter(Boolean);\n  return parts.join(\" \");\n}\n\nexport default function FeedbackAssistant({\n  open,\n  onClose,\n  pageUrl,\n  pageTitle,\n}: {\n  open: boolean;\n  onClose: () => void;\n  pageUrl: string;\n  pageTitle: string;\n}) {\n  const [name, setName] = useState(\"\");\n  const [heardFrom, setHeardFrom] = useState<(typeof feedbackOptions)[number]>(feedbackOptions[0]);\n  const [category, setCategory] = useState<(typeof feedbackCategories)[number]>(feedbackCategories[1]);\n  const [message, setMessage] = useState(\"\");\n  const [followUp, setFollowUp] = useState(\"\");\n  const [status, setStatus] = useState<\"idle\" | \"loading\" | \"success\" | \"error\">(\"idle\");\n  const [errorMessage, setErrorMessage] = useState<string | null>(null);\n\n  const [screenshotFile, setScreenshotFile] = useState<File | null>(null);\n  const [screenshotPreviewUrl, setScreenshotPreviewUrl] = useState<string | null>(null);\n\n  const canSubmit = useMemo(() => sanitizeText(message, 1500).length > 0, [message]);\n\n  useEffect(() => {\n    if (!screenshotFile) return;\n    const url = URL.createObjectURL(screenshotFile);\n    setScreenshotPreviewUrl(url);\n    return () => URL.revokeObjectURL(url);\n  }, [screenshotFile]);\n\n  const submit = async () => {\n    const cleanMessage = sanitizeText(message, 1500);\n    if (!cleanMessage) return;\n    setStatus(\"loading\");\n    setErrorMessage(null);\n    try {\n      const screenshot =\n        screenshotFile && screenshotFile.type.startsWith(\"image/\")\n          ? {\n              name: sanitizeText(screenshotFile.name, 120),\n              type: sanitizeText(screenshotFile.type, 80),\n              dataUrl: await fileToDataUrl(screenshotFile),\n            }\n          : null;\n\n      const payload = {\n        name: sanitizeText(name, 80) || \"\",\n        heardFrom,\n        category,\n        followUp: sanitizeText(followUp, 600),\n        clientSummary: summariseFeedback(cleanMessage, category, followUp),\n        message: cleanMessage,\n        pageUrl,\n        pageTitle,\n        sessionId: getSessionId(),\n        screenshot,\n      };\n      const res = await fetch(\"/api/feedback\", {\n        method: \"POST\",\n        headers: { \"content-type\": \"application/json\" },\n        body: JSON.stringify(payload),\n      });\n      const data = await res.json().catch(() => ({}));\n      if (!res.ok) {\n        setStatus(\"error\");\n        setErrorMessage(typeof data?.message === \"string\" ? data.message : \"Could not send feedback.\");\n        return;\n      }\n      setStatus(\"success\");\n      setMessage(\"\");\n      setFollowUp(\"\");\n      setScreenshotFile(null);\n    } catch (err: any) {\n      setStatus(\"error\");\n      setErrorMessage(err?.message || \"Could not send feedback.\");\n    }\n  };\n\n  const dropHandlers = {\n    onDragOver: (e: React.DragEvent) => {\n      e.preventDefault();\n      e.stopPropagation();\n    },\n    onDrop: (e: React.DragEvent) => {\n      e.preventDefault();\n      e.stopPropagation();\n      const file = e.dataTransfer.files?.[0];\n      if (!file) return;\n      if (!file.type.startsWith(\"image/\")) {\n        setErrorMessage(\"Screenshot must be an image.\");\n        return;\n      }\n      if (file.size > SCREENSHOT_MAX_BYTES) {\n        setErrorMessage(\"Screenshot is too large. Please use a smaller image.\");\n        return;\n      }\n      setErrorMessage(null);\n      setScreenshotFile(file);\n    },\n  };\n\n  if (!open) return null;\n\n  return (\n    <div className=\"fixed inset-0 z-50\">\n      <button type=\"button\" className=\"absolute inset-0 bg-black/35\" aria-label=\"Close feedback\" onClick={onClose} />\n      <aside className=\"absolute left-0 top-0 h-full w-full max-w-sm overflow-y-auto bg-white p-4 shadow-xl\" aria-label=\"Feedback drawer\">\n        <div className=\"flex items-center justify-between gap-2\">\n          <div className=\"flex items-center gap-2\">\n            <LifeBuoy className=\"h-4 w-4 text-slate-800\" aria-hidden=\"true\" />\n            <h2 className=\"text-base font-semibold text-slate-900\">Feedback</h2>\n          </div>\n          <button type=\"button\" className=\"rounded-full border px-3 py-1 text-sm\" onClick={onClose} aria-label=\"Close feedback panel\">\n            <X className=\"h-4 w-4\" aria-hidden=\"true\" />\n          </button>\n        </div>\n\n        {status === \"success\" ? (\n          <p className=\"mt-3 text-sm font-semibold text-emerald-800\">Thank you. Your feedback has been received.</p>\n        ) : (\n          <div className=\"mt-4 grid gap-3\">\n            <label className=\"space-y-1\" htmlFor=\"feedback-name\">\n              <span className=\"text-sm font-semibold text-slate-800\">Name</span>\n              <input\n                id=\"feedback-name\"\n                value={name}\n                onChange={(e) => setName(e.target.value)}\n                className=\"w-full rounded-xl border border-slate-200 p-3 text-base shadow-sm focus:outline-none focus:ring-2 focus:ring-slate-400\"\n                placeholder=\"Optional\"\n              />\n            </label>\n\n            <label className=\"space-y-1\" htmlFor=\"feedback-heard\">\n              <span className=\"text-sm font-semibold text-slate-800\">How did you hear about this site?</span>\n              <select\n                id=\"feedback-heard\"\n                value={heardFrom}\n                onChange={(e) => setHeardFrom(e.target.value as any)}\n                className=\"w-full rounded-xl border border-slate-200 p-3 text-base shadow-sm focus:outline-none focus:ring-2 focus:ring-slate-400\"\n              >\n                {feedbackOptions.map((opt) => (\n                  <option key={opt} value={opt}>\n                    {opt}\n                  </option>\n                ))}\n              </select>\n            </label>\n\n            <label className=\"space-y-1\" htmlFor=\"feedback-category\">\n              <span className=\"text-sm font-semibold text-slate-800\">Type</span>\n              <select\n                id=\"feedback-category\"\n                value={category}\n                onChange={(e) => setCategory(e.target.value as any)}\n                className=\"w-full rounded-xl border border-slate-200 p-3 text-base shadow-sm focus:outline-none focus:ring-2 focus:ring-slate-400\"\n              >\n                {feedbackCategories.map((opt) => (\n                  <option key={opt} value={opt}>\n                    {opt}\n                  </option>\n                ))}\n              </select>\n            </label>\n\n            <label className=\"space-y-1\" htmlFor=\"feedback-message\">\n              <span className=\"text-sm font-semibold text-slate-800\">Your feedback</span>\n              <textarea\n                id=\"feedback-message\"\n                value={message}\n                onChange={(e) => setMessage(e.target.value)}\n                rows={4}\n                maxLength={1500}\n                className=\"w-full rounded-xl border border-slate-200 p-3 text-base shadow-sm focus:outline-none focus:ring-2 focus:ring-slate-400\"\n                placeholder=\"What worked well, what was confusing, or what is missing\"\n                required\n              />\n            </label>\n\n            <label className=\"space-y-1\" htmlFor=\"feedback-followup\">\n              <span className=\"text-sm font-semibold text-slate-800\">One follow up question</span>\n              <input\n                id=\"feedback-followup\"\n                value={followUp}\n                onChange={(e) => setFollowUp(e.target.value)}\n                className=\"w-full rounded-xl border border-slate-200 p-3 text-base shadow-sm focus:outline-none focus:ring-2 focus:ring-slate-400\"\n                placeholder=\"What would good look like instead?\"\n                maxLength={600}\n              />\n            </label>\n\n            <div className=\"rounded-2xl border border-slate-200 bg-slate-50 p-3\" {...dropHandlers}>\n              <div className=\"flex items-center gap-2 text-sm font-semibold text-slate-800\">\n                <ImageIcon className=\"h-4 w-4\" aria-hidden=\"true\" />\n                Screenshot (optional)\n              </div>\n              <p className=\"mt-1 text-xs text-slate-700\">Drag and drop an image, or choose a file. Max {Math.round(SCREENSHOT_MAX_BYTES / 1000)} KB.</p>\n              <div className=\"mt-2 flex flex-wrap items-center gap-2\">\n                <input\n                  type=\"file\"\n                  accept=\"image/*\"\n                  aria-label=\"Upload screenshot\"\n                  onChange={(e) => {\n                    const file = e.target.files?.[0];\n                    if (!file) return;\n                    if (!file.type.startsWith(\"image/\")) {\n                      setErrorMessage(\"Screenshot must be an image.\");\n                      return;\n                    }\n                    if (file.size > SCREENSHOT_MAX_BYTES) {\n                      setErrorMessage(\"Screenshot is too large. Please use a smaller image.\");\n                      return;\n                    }\n                    setErrorMessage(null);\n                    setScreenshotFile(file);\n                  }}\n                />\n                {screenshotFile ? (\n                  <button type=\"button\" className=\"rounded-full border px-3 py-1 text-xs font-semibold\" onClick={() => setScreenshotFile(null)}>\n                    Remove\n                  </button>\n                ) : null}\n              </div>\n              {screenshotPreviewUrl ? (\n                <div className=\"mt-3 overflow-hidden rounded-xl border border-slate-200\">\n                  <Image src={screenshotPreviewUrl} alt=\"Screenshot preview\" width={960} height={540} unoptimized />\n                </div>\n              ) : null}\n            </div>\n\n            <div className=\"flex flex-wrap items-center gap-2\">\n              <button type=\"button\" className=\"button\" onClick={submit} disabled={!canSubmit || status === \"loading\"}>\n                {status === \"loading\" ? \"Sending...\" : \"Send feedback\"}\n              </button>\n              {status === \"error\" ? <span className=\"text-sm text-rose-700\">{errorMessage || \"Could not send feedback.\"}</span> : null}\n            </div>\n          </div>\n        )}\n      </aside>\n    </div>\n  );\n}\n\n\n","\"use client\";\n\nexport type AssistantsOpenState = {\n  mentorOpen: boolean;\n  feedbackOpen: boolean;\n};\n\nconst KEY = \"rn_assistants_open_state_v1\";\n\nexport function readAssistantsOpenState(): AssistantsOpenState {\n  try {\n    const raw = window.sessionStorage.getItem(KEY);\n    if (!raw) return { mentorOpen: false, feedbackOpen: false };\n    const p = JSON.parse(raw);\n    return { mentorOpen: Boolean(p?.mentorOpen), feedbackOpen: Boolean(p?.feedbackOpen) };\n  } catch {\n    return { mentorOpen: false, feedbackOpen: false };\n  }\n}\n\nexport function writeAssistantsOpenState(next: AssistantsOpenState) {\n  try {\n    window.sessionStorage.setItem(KEY, JSON.stringify(next));\n  } catch {\n    // ignore\n  }\n}\n\nexport function enforceOneOpen(next: AssistantsOpenState): AssistantsOpenState {\n  if (next.mentorOpen && next.feedbackOpen) return { mentorOpen: next.mentorOpen, feedbackOpen: false };\n  return next;\n}\n\n\n","\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport { usePathname } from \"next/navigation\";\nimport { LazyMotion, domAnimation, m, useReducedMotion } from \"framer-motion\";\nimport { GraduationCap, LifeBuoy } from \"lucide-react\";\nimport MentorAssistant from \"@/components/assistants/MentorAssistant\";\nimport FeedbackAssistant from \"@/components/assistants/FeedbackAssistant\";\nimport { enforceOneOpen, readAssistantsOpenState, writeAssistantsOpenState } from \"@/components/assistants/state\";\n\ndeclare global {\n  interface Window {\n    __RN_ASSISTANT_SHELL_MOUNTED__?: boolean;\n  }\n}\n\nexport default function AssistantShell() {\n  // Prevent duplicate mounts if multiple layouts include the shell.\n  const [enabled, setEnabled] = useState(false);\n  useEffect(() => {\n    if (typeof window === \"undefined\") return;\n    if (window.__RN_ASSISTANT_SHELL_MOUNTED__) return;\n    window.__RN_ASSISTANT_SHELL_MOUNTED__ = true;\n    setEnabled(true);\n  }, []);\n\n  const reduce = useReducedMotion();\n  const pathname = usePathname() || \"/\";\n\n  const [mentorOpen, setMentorOpen] = useState(false);\n  const [feedbackOpen, setFeedbackOpen] = useState(false);\n\n  useEffect(() => {\n    const persisted = readAssistantsOpenState();\n    setMentorOpen(persisted.mentorOpen);\n    setFeedbackOpen(persisted.feedbackOpen);\n  }, []);\n\n  useEffect(() => {\n    writeAssistantsOpenState(enforceOneOpen({ mentorOpen, feedbackOpen }));\n  }, [mentorOpen, feedbackOpen]);\n\n  useEffect(() => {\n    // One assistant open at a time on small screens.\n    const mq = window.matchMedia(\"(max-width: 640px)\");\n    const enforce = () => {\n      if (!mq.matches) return;\n      if (mentorOpen && feedbackOpen) setFeedbackOpen(false);\n    };\n    enforce();\n    mq.addEventListener?.(\"change\", enforce);\n    return () => mq.removeEventListener?.(\"change\", enforce);\n  }, [mentorOpen, feedbackOpen]);\n\n  const onEsc = (e: React.KeyboardEvent) => {\n    if (e.key === \"Escape\") {\n      setMentorOpen(false);\n      setFeedbackOpen(false);\n    }\n  };\n\n  const drawerMotion = (side: \"left\" | \"right\") => {\n    if (reduce) return {} as any;\n    return {\n      initial: { x: side === \"left\" ? -12 : 12, opacity: 0 },\n      animate: { x: 0, opacity: 1 },\n      exit: { x: side === \"left\" ? -12 : 12, opacity: 0 },\n      transition: { duration: 0.18 },\n    } as any;\n  };\n\n  if (!enabled) return null;\n\n  return (\n    <LazyMotion features={domAnimation}>\n      <div onKeyDown={onEsc}>\n        {/* Launchers */}\n        <div className=\"pointer-events-none fixed inset-x-0 bottom-4 z-40\">\n          <div className=\"mx-auto flex max-w-[1200px] justify-between px-4\">\n            <div className=\"pointer-events-auto\">\n              <button\n                type=\"button\"\n                className=\"inline-flex items-center gap-2 rounded-full border border-slate-200 bg-white px-3 py-2 text-xs font-semibold text-slate-900 shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-400\"\n                aria-label=\"Feedback\"\n                onClick={() => {\n                  setMentorOpen(false);\n                  setFeedbackOpen((v) => !v);\n                }}\n              >\n                <LifeBuoy className=\"h-4 w-4\" aria-hidden=\"true\" />\n                <span className=\"hidden sm:inline\">Feedback</span>\n              </button>\n            </div>\n            <div className=\"pointer-events-auto\">\n              <button\n                type=\"button\"\n                className=\"inline-flex items-center gap-2 rounded-full border border-slate-200 bg-white px-3 py-2 text-xs font-semibold text-slate-900 shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-400\"\n                aria-label=\"Mentor\"\n                onClick={() => {\n                  setFeedbackOpen(false);\n                  setMentorOpen((v) => !v);\n                }}\n              >\n                <GraduationCap className=\"h-4 w-4\" aria-hidden=\"true\" />\n                <span className=\"hidden sm:inline\">Mentor</span>\n              </button>\n            </div>\n          </div>\n        </div>\n\n        <m.div {...drawerMotion(\"left\")}>\n          <FeedbackAssistant open={feedbackOpen} onClose={() => setFeedbackOpen(false)} pageUrl={pathname} pageTitle={typeof document !== \"undefined\" ? document.title || \"\" : \"\"} />\n        </m.div>\n        <m.div {...drawerMotion(\"right\")}>\n          <MentorAssistant open={mentorOpen} onClose={() => setMentorOpen(false)} />\n        </m.div>\n      </div>\n    </LazyMotion>\n  );\n}\n\n\n"],"names":[],"mappings":"0DAEA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QCFA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QAEe,SAAS,EAAa,MAAE,CAAI,CAAE,OAAK,KAAE,CAAG,CAAiD,EACtG,MACE,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAI,CAAA,CACH,KAAM,EACN,UAAU,kPACV,MAAO,GAAO,EACd,QAAS,KAEP,OAAO,UAAU,CAAC,IAAM,CAAA,EAAA,EAAA,2BAAA,AAA2B,IAAI,EACzD,WAEA,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,oBAAY,KAGlC,CDbA,IAAA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QAwBA,SAAS,EAAa,CAAc,CAAE,CAAc,EAElD,MADY,AACL,CADsB,iBAAV,EAAqB,EAAQ,EAAA,EACrC,OAAO,CAAC,kDAAmD,IAAI,IAAI,GAAG,KAAK,CAAC,EAAG,EAC5F,CA6De,SAAS,EAAgB,MACtC,CAAI,SACJ,CAAO,CAIR,EACC,IAAM,EAAW,CAAA,EAAA,EAAA,WAAA,AAAW,KAAM,IAC5B,EAAa,CAAA,EAAA,EAAA,OAAA,AAAO,EAAC,IAAM,GAAG,kBAAiB,GAAU,CAAE,CAAC,EAAS,EAErE,CAAC,EAAU,EAAY,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAc,EAAE,EAClD,CAAC,EAAO,EAAS,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IAC7B,CAAC,EAAQ,EAAU,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAqB,QACnD,CAAC,EAAU,EAAY,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAyB,MAC3D,CAAC,EAAyB,EAA2B,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAgB,MAChF,CAAC,EAAQ,EAAU,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAuB,MACrD,CAAC,EAAkB,EAAoB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAgB,MAClE,CAAC,EAAW,EAAa,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAW,EAAE,EACjD,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAgB,MAIhD,EAAmB,GAAU,qBAAuB,EACpD,UAAE,CAAQ,YAAE,CAAU,CAAE,CAAG,CAAA,EAAA,EAAA,gBAAA,AAAgB,EAAC,EAAkB,GAEpE,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KAUV,EAAG,CAAC,EAAW,EAEf,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KAGV,EAAG,CAAC,EAAY,EAAS,EAEzB,IAAM,EAAM,UACV,IAAM,EAAW,EAAa,EAAO,KACrC,GAAI,CAAC,EAAU,OAGf,GAAI,EAAmB,GAAK,CAAC,EAAY,YACvC,EAAY,AAAC,GAAM,IACd,EACH,CACE,KAAM,SACN,QAAS,kGACX,EACD,EAIH,EAAU,WACV,EAAU,MACV,EAAoB,MAEpB,IAAM,EAAW,AAzHrB,SAAS,EACP,GAAI,CAEF,OAAO,AADO,MAAM,IAAI,CAAC,SAAS,gBAAgB,CAAC,2BAEhD,GAAG,CAAC,AAAC,IAAW,AAAC,CAChB,GAAI,OAAO,GAAG,IAAM,IAAI,IAAI,GAC5B,KAAM,OAAO,GAAG,aAAe,IAAI,IAAI,GAAG,KAAK,CAAC,EAAG,KACnD,MAAO,GAAG,UAAY,KAAO,EAAI,EACnC,CAAC,EACA,MAAM,CAAC,AAAC,GAAM,EAAE,EAAE,EAAI,EAAE,IAAI,CACjC,CAAE,KAAM,CACN,MAAO,EAAE,AACX,CACF,IA6GU,EA3GV,AA2GkB,SA3GT,EACP,GAAI,CACF,IAAM,EAAQ,MAAM,IAAI,CAAC,SAAS,gBAAgB,CAAC,oCACnD,GAAI,EAAM,MAAM,CACd,CADgB,MACT,EACJ,GAAG,CAAC,AAAC,IAAW,AAAC,CAAE,GAAI,OAAO,GAAG,SAAS,QAAU,IAAI,IAAI,GAAI,MAAO,OAAO,GAAG,SAAS,WAAa,IAAI,IAAI,GAAG,KAAK,CAAC,EAAG,KAAK,CAAC,EACjI,MAAM,CAAC,AAAC,GAAM,EAAE,KAAK,EAG1B,OADiB,AACV,MADgB,IAAI,CAAC,SAAS,gBAAgB,CAAC,wBACtC,GAAG,CAAE,AAAD,IAAY,AAAC,CAAE,MAAO,OAAO,GAAG,aAAe,IAAI,IAAI,GAAG,KAAK,CAAC,EAAG,KAAK,CAAC,EAAG,MAAM,CAAC,AAAC,GAAM,EAAE,KAAK,CACvH,CAAE,KAAM,CACN,MAAO,EAAE,AACX,CACF,IA+FU,EAAO,AA1EjB,SAAS,AAAmB,EAAS,GAAI,EACvC,GAAI,CACF,IAAM,EAAO,SAAS,aAAa,CAAC,YAAc,SAAS,aAAa,CAAC,SAAW,SAAS,IAAI,CAEjG,OAAO,AADK,OAAQ,GAAc,WAAc,GAAc,aAAe,IAClE,OAAO,CAAC,kDAAmD,KAAK,OAAO,CAAC,OAAQ,KAAK,IAAI,GAAG,KAAK,CAAC,EAAG,EAClH,CAAE,KAAM,CACN,MAAO,EACT,CACF,EAkEoC,KAEhC,GAAI,CAEF,GAAI,CACF,IAAM,EAAK,MAAM,MAAM,wBAAyB,CAC9C,OAAQ,OACR,QAAS,CAAE,eAAgB,kBAAmB,EAC9C,KAAM,KAAK,SAAS,CAAC,CAAE,OAAQ,eAAgB,WAAY,EAAS,MAAM,CAAE,0BAA2B,UAAW,EACpH,GACM,EAAK,MAAM,EAAG,IAAI,GAAG,KAAK,CAAC,IAAM,MACnC,GAAI,IAAI,CACV,EAAY,CACV,eAAgB,OAAO,EAAG,cAAc,EAAI,GAC5C,oBAAqB,OAAO,EAAG,mBAAmB,EAAI,GACtD,oBAAqB,OAAO,EAAG,mBAAmB,EAAI,GACtD,kBAAmB,OAAO,EAAG,iBAAiB,EAAI,GAClD,OAAQ,OAAO,EAAG,MAAM,EAAI,GAC5B,QAAS,EAAQ,EAAG,OAAO,CAC3B,QAAS,MAAM,OAAO,CAAC,EAAG,OAAO,EAAI,EAAG,OAAO,CAAG,EAAE,AACtD,GACA,EAA8D,UAAnC,OAAO,GAAI,oBAAmC,EAAG,mBAAmB,CAAG,MAClG,EAAa,MAAM,OAAO,CAAC,EAAG,SAAS,EAAI,EAAG,SAAS,CAAG,EAAE,EAEhE,CAAE,KAAM,CAER,CAEA,IAAM,EAAM,MAAM,MAAM,oBAAqB,CAC3C,OAAQ,OACR,QAAS,CAAE,eAAgB,kBAAmB,EAC9C,KAAM,KAAK,SAAS,CAAC,UACnB,EACA,QAAS,EACT,YAAa,UACX,EACA,MAAO,SAAS,KAAK,EAAI,QACzB,WACA,EAEA,OACF,CACF,EACF,GACM,EAAO,MAAM,EAAI,IAAI,GAAG,KAAK,CAAC,IAAM,CAAC,EAAC,CAAC,EACvC,EAAU,GAAM,SAAW,KACjC,GAAI,EAAS,CACX,IAAM,EAAa,OAAO,GAAS,YAAc,GAC3C,EAAoB,OAAO,GAAS,mBAAqB,GACzD,EAAiB,OAAO,GAAS,gBAAkB,GACzD,EAAU,YAAE,oBAAY,EAAmB,OAAQ,KAAK,GAAG,CAAC,EAAG,EAAa,kBAAoB,CAAe,GAC/G,EAAyD,UAArC,OAAO,GAAS,iBAAgC,EAAQ,gBAAgB,CAAG,KACjG,CAGA,IAAM,EAAW,CADmB,MAAM,OAAO,CAAC,GAAM,WAAa,EAAK,SAAS,CAAG,EAAA,AAAE,EAC7D,MAAM,CAAE,AAAD,IAChC,IAAM,EAA0B,UAAnB,OAAO,GAAG,KAAoB,EAAE,IAAI,CAAG,GACpD,GAAI,CAAC,EAAM,OAAO,EAClB,GAAI,CAAC,EAAK,QAAQ,CAAC,KAAM,MAAO,GAChC,IAAM,EAAO,EAAK,KAAK,CAAC,IAAI,CAAC,EAAE,EAAI,GACnC,GAAI,CAAC,EAAM,OAAO,EAClB,IAAM,EAAY,EAAK,KAAK,CAAC,IAAI,CAAC,EAAE,EAAI,SACR,AAChC,IAAI,CAAC,AADa,GAAoB,IAAc,IACpC,AACT,CAAQ,MADQ,GACC,cAAc,CAAC,EACzC,GAEA,EAAY,AAAC,GAAM,IACd,EACH,CAAE,KAAM,OAAQ,QAAS,CAAS,EAClC,CACE,KAAM,SACN,QAC0B,UAAxB,OAAO,GAAM,OACT,EAAK,MAAM,CACX,+IACN,eAAgD,UAAhC,OAAO,GAAM,eAA8B,EAAK,cAAc,MAAG,EACjF,WAAY,GAAM,aAAe,iBAAmB,GAAM,aAAe,oBAAsB,GAAM,aAAe,QAAU,EAAK,UAAU,MAAG,EAChJ,eAAgD,UAAhC,OAAO,GAAM,eAA8B,EAAK,cAAc,CAAG,OACjF,UAAW,EAAS,MAAM,CAAG,OAAW,EACxC,YAAa,MAAM,OAAO,CAAC,GAAM,aAC7B,EAAK,WAAW,CACb,GAAG,CAAC,AAAC,IAAW,AAAC,CAChB,MAAO,EAAa,GAAG,MAAO,KAC9B,UAAW,EAAa,GAAG,UAAW,KACtC,gBAAiB,EAAa,GAAG,gBAAiB,WAAQ,EAC5D,CAAC,EACA,MAAM,CAAC,AAAC,GAAW,EAAE,KAAK,EAAI,EAAE,SAAS,EACzC,KAAK,CAAC,EAAG,QACZ,EACJ,QAAS,MAAM,OAAO,CAAC,GAAM,SACzB,EAAK,OAAO,CACT,GAAG,CAAC,AAAC,IAAY,AAAD,CAAG,MAAO,EAAa,GAAG,MAAO,KAAM,KAAM,EAAa,GAAG,KAAM,KAAM,QAAS,EAAa,GAAG,QAAS,KAAK,CAAC,EACjI,MAAM,CAAE,AAAD,GAAY,EAAE,KAAK,EAAI,EAAE,IAAI,OACvC,EACJ,cAAe,GAAM,eAA+C,UAA9B,OAAO,EAAK,aAAa,CAC3D,CAAE,KAAM,EAAc,EAAK,aAAa,EAAU,KAAM,IAAK,QAAS,EAAc,EAAK,aAAa,EAAU,QAAS,IAAK,EAC9H,KACJ,qBAAsB,MAAM,OAAO,CAAC,GAAM,sBACtC,EAAK,oBAAoB,CAAC,GAAG,CAAC,AAAC,GAAW,EAAa,EAAG,MAAM,MAAM,CAAC,SAAS,KAAK,CAAC,EAAG,QACzF,EACJ,QAAS,GAAM,SAAW,KAC1B,eAAe,CAAQ,GAAM,cAC7B,QAAS,GAAM,SAAW,IAC5B,EACD,EACD,EAAS,GACX,CAAE,KAAM,CACN,EAAY,AAAC,GAAM,IACd,EACH,CACE,KAAM,SACN,QAAS,wIACX,EACD,CACH,QAAU,CACR,EAAU,OACZ,CACF,SAEA,AAAK,EAGH,CAAA,CAHE,CAGF,CAHS,CAGT,IAAA,EAAC,MAAA,CAAI,UAAU,+BACb,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,KAAK,SAAS,UAAU,+BAA+B,aAAW,eAAe,QAAS,IAClG,CAAA,EAAA,EAAA,IAAA,EAAC,QAAA,CAAM,UAAU,uFAAuF,aAAW,0BACjH,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oDACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,aAAa,CAAA,CAAC,UAAU,yBAAyB,cAAY,SAC9D,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,kDAAyC,cAEzD,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,KAAK,SAAS,UAAU,wCAAwC,QAAS,EAAS,aAAW,8BACnG,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAC,CAAA,CAAC,UAAU,UAAU,cAAY,cAIvC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,8FAAqF,oEAIpG,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,2BACQ,IAApB,EAAS,MAAM,CAAS,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,kCAAyB,qCAAuC,KACrG,EAAS,GAAG,CAAC,CAAC,EAAK,IAClB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAEC,UAAW,CAAC,+BAA+B,EAAe,SAAb,EAAI,IAAI,CAAc,2BAA6B,4BAAA,CAA6B,WAE7H,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,wEAA6E,SAAb,EAAI,IAAI,CAAc,MAAQ,WAC/F,WAAb,EAAI,IAAI,CACP,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qDACO,kBAAnB,EAAI,UAAU,CAAuB,iBAAsC,qBAAnB,EAAI,UAAU,CAA0B,mBAAwC,UAAnB,EAAI,UAAU,CAAe,QAAU,iBAE7J,KACJ,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,mDAA2C,EAAI,OAAO,GACpE,EAAI,aAAa,CAAG,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,uCAA8B,uDAAyD,KACxH,EAAI,aAAa,EAAE,QAClB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,2FACb,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,6BAAoB,yCACjC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,oBAAY,EAAI,aAAa,CAAC,OAAO,MAElD,KACH,EAAI,oBAAoB,EAAI,EAAI,oBAAoB,CAAC,MAAM,CAC1D,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iBACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,gDAAuC,2BACtD,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,gEACX,EAAI,oBAAoB,CAAC,KAAK,CAAC,EAAG,GAAG,GAAG,CAAC,AAAC,GACzC,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UAAY,GAAJ,SAIb,KACH,EAAI,OAAO,EAAI,EAAI,OAAO,CAAC,MAAM,CAChC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iBACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,gDAAuC,YACtD,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,0BACX,EAAI,OAAO,CAAC,KAAK,CAAC,EAAG,GAAG,GAAG,CAAC,AAAC,GAC5B,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAgC,UAAU,mCACzC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,+BAA+B,KAAM,EAAE,IAAI,UACrD,EAAE,KAAK,GAET,EAAE,OAAO,CAAG,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,UAAU,2BAAiB,MAAI,EAAE,OAAO,IAAW,OAJ/D,CAAA,EAAG,EAAE,IAAI,CAAC,CAAC,EAAE,EAAE,KAAK,CAAA,CAAE,QASnC,KACH,EAAI,SAAS,EAAI,EAAI,SAAS,CAAC,MAAM,CACpC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iBACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,gDAAwC,EAAI,cAAc,EAAI,sCAC7E,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qCACZ,EAAI,SAAS,CAAC,KAAK,CAAC,EAAG,GAAG,GAAG,CAAC,AAAC,GAC9B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAA0B,KAAM,EAAE,IAAI,CAAE,MAAO,EAAE,KAAK,CAAE,IAAK,EAAE,GAAG,EAAhD,EAAE,IAAI,QAI7B,OAnDC,OAwDX,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,gBACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAY,CAAA,CACX,SAAU,EACV,OAAQ,EACR,KAAM,AAAmC,iBAA5B,EAAuC,CAAE,qBAAsB,CAAwB,EAAI,KACxG,iBAAkB,EAClB,SAAA,CAAW,GAAgC,MAAvB,MAAY,EAAuB,UAAY,GAAY,CAAC,EAAS,OAAO,CAAG,UAAY,UAC/G,UAAW,EACX,OAAO,CAAA,CAAA,MAIV,EAAmB,GAAK,GACvB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,gBACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAa,CAAA,CACZ,iBAAkB,EAClB,eAAgB,EAChB,SAAU,KAAO,EACjB,UAAW,KAAO,MAKxB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,qCACb,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,UAAU,uCAAuC,QAAQ,2BAAkB,wBAG9E,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,sCAA6B,kIAG9C,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,GAAG,kBACH,MAAO,EACP,SAAU,AAAC,GAAM,EAAS,EAAE,MAAM,CAAC,KAAK,EACxC,UAAY,AAAD,IACK,UAAV,EAAE,GAAG,EAAc,GACzB,EACA,UAAU,yHACV,YAAY,+BACZ,UAAW,MAEb,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,KAAK,SACL,UAAU,iBACV,QAAS,EACT,SAAU,CAAC,EAAM,IAAI,IAAM,AAAW,eAAc,EAAmB,GAAK,CAAC,WAEjE,YAAX,EAAuB,cAAgB,kBA/HhC,IAqIpB,0EE1ZA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAEA,IAAM,EAAkB,CAAC,SAAU,SAAU,iBAAkB,QAAQ,CACjE,EAAqB,CAAC,MAAO,UAAW,KAAM,OAAQ,QAAQ,CAGpE,SAAS,EAAa,CAAc,CAAE,CAAc,EAElD,MAAO,CADsB,UAAjB,OAAO,EAAqB,EAAQ,EAAA,EACrC,OAAO,CAAC,kDAAmD,IAAI,IAAI,GAAG,KAAK,CAAC,EAAG,EAC5F,CAEA,SAAS,IACP,GAAI,CACF,IAAM,EAAQ,IAAI,WAAW,IAE7B,OADA,OAAO,MAAM,CAAC,eAAe,CAAC,GACvB,MAAM,IAAI,CAAC,GACf,GAAG,CAAC,AAAC,GAAM,EAAE,QAAQ,CAAC,IAAI,QAAQ,CAAC,EAAG,MACtC,IAAI,CAAC,GACV,CAAE,KAAM,CACN,MAAO,CAAA,EAAG,KAAK,GAAG,GAAG,QAAQ,CAAC,IAAA,EAAM,KAAK,MAAM,GAAG,QAAQ,CAAC,IAAI,KAAK,CAAC,EAAG,IAAA,CAAK,AAC/E,CACF,CAeA,eAAe,EAAc,CAAU,EAErC,GAAI,CADQ,MAAM,EAAK,WAAW,EAAA,EAC1B,UAAU,GAAG,EACnB,MAAU,AAAJ,MAAU,QADyB,gDAG3C,OAAO,MAAM,IAAI,QAAQ,CAAC,EAAS,KACjC,IAAM,EAAS,IAAI,UACnB,GAAO,OAAO,CAAG,IAAM,EAAO,AAAI,MAAM,+BACxC,EAAO,MAAM,CAAG,IAAM,EAAQ,OAAO,EAAO,MAAM,EAAI,KACtD,EAAO,aAAa,CAAC,EACvB,EACF,CASe,SAAS,EAAkB,MACxC,CAAI,SACJ,CAAO,SACP,CAAO,WACP,CAAS,CAMV,EACC,GAAM,CAAC,EAAM,EAAQ,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,EAAS,IAC3B,CAAC,EAAW,EAAa,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAmC,CAAe,CAAC,EAAE,EACzF,CAAC,EAAU,EAAY,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAsC,CAAkB,CAAC,EAAE,EAC7F,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IACjC,CAAC,EAAU,EAAY,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IACnC,CAAC,EAAQ,EAAU,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAA2C,QACzE,CAAC,EAAc,EAAgB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAgB,MAE1D,CAAC,EAAgB,EAAkB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAc,MAC5D,CAAC,EAAsB,EAAwB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAgB,MAE1E,EAAY,CAAA,EAAA,EAAA,OAAA,AAAO,EAAC,IAAM,EAAa,EAAS,MAAM,MAAM,CAAG,EAAG,CAAC,EAAQ,EAEjF,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACR,GAAI,CAAC,EAAgB,OACrB,IAAM,EAAM,IAAI,eAAe,CAAC,GAEhC,OADA,EAAwB,GACjB,IAAM,IAAI,eAAe,CAAC,EACnC,EAAG,CAAC,EAAe,EAEnB,IAAM,EAAS,UACb,IAAM,EAAe,EAAa,EAAS,MAC3C,GAAK,CAAD,EACJ,EAAU,SADS,EAEnB,EAAgB,MAChB,GAAI,CACF,MA1CE,EA0CI,EACJ,GAAkB,EAAe,IAAI,CAAC,UAAU,CAAC,UAC7C,CACE,KAAM,EAAa,EAAe,IAAI,CAAE,KACxC,KAAM,EAAa,EAAe,IAAI,CAAE,IACxC,QAAS,MAAM,EAAc,EAC/B,EACA,KAEA,EAAU,CACd,KAAM,EAAa,EAAM,KAAO,aAChC,WACA,EACA,SAAU,EAAa,EAAU,KACjC,aAAA,EAzDA,AAyDe,EAzDX,EAyD6B,EAzDP,OACtB,EADa,AAyDwC,EAxD9B,KAE1B,AADO,CAAC,EAAW,CADH,AACI,UAAU,EAAE,AAuDc,EAvDL,CAAC,CAAC,CAAG,GAAI,EAAI,CAAC,SAAS,EAAE,EAAA,CAAG,CAAG,GAAI,EAAI,CAAC,aAAa,EAAE,EAAA,CAAG,CAAG,GAAG,CAAC,MAAM,CAAC,SAC3G,IAAI,CAAC,MAuDZ,QAAS,EACT,UACA,YACA,UAAW,AAxFnB,SAAS,EACP,GAAI,CACF,IAAM,EAAM,2BACN,EAAW,OAAO,cAAc,CAAC,OAAO,CAAC,GAC/C,GAAI,EAAU,OAAO,EACrB,IAAM,EAAK,IAEX,OADA,OAAO,cAAc,CAAC,OAAO,CAAC,EAAK,GAC5B,CACT,CAAE,KAAM,CACN,OAAO,GACT,CACF,eA8EQ,CACF,EACM,EAAM,MAAM,MAAM,gBAAiB,CACvC,OAAQ,OACR,QAAS,CAAE,eAAgB,kBAAmB,EAC9C,KAAM,KAAK,SAAS,CAAC,EACvB,GACM,EAAO,MAAM,EAAI,IAAI,GAAG,KAAK,CAAC,IAAM,AAAC,GAAC,CAAC,EAC7C,GAAI,CAAC,EAAI,EAAE,CAAE,CACX,EAAU,SACV,EAAgB,AAAyB,iBAAlB,GAAM,QAAuB,EAAK,OAAO,CAAG,4BACnE,MACF,CACA,EAAU,WACV,EAAW,IACX,EAAY,IACZ,EAAkB,KACpB,CAAE,MAAO,EAAU,CACjB,EAAU,SACV,EAAgB,GAAK,SAAW,2BAClC,EACF,SAyBA,AAAK,EAGH,CAAA,CAHE,CAGF,CAHS,CAGT,IAAA,EAAC,MAAA,CAAI,UAAU,+BACb,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,KAAK,SAAS,UAAU,+BAA+B,aAAW,iBAAiB,QAAS,IACpG,CAAA,EAAA,EAAA,IAAA,EAAC,QAAA,CAAM,UAAU,sFAAsF,aAAW,4BAChH,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oDACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CAAC,UAAU,yBAAyB,cAAY,SACzD,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,kDAAyC,gBAEzD,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,KAAK,SAAS,UAAU,wCAAwC,QAAS,EAAS,aAAW,gCACnG,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAC,CAAA,CAAC,UAAU,UAAU,cAAY,cAI3B,YAAX,EACC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,uDAA8C,gDAE3D,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,4BACb,CAAA,EAAA,EAAA,IAAA,EAAC,QAAA,CAAM,UAAU,YAAY,QAAQ,0BACnC,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,gDAAuC,SACvD,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,GAAG,gBACH,MAAO,EACP,SAAU,AAAC,GAAM,EAAQ,EAAE,MAAM,CAAC,KAAK,EACvC,UAAU,yHACV,YAAY,gBAIhB,CAAA,EAAA,EAAA,IAAA,EAAC,QAAA,CAAM,UAAU,YAAY,QAAQ,2BACnC,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,gDAAuC,sCACvD,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,GAAG,iBACH,MAAO,EACP,SAAU,AAAC,GAAM,EAAa,EAAE,MAAM,CAAC,KAAK,EAC5C,UAAU,kIAET,EAAgB,GAAG,CAAC,AAAC,GACpB,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAiB,MAAO,WACtB,GADU,SAOnB,CAAA,EAAA,EAAA,IAAA,EAAC,QAAA,CAAM,UAAU,YAAY,QAAQ,8BACnC,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,gDAAuC,SACvD,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,GAAG,oBACH,MAAO,EACP,SAAU,AAAC,GAAM,EAAY,EAAE,MAAM,CAAC,KAAK,EAC3C,UAAU,kIAET,EAAmB,GAAG,CAAC,AAAC,GACvB,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAiB,MAAO,WACtB,GADU,SAOnB,CAAA,EAAA,EAAA,IAAA,EAAC,QAAA,CAAM,UAAU,YAAY,QAAQ,6BACnC,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,gDAAuC,kBACvD,CAAA,EAAA,EAAA,GAAA,EAAC,WAAA,CACC,GAAG,mBACH,MAAO,EACP,SAAU,AAAC,GAAM,EAAW,EAAE,MAAM,CAAC,KAAK,EAC1C,KAAM,EACN,UAAW,KACX,UAAU,yHACV,YAAY,2DACZ,QAAQ,CAAA,CAAA,OAIZ,CAAA,EAAA,EAAA,IAAA,EAAC,QAAA,CAAM,UAAU,YAAY,QAAQ,8BACnC,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,gDAAuC,2BACvD,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,GAAG,oBACH,MAAO,EACP,SAAU,AAAC,GAAM,EAAY,EAAE,MAAM,CAAC,KAAK,EAC3C,UAAU,yHACV,YAAY,qCACZ,UAAW,SAIf,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sDA3FzB,GArBqB,CACnB,WAAY,AAAC,IACX,EAAE,cAAc,GAChB,EAAE,eAAe,EACnB,EACA,OAAQ,AAAC,IACP,EAAE,cAAc,GAChB,EAAE,eAAe,GACjB,IAAM,EAAO,EAAE,YAAY,CAAC,KAAK,EAAE,CAAC,EAAE,CACtC,GAAK,CAAD,EACJ,GADW,AACP,CAAC,EAAK,IAAI,CAAC,UAAU,CAAC,UAAW,YACnC,EAAgB,gCAGlB,GAAI,EAAK,IAAI,GAAG,EAAsB,YACpC,EAAgB,wDAGlB,EAAgB,MAChB,EAAkB,GACpB,CACF,CA2FgF,GAAG,QACvE,CAAA,EAAA,CADmF,CACnF,IAAA,EAAC,MAAA,CAAI,UAAU,yEACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAS,CAAA,CAAC,UAAU,UAAU,cAAY,SAAS,2BAGtD,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,wCAA8B,iDAA+C,KAAK,KAAK,CAAC,KAA6B,UAClI,CAAA,EAAA,EAAA,GAD4H,CAC5H,EAAC,MAAA,CAAI,UAAU,mDACb,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,KAAK,OACL,OAAO,UACP,aAAW,oBACX,SAAU,AAAC,IACT,IAAM,EAAO,EAAE,MAAM,CAAC,KAAK,EAAE,CAAC,EAAE,CAChC,GAAK,CAAD,EACJ,GADW,AACP,CAAC,EAAK,IAAI,CAAC,UAAU,CAAC,UAAW,YACnC,EAAgB,gCAGlB,GAAI,EAAK,IAAI,CArQJ,EAqQO,EAAsB,YACpC,EAAgB,wDAGlB,EAAgB,MAChB,EAAkB,GACpB,IAED,EACC,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,KAAK,SAAS,UAAU,sDAAsD,QAAS,IAAM,EAAkB,eAAO,WAG5H,QAEL,EACC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,mEACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAK,CAAA,CAAC,IAAK,EAAsB,IAAI,qBAAqB,MAAO,IAAK,OAAQ,IAAK,WAAW,CAAA,CAAA,MAE/F,QAGN,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8CACb,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,KAAK,SAAS,UAAU,SAAS,QAAS,EAAQ,SAAU,CAAC,GAAa,AAAW,uBAC/E,YAAX,EAAuB,aAAe,kBAE7B,UAAX,EAAqB,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,iCAAyB,GAAgB,6BAAqC,iBApI9G,IA2IpB,iDCtSA,IAAM,EAAM,8BAEL,SAAS,IACd,GAAI,CACF,IAAM,EAAM,OAAO,cAAc,CAAC,OAAO,CAAC,GAC1C,GAAI,CAAC,EAAK,MAAO,CAAE,YAAY,EAAO,cAAc,CAAM,EAC1D,IAAM,EAAI,KAAK,KAAK,CAAC,GACrB,MAAO,CAAE,YAAY,CAAQ,GAAG,WAAa,cAAc,CAAQ,GAAG,YAAc,CACtF,CAAE,KAAM,CACN,MAAO,CAAE,WAAY,GAAO,cAAc,CAAM,CAClD,CACF,CAEO,SAAS,EAAyB,CAAyB,EAChE,GAAI,CACF,OAAO,cAAc,CAAC,OAAO,CAAC,EAAK,KAAK,SAAS,CAAC,GACpD,CAAE,KAAM,CAER,CACF,CAEO,SAAS,EAAe,CAAyB,SACtD,AAAI,EAAK,UAAU,EAAI,EAAK,YAAY,CAAS,CAAP,AAAS,WAAY,EAAK,UAAU,CAAE,cAAc,CAAM,EAC7F,CACT,kJC7BA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,iBAQe,SAAS,IAEtB,GAAM,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACvC,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KAKV,EAAG,EAAE,EAEL,IAAM,EAAS,CAAA,EAAA,EAAA,gBAAA,AAAgB,IACzB,EAAW,CAAA,EAAA,EAAA,WAAA,AAAW,KAAM,IAE5B,CAAC,EAAY,EAAc,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IACvC,CAAC,EAAc,EAAgB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GAEjD,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACR,IAAM,EAAY,CAAA,EAAA,EAAA,uBAAuB,AAAvB,IAClB,EAAc,EAAU,UAAU,EAClC,EAAgB,EAAU,YAAY,CACxC,EAAG,EAAE,EAEL,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACR,CAAA,EAAA,EAAA,wBAAA,AAAwB,EAAC,CAAA,EAAA,EAAA,cAAA,AAAc,EAAC,YAAE,EAAY,cAAa,GACrE,EAAG,CAAC,EAAY,EAAa,EAE7B,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KAER,IAAM,EAAK,OAAO,UAAU,CAAC,sBACvB,EAAU,KACT,EAAG,OAAO,EAAE,AACb,GAAc,GAAc,EAAgB,GAClD,EAGA,OAFA,IACA,EAAG,gBAAgB,GAAG,SAAU,GACzB,IAAM,EAAG,mBAAmB,GAAG,SAAU,EAClD,EAAG,CAAC,EAAY,EAAa,EAS7B,IAAM,EAAe,AAAC,GACpB,AAAI,EAAe,CAAC,EACb,CACL,EAFU,MAED,CAAE,EAAY,SAAT,EAAkB,CAAC,GAAK,GAAI,QAAS,CAAE,EACrD,QAAS,CAAE,EAAG,EAAG,QAAS,CAAE,EAC5B,KAAM,CAAE,EAAY,SAAT,EAAkB,CAAC,GAAK,GAAI,QAAS,CAAE,EAClD,WAAY,CAAE,SAAU,GAAK,CAC/B,SAGF,AAAK,EAGH,CAAA,CAHE,CAGF,EAAA,EAHY,CAGZ,EAAC,EAAA,UAAU,CAAA,CAAC,SAAU,EAAA,YAAY,UAChC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UArBK,AAAC,CAqBK,GApBJ,UAAU,CAApB,EAAE,GAAG,GACP,GAAc,GACd,EAAgB,IAEpB,YAkBM,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,6DACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,6DACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,+BACb,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CACC,KAAK,SACL,UAAU,qNACV,aAAW,WACX,QAAS,KACP,GAAc,GACd,EAAgB,AAAC,GAAM,CAAC,EAC1B,YAEA,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CAAC,UAAU,UAAU,cAAY,SAC1C,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,4BAAmB,kBAGvC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,+BACb,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CACC,KAAK,SACL,UAAU,qNACV,aAAW,SACX,QAAS,KACP,GAAgB,GAChB,EAAc,AAAC,GAAM,CAAC,EACxB,YAEA,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,aAAa,CAAA,CAAC,UAAU,UAAU,cAAY,SAC/C,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,4BAAmB,qBAM3C,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAC,CAAC,GAAG,CAAA,CAAE,GAAG,EAAa,OAAO,UAC7B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAiB,CAAA,CAAC,KAAM,EAAc,QAAS,IAAM,GAAgB,GAAQ,QAAS,EAAU,UAA+B,aAApB,OAAO,UAA2B,SAAS,KAAK,EAAI,KAAK,EAEvK,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAC,CAAC,GAAG,CAAA,CAAE,GAAG,EAAa,QAAQ,UAC9B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAe,CAAA,CAAC,KAAM,EAAY,QAAS,IAAM,GAAc,YA3CnD,IAgDvB"}}]
}