;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="8c4743eb-fc8a-9630-544e-149ef7c11526")}catch(e){}}();
module.exports=[850388,a=>{"use strict";var b=a.i(508171),c=a.i(127669),d=a.i(663635),d=d,e=a.i(613483),f=a.i(745001),g=a.i(524911),h=a.i(324920),i=a.i(530548),j=a.i(887358),k=a.i(742093),l=a.i(739362),m=a.i(190896),n=a.i(698887),o=a.i(778529),p=a.i(742480);let q=new Set(["a","an","the","and","or","but","of","to","in","on","for","is","are","was","were","be","been","am","this","that","it","as","by","at","with","from"]);function r(a){return a.toLowerCase().replace(/[^a-z0-9\s]/g," ").split(/\s+/).filter(a=>a.length>1&&!q.has(a))}function s(a,b){let c=r(a),d=Array(b.size).fill(0);for(let a of c){let c=b.get(a)??b.get("<unk>")??1;d[c]+=1}return d}function t(){let[a,q]=(0,c.useState)(null),[t,u]=(0,c.useState)(""),[v,w]=(0,c.useState)(""),[x,y]=(0,c.useState)(.7),[z,A]=(0,c.useState)(.15),[B,C]=(0,c.useState)(!1),[D,E]=(0,c.useState)({status:"idle"}),[F,G]=(0,c.useState)([]),[H,I]=(0,c.useState)(""),[J,K]=(0,c.useState)(null),[L,M]=(0,c.useState)([]),[N,O]=(0,c.useState)(null),[P,Q]=(0,c.useState)(""),[R,S]=(0,c.useState)(""),T=(0,c.useCallback)(a=>{let{safeFiles:b,errors:c}=(0,h.validateUpload)(a.target.files,{maxBytes:8388608,allowedExtensions:[".csv"]});if(c.length)return void E({status:"error",message:c.join(" ")});let d=b[0];d&&(E({status:"preparing"}),G([]),I(""),K(null),M([]),O(null),Q(""),S(""),g.default.parse(d,{header:!0,skipEmptyLines:!0,dynamicTyping:!0,complete:a=>{let b=a.data;if(!b||0===b.length)return void E({status:"error",message:"The CSV file appears to be empty or malformed."});let c=Object.keys(b[0]);c.length?(q({columns:c,rows:b}),u(c[0]),w(c[c.length-1]),E({status:"idle"})):E({status:"error",message:"Could not detect any columns in the CSV file."})},error:a=>{E({status:"error",message:`Failed to parse CSV: ${a.message}`})}}))},[]),U=(0,c.useMemo)(()=>a&&t&&v&&x>0&&z>=0&&x+z<1,[a,t,v,x,z]),V=(0,c.useCallback)(async()=>{if(a&&U)try{let b,c;E({status:"training",epoch:0,totalEpochs:25}),G([]),I(""),S("");let d=a.rows,e=[],g=[];for(let a of d){let b=a[t],c=a[v],d=null==b?"":String(b).trim(),f=null==c?"":String(c).trim();0!==d.length&&0!==f.length&&(e.push(d),g.push(f))}if(e.length<8)return void E({status:"error",message:"There are not enough non empty text and label rows to train. Try a richer dataset."});let{vocab:h}=function(a,b){let c=new Map;for(let b of a)for(let a of r(b))c.set(a,(c.get(a)??0)+1);let d=Array.from(c.entries()).sort((a,b)=>b[1]-a[1]).slice(0,1998),e=new Map,f=[];e.set("<pad>",0),f.push("<pad>"),e.set("<unk>",1),f.push("<unk>");let g=2;for(let[a]of d)e.set(a,g),f.push(a),g+=1;return{vocab:e,indexToToken:f}}(e,0);O(h);let i=e.map(a=>s(a,h)),{encoded:j,classes:k}=(b=Array.from(new Set(g)),c=new Map,b.forEach((a,b)=>c.set(a,b)),{encoded:g.map(a=>c.get(a)??0),classes:b});M(k);let l=i.map((a,b)=>({x:a,y:j[b]})),{train:m,val:n,test:o}=function(a,b,c){let d=[...a];for(let a=d.length-1;a>0;a-=1){let b=Math.floor(Math.random()*(a+1));[d[a],d[b]]=[d[b],d[a]]}let e=Math.floor(d.length*b),f=Math.floor(d.length*c),g=d.slice(0,e),h=d.slice(e,e+f);return{train:g,val:h,test:d.slice(e+f)}}(l,x,z);if(m.length<2*k.length)return void E({status:"error",message:"Training set is too small after splitting. Increase train ratio or add more rows."});let p=a=>f.tensor2d(a.map(a=>a.x)),q=a=>f.tensor1d(a.map(a=>a.y),"int32"),u=p(m),w=q(m),y=p(n),A=q(n),B=p(o),C=q(o),D=i[0].length,F=k.length,H=f.sequential();H.add(f.layers.dense({inputShape:[D],units:64,activation:"relu"})),H.add(f.layers.dropout({rate:.2})),H.add(f.layers.dense({units:32,activation:"relu"})),H.add(f.layers.dense({units:F,activation:"softmax"})),H.compile({optimizer:f.train.adam(.001),loss:"sparseCategoricalCrossentropy",metrics:["accuracy"]});let J=Math.max(8,Math.floor(m.length/10)),L=[];await H.fit(u,w,{epochs:25,batchSize:J,validationData:[y,A],callbacks:{onEpochEnd:async(a,b)=>{let c=b?.loss??0,d=b?.acc??b?.accuracy??0;L.push({epoch:a+1,loss:c,accuracy:d}),G([...L]),E({status:"training",epoch:a+1,totalEpochs:25})}}});let N=H.evaluate(B,C),P=0,Q=0;Array.isArray(N)?(P=N[0].arraySync()??0,Q=N[1].arraySync()??0,N.forEach(a=>a.dispose())):(P=N.arraySync()??0,N.dispose());let R=`Training samples: ${m.length}, validation samples: ${n.length}, test samples: ${o.length}. Final test loss: ${P.toFixed(4)}. Approximate test accuracy: ${Q.toFixed(4)}. Classes learned: ${k.join(", ")}.`;I(R),u.dispose(),w.dispose(),y.dispose(),A.dispose(),B.dispose(),C.dispose(),K(H),E({status:"trained",summary:R})}catch(a){E({status:"error",message:"Something went wrong during training. Try a smaller dataset or adjust your columns."})}},[a,U,t,v,x,z]),W=(0,c.useMemo)(()=>F.map(a=>({epoch:a.epoch,loss:a.loss,accuracy:a.accuracy})),[F]),X=(0,c.useMemo)(()=>"idle"===D.status?"Ready. Upload a CSV with a text column and a label column.":"preparing"===D.status?"Parsing CSV and preparing texts.":"training"===D.status?`Training epoch ${D.epoch} of ${D.totalEpochs}.`:"trained"===D.status?"Training complete. Try new text and explore the predictions.":"error"===D.status?`Error: ${D.message}`:"",[D]),Y=(0,c.useCallback)(async()=>{if(!J||!N||0===L.length)return void S("Train the classifier and upload a dataset before trying predictions.");if(!P.trim())return void S("Type a short text example first.");try{let a=s(P,N),b=f.tensor2d([a]),c=await J.predict(b),d=(await c.array())[0];if(!d||0===d.length){S("Could not compute a prediction for this text."),b.dispose(),c.dispose();return}let e=0,g=d[0];for(let a=1;a<d.length;a+=1)d[a]>g&&(g=d[a],e=a);let h=L[e]??"(unknown)",i=d.map((a,b)=>({label:L[b],p:a})).sort((a,b)=>b.p-a.p).slice(0,3),j=[`Predicted label: ${h} (confidence ${g.toFixed(3)}).`,"Top classes:",...i.map(a=>`â€¢ ${a.label}: ${a.p.toFixed(3)}`)];S(j.join("\n")),b.dispose(),c.dispose()}catch(a){S("Could not compute a prediction for this text. Try a shorter example.")}},[J,N,L,P]),Z=a?.columns??[];return(0,b.jsxs)(o.AiToolCard,{id:"text-classifier-lab-title",title:"Text classification playground",icon:(0,b.jsx)(d.default,{className:"h-4 w-4","aria-hidden":"true"}),description:"Upload a CSV with text and labels, train a classifier in your browser and test how it behaves on new examples.",whatThisTellsYou:["How a simple bag-of-words text model behaves when you change the dataset, label balance, and split ratios.","Whether your labels are learnable from the text or whether you need better features or cleaner labeling."],interpretationTips:["Accuracy can look good on imbalanced labels. Check whether minority classes get learned.","Use the prediction probabilities as a hint, not as certainty. Low confidence often means the model has not seen enough examples."],limitations:["This is a small, in-browser model for learning. It is not a production classifier and it is not robust to adversarial inputs.","Random shuffling means results can vary slightly between runs. For reproducible benchmarking, fix a seed in a real training pipeline."],children:[(0,b.jsx)(p.SecurityBanner,{}),(0,b.jsxs)("div",{className:"grid gap-6 lg:grid-cols-3",children:[(0,b.jsxs)("div",{className:"space-y-4 rounded-2xl border border-slate-100 bg-slate-50/60 p-4 lg:col-span-1",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{htmlFor:"text-csv-upload",className:"block text-xs font-semibold text-slate-700",children:"Upload CSV file"}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)("label",{htmlFor:"text-csv-upload",className:"inline-flex cursor-pointer items-center gap-2 rounded-2xl border border-slate-200 bg-white px-3 py-1.5 text-xs font-medium text-slate-700 shadow-sm hover:border-sky-300 hover:text-sky-700",children:[(0,b.jsx)(e.UploadCloud,{className:"h-4 w-4","aria-hidden":"true"}),(0,b.jsx)("span",{children:"Choose file"})]}),(0,b.jsx)("input",{id:"text-csv-upload",type:"file",accept:".csv,text/csv",className:"hidden",onChange:T}),(0,b.jsx)("span",{className:"text-sm text-slate-500",children:"CSV only, max 8MB. Include at least one text column and one label column."})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{htmlFor:"text-column",className:"block text-xs font-semibold text-slate-700",children:"Text column"}),(0,b.jsxs)("select",{id:"text-column",value:t,onChange:a=>u(a.target.value),className:"w-full rounded-2xl border border-slate-200 bg-white px-3 py-1.5 text-xs text-slate-800 focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200",children:[(0,b.jsx)("option",{value:"",children:"Select text column"}),Z.map(a=>(0,b.jsx)("option",{value:a,children:a},a))]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{htmlFor:"label-column",className:"block text-xs font-semibold text-slate-700",children:"Label column"}),(0,b.jsxs)("select",{id:"label-column",value:v,onChange:a=>w(a.target.value),className:"w-full rounded-2xl border border-slate-200 bg-white px-3 py-1.5 text-xs text-slate-800 focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200",children:[(0,b.jsx)("option",{value:"",children:"Select label column"}),Z.map(a=>(0,b.jsx)("option",{value:a,children:a},a))]}),(0,b.jsx)("p",{className:"text-sm text-slate-500",children:"Labels can be things like spam or ham, positive or negative, bug, feature or question and similar categories."})]}),(0,b.jsxs)("details",{className:"rounded-2xl border border-slate-200 bg-white p-3",open:B,onToggle:a=>C(a.target.open),children:[(0,b.jsx)("summary",{className:"cursor-pointer text-xs font-semibold text-slate-900",children:"Advanced settings"}),(0,b.jsxs)("div",{className:"mt-3 space-y-2",children:[(0,b.jsx)("p",{className:"text-xs font-semibold text-slate-700",children:"Data split ratios"}),(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-2 text-sm text-slate-600",children:[(0,b.jsx)("span",{children:"Train"}),(0,b.jsx)("input",{type:"number",min:.5,max:.9,step:.05,value:x,onChange:a=>y(Number(a.target.value)),className:"w-14 rounded-2xl border border-slate-200 bg-white px-1.5 py-0.5 text-sm text-slate-800 focus:border-sky-400 focus:outline-none focus:ring-1 focus:ring-sky-200"}),(0,b.jsx)("span",{children:"Validation"}),(0,b.jsx)("input",{type:"number",min:.05,max:.4,step:.05,value:z,onChange:a=>A(Number(a.target.value)),className:"w-14 rounded-2xl border border-slate-200 bg-white px-1.5 py-0.5 text-sm text-slate-800 focus:border-sky-400 focus:outline-none focus:ring-1 focus:ring-sky-200"}),(0,b.jsxs)("span",{children:["Test auto set to ",Math.max(0,1-x-z).toFixed(2)]})]})]})]}),(0,b.jsx)("button",{type:"button",onClick:V,disabled:!U||"training"===D.status,className:"inline-flex items-center justify-center rounded-2xl bg-slate-900 px-3 py-1.5 text-xs font-semibold text-white shadow-sm hover:bg-slate-800 disabled:cursor-not-allowed disabled:bg-slate-300",children:"training"===D.status?"Training...":"Train text classifier"}),(0,b.jsx)("p",{className:"text-sm text-slate-500",children:X})]}),(0,b.jsxs)("div",{className:"space-y-4 rounded-2xl border border-slate-100 bg-slate-50/60 p-4 lg:col-span-1",children:[(0,b.jsx)("p",{className:"text-xs font-semibold text-slate-700",children:"Training progress"}),(0,b.jsx)("div",{className:"h-48 rounded-2xl border border-slate-200 bg-white px-3 py-2",children:0===W.length?(0,b.jsx)("p",{className:"text-sm text-slate-500",children:"The learning curve will appear here once training begins."}):(0,b.jsx)(n.ResponsiveContainer,{width:"100%",height:"100%",children:(0,b.jsxs)(i.LineChart,{data:W,children:[(0,b.jsx)(k.XAxis,{dataKey:"epoch",tick:{fontSize:10},label:{value:"Epoch",position:"insideBottom",offset:-4,fontSize:10}}),(0,b.jsx)(l.YAxis,{tick:{fontSize:10},label:{value:"Loss and accuracy",angle:-90,position:"insideLeft",fontSize:10}}),(0,b.jsx)(m.Tooltip,{contentStyle:{fontSize:10,borderRadius:12,padding:8}}),(0,b.jsx)(j.Line,{type:"monotone",dataKey:"loss",stroke:"#94a3b8",strokeWidth:1.6,dot:!1,name:"Loss"}),(0,b.jsx)(j.Line,{type:"monotone",dataKey:"accuracy",stroke:"#0f766e",strokeWidth:1.6,dot:!1,name:"Accuracy"})]})})}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("p",{className:"text-xs font-semibold text-slate-700",children:"Evaluation summary"}),(0,b.jsx)("div",{className:"rounded-2xl border border-slate-200 bg-white p-3 text-sm text-slate-700 min-h-[64px] whitespace-pre-line",children:H||"Metrics will appear here once the classifier has been trained."})]})]}),(0,b.jsxs)("div",{className:"space-y-4 rounded-2xl border border-slate-100 bg-slate-50/60 p-4 lg:col-span-1",children:[(0,b.jsx)("p",{className:"text-xs font-semibold text-slate-700",children:"Try a new text"}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("textarea",{value:P,onChange:a=>Q(a.target.value),rows:5,className:"w-full rounded-2xl border border-slate-200 bg-white px-3 py-2 text-xs text-slate-800 focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200",placeholder:"Paste or type a short example, such as an email, support ticket or short review."}),(0,b.jsx)("button",{type:"button",onClick:Y,disabled:!J,className:"inline-flex items-center justify-center rounded-2xl bg-emerald-600 px-3 py-1.5 text-xs font-semibold text-white shadow-sm hover:bg-emerald-500 disabled:bg-slate-300 disabled:cursor-not-allowed",children:"Classify text"})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("p",{className:"text-xs font-semibold text-slate-700",children:"Prediction output"}),(0,b.jsx)("div",{className:"rounded-2xl border border-slate-200 bg-white p-3 text-sm text-slate-700 min-h-[64px] whitespace-pre-line",children:R||"Your classification result will appear here, including the predicted label and top class probabilities."}),(0,b.jsx)("p",{className:"text-sm text-slate-500",children:"This lab is for learning. It shows how text and labels become a real classifier and why evaluation metrics matter."})]})]})]})]})}a.s(["TextClassifierLab",()=>t],850388)},373389,a=>{a.n(a.i(850388))}];

//# debugId=8c4743eb-fc8a-9630-544e-149ef7c11526
//# sourceMappingURL=src_components_tools_ai_TextClassifierLab_tsx_2e5d9187._.js.map