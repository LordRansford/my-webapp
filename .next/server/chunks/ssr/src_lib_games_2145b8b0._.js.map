{
  "version": 3,
  "sources": [],
  "debugId": "f9d9ea12-93db-5af6-2c44-3cd36dde3baf",
  "sections": [
    {"offset": {"line": 1, "column": 0}, "map": {"version":3,"sources":["../../../../src/lib/games/framework/InputLayer.ts","../../../../src/lib/games/framework/useReducedMotion.ts","../../../../src/lib/games/games/grid-racer/GridRacer.tsx","../../../../src/lib/games/framework/RenderingLayer.ts"],"sourcesContent":["/**\n * Input Layer - Unified keyboard and touch input handling\n * \n * Provides:\n * - Keyboard mapping for desktop\n * - Touch gestures and on-screen controls for mobile\n * - Consistent pause/resume/quit behavior\n * - Event normalization\n */\n\nexport type InputEvent = {\n  type: \"keyboard\" | \"touch\" | \"mouse\";\n  action: string;\n  timestamp: number;\n  data?: unknown;\n};\n\nexport type InputHandler = (event: InputEvent) => void;\n\nexport class InputLayer {\n  private handlers: Map<string, InputHandler[]> = new Map();\n  private isEnabled: boolean = true;\n  private touchStartPos: { x: number; y: number } | null = null;\n  private readonly SWIPE_THRESHOLD = 50; // pixels\n  private keyboardHandler: ((e: KeyboardEvent) => void) | null = null;\n  private touchStartHandler: ((e: TouchEvent) => void) | null = null;\n  private touchEndHandler: ((e: TouchEvent) => void) | null = null;\n\n  constructor() {\n    // Don't set up listeners in constructor - let components do it via setup methods\n  }\n\n  /**\n   * Register handler for specific action\n   */\n  on(action: string, handler: InputHandler): () => void {\n    if (!this.handlers.has(action)) {\n      this.handlers.set(action, []);\n    }\n    this.handlers.get(action)!.push(handler);\n\n    // Return unsubscribe function\n    return () => {\n      const handlers = this.handlers.get(action);\n      if (handlers) {\n        const index = handlers.indexOf(handler);\n        if (index > -1) {\n          handlers.splice(index, 1);\n        }\n      }\n    };\n  }\n\n  /**\n   * Enable/disable input\n   */\n  setEnabled(enabled: boolean): void {\n    this.isEnabled = enabled;\n  }\n\n  /**\n   * Setup keyboard listeners (call from component useEffect)\n   */\n  setupKeyboardListeners(): () => void {\n    if (typeof window === \"undefined\") return () => {};\n\n    this.keyboardHandler = (e: KeyboardEvent) => {\n      if (!this.isEnabled) return;\n\n      const action = this.mapKeyToAction(e.key, e);\n      if (action) {\n        this.emit(action, {\n          type: \"keyboard\",\n          action,\n          timestamp: Date.now(),\n          data: { key: e.key, code: e.code, modifiers: this.getModifiers(e) },\n        });\n      }\n    };\n\n    window.addEventListener(\"keydown\", this.keyboardHandler);\n    return () => {\n      if (this.keyboardHandler) {\n        window.removeEventListener(\"keydown\", this.keyboardHandler);\n        this.keyboardHandler = null;\n      }\n    };\n  }\n\n  /**\n   * Setup touch listeners (call from component useEffect)\n   */\n  setupTouchListeners(): () => void {\n    if (typeof window === \"undefined\") return () => {};\n\n    this.touchStartHandler = (e: TouchEvent) => {\n      if (!this.isEnabled) return;\n      const touch = e.touches[0];\n      if (touch) {\n        this.touchStartPos = { x: touch.clientX, y: touch.clientY };\n      }\n    };\n\n    this.touchEndHandler = (e: TouchEvent) => {\n      if (!this.isEnabled || !this.touchStartPos) return;\n\n      const touch = e.changedTouches[0];\n      if (!touch) return;\n\n      const deltaX = touch.clientX - this.touchStartPos.x;\n      const deltaY = touch.clientY - this.touchStartPos.y;\n      const distance = Math.sqrt(deltaX * deltaX + deltaY * deltaY);\n\n      if (distance > this.SWIPE_THRESHOLD) {\n        const action = this.detectSwipe(deltaX, deltaY);\n        if (action) {\n          this.emit(action, {\n            type: \"touch\",\n            action,\n            timestamp: Date.now(),\n            data: { deltaX, deltaY, distance },\n          });\n        }\n      } else {\n        // Tap\n        this.emit(\"tap\", {\n          type: \"touch\",\n          action: \"tap\",\n          timestamp: Date.now(),\n          data: { x: touch.clientX, y: touch.clientY },\n        });\n      }\n\n      this.touchStartPos = null;\n    };\n\n    window.addEventListener(\"touchstart\", this.touchStartHandler, { passive: true });\n    window.addEventListener(\"touchend\", this.touchEndHandler, { passive: true });\n\n    return () => {\n      if (this.touchStartHandler) {\n        window.removeEventListener(\"touchstart\", this.touchStartHandler);\n        this.touchStartHandler = null;\n      }\n      if (this.touchEndHandler) {\n        window.removeEventListener(\"touchend\", this.touchEndHandler);\n        this.touchEndHandler = null;\n      }\n    };\n  }\n\n  /**\n   * Map keyboard key to game action\n   */\n  private mapKeyToAction(key: string, event: KeyboardEvent): string | null {\n    // Standard game controls\n    const keyMap: Record<string, string> = {\n      ArrowUp: \"move-up\",\n      ArrowDown: \"move-down\",\n      ArrowLeft: \"move-left\",\n      ArrowRight: \"move-right\",\n      \" \": \"action\", // Spacebar\n      Enter: \"confirm\",\n      Escape: \"pause\",\n      \"p\": \"pause\",\n      \"P\": \"pause\",\n      \"q\": \"quit\",\n      \"Q\": \"quit\",\n    };\n\n    return keyMap[key] || null;\n  }\n\n  /**\n   * Detect swipe direction\n   */\n  private detectSwipe(deltaX: number, deltaY: number): string | null {\n    const absX = Math.abs(deltaX);\n    const absY = Math.abs(deltaY);\n\n    if (absX > absY) {\n      return deltaX > 0 ? \"swipe-right\" : \"swipe-left\";\n    } else {\n      return deltaY > 0 ? \"swipe-down\" : \"swipe-up\";\n    }\n  }\n\n  /**\n   * Get keyboard modifiers\n   */\n  private getModifiers(event: KeyboardEvent): {\n    shift: boolean;\n    ctrl: boolean;\n    alt: boolean;\n    meta: boolean;\n  } {\n    return {\n      shift: event.shiftKey,\n      ctrl: event.ctrlKey,\n      alt: event.altKey,\n      meta: event.metaKey,\n    };\n  }\n\n  /**\n   * Emit event to handlers\n   */\n  private emit(action: string, event: InputEvent): void {\n    const handlers = this.handlers.get(action);\n    if (handlers) {\n      handlers.forEach((handler) => handler(event));\n    }\n  }\n\n  /**\n   * Setup all listeners (convenience method)\n   */\n  setupAllListeners(): () => void {\n    const cleanupKeyboard = this.setupKeyboardListeners();\n    const cleanupTouch = this.setupTouchListeners();\n    return () => {\n      cleanupKeyboard();\n      cleanupTouch();\n    };\n  }\n\n  /**\n   * Cleanup\n   */\n  destroy(): void {\n    if (this.keyboardHandler) {\n      window.removeEventListener(\"keydown\", this.keyboardHandler);\n      this.keyboardHandler = null;\n    }\n    if (this.touchStartHandler) {\n      window.removeEventListener(\"touchstart\", this.touchStartHandler);\n      this.touchStartHandler = null;\n    }\n    if (this.touchEndHandler) {\n      window.removeEventListener(\"touchend\", this.touchEndHandler);\n      this.touchEndHandler = null;\n    }\n    this.handlers.clear();\n  }\n}\n","/**\n * Hook to detect and respect reduced motion preferences\n * \n * Returns true if user prefers reduced motion\n */\n\nimport { useState, useEffect } from \"react\";\n\nexport function useReducedMotion(): boolean {\n  const [prefersReducedMotion, setPrefersReducedMotion] = useState(false);\n\n  useEffect(() => {\n    if (typeof window === \"undefined\") return;\n\n    const mediaQuery = window.matchMedia(\"(prefers-reduced-motion: reduce)\");\n    setPrefersReducedMotion(mediaQuery.matches);\n\n    const handleChange = (e: MediaQueryListEvent) => {\n      setPrefersReducedMotion(e.matches);\n    };\n\n    // Modern browsers\n    if (mediaQuery.addEventListener) {\n      mediaQuery.addEventListener(\"change\", handleChange);\n      return () => mediaQuery.removeEventListener(\"change\", handleChange);\n    } else {\n      // Fallback for older browsers\n      mediaQuery.addListener(handleChange);\n      return () => mediaQuery.removeListener(handleChange);\n    }\n  }, []);\n\n  return prefersReducedMotion;\n}\n","/**\n * Grid Racer Time Trial\n * \n * Time trial racing with customizable loadouts\n * Arcade-style game with difficulty ramping\n */\n\n\"use client\";\n\nimport React, { useState, useCallback, useMemo, useEffect } from \"react\";\nimport GameShell from \"@/lib/games/framework/GameShell\";\nimport { StateManager } from \"@/lib/games/framework/StateManager\";\nimport { DifficultyEngine } from \"@/lib/games/framework/DifficultyEngine\";\nimport { ExplainabilityEngine } from \"@/lib/games/framework/ExplainabilityEngine\";\nimport { InputLayer } from \"@/lib/games/framework/InputLayer\";\nimport { useCanvasRenderer } from \"@/lib/games/framework/RenderingLayer\";\nimport { useGameAnalytics } from \"@/lib/games/framework/useGameAnalytics\";\nimport { useReducedMotion } from \"@/lib/games/framework/useReducedMotion\";\nimport type { GameConfig, GameStatus, GameAnalysis } from \"@/lib/games/framework/types\";\n\nconst GAME_CONFIG: GameConfig = {\n  id: \"grid-racer\",\n  title: \"Grid Racer Time Trial\",\n  description: \"Time trial racing with customizable loadouts. Navigate through obstacles and beat your best time.\",\n  category: \"arcade\",\n  modes: [\"solo\"],\n  supportsMultiplayer: false,\n  minPlayers: 1,\n  maxPlayers: 1,\n  estimatedMinutes: 10,\n  tutorialAvailable: true,\n};\n\ninterface Player {\n  x: number;\n  y: number;\n  speed: number;\n  direction: \"left\" | \"right\" | \"up\" | \"down\" | \"none\";\n}\n\ninterface Obstacle {\n  x: number;\n  y: number;\n  width: number;\n  height: number;\n  type: \"static\" | \"moving\";\n}\n\nexport default function GridRacer() {\n  const [status, setStatus] = useState<GameStatus>(\"idle\");\n  const [score, setScore] = useState(0);\n  const [time, setTime] = useState(0);\n  const [analysis, setAnalysis] = useState<GameAnalysis | null>(null);\n  const [player, setPlayer] = useState<Player>({ x: 400, y: 500, speed: 3, direction: \"none\" });\n  const [obstacles, setObstacles] = useState<Obstacle[]>([]);\n\n  const seed = useMemo(() => Math.floor(Math.random() * 1000000), []);\n  const stateManager = useMemo(() => new StateManager({ status: \"idle\" }, seed), [seed]);\n  const difficultyEngine = useMemo(\n    () =>\n      new DifficultyEngine({\n        initial: 0.2,\n        target: 0.9,\n        rampTime: 60000, // 1 minute\n        adaptive: true,\n      }),\n    []\n  );\n  const explainabilityEngine = useMemo(() => new ExplainabilityEngine(), []);\n  const inputLayer = useMemo(() => new InputLayer(), []);\n  const prefersReducedMotion = useReducedMotion();\n\n  // Analytics\n  useGameAnalytics(GAME_CONFIG.id, status, stateManager.getState());\n\n  // Generate obstacles based on difficulty\n  const generateObstacles = useCallback(\n    (difficulty: number) => {\n      const count = Math.floor(5 + difficulty * 10);\n      const newObstacles: Obstacle[] = [];\n      const rng = () => stateManager.random();\n\n      for (let i = 0; i < count; i++) {\n        newObstacles.push({\n          x: rng() * 700 + 50,\n          y: -rng() * 2000, // Start above screen\n          width: 40 + rng() * 60,\n          height: 40 + rng() * 60,\n          type: rng() > 0.7 ? \"moving\" : \"static\",\n        });\n      }\n\n      return newObstacles;\n    },\n    [stateManager]\n  );\n\n  const canvasRef = useCanvasRenderer({\n    width: 800,\n    height: 600,\n    onRender: useCallback(\n      (ctx, deltaTime) => {\n        if (status !== \"playing\") return;\n\n        // Clear with background\n        ctx.fillStyle = \"#f8fafc\";\n        ctx.fillRect(0, 0, 800, 600);\n\n        // Draw grid\n        ctx.strokeStyle = \"#e2e8f0\";\n        ctx.lineWidth = 1;\n        for (let x = 0; x < 800; x += 40) {\n          ctx.beginPath();\n          ctx.moveTo(x, 0);\n          ctx.lineTo(x, 600);\n          ctx.stroke();\n        }\n        for (let y = 0; y < 600; y += 40) {\n          ctx.beginPath();\n          ctx.moveTo(0, y);\n          ctx.lineTo(800, y);\n          ctx.stroke();\n        }\n\n        // Draw player\n        ctx.fillStyle = \"#3b82f6\";\n        ctx.beginPath();\n        ctx.arc(player.x, player.y, 15, 0, Math.PI * 2);\n        ctx.fill();\n\n        // Draw obstacles\n        obstacles.forEach((obs) => {\n          ctx.fillStyle = obs.type === \"moving\" ? \"#ef4444\" : \"#64748b\";\n          ctx.fillRect(obs.x, obs.y, obs.width, obs.height);\n        });\n\n        // Update obstacles\n        const difficulty = difficultyEngine.getCurrentDifficulty();\n        setObstacles((prev) => {\n          const updated = prev\n            .map((obs) => ({\n              ...obs,\n              y: obs.y + (2 + difficulty * 5),\n              x: obs.type === \"moving\" ? obs.x + Math.sin(obs.y * 0.01) * 2 : obs.x,\n            }))\n            .filter((obs) => obs.y < 650);\n\n          // Add new obstacles\n          if (updated.length < 10) {\n            const newObs = generateObstacles(difficulty);\n            return [...updated, ...newObs];\n          }\n\n          return updated;\n        });\n\n        // Check collisions\n        obstacles.forEach((obs) => {\n          if (\n            player.x + 15 > obs.x &&\n            player.x - 15 < obs.x + obs.width &&\n            player.y + 15 > obs.y &&\n            player.y - 15 < obs.y + obs.height\n          ) {\n            stateManager.recordMove(\"collision\", { obstacleId: obs.x });\n            difficultyEngine.recordPerformance(0);\n            setScore((s) => Math.max(0, s - 10));\n          }\n        });\n\n        // Update score based on time survived\n        setScore((s) => s + 1);\n      },\n      [status, player, obstacles, stateManager, difficultyEngine, generateObstacles, prefersReducedMotion]\n    ),\n    enabled: status === \"playing\",\n  });\n\n  // Input handling\n  useEffect(() => {\n    if (status !== \"playing\") {\n      inputLayer.setEnabled(false);\n      return;\n    }\n\n    inputLayer.setEnabled(true);\n    const cleanupListeners = inputLayer.setupAllListeners();\n\n    const unsubscribeMoveLeft = inputLayer.on(\"move-left\", () => {\n      setPlayer((p) => ({ ...p, x: Math.max(15, p.x - p.speed), direction: \"left\" }));\n      stateManager.recordMove(\"move\", { direction: \"left\" });\n    });\n\n    const unsubscribeMoveRight = inputLayer.on(\"move-right\", () => {\n      setPlayer((p) => ({ ...p, x: Math.min(785, p.x + p.speed), direction: \"right\" }));\n      stateManager.recordMove(\"move\", { direction: \"right\" });\n    });\n\n    const unsubscribeMoveUp = inputLayer.on(\"move-up\", () => {\n      setPlayer((p) => ({ ...p, y: Math.max(15, p.y - p.speed), direction: \"up\" }));\n      stateManager.recordMove(\"move\", { direction: \"up\" });\n    });\n\n    const unsubscribeMoveDown = inputLayer.on(\"move-down\", () => {\n      setPlayer((p) => ({ ...p, y: Math.min(585, p.y + p.speed), direction: \"down\" }));\n      stateManager.recordMove(\"move\", { direction: \"down\" });\n    });\n\n    const unsubscribePause = inputLayer.on(\"pause\", () => {\n      setStatus(\"paused\");\n    });\n\n    return () => {\n      cleanupListeners();\n      unsubscribeMoveLeft();\n      unsubscribeMoveRight();\n      unsubscribeMoveUp();\n      unsubscribeMoveDown();\n      unsubscribePause();\n      inputLayer.setEnabled(false);\n    };\n  }, [status, inputLayer, stateManager]);\n\n  // Timer\n  useEffect(() => {\n    if (status !== \"playing\") return;\n\n    const interval = setInterval(() => {\n      setTime((t) => t + 0.1);\n    }, 100);\n\n    return () => clearInterval(interval);\n  }, [status]);\n\n  const handleStart = useCallback(() => {\n    setStatus(\"playing\");\n    setScore(0);\n    setTime(0);\n    setPlayer({ x: 400, y: 500, speed: 3, direction: \"none\" });\n    setObstacles(generateObstacles(0.2));\n    stateManager.updateState({ status: \"playing\", timestamp: Date.now() });\n    stateManager.recordMove(\"start\", {});\n    difficultyEngine.reset();\n  }, [stateManager, difficultyEngine, generateObstacles]);\n\n  const handleReset = useCallback(() => {\n    setStatus(\"idle\");\n    setScore(0);\n    setTime(0);\n    setPlayer({ x: 400, y: 500, speed: 3, direction: \"none\" });\n    setObstacles([]);\n    setAnalysis(null);\n    stateManager.updateState({ status: \"idle\", moves: [], score: 0 });\n    difficultyEngine.reset();\n  }, [stateManager, difficultyEngine]);\n\n  const handleQuit = useCallback(() => {\n    if (status === \"playing\" || status === \"paused\") {\n      setStatus(\"finished\");\n      stateManager.updateState({ status: \"finished\", score });\n      const gameAnalysis = explainabilityEngine.analyzeGame(\n        stateManager.getState(),\n        { id: GAME_CONFIG.id, type: \"arcade\" }\n      );\n      setAnalysis(gameAnalysis);\n    }\n  }, [status, stateManager, score, explainabilityEngine]);\n\n  const difficulty = difficultyEngine.getCurrentDifficulty();\n\n  return (\n    <GameShell\n      config={GAME_CONFIG}\n      status={status}\n      onStart={status === \"idle\" ? handleStart : undefined}\n      onReset={handleReset}\n      onQuit={handleQuit}\n      rightPanel={\n        <div className=\"space-y-4\">\n          <div>\n            <h3 className=\"text-sm font-semibold text-slate-900 mb-2\">Stats</h3>\n            <div className=\"text-2xl font-bold text-slate-900\">{Math.floor(score)}</div>\n            <div className=\"text-sm text-slate-600\">Score</div>\n            <div className=\"mt-2 text-lg font-semibold text-slate-900\">\n              {time.toFixed(1)}s\n            </div>\n            <div className=\"text-sm text-slate-600\">Time</div>\n          </div>\n          <div>\n            <h3 className=\"text-sm font-semibold text-slate-900 mb-2\">Difficulty</h3>\n            <div className=\"text-sm text-slate-700\">\n              {difficultyEngine.getDifficultyLabel(difficulty)}\n            </div>\n          </div>\n          {analysis && (\n            <div>\n              <h3 className=\"text-sm font-semibold text-slate-900 mb-2\">Analysis</h3>\n              <p className=\"text-xs text-slate-600\">{analysis.summary}</p>\n            </div>\n          )}\n        </div>\n      }\n    >\n      <div className=\"flex items-center justify-center\" role=\"application\" aria-label=\"Grid Racer game canvas\">\n        <canvas\n          ref={canvasRef}\n          className=\"rounded-lg border-2 border-slate-300 bg-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500\"\n          style={{ maxWidth: \"100%\", height: \"auto\" }}\n          aria-label=\"Grid Racer game canvas. Use arrow keys to navigate and avoid obstacles.\"\n          tabIndex={0}\n        />\n      </div>\n\n      {status === \"idle\" && (\n        <div className=\"text-center py-8\">\n          <p className=\"text-slate-600 mb-4\">Use arrow keys or swipe to navigate</p>\n          <p className=\"text-sm text-slate-500\">Avoid obstacles and survive as long as possible</p>\n        </div>\n      )}\n\n      {status === \"finished\" && analysis && (\n        <div className=\"mt-6 space-y-4\">\n          <div className=\"text-center py-4\">\n            <h2 className=\"text-2xl font-bold text-slate-900 mb-2\">Game Over</h2>\n            <p className=\"text-lg text-slate-600\">Final Score: {Math.floor(score)}</p>\n            <p className=\"text-sm text-slate-500\">Time: {time.toFixed(1)}s</p>\n          </div>\n          <div className=\"rounded-lg bg-blue-50 border border-blue-200 p-4\">\n            <p className=\"text-sm text-blue-900\">{analysis.summary}</p>\n          </div>\n        </div>\n      )}\n    </GameShell>\n  );\n}\n","/**\n * Rendering Layer - Abstraction for canvas and React rendering\n * \n * Provides:\n * - Canvas games: requestAnimationFrame loop isolated from React\n * - Board games: React components with minimal state updates\n * - DevicePixelRatio scaling for canvas\n * - Consistent rendering interface\n */\n\n\"use client\";\n\nimport React, { useEffect, useRef, useCallback } from \"react\";\n\nexport type RenderCallback = (ctx: CanvasRenderingContext2D, deltaTime: number) => void;\n\nexport interface CanvasRendererOptions {\n  width: number;\n  height: number;\n  pixelRatio?: number;\n  onRender: RenderCallback;\n  enabled?: boolean;\n}\n\n/**\n * Hook for canvas-based games\n * Manages requestAnimationFrame loop isolated from React re-renders\n */\nexport function useCanvasRenderer({\n  width,\n  height,\n  pixelRatio = typeof window !== \"undefined\" ? window.devicePixelRatio || 1 : 1,\n  onRender,\n  enabled = true,\n}: CanvasRendererOptions) {\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n  const frameRef = useRef<number | undefined>(undefined);\n  const lastTimeRef = useRef<number>(0);\n\n  const render = useCallback(\n    (currentTime: number) => {\n      if (!canvasRef.current || !enabled) return;\n\n      const ctx = canvasRef.current.getContext(\"2d\");\n      if (!ctx) return;\n\n      const deltaTime = currentTime - lastTimeRef.current;\n      lastTimeRef.current = currentTime;\n\n      // Clear canvas\n      ctx.clearRect(0, 0, width * pixelRatio, height * pixelRatio);\n\n      // Scale context for high DPI\n      ctx.save();\n      ctx.scale(pixelRatio, pixelRatio);\n\n      // Render\n      onRender(ctx, deltaTime);\n\n      ctx.restore();\n\n      // Continue loop\n      frameRef.current = requestAnimationFrame(render);\n    },\n    [width, height, pixelRatio, onRender, enabled]\n  );\n\n  useEffect(() => {\n    if (!canvasRef.current) return;\n\n    const canvas = canvasRef.current;\n    canvas.width = width * pixelRatio;\n    canvas.height = height * pixelRatio;\n    canvas.style.width = `${width}px`;\n    canvas.style.height = `${height}px`;\n\n    if (enabled) {\n      lastTimeRef.current = performance.now();\n      frameRef.current = requestAnimationFrame(render);\n    }\n\n    return () => {\n      if (frameRef.current) {\n        cancelAnimationFrame(frameRef.current);\n      }\n    };\n  }, [width, height, pixelRatio, enabled, render]);\n\n  return canvasRef;\n}\n\n/**\n * Hook for React-based board games\n * Provides optimized rendering with minimal re-renders\n */\nexport function useBoardRenderer<T>(state: T, renderFn: (state: T) => React.ReactNode) {\n  // For React games, we just return the render function\n  // The component using this hook will handle memoization\n  return useCallback(() => renderFn(state), [state, renderFn]);\n}\n"],"names":[],"mappings":"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"}}]
}