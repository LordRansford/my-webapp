;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="8a76e939-ab40-b333-f48a-b56980cdfa4a")}catch(e){}}();
module.exports=[785885,a=>{"use strict";var b=a.i(218282),c=a.i(572131),d=a.i(469124),e=a.i(831866);function f(){return{version:1,xp:0,currentTier:"beginner",tierProgress:0,unlockedMoves:["distribute","simplify","combine"],unlockedTracks:["algebra","logic"],unlockedPuzzlePacks:[],personalBests:{},currentStreak:0,longestStreak:0,lastPlayedDate:"",completedChallenges:[],stats:{puzzlesSolved:0,totalSteps:0,averageElegance:0,hintsUsed:0,restarts:0,topicTrackStats:{}}}}a.i(260054);var g=a.i(389158);a.i(671016);var h=a.i(682313),i=a.i(485827);a.i(264057);var j=a.i(648309);a.i(126482);var k=a.i(196613);a.i(649317);var l=a.i(301944);a.i(930929);var m=a.i(103121),n=a.i(550165),o=a.i(132333),p=a.i(442299);a.i(896088);var q=a.i(129739),r=a.i(606346);let s={id:"proof-sprint",title:"Proof Sprint",description:"Build correct mathematical proofs under step constraints",category:"logic",modes:["solo","daily"],supportsMultiplayer:!1,minPlayers:1,maxPlayers:1,estimatedMinutes:10,tutorialAvailable:!0},t="proof-sprint";function u(){let[a,u]=(0,c.useState)("idle"),[v,w]=(0,c.useState)(null),[x,y]=(0,c.useState)(null),[z,A]=(0,c.useState)([]),[B,C]=(0,c.useState)(null),[D,E]=(0,c.useState)(null),[F,G]=(0,c.useState)([]),[H,I]=(0,c.useState)(null),[J,K]=(0,c.useState)(null),[L,M]=(0,c.useState)(null);(0,c.useEffect)(()=>{"idle"!==a||v||N()},[a,v]);let N=(0,c.useCallback)(()=>{try{var a,b;let c=(0,g.getOrGenerateTodayChallenge)(t),d=(a=function(a){var b,c;let d=new e.SeededRNG(a.seed),f=function(a){switch(a){case"beginner":return{maxSteps:15,hintTokens:3,availableMoveTypes:["distribute","simplify","combine"]};case"student":return{maxSteps:12,hintTokens:2,availableMoveTypes:["distribute","simplify","combine","factor"]};case"scholar":return{maxSteps:10,hintTokens:2,availableMoveTypes:["distribute","simplify","combine","factor","substitute"]};case"theorist":return{maxSteps:8,hintTokens:1,availableMoveTypes:["distribute","simplify","combine","factor","substitute","expand"]};case"master":return{maxSteps:6,hintTokens:0,availableMoveTypes:["distribute","simplify","combine","factor","substitute","expand","theorem"]}}}(a.difficulty),{givenStatements:g,targetStatement:h}=(b=a.topicTrack,c=a.difficulty,{givenStatements:[{id:"given-1",expression:"a + b = c",type:"given"},{id:"given-2",expression:"d = 2",type:"given"}],targetStatement:{id:"target",expression:"(a + b)^2 = a^2 + 2ab + b^2",type:"target"}}),i=[{id:"distribute",type:"distribute",name:"Distribute",description:"Distribute multiplication over addition",penalty:0,applicable:a=>a.some(a=>a.expression.includes("("))},{id:"factor",type:"factor",name:"Factor",description:"Factor out common terms",penalty:.1,applicable:a=>!0},{id:"simplify",type:"simplify",name:"Simplify",description:"Simplify expression",penalty:0,applicable:a=>!0},{id:"combine",type:"combine",name:"Combine Like Terms",description:"Combine similar terms",penalty:0,applicable:a=>!0},{id:"substitute",type:"substitute",name:"Substitute",description:"Substitute one expression for another",penalty:.05,applicable:a=>a.length>=2},{id:"expand",type:"expand",name:"Expand",description:"Expand expression (powerful but penalized)",penalty:.1,applicable:a=>a.some(a=>a.expression.includes("^"))},{id:"theorem",type:"theorem",name:"Apply Theorem",description:"Apply mathematical theorem (very powerful but high penalty)",penalty:.2,applicable:a=>a.length>=2}].filter(a=>f.availableMoveTypes.includes(a.type));return{id:`proof-${a.seed}`,seed:a.seed,name:`${a.topicTrack} Proof Puzzle ${a.seed}`,description:`Prove the target statement in ${f.maxSteps} steps or less.`,topicTrack:a.topicTrack,difficulty:a.difficulty,givenStatements:g,targetStatement:h,availableMoves:i,maxSteps:f.maxSteps,hintTokens:f.hintTokens,tier:function(a){switch(a){case"beginner":return 0;case"student":return 100;case"scholar":return 300;case"theorist":return 600;case"master":return 1e3}}(a.difficulty)}}({seed:c.seed,topicTrack:"algebra",difficulty:"student"}),b=c.seed,{puzzle:a,currentStatements:[...a.givenStatements],proofSteps:[],stepCount:0,penalty:0,hintTokens:a.hintTokens,seed:b,status:"idle"});w(d),y(null),A([]),C(null),E(null),G([]),I(null),K(null)}catch(a){console.error("Error initializing challenge:",a)}},[]),O=(0,c.useCallback)(()=>{v?(w({...v,status:"playing"}),u("playing"),M(Date.now())):N()},[v,N]),P=(0,c.useCallback)(b=>{"playing"===a&&v&&(y(b),A([]))},[a,v]),Q=(0,c.useCallback)(b=>{"playing"===a&&v&&x&&A(a=>a.includes(b)?a.filter(a=>a!==b):[...a,b])},[a,v,x]),R=(0,c.useCallback)(()=>{if(!v||!x||0===z.length||"playing"!==a)return;let b=function(a,b,c){var d;let e,f;if("playing"!==a.status||!b.applicable(a.currentStatements))return a;if(a.stepCount>=a.puzzle.maxSteps)return{...a,status:"finished",outcome:"loss"};let g={id:`derived-${a.stepCount+1}`,expression:`[Result of ${b.name}]`,type:"derived",stepNumber:a.stepCount+1},h={stepNumber:a.stepCount+1,move:b,inputStatements:c,outputStatement:g,penalty:b.penalty},i={...a,currentStatements:[...a.currentStatements,g],proofSteps:[...a.proofSteps,h],stepCount:a.stepCount+1,penalty:a.penalty+b.penalty};return g.expression===a.puzzle.targetStatement.expression&&(i.status="finished",i.outcome="win",e=1-(d=i).stepCount/d.puzzle.maxSteps,f=d.penalty,i.elegance=Math.max(0,Math.min(10,5*e+5*(new Set(d.proofSteps.map(a=>a.move.type)).size/d.proofSteps.length)-2*f))),i}(v,x,z);w(b),y(null),A([]),"finished"===b.status&&(u("finished"),S(b))},[v,x,z,a]),S=(0,c.useCallback)(a=>{var b;let c,d,e;if(!a.outcome||!L)return;let m=Date.now()-L,n="win"===a.outcome,o=a.elegance||0,p=1-a.stepCount/a.puzzle.maxSteps,s=n?Math.round((50*p+5*o)*(1-a.penalty)):Math.round(30*p),u=(0,h.generateTodayChallengeCode)(t,a.seed);(0,i.storeChallengeCode)(u),C(u);let v=(0,q.calculateBaseXP)({win:n,score:s,efficiency:100*p,time:m,difficulty:a.puzzle.difficulty,tier:f().currentTier}),w=(0,j.getStreakDataForGame)(t),x=(0,q.createRewardContext)({gameId:t,seed:a.seed,baseXP:v,performance:{score:s,steps:a.stepCount,elegance:o,time:m},streak:w.currentStreak,tier:f().currentTier}),y=(0,r.generateRewardResult)(x),z=(b=f(),c={...b},c.stats.puzzlesSolved+=1,c.stats.totalSteps+=a.stepCount,c.stats.averageElegance=(c.stats.averageElegance*(c.stats.puzzlesSolved-1)+o)/c.stats.puzzlesSolved,d=`puzzle-${a.seed}`,(e=c.personalBests[d])&&!(s>e.bestScore)||(c.personalBests[d]={bestSteps:a.stepCount,bestScore:s,bestElegance:o,completionCount:(e?.completionCount||0)+1}),c);z.xp=y.totalXP;let A={score:s,time:m,scoreValue:s,timestamp:Date.now()};I(A),E((0,l.submitScore)(u.code,A)),(0,g.completeTodayChallenge)(t,{score:s,time:m,scoreValue:s}),(0,j.updateStreakForGame)(t,!0),G((0,k.checkAndUnlockAchievements)({gameId:t,currentStreak:w.currentStreak+1,gamesCompleted:z.stats.puzzlesSolved,score:s,time:m}).newlyUnlocked),K(function(a){let b=[],c=[],d=[];for(let c of a.proofSteps)c.penalty>.1&&b.push({step:c.stepNumber,description:`Used ${c.move.name} (penalty: ${c.penalty})`,impact:c.penalty>.15?"negative":"neutral",reasoning:"Powerful move used, but incurred penalty"});a.stepCount>.8*a.puzzle.maxSteps&&c.push({step:a.stepCount,description:"Used too many steps",cost:"Reduced efficiency score",recommendation:"Consider using more powerful moves to reduce step count"}),a.penalty>.3&&c.push({step:a.stepCount,description:"Accumulated high penalty",cost:"Reduced final score",recommendation:"Balance powerful moves with simple steps"}),a.stepCount>.7*a.puzzle.maxSteps&&d.push({type:"efficiency",description:"Focus on reducing step count",rationale:`Used ${a.stepCount} of ${a.puzzle.maxSteps} steps`}),a.penalty>.2&&d.push({type:"move-selection",description:"Use powerful moves more strategically",rationale:"High penalty accumulated from powerful moves"});let e="win"===a.outcome?`Successfully completed proof in ${a.stepCount} steps with elegance score ${a.elegance?.toFixed(1)||0}.`:`Failed to complete proof within ${a.puzzle.maxSteps} steps.`;return{keyDecisions:b.slice(0,3),mistakes:c.slice(0,3),recommendations:d,summary:e}}(a))},[L]),T=(0,c.useCallback)(()=>{u("idle"),w(null),y(null),A([]),C(null),E(null),G([]),I(null),K(null),M(null)},[]),U=v?(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-sm font-semibold text-slate-900 mb-2",children:"Steps"}),(0,b.jsxs)("div",{className:"text-lg font-bold",children:[v.stepCount," / ",v.puzzle.maxSteps]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-sm font-semibold text-slate-900 mb-2",children:"Penalty"}),(0,b.jsx)("div",{className:"text-lg font-bold text-red-600",children:v.penalty.toFixed(2)})]}),v.hintTokens>0&&(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-sm font-semibold text-slate-900 mb-2",children:"Hints"}),(0,b.jsx)("div",{className:"text-lg font-bold",children:v.hintTokens})]})]}):null;return(0,b.jsx)(d.default,{config:s,status:a,onStart:O,onReset:T,rightPanel:U,children:(0,b.jsx)("div",{className:"p-4",children:v?"idle"===a?(0,b.jsxs)("div",{className:"max-w-2xl mx-auto space-y-4",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-slate-900",children:v.puzzle.name}),(0,b.jsx)("p",{className:"text-slate-600",children:v.puzzle.description}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("strong",{children:"Target:"})," ",v.puzzle.targetStatement.expression]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("strong",{children:"Max Steps:"})," ",v.puzzle.maxSteps]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("strong",{children:"Hints:"})," ",v.puzzle.hintTokens]})]}),(0,b.jsx)("button",{onClick:O,className:"w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Start Proof"})]}):"playing"===a||"finished"===a?(0,b.jsxs)("div",{className:"max-w-4xl mx-auto space-y-6",children:[(0,b.jsxs)("div",{className:"rounded-xl border-2 border-blue-300 bg-blue-50 p-4",children:[(0,b.jsx)("h3",{className:"text-sm font-semibold text-slate-900 mb-2",children:"Target"}),(0,b.jsx)("div",{className:"text-lg font-mono font-bold text-blue-900",children:v.puzzle.targetStatement.expression})]}),(0,b.jsxs)("div",{className:"rounded-xl border border-slate-200 bg-white p-4",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-slate-900 mb-3",children:"Current Statements"}),(0,b.jsx)("div",{className:"space-y-2",children:v.currentStatements.map((c,d)=>(0,b.jsx)("div",{className:`p-2 border rounded ${z.includes(c.id)?"border-blue-500 bg-blue-50":"border-slate-200"}`,children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"font-mono text-sm",children:[c.stepNumber&&`Step ${c.stepNumber}: `,c.expression]}),"playing"===a&&x&&(0,b.jsx)("button",{onClick:()=>Q(c.id),className:"px-2 py-1 text-xs bg-blue-100 rounded hover:bg-blue-200",children:z.includes(c.id)?"Selected":"Select"})]})},c.id))})]}),"playing"===a&&(0,b.jsxs)("div",{className:"rounded-xl border border-slate-200 bg-white p-4",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-slate-900 mb-3",children:"Available Moves"}),(0,b.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:v.puzzle.availableMoves.map(a=>{let c=a.applicable(v.currentStatements);return(0,b.jsxs)("button",{onClick:()=>P(a),disabled:!c,className:`p-3 border-2 rounded-lg text-left ${x?.id===a.id?"border-blue-500 bg-blue-50":c?"border-slate-300 hover:border-blue-300":"border-slate-200 bg-slate-50 opacity-50"}`,children:[(0,b.jsx)("div",{className:"font-semibold text-slate-900",children:a.name}),(0,b.jsx)("div",{className:"text-xs text-slate-600",children:a.description}),a.penalty>0&&(0,b.jsxs)("div",{className:"text-xs text-red-600",children:["Penalty: ",a.penalty]})]},a.id)})})]}),"playing"===a&&x&&z.length>0&&(0,b.jsxs)("button",{onClick:R,className:"w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:["Execute ",x.name]}),"finished"===a&&B&&(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:`text-3xl font-bold mb-2 ${"win"===v.outcome?"text-green-600":"text-red-600"}`,children:"win"===v.outcome?"Proof Complete!":"Failed"}),void 0!==v.elegance&&(0,b.jsxs)("div",{className:"text-sm text-slate-600",children:["Elegance: ",v.elegance.toFixed(1),"/10 | Steps: ",v.stepCount]})]}),(0,b.jsx)(m.ChallengeCodeShare,{code:B,score:H?.score||0}),D&&(0,b.jsx)("div",{className:"rounded-xl border border-slate-200 bg-white p-4",children:(0,b.jsx)(n.ScoreComparisonDisplay,{comparison:D})}),(0,b.jsx)("div",{className:"rounded-xl border border-slate-200 bg-white p-4",children:(0,b.jsx)(p.LeaderboardView,{challengeCode:B.code,playerScore:H||void 0})}),F.length>0&&(0,b.jsx)("div",{className:"rounded-xl border border-slate-200 bg-white p-4",children:(0,b.jsx)(o.AchievementDisplay,{achievementIds:F,compact:!0})}),J&&(0,b.jsxs)("div",{className:"rounded-xl border border-slate-200 bg-white p-4",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-slate-900 mb-3",children:"Analysis"}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"font-medium text-slate-900 mb-1",children:"Summary"}),(0,b.jsx)("p",{className:"text-sm text-slate-600",children:J.summary})]}),J.recommendations.length>0&&(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"font-medium text-slate-900 mb-1",children:"Recommendations"}),(0,b.jsx)("ul",{className:"text-sm text-slate-600 list-disc list-inside space-y-1",children:J.recommendations.map((a,c)=>(0,b.jsx)("li",{children:a.description},c))})]})]})]}),(0,b.jsx)("button",{onClick:T,className:"w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"New Puzzle"})]})]}):null:(0,b.jsx)("div",{className:"text-center text-slate-600",children:"Loading puzzle..."})})})}a.s(["default",()=>u],785885)}];

//# debugId=8a76e939-ab40-b333-f48a-b56980cdfa4a
//# sourceMappingURL=src_lib_games_games_proof-sprint_ProofSprint_tsx_7691221a._.js.map