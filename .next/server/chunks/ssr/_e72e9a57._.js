;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="80dc515c-afb4-e6df-78f6-ecb427f630f2")}catch(e){}}();
module.exports=[223684,a=>a.a(async(b,c)=>{try{var d=a.i(508171),e=a.i(127669),f=a.i(901257),g=a.i(698887),h=a.i(379035),i=a.i(612485),j=a.i(742093),k=a.i(739362),l=a.i(190896),m=a.i(855423),n=a.i(860167),o=a.i(742480),p=a.i(324920),q=a.i(767099),r=a.i(181049),s=b([n]);function t(a){let b=Math.floor(a/60).toString().padStart(2,"0"),c=Math.floor(a%60).toString().padStart(2,"0");return`${b}:${c}`}function u(){let a=(0,n.useStudiosStore)(a=>a.addJob),b=(0,n.useStudiosStore)(a=>a.updateJob),c=(0,n.useStudiosStore)(a=>a.jobs),[s,u]=(0,e.useState)(null),[v,w]=(0,e.useState)(""),[x,y]=(0,e.useState)(0),[z,A]=(0,e.useState)(!1),[B,C]=(0,e.useState)(!1),[D,E]=(0,e.useState)(""),F=(0,e.useRef)(null),G=(0,e.useRef)([]),[H,I]=(0,e.useState)(0),J=(0,e.useRef)(null),[K,L]=(0,e.useState)(!1),[M,N]=(0,e.useState)([]),[O,P]=(0,e.useState)("Hello from the Speech Lab."),[Q,R]=(0,e.useState)("neutral"),[S,T]=(0,e.useState)(!1),[U,V]=(0,e.useState)(""),[W,X]=(0,e.useState)(null);(0,e.useEffect)(()=>{C(!1)},[]);let Y=async()=>{if(E(""),B)try{let a=await navigator.mediaDevices.getUserMedia({audio:!0}),b=new MediaRecorder(a);G.current=[],b.ondataavailable=a=>G.current.push(a.data),b.onstop=()=>{let a=new Blob(G.current,{type:"audio/webm"}),b=URL.createObjectURL(a);u(a),w(b);let c=new Audio(b);c.onloadedmetadata=()=>y(c.duration||0)},b.start(),F.current=b,A(!0),I(0),J.current=setInterval(()=>I(a=>a+1),1e3)}catch(a){E("Microphone permission was blocked. Allow mic access in your browser site settings, or upload an audio file instead.")}},Z=()=>{F.current&&(F.current.stop(),F.current.stream.getTracks().forEach(a=>a.stop())),A(!1),clearInterval(J.current)},$=async()=>{if(!s)return;L(!0);let c=`speech-${Date.now()}`;a({id:c,name:"Speech Lab - transcript",studio:"speech-lab",status:"running"});try{let a=function(a){let b=["Welcome to the speech lab demo.","This clip shows how we turn audio into text locally.","Keep recordings short for smooth processing.","You can explore sentiment and timing from the transcript."],c=[],d=Math.max(2,Math.min(5,Math.round(a/6))),e=a/d||1;for(let f=0;f<d;f+=1){let d=Math.round(f*e*10)/10,g=Math.round(10*Math.min(a,(f+1)*e))/10;c.push({start:d,end:g,text:b[f%b.length],confidence:.7+.25*Math.random()})}return c}(x||12);N(a);let d=a.map(a=>a.text).join(" ").length;b(c,{status:"completed",finishedAt:new Date().toISOString(),metrics:{durationSeconds:(x||0).toFixed(1),transcriptLength:d,segments:a.length,language:"en"}})}catch(a){b(c,{status:"failed",finishedAt:new Date().toISOString()})}finally{L(!1)}};(0,e.useEffect)(()=>{let a,b;M.length>0&&X((a=["positive","neutral","negative","mixed"],b={positive:0,neutral:0,negative:0,mixed:0},M.forEach(c=>{let d=a[Math.floor(Math.random()*a.length)];b[d]+=1}),b))},[M]);let _=(0,e.useMemo)(()=>W?Object.entries(W).map(([a,b])=>({label:a,count:b})):[],[W]),aa=(0,e.useMemo)(()=>c.filter(a=>"speech-lab"===a.studio).slice(-5).reverse(),[c]);return(0,d.jsxs)("div",{className:"mx-auto w-full max-w-5xl px-4 py-6 space-y-6 sm:px-6 sm:py-8 md:space-y-8",children:[(0,d.jsxs)("div",{className:"space-y-3",children:[(0,d.jsx)(r.StudioBreadcrumbs,{items:[{label:"Studios Hub",href:"/studios/hub"},{label:"Speech & Sound Lab"}]}),(0,d.jsx)(q.default,{studioType:"lab",showHome:!0,showHub:!0,currentStudio:"Speech & Sound Lab",currentStudioHref:"/studios/speech-lab"})]}),(0,d.jsxs)("div",{className:"rounded-3xl bg-white p-4 sm:p-6 md:p-8 shadow-[0_18px_45px_rgba(15,23,42,0.06)] ring-1 ring-slate-100/80 space-y-3",children:[(0,d.jsx)("div",{className:"inline-flex items-center gap-2 rounded-2xl bg-indigo-50 px-3 py-1 text-xs font-semibold text-indigo-800 ring-1 ring-indigo-100",children:"Speech & Sound Lab"}),(0,d.jsx)("h1",{className:"text-xl sm:text-2xl md:text-3xl font-semibold text-slate-900",children:"Speech and Sound Lab"}),(0,d.jsx)("p",{className:"text-xs sm:text-sm text-slate-700 max-w-3xl leading-relaxed",children:"This is the sound room. Record short clips, turn speech into text, let text talk back, and get a feel for emotion and timing in real audio."})]}),(0,d.jsx)(o.SecurityBanner,{}),(0,d.jsxs)("section",{id:"record-upload",className:"rounded-3xl bg-white p-4 sm:p-6 md:p-7 shadow-[0_18px_45px_rgba(15,23,42,0.06)] ring-1 ring-slate-100/80 space-y-4",children:[(0,d.jsx)("h2",{className:"text-base sm:text-lg font-semibold text-slate-900",children:"1. Record or upload audio"}),(0,d.jsxs)("div",{className:"grid gap-4 lg:grid-cols-2",children:[(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)("p",{className:"text-xs sm:text-sm text-slate-700 leading-relaxed",children:"Keep clips short - think thirty seconds, not a podcast. Everything stays in your browser by default so you can experiment safely."}),!B&&(0,d.jsx)("p",{className:"text-xs text-amber-700",children:"Browser recording is unavailable. Upload a small wav or mp3 instead."}),D?(0,d.jsx)("p",{className:"text-xs text-amber-700",children:D}):null]}),(0,d.jsxs)("div",{className:"space-y-3 rounded-2xl border border-slate-100 bg-slate-50/60 p-4",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)("button",{onClick:z?Z:Y,className:"rounded-2xl bg-slate-900 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-slate-800 disabled:cursor-not-allowed disabled:bg-slate-300",disabled:!B,children:z?"Stop":"Record"}),(0,d.jsx)("button",{onClick:Z,className:"rounded-2xl border border-slate-200 bg-white px-4 py-2 text-sm font-semibold text-slate-700 hover:border-sky-300 hover:text-sky-700",children:"Pause/Stop"}),(0,d.jsx)("span",{className:"text-xs text-slate-600",children:z?`Recording… ${H}s`:"Idle"})]}),(0,d.jsxs)("label",{className:"flex w-full cursor-pointer flex-col items-center justify-center gap-2 rounded-2xl border-2 border-dashed border-slate-200 bg-white px-3 py-4 text-sm text-slate-700 hover:border-sky-300",children:[(0,d.jsx)("input",{type:"file",accept:"audio/*",className:"hidden",onChange:a=>(a=>{let{safeFiles:b,errors:c}=(0,p.validateUpload)(a?[a]:null,{maxBytes:0xa00000,allowedExtensions:[".wav",".mp3",".m4a"]});c.length&&alert(c.join("\n"));let d=b[0];if(!d)return;let e=URL.createObjectURL(d);u(d),w(e);let f=new Audio(e);f.onloadedmetadata=()=>y(f.duration||0)})(a.target.files[0])}),"Upload wav or mp3 (max 10MB). Do not upload sensitive recordings."]}),v&&(0,d.jsxs)("div",{className:"space-y-1 rounded-xl border border-slate-100 bg-white p-3",children:[(0,d.jsx)("audio",{controls:!0,className:"w-full",children:(0,d.jsx)("source",{src:v})}),(0,d.jsxs)("p",{className:"text-xs text-slate-700",children:["Duration: ",x?`${x.toFixed(1)}s`:"…"]})]})]})]})]}),(0,d.jsxs)("section",{id:"speech-to-text",className:"rounded-3xl bg-white p-4 sm:p-6 md:p-7 shadow-[0_18px_45px_rgba(15,23,42,0.06)] ring-1 ring-slate-100/80 space-y-4",children:[(0,d.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h2",{className:"text-base sm:text-lg font-semibold text-slate-900",children:"2. Speech to text timeline"}),(0,d.jsx)("p",{className:"text-xs sm:text-sm text-slate-700 leading-relaxed",children:"Transcribe your current clip and view a simple timeline of segments."})]}),(0,d.jsx)("button",{onClick:$,disabled:!s||K,className:"inline-flex items-center rounded-2xl bg-slate-900 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-slate-800 disabled:cursor-not-allowed disabled:bg-slate-300",children:K?"Transcribing…":"Transcribe"})]}),!s&&(0,d.jsx)("p",{className:"text-sm text-slate-600",children:"Record or upload a clip first."}),M.length>0&&(0,d.jsxs)("div",{className:"space-y-3",children:[(0,d.jsxs)("div",{className:"rounded-2xl border border-slate-100 bg-slate-50/60 p-3 text-sm text-slate-800 space-y-1 overflow-x-auto",children:[M.map((a,b)=>(0,d.jsxs)("div",{className:"flex items-start gap-2",children:[(0,d.jsxs)("span",{className:"text-xs text-slate-700 min-w-[110px]",children:["[",t(a.start)," - ",t(a.end),"]"]}),(0,d.jsx)("span",{className:"rounded-lg px-2 py-1 break-words",style:{backgroundColor:`rgba(16,185,129,${.25*(a.confidence||.7)})`},children:a.text})]},b)),(0,d.jsx)("p",{className:"text-xs text-slate-700 mt-2",children:"Automatic transcripts can be wrong. Use this for drafting and learning, not for final compliance or medical needs."})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)("p",{className:"text-xs font-semibold text-slate-900",children:"Timeline"}),(0,d.jsx)("div",{className:"relative h-10 rounded-xl bg-slate-100 overflow-hidden",children:M.map((a,b)=>{let c=x||1,e=Math.max(0,Math.min(98,a.start/c*100)),f=Math.max(2,Math.min(100-e,(a.end-a.start)/c*100));return(0,d.jsx)("button",{type:"button",className:"absolute top-1 bottom-1 rounded-lg bg-emerald-500/70 hover:bg-emerald-500 focus:outline-none focus:ring-2 focus:ring-sky-500",style:{left:`${e}%`,width:`${f}%`},onClick:()=>{let b=document.querySelector("audio");b&&(b.currentTime=a.start,b.play())}},b)})})]})]})]}),(0,d.jsxs)("section",{id:"tts",className:"rounded-3xl bg-white p-4 sm:p-6 md:p-7 shadow-[0_18px_45px_rgba(15,23,42,0.06)] ring-1 ring-slate-100/80 space-y-4",children:[(0,d.jsx)("h2",{className:"text-base sm:text-lg font-semibold text-slate-900",children:"3. Text to speech voice box"}),(0,d.jsx)("p",{className:"text-xs sm:text-sm text-slate-700 leading-relaxed",children:"Type a short sentence, pick a voice style, and let the browser read it aloud."}),(0,d.jsx)("textarea",{value:O,onChange:a=>P(a.target.value),rows:3,className:"w-full rounded-2xl border border-slate-200 bg-white px-3 py-2 text-sm text-slate-800 focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200"}),(0,d.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,d.jsxs)("select",{value:Q,onChange:a=>R(a.target.value),className:"rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm text-slate-800 focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200",children:[(0,d.jsx)("option",{value:"neutral",children:"Neutral"}),(0,d.jsx)("option",{value:"warm",children:"Warm"}),(0,d.jsx)("option",{value:"fast",children:"Fast reader"})]}),(0,d.jsx)("button",{onClick:()=>{V(""),V("Browser speech synthesis is not available here.")},disabled:S,className:"inline-flex items-center rounded-2xl bg-slate-900 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-slate-800 disabled:cursor-not-allowed disabled:bg-slate-300",children:S?"Speaking…":"Speak"}),(0,d.jsx)("p",{className:"text-xs text-slate-700",children:"Do not use this for impersonation or fraud."})]}),U&&(0,d.jsx)("p",{className:"text-xs text-amber-700",children:U})]}),(0,d.jsxs)("section",{id:"sentiment",className:"rounded-3xl bg-white p-4 sm:p-6 md:p-7 shadow-[0_18px_45px_rgba(15,23,42,0.06)] ring-1 ring-slate-100/80 space-y-4",children:[(0,d.jsx)("h2",{className:"text-base sm:text-lg font-semibold text-slate-900",children:"4. Emotion and sentiment sketch"}),(0,d.jsx)("p",{className:"text-xs sm:text-sm text-slate-700 leading-relaxed",children:"A lightweight text-based view of how your transcript feels. This is for intuition, not production safety analysis."}),!M.length&&(0,d.jsx)("p",{className:"text-sm text-slate-600",children:"Transcribe a clip first to see sentiment."}),W&&(0,d.jsxs)("div",{className:"grid gap-4 lg:grid-cols-2",children:[(0,d.jsxs)("div",{className:"rounded-2xl border border-slate-100 bg-white p-4",children:[(0,d.jsx)("p",{className:"text-xs font-semibold text-slate-900 mb-2",children:"Emotion counts"}),(0,d.jsx)("div",{className:"h-48",children:(0,d.jsx)(g.ResponsiveContainer,{width:"100%",height:"100%",children:(0,d.jsxs)(h.BarChart,{data:_,children:[(0,d.jsx)(m.CartesianGrid,{strokeDasharray:"3 3",stroke:"#e2e8f0"}),(0,d.jsx)(j.XAxis,{dataKey:"label",tick:{fontSize:11}}),(0,d.jsx)(k.YAxis,{allowDecimals:!1,tick:{fontSize:11}}),(0,d.jsx)(l.Tooltip,{}),(0,d.jsx)(i.Bar,{dataKey:"count",fill:"#6366f1",radius:[8,8,0,0]})]})})})]}),(0,d.jsxs)("div",{className:"rounded-2xl border border-slate-100 bg-slate-50/60 p-4 text-sm text-slate-800 space-y-1",children:[(0,d.jsx)("p",{className:"text-xs font-semibold text-slate-900",children:"Summary"}),(0,d.jsxs)("p",{children:["Most of this clip feels ",Object.keys(W).reduce((a,b)=>W[b]>(W[a]||0)?b:a,"neutral"),", with a few shifts across other tones. Treat this as a sketch, not an audit."]})]})]})]}),(0,d.jsxs)("section",{id:"speech-runs",className:"rounded-3xl bg-white p-4 sm:p-6 md:p-7 shadow-[0_18px_45px_rgba(15,23,42,0.06)] ring-1 ring-slate-100/80 space-y-4",children:[(0,d.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h2",{className:"text-base sm:text-lg font-semibold text-slate-900",children:"5. Recent speech runs"}),(0,d.jsx)("p",{className:"text-xs sm:text-sm text-slate-700 leading-relaxed",children:"Your latest transcriptions appear here. Open Control Room for the full list."})]}),(0,d.jsx)(f.default,{href:"/studios",className:"text-xs font-semibold text-emerald-700 hover:underline",children:"Open Control Room"})]}),0===aa.length&&(0,d.jsx)("div",{className:"rounded-2xl border border-dashed border-slate-200 bg-slate-50/60 px-4 py-3 text-sm text-slate-700",children:"Your first speech experiment will show up here once you record a clip and hit Transcribe."}),aa.length>0&&(0,d.jsx)("div",{className:"overflow-hidden rounded-2xl border border-slate-100 bg-white",children:(0,d.jsxs)("table",{className:"min-w-full text-sm text-slate-800",children:[(0,d.jsx)("thead",{className:"bg-slate-50 text-xs text-slate-600",children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{className:"px-3 py-2 text-left font-semibold",children:"Job"}),(0,d.jsx)("th",{className:"px-3 py-2 text-left font-semibold",children:"Duration"}),(0,d.jsx)("th",{className:"px-3 py-2 text-left font-semibold",children:"Transcript len"}),(0,d.jsx)("th",{className:"px-3 py-2 text-left font-semibold",children:"Language"}),(0,d.jsx)("th",{className:"px-3 py-2 text-left font-semibold",children:"Status"})]})}),(0,d.jsx)("tbody",{children:aa.map(a=>(0,d.jsxs)("tr",{className:"border-t border-slate-100",children:[(0,d.jsx)("td",{className:"px-3 py-2",children:a.name}),(0,d.jsx)("td",{className:"px-3 py-2 text-xs text-slate-600",children:a.metrics?.durationSeconds??"-"}),(0,d.jsx)("td",{className:"px-3 py-2 text-xs text-slate-600",children:a.metrics?.transcriptLength??"-"}),(0,d.jsx)("td",{className:"px-3 py-2 text-xs text-slate-600",children:a.metrics?.language??"-"}),(0,d.jsx)("td",{className:"px-3 py-2 text-xs text-slate-600",children:a.status})]},a.id))})]})})]})]})}[n]=s.then?(await s)():s,a.s(["default",()=>u]),c()}catch(a){c(a)}},!1),840278,a=>a.a(async(b,c)=>{try{var d=a.i(579168),e=a.i(627068),f=a.i(332759),g=a.i(167684),h=a.i(276695),i=a.i(223684),j=a.i(509193),k=b([h,i]);[h,i]=k.then?(await k)():k;let l=(0,f.hoist)(i,"default"),m=(0,f.hoist)(i,"getStaticProps"),n=(0,f.hoist)(i,"getStaticPaths"),o=(0,f.hoist)(i,"getServerSideProps"),p=(0,f.hoist)(i,"config"),q=(0,f.hoist)(i,"reportWebVitals"),r=(0,f.hoist)(i,"unstable_getStaticProps"),s=(0,f.hoist)(i,"unstable_getStaticPaths"),t=(0,f.hoist)(i,"unstable_getStaticParams"),u=(0,f.hoist)(i,"unstable_getServerProps"),v=(0,f.hoist)(i,"unstable_getServerSideProps"),w=new d.PagesRouteModule({definition:{kind:e.RouteKind.PAGES,page:"/studios/speech-lab/index",pathname:"/studios/speech-lab",bundlePath:"",filename:""},distDir:".next",relativeProjectDir:"",components:{App:h.default,Document:g.default},userland:i}),x=(0,j.getHandler)({srcPage:"/studios/speech-lab/index",config:p,userland:i,routeModule:w,getStaticPaths:n,getStaticProps:m,getServerSideProps:o});a.s(["config",0,p,"default",0,l,"getServerSideProps",0,o,"getStaticPaths",0,n,"getStaticProps",0,m,"handler",0,x,"reportWebVitals",0,q,"routeModule",0,w,"unstable_getServerProps",0,u,"unstable_getServerSideProps",0,v,"unstable_getStaticParams",0,t,"unstable_getStaticPaths",0,s,"unstable_getStaticProps",0,r]),c()}catch(a){c(a)}},!1)];

//# debugId=80dc515c-afb4-e6df-78f6-ecb427f630f2
//# sourceMappingURL=_e72e9a57._.js.map