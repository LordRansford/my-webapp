{
  "version": 3,
  "sources": [],
  "debugId": "c300f0d5-a0ae-29ab-1b4c-63767714c3f9",
  "sections": [
    {"offset": {"line": 1, "column": 0}, "map": {"version":3,"sources":["../../../../src/app/admin/architecture-diagrams/page.client.jsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useMemo, useState } from \"react\";\nimport Link from \"next/link\";\n\nfunction Card({ title, children }) {\n  return (\n    <div className=\"rounded-3xl border border-slate-200 bg-white/90 p-5 shadow-sm\">\n      <p className=\"text-xs font-semibold uppercase tracking-wide text-slate-600\">{title}</p>\n      <div className=\"mt-3\">{children}</div>\n    </div>\n  );\n}\n\nexport default function ArchitectureDiagramsAdminClient() {\n  const [metrics, setMetrics] = useState(null);\n  const [status, setStatus] = useState(\"Loadingâ€¦\");\n\n  useEffect(() => {\n    let cancelled = false;\n    async function load() {\n      try {\n        const res = await fetch(\"/api/admin/architecture-diagrams/metrics\", { method: \"GET\" });\n        if (!res.ok) {\n          const data = await res.json().catch(() => ({}));\n          throw new Error(data?.error || \"Could not load metrics.\");\n        }\n        const json = await res.json();\n        if (!cancelled) {\n          setMetrics(json);\n          setStatus(\"\");\n        }\n      } catch (err) {\n        if (!cancelled) setStatus(\"Could not load metrics.\");\n      }\n    }\n    load();\n    return () => {\n      cancelled = true;\n    };\n  }, []);\n\n  const mostSelected = useMemo(() => {\n    if (!metrics?.variants) return null;\n    const sorted = [...metrics.variants].sort((a, b) => (b.count || 0) - (a.count || 0));\n    return sorted[0] || null;\n  }, [metrics]);\n\n  return (\n    <main className=\"mx-auto max-w-6xl px-4 py-12 md:px-6 lg:px-8 space-y-6\">\n      <header className=\"space-y-2 rounded-3xl bg-gradient-to-br from-slate-50 via-emerald-50/40 to-slate-50 p-8 shadow-sm ring-1 ring-slate-100\">\n        <p className=\"text-xs font-semibold uppercase tracking-wide text-slate-600\">Admin</p>\n        <h1 className=\"text-3xl font-semibold text-slate-900\">Architecture Diagram Studio</h1>\n        <p className=\"text-sm text-slate-700\">Aggregated metrics only. No user content is collected or displayed here.</p>\n        <div className=\"pt-2\">\n          <Link href=\"/admin/feedback\" className=\"text-sm font-semibold text-emerald-700 hover:underline\">\n            Admin home\n          </Link>\n        </div>\n      </header>\n\n      {status ? <div className=\"rounded-3xl border border-slate-200 bg-white/90 p-6 text-sm text-slate-700 shadow-sm\">{status}</div> : null}\n\n      {metrics ? (\n        <div className=\"grid gap-4 md:grid-cols-2 xl:grid-cols-3\">\n          <Card title=\"Generations\">\n            <p className=\"text-3xl font-semibold text-slate-900\">{metrics.generations ?? 0}</p>\n          </Card>\n\n          <Card title=\"Most selected variant\">\n            <p className=\"text-lg font-semibold text-slate-900\">{mostSelected ? mostSelected.id : metrics.mostSelectedVariant || \"minimal\"}</p>\n            <p className=\"mt-1 text-sm text-slate-700\">{mostSelected ? `${mostSelected.count} selections` : \"\"}</p>\n          </Card>\n\n          <Card title=\"Exports\">\n            <ul className=\"space-y-1 text-sm text-slate-700\">\n              <li>SVG: {metrics.exports?.svg ?? 0}</li>\n              <li>PNG: {metrics.exports?.png ?? 0}</li>\n              <li>PDF requested: {metrics.exports?.pdfRequested ?? 0}</li>\n            </ul>\n          </Card>\n\n          <Card title=\"PDF health\">\n            <p className=\"text-sm text-slate-700\">\n              Success rate: <span className=\"font-semibold text-slate-900\">{Math.round((metrics.pdf?.successRate || 0) * 100)}%</span>\n            </p>\n            <p className=\"mt-2 text-xs font-semibold uppercase tracking-wide text-slate-600\">Common failures</p>\n            {(metrics.pdf?.commonFailures || []).length ? (\n              <ul className=\"mt-2 space-y-1 text-sm text-slate-700\">\n                {metrics.pdf.commonFailures.map((f) => (\n                  <li key={f.reason}>\n                    {f.reason}: {f.count}\n                  </li>\n                ))}\n              </ul>\n            ) : (\n              <p className=\"mt-2 text-sm text-slate-700\">No failures recorded.</p>\n            )}\n          </Card>\n\n          <Card title=\"Performance\">\n            <p className=\"text-sm text-slate-700\">Duration buckets (ms)</p>\n            <ul className=\"mt-2 space-y-1 text-sm text-slate-700\">\n              {(metrics.performance?.durationBuckets || []).map((b) => (\n                <li key={b.bucket}>\n                  {b.bucket}: {b.count}\n                </li>\n              ))}\n            </ul>\n          </Card>\n\n          <Card title=\"Common failures\">\n            <p className=\"text-sm text-slate-700\">This view is aggregated and intentionally minimal.</p>\n          </Card>\n        </div>\n      ) : null}\n    </main>\n  );\n}\n\n\n"],"names":[],"mappings":"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"}}]
}