{
  "version": 3,
  "sources": [],
  "debugId": "727d62b1-fd9f-0a8a-3a7a-bf7d6d78b700",
  "sections": [
    {"offset": {"line": 1, "column": 0}, "map": {"version":3,"sources":["../../../../node_modules/lucide-react/src/icons/pause.ts","../../../../node_modules/lucide-react/src/icons/circle-help.ts","../../../../node_modules/lucide-react/src/icons/play.ts","../../../../src/lib/games/framework/InputLayer.ts","../../../../src/lib/games/framework/useReducedMotion.ts"],"sourcesContent":["import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Pause\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cmVjdCB4PSIxNCIgeT0iNCIgd2lkdGg9IjQiIGhlaWdodD0iMTYiIHJ4PSIxIiAvPgogIDxyZWN0IHg9IjYiIHk9IjQiIHdpZHRoPSI0IiBoZWlnaHQ9IjE2IiByeD0iMSIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/pause\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Pause = createLucideIcon('Pause', [\n  ['rect', { x: '14', y: '4', width: '4', height: '16', rx: '1', key: 'zuxfzm' }],\n  ['rect', { x: '6', y: '4', width: '4', height: '16', rx: '1', key: '1okwgv' }],\n]);\n\nexport default Pause;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name CircleHelp\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIxMCIgLz4KICA8cGF0aCBkPSJNOS4wOSA5YTMgMyAwIDAgMSA1LjgzIDFjMCAyLTMgMy0zIDMiIC8+CiAgPHBhdGggZD0iTTEyIDE3aC4wMSIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/circle-help\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst CircleHelp = createLucideIcon('CircleHelp', [\n  ['circle', { cx: '12', cy: '12', r: '10', key: '1mglay' }],\n  ['path', { d: 'M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3', key: '1u773s' }],\n  ['path', { d: 'M12 17h.01', key: 'p32p05' }],\n]);\n\nexport default CircleHelp;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Play\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cG9seWdvbiBwb2ludHM9IjYgMyAyMCAxMiA2IDIxIDYgMyIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/play\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Play = createLucideIcon('Play', [\n  ['polygon', { points: '6 3 20 12 6 21 6 3', key: '1oa8hb' }],\n]);\n\nexport default Play;\n","/**\n * Input Layer - Unified keyboard and touch input handling\n * \n * Provides:\n * - Keyboard mapping for desktop\n * - Touch gestures and on-screen controls for mobile\n * - Consistent pause/resume/quit behavior\n * - Event normalization\n */\n\nexport type InputEvent = {\n  type: \"keyboard\" | \"touch\" | \"mouse\";\n  action: string;\n  timestamp: number;\n  data?: unknown;\n};\n\nexport type InputHandler = (event: InputEvent) => void;\n\nexport class InputLayer {\n  private handlers: Map<string, InputHandler[]> = new Map();\n  private isEnabled: boolean = true;\n  private touchStartPos: { x: number; y: number } | null = null;\n  private readonly SWIPE_THRESHOLD = 50; // pixels\n  private keyboardHandler: ((e: KeyboardEvent) => void) | null = null;\n  private touchStartHandler: ((e: TouchEvent) => void) | null = null;\n  private touchEndHandler: ((e: TouchEvent) => void) | null = null;\n\n  constructor() {\n    // Don't set up listeners in constructor - let components do it via setup methods\n  }\n\n  /**\n   * Register handler for specific action\n   */\n  on(action: string, handler: InputHandler): () => void {\n    if (!this.handlers.has(action)) {\n      this.handlers.set(action, []);\n    }\n    this.handlers.get(action)!.push(handler);\n\n    // Return unsubscribe function\n    return () => {\n      const handlers = this.handlers.get(action);\n      if (handlers) {\n        const index = handlers.indexOf(handler);\n        if (index > -1) {\n          handlers.splice(index, 1);\n        }\n      }\n    };\n  }\n\n  /**\n   * Enable/disable input\n   */\n  setEnabled(enabled: boolean): void {\n    this.isEnabled = enabled;\n  }\n\n  /**\n   * Setup keyboard listeners (call from component useEffect)\n   */\n  setupKeyboardListeners(): () => void {\n    if (typeof window === \"undefined\") return () => {};\n\n    this.keyboardHandler = (e: KeyboardEvent) => {\n      if (!this.isEnabled) return;\n\n      const action = this.mapKeyToAction(e.key, e);\n      if (action) {\n        this.emit(action, {\n          type: \"keyboard\",\n          action,\n          timestamp: Date.now(),\n          data: { key: e.key, code: e.code, modifiers: this.getModifiers(e) },\n        });\n      }\n    };\n\n    window.addEventListener(\"keydown\", this.keyboardHandler);\n    return () => {\n      if (this.keyboardHandler) {\n        window.removeEventListener(\"keydown\", this.keyboardHandler);\n        this.keyboardHandler = null;\n      }\n    };\n  }\n\n  /**\n   * Setup touch listeners (call from component useEffect)\n   */\n  setupTouchListeners(): () => void {\n    if (typeof window === \"undefined\") return () => {};\n\n    this.touchStartHandler = (e: TouchEvent) => {\n      if (!this.isEnabled) return;\n      const touch = e.touches[0];\n      if (touch) {\n        this.touchStartPos = { x: touch.clientX, y: touch.clientY };\n      }\n    };\n\n    this.touchEndHandler = (e: TouchEvent) => {\n      if (!this.isEnabled || !this.touchStartPos) return;\n\n      const touch = e.changedTouches[0];\n      if (!touch) return;\n\n      const deltaX = touch.clientX - this.touchStartPos.x;\n      const deltaY = touch.clientY - this.touchStartPos.y;\n      const distance = Math.sqrt(deltaX * deltaX + deltaY * deltaY);\n\n      if (distance > this.SWIPE_THRESHOLD) {\n        const action = this.detectSwipe(deltaX, deltaY);\n        if (action) {\n          this.emit(action, {\n            type: \"touch\",\n            action,\n            timestamp: Date.now(),\n            data: { deltaX, deltaY, distance },\n          });\n        }\n      } else {\n        // Tap\n        this.emit(\"tap\", {\n          type: \"touch\",\n          action: \"tap\",\n          timestamp: Date.now(),\n          data: { x: touch.clientX, y: touch.clientY },\n        });\n      }\n\n      this.touchStartPos = null;\n    };\n\n    window.addEventListener(\"touchstart\", this.touchStartHandler, { passive: true });\n    window.addEventListener(\"touchend\", this.touchEndHandler, { passive: true });\n\n    return () => {\n      if (this.touchStartHandler) {\n        window.removeEventListener(\"touchstart\", this.touchStartHandler);\n        this.touchStartHandler = null;\n      }\n      if (this.touchEndHandler) {\n        window.removeEventListener(\"touchend\", this.touchEndHandler);\n        this.touchEndHandler = null;\n      }\n    };\n  }\n\n  /**\n   * Map keyboard key to game action\n   */\n  private mapKeyToAction(key: string, event: KeyboardEvent): string | null {\n    // Standard game controls\n    const keyMap: Record<string, string> = {\n      ArrowUp: \"move-up\",\n      ArrowDown: \"move-down\",\n      ArrowLeft: \"move-left\",\n      ArrowRight: \"move-right\",\n      \" \": \"action\", // Spacebar\n      Enter: \"confirm\",\n      Escape: \"pause\",\n      \"p\": \"pause\",\n      \"P\": \"pause\",\n      \"q\": \"quit\",\n      \"Q\": \"quit\",\n    };\n\n    return keyMap[key] || null;\n  }\n\n  /**\n   * Detect swipe direction\n   */\n  private detectSwipe(deltaX: number, deltaY: number): string | null {\n    const absX = Math.abs(deltaX);\n    const absY = Math.abs(deltaY);\n\n    if (absX > absY) {\n      return deltaX > 0 ? \"swipe-right\" : \"swipe-left\";\n    } else {\n      return deltaY > 0 ? \"swipe-down\" : \"swipe-up\";\n    }\n  }\n\n  /**\n   * Get keyboard modifiers\n   */\n  private getModifiers(event: KeyboardEvent): {\n    shift: boolean;\n    ctrl: boolean;\n    alt: boolean;\n    meta: boolean;\n  } {\n    return {\n      shift: event.shiftKey,\n      ctrl: event.ctrlKey,\n      alt: event.altKey,\n      meta: event.metaKey,\n    };\n  }\n\n  /**\n   * Emit event to handlers\n   */\n  private emit(action: string, event: InputEvent): void {\n    const handlers = this.handlers.get(action);\n    if (handlers) {\n      handlers.forEach((handler) => handler(event));\n    }\n  }\n\n  /**\n   * Setup all listeners (convenience method)\n   */\n  setupAllListeners(): () => void {\n    const cleanupKeyboard = this.setupKeyboardListeners();\n    const cleanupTouch = this.setupTouchListeners();\n    return () => {\n      cleanupKeyboard();\n      cleanupTouch();\n    };\n  }\n\n  /**\n   * Cleanup\n   */\n  destroy(): void {\n    if (this.keyboardHandler) {\n      window.removeEventListener(\"keydown\", this.keyboardHandler);\n      this.keyboardHandler = null;\n    }\n    if (this.touchStartHandler) {\n      window.removeEventListener(\"touchstart\", this.touchStartHandler);\n      this.touchStartHandler = null;\n    }\n    if (this.touchEndHandler) {\n      window.removeEventListener(\"touchend\", this.touchEndHandler);\n      this.touchEndHandler = null;\n    }\n    this.handlers.clear();\n  }\n}\n","/**\n * Hook to detect and respect reduced motion preferences\n * \n * Returns true if user prefers reduced motion\n */\n\nimport { useState, useEffect } from \"react\";\n\nexport function useReducedMotion(): boolean {\n  const [prefersReducedMotion, setPrefersReducedMotion] = useState(false);\n\n  useEffect(() => {\n    if (typeof window === \"undefined\") return;\n\n    const mediaQuery = window.matchMedia(\"(prefers-reduced-motion: reduce)\");\n    setPrefersReducedMotion(mediaQuery.matches);\n\n    const handleChange = (e: MediaQueryListEvent) => {\n      setPrefersReducedMotion(e.matches);\n    };\n\n    // Modern browsers\n    if (mediaQuery.addEventListener) {\n      mediaQuery.addEventListener(\"change\", handleChange);\n      return () => mediaQuery.removeEventListener(\"change\", handleChange);\n    } else {\n      // Fallback for older browsers\n      mediaQuery.addListener(handleChange);\n      return () => mediaQuery.removeListener(handleChange);\n    }\n  }, []);\n\n  return prefersReducedMotion;\n}\n"],"names":[],"mappings":"wCAaM,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AAAQ,CAAR,CAAA,UAAQ,OAAA,EAAiB,OAAS,CAAA,CAAA,AACtC,CAAC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAQ,CAAA,AAAE,CAAA,CAAA,AAAG,KAAM,CAAG,CAAA,CAAA,CAAA,CAAA,CAAA,AAAK,CAAO,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AAAK,OAAQ,CAAM,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AAAI,CAAK,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AAAK,QAAA,CAAU,CAAA,CAAA,AAC9E,CAAC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAQ,CAAA,AAAE,CAAA,CAAA,AAAG,IAAK,CAAG,CAAA,CAAA,CAAA,CAAA,CAAA,AAAK,CAAO,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AAAK,OAAQ,CAAM,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAI,AAAJ,CAAS,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AAAK,QAAA,CAAU,CAAA,CAC9E,CAAA,CAAA,qDCHK,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAa,AAAb,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,KAAa,OAAA,EAAiB,YAAc,CAAA,CAAA,AAChD,CAAC,QAAU,CAAA,CAAE,AAAF,EAAM,CAAA,CAAA,CAAA,CAAA,CAAA,CAAM,CAAI,CAAA,CAAA,IAAA,CAAM,CAAG,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AAAM,GAAK,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAU,CAAA,CAAA,AACzD,CAAC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAQ,CAAA,CAAE,AAAF,EAAK,CAAwC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AAAK,QAAA,CAAU,CAAA,CACrE,AADqE,CACpE,CAAA,CAAA,CAAA,CAAA,CAAA,CAAQ,CAAA,CAAA,AAAE,EAAG,CAAc,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AAAK,QAAA,CAAU,CAAA,CAC5C,CAAA,CAAA,0DCJK,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AAAO,CAAP,WAAO,OAAA,EAAiB,MAAQ,CAAA,CAAA,AACpC,CAAC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAW,CAAA,CAAA,AAAE,OAAQ,CAAsB,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AAAK,QAAA,CAAU,CAAA,CAC5D,CAAA,CAAA,0DCIM,OAAM,EACH,SAAwC,IAAI,GAAM,CAClD,WAAqB,CAAK,CAC1B,cAAiD,IAAK,CAC7C,gBAAkB,EAAG,AAC9B,iBAAuD,IAAK,CAC5D,kBAAsD,IAAK,CAC3D,gBAAoD,IAE5D,AAFiE,cAEnD,CAEd,CAKA,GAAG,CAAc,CAAE,CAAqB,CAAc,CAOpD,OANI,AAAC,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,IACrB,IAAI,CAD0B,AACzB,QAAQ,CAAC,GAAG,CAAC,EAAQ,EAAE,EAE9B,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,GAAS,IAAI,CAAC,GAGzB,KACL,IAAM,EAAW,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,GACnC,GAAI,EAAU,CACZ,IAAM,EAAQ,EAAS,OAAO,CAAC,GAC3B,EAAQ,CAAC,GAAG,AACd,EAAS,MAAM,CAAC,EAAO,EAE3B,CACF,CACF,CAKA,WAAW,CAAgB,CAAQ,CACjC,IAAI,CAAC,SAAS,CAAG,CACnB,CAKA,wBAAqC,CACA,MAAO,KAAO,CAuBnD,CAKA,qBAAkC,CACG,MAAO,KAAO,CAwDnD,CAKQ,eAAe,CAAW,CAAE,CAAoB,CAAiB,CAgBvE,MAAO,CAdgC,CACrC,QAAS,UACT,UAAW,YACX,UAAW,YACX,WAAY,aACZ,IAAK,SACL,MAAO,UACP,OAAQ,QACR,EAAK,QACL,EAAK,QACL,EAAK,OACL,EAAK,OACP,CAEa,CAAC,EAAI,EAAI,IACxB,CAKQ,YAAY,CAAc,CAAE,CAAc,CAAiB,QACpD,AAGb,AAAI,KAHc,EAGP,CAHU,CAAC,GACT,CAEI,IAFC,GAAG,CAAC,GAGb,EAAS,EAAI,cAAgB,aAE7B,EAAS,EAAI,aAAe,UAEvC,CAKQ,aAAa,CAAoB,CAKvC,CACA,MAAO,CACL,MAAO,EAAM,QAAQ,CACrB,KAAM,EAAM,OAAO,CACnB,IAAK,EAAM,MAAM,CACjB,KAAM,EAAM,OACd,AADqB,CAEvB,CAKQ,KAAK,CAAc,CAAE,CAAiB,CAAQ,CACpD,IAAM,EAAW,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,GAC/B,GACF,EAAS,KADG,EACI,CAAC,AAAC,GAAY,EAAQ,GAE1C,CAKA,mBAAgC,CAC9B,IAAM,EAAkB,IAAI,CAAC,sBAAsB,GAC7C,EAAe,IAAI,CAAC,mBAAmB,GAC7C,MAAO,KACL,IACA,GACF,CACF,CAKA,SAAgB,CACV,IAAI,CAAC,eAAe,EAAE,CACxB,OAAO,mBAAmB,CAAC,UAAW,IAAI,CAAC,eAAe,EAC1D,IAAI,CAAC,eAAe,CAAG,MAErB,IAAI,CAAC,iBAAiB,EAAE,CAC1B,OAAO,mBAAmB,CAAC,aAAc,IAAI,CAAC,iBAAiB,EAC/D,IAAI,CAAC,iBAAiB,CAAG,MAEvB,IAAI,CAAC,eAAe,EAAE,CACxB,OAAO,mBAAmB,CAAC,WAAY,IAAI,CAAC,eAAe,EAC3D,IAAI,CAAC,eAAe,CAAG,MAEzB,IAAI,CAAC,QAAQ,CAAC,KAAK,EACrB,CACF,kCC9OA,IAAA,EAAA,EAAA,CAAA,CAAA,QAEO,SAAS,IACd,GAAM,CAAC,EAAsB,EAAwB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IAuBjE,MArBA,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KAmBV,EAAG,EAAE,EAEE,CACT","ignoreList":[0,1,2]}}]
}