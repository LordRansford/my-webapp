{
  "version": 3,
  "sources": [],
  "debugId": "3c2f1c45-158a-8a49-9f1c-6798b11936f8",
  "sections": [
    {"offset": {"line": 1, "column": 0}, "map": {"version":3,"sources":["../../../../src/lib/entitlements/entitlements.js","../../../../src/app/support/permission/page.jsx"],"sourcesContent":["const DONATION_KEY = \"template-donation-token\";\nconst PERMISSION_KEY = \"template-permission-token\";\n\nconst safeWindow = () => (typeof window !== \"undefined\" ? window : null);\n\nexport function setDonationToken(token) {\n  const win = safeWindow();\n  if (!win || !token) return;\n  win.localStorage.setItem(DONATION_KEY, token);\n}\n\nexport function getDonationToken() {\n  const win = safeWindow();\n  if (!win) return null;\n  return win.localStorage.getItem(DONATION_KEY);\n}\n\nexport function setPermissionToken(token) {\n  const win = safeWindow();\n  if (!win || !token) return;\n  win.localStorage.setItem(PERMISSION_KEY, token.trim());\n}\n\nexport function getPermissionToken() {\n  const win = safeWindow();\n  if (!win) return null;\n  const token = win.localStorage.getItem(PERMISSION_KEY);\n  return token ? token.trim() : null;\n}\n\nexport function hasDonationSupport() {\n  return Boolean(getDonationToken());\n}\n\nexport function hasPermissionToken() {\n  return Boolean(getPermissionToken());\n}\n\nexport function unlockCommercialNoAttribution() {\n  return hasDonationSupport() || hasPermissionToken();\n}\n","\"use client\";\n\nimport { useState } from \"react\";\nimport { setPermissionToken } from \"@/lib/entitlements/entitlements\";\n\nexport default function PermissionRequestPage() {\n  const [form, setForm] = useState({\n    name: \"\",\n    email: \"\",\n    template: \"\",\n    useCase: \"\",\n    confirm: false,\n  });\n  const [status, setStatus] = useState(\"\");\n  const [token, setToken] = useState(\"\");\n\n  const updateField = (field) => (event) => {\n    const value = field === \"confirm\" ? event.target.checked : event.target.value;\n    setForm((prev) => ({ ...prev, [field]: value }));\n  };\n\n  const handleSubmit = async (event) => {\n    event.preventDefault();\n    setStatus(\"\");\n    setToken(\"\");\n    if (!form.confirm) {\n      setStatus(\"You must confirm you understand the terms.\");\n      return;\n    }\n    try {\n      const res = await fetch(\"/api/permission-request\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(form),\n      });\n      const data = await res.json();\n      if (!res.ok) throw new Error(data.message || \"Request failed\");\n      setStatus(\"Request captured. Copy the message below for your records.\");\n      setToken(data.token);\n      setPermissionToken(data.token);\n    } catch (error) {\n      setStatus(error.message || \"Could not submit request. Copy the details and email manually.\");\n    }\n  };\n\n  return (\n    <main className=\"mx-auto max-w-3xl px-4 py-12 md:px-6 lg:px-8\">\n      <section className=\"space-y-3 rounded-3xl border border-slate-200 bg-white/90 p-8 shadow-sm backdrop-blur\">\n        <p className=\"text-xs font-semibold uppercase tracking-wide text-slate-600\">Permission</p>\n        <h1 className=\"text-3xl font-semibold text-slate-900\">Request permission to remove attribution</h1>\n        <p className=\"text-base text-slate-700\">\n          Commercial exports keep attribution by default. If you need to remove it, submit this request or donate. A token will\n          unlock commercial exports without attribution once approved.\n        </p>\n        <p className=\"text-sm text-slate-700\">\n          These resources are educational and planning aids. They are not legal advice and do not replace professional security\n          testing. Only use them on systems you are permitted to work on.\n        </p>\n      </section>\n\n      <form onSubmit={handleSubmit} className=\"mt-8 space-y-4 rounded-3xl border border-slate-200 bg-white/90 p-6 shadow-sm\">\n        <label className=\"block text-sm font-semibold text-slate-900\">\n          Your name\n          <input\n            type=\"text\"\n            value={form.name}\n            onChange={updateField(\"name\")}\n            className=\"mt-2 w-full rounded-lg border border-slate-200 px-3 py-2 text-sm text-slate-800 focus:border-slate-400 focus:outline-none focus:ring-2 focus:ring-slate-200\"\n            required\n          />\n        </label>\n        <label className=\"block text-sm font-semibold text-slate-900\">\n          Email\n          <input\n            type=\"email\"\n            value={form.email}\n            onChange={updateField(\"email\")}\n            className=\"mt-2 w-full rounded-lg border border-slate-200 px-3 py-2 text-sm text-slate-800 focus:border-slate-400 focus:outline-none focus:ring-2 focus:ring-slate-200\"\n            required\n          />\n        </label>\n        <label className=\"block text-sm font-semibold text-slate-900\">\n          Template\n          <input\n            type=\"text\"\n            value={form.template}\n            onChange={updateField(\"template\")}\n            className=\"mt-2 w-full rounded-lg border border-slate-200 px-3 py-2 text-sm text-slate-800 focus:border-slate-400 focus:outline-none focus:ring-2 focus:ring-slate-200\"\n            placeholder=\"Which template or category?\"\n            required\n          />\n        </label>\n        <label className=\"block text-sm font-semibold text-slate-900\">\n          Intended commercial use\n          <textarea\n            value={form.useCase}\n            onChange={updateField(\"useCase\")}\n            className=\"mt-2 w-full rounded-lg border border-slate-200 px-3 py-2 text-sm text-slate-800 focus:border-slate-400 focus:outline-none focus:ring-2 focus:ring-slate-200\"\n            rows={4}\n            placeholder=\"Describe the client or project, expected use, and attribution needs.\"\n            required\n          />\n        </label>\n        <label className=\"flex items-start gap-2 text-sm text-slate-800\">\n          <input type=\"checkbox\" checked={form.confirm} onChange={updateField(\"confirm\")} />\n          <span>\n            I understand that these templates are educational, not legal advice, and that permission is required before removing\n            attribution for commercial use.\n          </span>\n        </label>\n\n        <button\n          type=\"submit\"\n          className=\"inline-flex items-center justify-center rounded-full bg-slate-900 px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:bg-slate-800 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-slate-900\"\n        >\n          Submit request\n        </button>\n\n        {status && <p className=\"text-sm font-semibold text-slate-800\">{status}</p>}\n        {token && (\n          <div className=\"rounded-xl border border-slate-200 bg-slate-50 p-4 text-sm text-slate-800\">\n            <p className=\"font-semibold\">Permission token</p>\n            <p className=\"break-all text-xs text-slate-700\">{token}</p>\n            <p className=\"mt-2 text-xs text-slate-700\">\n              This token is saved in your browser and stored locally for audit. It unlocks commercial exports without attribution.\n            </p>\n            <p className=\"mt-2 text-xs text-slate-700\">\n              If email is not configured, copy the details above and send them to the site owner manually.\n            </p>\n          </div>\n        )}\n      </form>\n    </main>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}