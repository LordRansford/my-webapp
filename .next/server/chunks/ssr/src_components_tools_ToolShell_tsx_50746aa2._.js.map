{
  "version": 3,
  "sources": [],
  "debugId": "a6711e59-6e6c-a24d-87cb-7deb20f8e8bb",
  "sections": [
    {"offset": {"line": 1, "column": 0}, "map": {"version":3,"sources":["../../../../src/components/tools/ToolShell.tsx","../../../../src/components/tools/CreditEstimate.tsx","../../../../src/components/tools/ErrorPanel.tsx","../../../../src/components/tools/ToolSelfTest.tsx","../../../../src/lib/tools/loadCatalog.ts","../../../../src/lib/sandbox/js/runJs.ts","../../../../src/lib/sandbox/python/runPython.ts","../../../../src/lib/sandbox/sql/runSql.ts","../../../../src/lib/tools/runTool.ts","../../../../src/lib/tools/loadContract.ts"],"sourcesContent":["\"use client\";\n\nimport React, { useState, ReactNode, useEffect, useMemo, createContext, useContext } from \"react\";\nimport CreditEstimate from \"./CreditEstimate\";\nimport ErrorPanel from \"./ErrorPanel\";\nimport ToolSelfTest from \"./ToolSelfTest\";\nimport { getDefaultInputs, getToolExamples, getToolExplain } from \"@/lib/tools/loadCatalog\";\nimport { runTool, validateInputs, type ValidationError } from \"@/lib/tools/runTool\";\nimport { createToolError } from \"./ErrorPanel\";\nimport type { ToolError } from \"./ErrorPanel\";\n\nexport type ExecutionMode = \"local\" | \"compute\";\n\nexport interface ToolContract {\n  id: string;\n  title: string;\n  description: string;\n  category?: string;\n  difficulty?: string;\n  route: string;\n  executionModes: ExecutionMode[];\n  defaultMode: ExecutionMode;\n  inputs: Array<{\n    name: string;\n    type: string;\n    limits: string;\n    required?: boolean;\n    default?: unknown;\n  }>;\n  limits: {\n    cpuMs: number;\n    wallMs: number;\n    memoryMb: number;\n    inputKb: number;\n    outputKb: number;\n  };\n  creditModel: {\n    baseCredits: number;\n    perKbCredits: number;\n    complexityMultiplierHints?: Record<string, number>;\n  };\n  runner: string;\n  failureModes: string[];\n  statusStates: string[];\n  securityNotes?: string;\n}\n\ninterface ToolShellProps {\n  contract: ToolContract;\n  children: ReactNode;\n  onRun?: (mode: ExecutionMode, inputs: Record<string, unknown>) => Promise<{\n    success: boolean;\n    output?: string | unknown;\n    error?: ToolError;\n  }>;\n  initialInputs?: Record<string, unknown>;\n  examples?: Array<{ title: string; inputs: Record<string, unknown>; expectedOutput?: string }>;\n  onInputsChange?: (inputs: Record<string, unknown>) => void;\n}\n\ntype Tab = \"run\" | \"explain\" | \"examples\";\n\ntype ToolInputsContextValue = {\n  inputs: Record<string, unknown>;\n  setInputs: React.Dispatch<React.SetStateAction<Record<string, unknown>>>;\n};\n\nconst ToolInputsContext = createContext<ToolInputsContextValue | null>(null);\n\nexport function useToolInputs(): ToolInputsContextValue {\n  const ctx = useContext(ToolInputsContext);\n  if (!ctx) {\n    throw new Error(\"useToolInputs must be used within <ToolShell>\");\n  }\n  return ctx;\n}\n\n// Simple markdown-like parser for explain text\nfunction renderExplainText(text: string): React.ReactNode {\n  const lines = text.split('\\n');\n  const elements: React.ReactNode[] = [];\n  let currentParagraph: string[] = [];\n  let inList = false;\n  let listItems: string[] = [];\n\n  function flushParagraph() {\n    if (currentParagraph.length > 0) {\n      elements.push(\n        <p key={elements.length} className=\"mb-3 text-sm text-slate-700 leading-relaxed\">\n          {currentParagraph.join(' ')}\n        </p>\n      );\n      currentParagraph = [];\n    }\n  }\n\n  function flushList() {\n    if (listItems.length > 0) {\n      elements.push(\n        <ul key={elements.length} className=\"mb-4 ml-6 list-disc space-y-1 text-sm text-slate-700\">\n          {listItems.map((item, idx) => (\n            <li key={idx}>{item}</li>\n          ))}\n        </ul>\n      );\n      listItems = [];\n      inList = false;\n    }\n  }\n\n  for (let i = 0; i < lines.length; i++) {\n    const line = lines[i].trim();\n    \n    if (!line) {\n      flushParagraph();\n      flushList();\n      continue;\n    }\n\n    // Headers\n    if (line.startsWith('**') && line.endsWith('**')) {\n      flushParagraph();\n      flushList();\n      const headerText = line.slice(2, -2);\n      elements.push(\n        <h3 key={elements.length} className=\"mb-3 mt-6 text-base font-semibold text-slate-900 first:mt-0\">\n          {headerText}\n        </h3>\n      );\n      continue;\n    }\n\n    // List items\n    if (line.startsWith('‚úÖ') || line.startsWith('‚ùå') || line.startsWith('-')) {\n      flushParagraph();\n      if (!inList) inList = true;\n      const itemText = line.replace(/^[‚úÖ‚ùå-]\\s*/, '');\n      listItems.push(itemText);\n      continue;\n    }\n\n    // Regular paragraph text\n    flushList();\n    currentParagraph.push(line);\n  }\n\n  flushParagraph();\n  flushList();\n\n  return <div>{elements}</div>;\n}\n\nexport default function ToolShell({\n  contract,\n  children,\n  onRun,\n  initialInputs = {},\n  examples = [],\n  onInputsChange,\n}: ToolShellProps) {\n  // Load defaults and examples from catalog\n  const catalogDefaults = useMemo(() => getDefaultInputs(contract.id), [contract.id]);\n  const catalogExamples = useMemo(() => getToolExamples(contract.id), [contract.id]);\n  const catalogExplain = useMemo(() => getToolExplain(contract.id), [contract.id]);\n\n  // Merge catalog examples with prop examples\n  const allExamples = useMemo(() => {\n    const merged = [...catalogExamples, ...examples];\n    // Deduplicate by title\n    const seen = new Set<string>();\n    return merged.filter((ex) => {\n      if (seen.has(ex.title)) return false;\n      seen.add(ex.title);\n      return true;\n    });\n  }, [catalogExamples, examples]);\n\n  // Merge defaults: catalog > contract defaults > initialInputs\n  const mergedDefaults = useMemo(() => {\n    const contractDefaults: Record<string, unknown> = {};\n    if (contract.inputs) {\n      for (const input of contract.inputs) {\n        if (input.default !== undefined) {\n          contractDefaults[input.name] = input.default;\n        }\n      }\n    }\n    return { ...contractDefaults, ...catalogDefaults, ...initialInputs };\n  }, [contract, catalogDefaults, initialInputs]);\n\n  const [activeTab, setActiveTab] = useState<Tab>(\"run\");\n  const [mode, setMode] = useState<ExecutionMode>(contract.defaultMode);\n  const [inputs, setInputs] = useState<Record<string, unknown>>(mergedDefaults);\n  const [output, setOutput] = useState<string | null>(null);\n  const [error, setError] = useState<ToolError | null>(null);\n  const [status, setStatus] = useState<\"idle\" | \"running\" | \"completed\" | \"failed\">(\"idle\");\n  const [isRunning, setIsRunning] = useState(false);\n  const [validationErrors, setValidationErrors] = useState<ValidationError[]>([]);\n  const [showResetReminder, setShowResetReminder] = useState(false);\n\n  // Reset inputs when defaults change\n  useEffect(() => {\n    if (Object.keys(mergedDefaults).length > 0 && Object.keys(inputs).length === 0) {\n      setInputs(mergedDefaults);\n    }\n  }, [mergedDefaults, inputs]);\n\n  // Notify parent when inputs change (for syncing textarea)\n  useEffect(() => {\n    if (onInputsChange) {\n      onInputsChange(inputs);\n    }\n  }, [inputs, onInputsChange]);\n\n  // Show reset reminder if there's output/error but user hasn't reset\n  useEffect(() => {\n    if ((output || error) && status !== \"idle\") {\n      setShowResetReminder(true);\n    } else {\n      setShowResetReminder(false);\n    }\n  }, [output, error, status]);\n\n  // Validate inputs whenever they change\n  useEffect(() => {\n    const validation = validateInputs(contract, inputs);\n    setValidationErrors(validation.errors);\n  }, [contract, inputs]);\n\n  const handleRun = async () => {\n    if (isRunning) return;\n\n    // Clear previous results\n    setOutput(null);\n    setError(null);\n    setShowResetReminder(false);\n    setStatus(\"running\");\n    setIsRunning(true);\n\n    try {\n      // Use unified runner if onRun not provided, otherwise use custom handler\n      let result: { success: boolean; output?: string | unknown; error?: ToolError };\n      \n      if (onRun) {\n        result = await onRun(mode, inputs);\n      } else {\n        // Use unified runner\n        const runResult = await runTool(contract, mode, inputs);\n        if (runResult.ok) {\n          result = {\n            success: true,\n            output: runResult.output,\n          };\n        } else {\n          result = {\n            success: false,\n            error: runResult.error ? createToolError(runResult.error.code, contract.id, {\n              message: runResult.error.message,\n              whatToDo: runResult.error.whatToDo,\n            }) : createToolError(\"unknown_error\", contract.id),\n          };\n        }\n      }\n\n      if (result.success) {\n        setStatus(\"completed\");\n        setOutput(typeof result.output === \"string\" ? result.output : JSON.stringify(result.output, null, 2));\n      } else {\n        setStatus(\"failed\");\n        setError(result.error || {\n          code: \"unknown_error\",\n          message: \"An unknown error occurred.\",\n        });\n      }\n    } catch (err) {\n      setStatus(\"failed\");\n      setError({\n        code: \"runtime_error\",\n        message: err instanceof Error ? err.message : \"Execution failed\",\n        fixSuggestion: \"Check your inputs and try again.\",\n      });\n    } finally {\n      setIsRunning(false);\n    }\n  };\n\n  const handleReset = () => {\n    setInputs(mergedDefaults);\n    setOutput(null);\n    setError(null);\n    setStatus(\"idle\");\n    setValidationErrors([]);\n    setShowResetReminder(false);\n  };\n\n  const handleStop = () => {\n    setIsRunning(false);\n    setStatus(\"idle\");\n  };\n\n  const handleLoadExample = (example: { title: string; inputs: Record<string, unknown> }) => {\n    // Clear previous results when loading example\n    setOutput(null);\n    setError(null);\n    setStatus(\"idle\");\n    setShowResetReminder(false);\n    // Load the example inputs\n    setInputs(example.inputs);\n    // Switch to Run tab so user can see the loaded code\n    setActiveTab(\"run\");\n  };\n\n  const canRun = (mode === \"local\" || (mode === \"compute\" && contract.runner.startsWith(\"/api/\"))) && validationErrors.length === 0;\n\n  return (\n    // Add bottom padding so floating UI never blocks tool actions.\n    <ToolInputsContext.Provider value={{ inputs, setInputs }}>\n      <div className=\"tool-shell pb-24\">\n      {/* Self Test Banner */}\n      <ToolSelfTest\n        contract={contract}\n        defaultInputs={mergedDefaults}\n        examples={allExamples}\n        onRun={onRun}\n      />\n\n      {/* Header */}\n      <header className=\"mb-6 space-y-3\">\n        <div className=\"flex items-start justify-between gap-4\">\n          <div>\n            <h1 className=\"text-3xl font-semibold text-slate-900\">{contract.title}</h1>\n            <p className=\"mt-2 text-base text-slate-700\">{contract.description}</p>\n            <p className=\"mt-2 text-sm italic text-slate-600\">Dedicated to Charis Chung Amponsah</p>\n          </div>\n        </div>\n\n        {/* Limits & Security */}\n        <div className=\"flex flex-wrap gap-4 text-sm text-slate-600\">\n          <span>Limits: {contract.limits.cpuMs}ms CPU, {contract.limits.memoryMb}MB memory, {contract.limits.outputKb}KB output</span>\n          {contract.securityNotes && (\n            <span className=\"text-amber-700\">Important: {contract.securityNotes}</span>\n          )}\n        </div>\n      </header>\n\n      {/* Tabs */}\n      <div className=\"mb-6 flex gap-2 border-b border-slate-200\" role=\"tablist\" aria-label=\"Tool tabs\">\n        {([\"run\", \"explain\", \"examples\"] as Tab[]).map((tab) => (\n          <button\n            key={tab}\n            type=\"button\"\n            onClick={() => setActiveTab(tab)}\n            role=\"tab\"\n            id={`tool-tab-${tab}`}\n            aria-selected={activeTab === tab}\n            aria-controls={`tool-tabpanel-${tab}`}\n            className={`border-b-2 px-4 py-2 text-sm font-semibold capitalize transition ${\n              activeTab === tab\n                ? \"border-slate-900 text-slate-900\"\n                : \"border-transparent text-slate-600 hover:text-slate-900\"\n            }`}\n          >\n            {tab}\n          </button>\n        ))}\n      </div>\n\n      {/* Reset Reminder Banner */}\n      {showResetReminder && (\n        <div className=\"mb-4 rounded-lg border border-blue-200 bg-blue-50 p-4\" role=\"alert\">\n          <div className=\"flex items-start gap-3\">\n            <span className=\"text-lg\" aria-hidden=\"true\">üí°</span>\n            <div className=\"flex-1\">\n              <h3 className=\"text-sm font-semibold text-blue-900\">Ready for a new run?</h3>\n              <p className=\"mt-1 text-xs text-blue-700\">\n                Click <strong>Reset</strong> to clear the previous results and start fresh. This ensures your code runs with clean inputs.\n              </p>\n            </div>\n            <button\n              type=\"button\"\n              onClick={() => setShowResetReminder(false)}\n              className=\"text-blue-600 hover:text-blue-800\"\n              aria-label=\"Dismiss reminder\"\n            >\n              √ó\n            </button>\n          </div>\n        </div>\n      )}\n\n      {activeTab === \"run\" && (\n        <div\n          className=\"space-y-6\"\n          role=\"tabpanel\"\n          id=\"tool-tabpanel-run\"\n          aria-labelledby=\"tool-tab-run\"\n        >\n          {/* Mode Selector */}\n          <div className=\"flex items-center gap-4\">\n            <span className=\"text-sm font-semibold text-slate-700\">Execution Mode:</span>\n            <div className=\"flex gap-2 rounded-lg border border-slate-300 p-1\">\n              {contract.executionModes.map((m) => (\n                <button\n                  key={m}\n                  type=\"button\"\n                  onClick={() => setMode(m)}\n                  disabled={m === \"compute\" && !contract.runner.startsWith(\"/api/\")}\n                  className={`rounded-lg px-4 py-2 text-sm font-semibold transition ${\n                    mode === m\n                      ? \"bg-slate-900 text-white\"\n                      : \"bg-transparent text-slate-700 hover:bg-slate-100 disabled:opacity-50 disabled:cursor-not-allowed\"\n                  }`}\n                >\n                  {m === \"local\" ? \"Local\" : \"Compute\"}\n                </button>\n              ))}\n            </div>\n            {mode === \"compute\" && !contract.runner.startsWith(\"/api/\") && (\n              <p className=\"text-sm text-amber-700\">\n                Compute mode is temporarily unavailable. Use Local mode.\n              </p>\n            )}\n          </div>\n\n          {/* Credit Estimate */}\n          <CreditEstimate contract={contract} mode={mode} inputs={inputs} />\n\n          {/* Input Fields (children) */}\n          {children}\n\n          {/* Action Buttons */}\n          <div className=\"flex items-center gap-3\">\n            <button\n              type=\"button\"\n              onClick={handleRun}\n              disabled={isRunning || !canRun}\n              className=\"rounded-lg bg-slate-900 px-6 py-2.5 text-sm font-semibold text-white transition hover:bg-slate-800 disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-slate-500 focus:ring-offset-2\"\n            >\n              {isRunning ? \"Running...\" : \"Run\"}\n            </button>\n            {isRunning && (\n              <button\n                type=\"button\"\n                onClick={handleStop}\n                className=\"rounded-lg border border-slate-300 bg-white px-4 py-2.5 text-sm font-semibold text-slate-700 transition hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-slate-500 focus:ring-offset-2\"\n              >\n                Stop\n              </button>\n            )}\n            <button\n              type=\"button\"\n              onClick={handleReset}\n              disabled={isRunning}\n              className=\"rounded-lg border border-slate-300 bg-white px-4 py-2.5 text-sm font-semibold text-slate-700 transition hover:bg-slate-50 disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-slate-500 focus:ring-offset-2\"\n            >\n              Reset\n            </button>\n            {output && (\n              <button\n                type=\"button\"\n                onClick={() => {\n                  navigator.clipboard.writeText(output);\n                }}\n                className=\"rounded-lg border border-slate-300 bg-white px-4 py-2.5 text-sm font-semibold text-slate-700 transition hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-slate-500 focus:ring-offset-2\"\n              >\n                Copy Output\n              </button>\n            )}\n          </div>\n\n          {/* Error Display */}\n          {error && <ErrorPanel error={error} onDismiss={() => setError(null)} />}\n\n          {/* Output Display */}\n          {output !== null && !error && (\n            <div className=\"rounded-lg border border-slate-200 bg-slate-50 p-4\">\n              <h3 className=\"mb-2 text-sm font-semibold text-slate-900\">Output</h3>\n              <pre className=\"overflow-auto rounded bg-white p-3 text-sm text-slate-800\">\n                {output}\n              </pre>\n            </div>\n          )}\n        </div>\n      )}\n\n      {activeTab === \"explain\" && (\n        <div\n          className=\"max-w-3xl\"\n          role=\"tabpanel\"\n          id=\"tool-tabpanel-explain\"\n          aria-labelledby=\"tool-tab-explain\"\n        >\n          {catalogExplain ? (\n            renderExplainText(catalogExplain)\n          ) : (\n            <>\n              <h3 className=\"mb-3 text-base font-semibold text-slate-900\">What this tool is for</h3>\n              <p className=\"mb-3 text-sm text-slate-700 leading-relaxed\">{contract.description}</p>\n              <h3 className=\"mb-3 mt-6 text-base font-semibold text-slate-900\">Limits</h3>\n              <ul className=\"mb-4 ml-6 list-disc space-y-1 text-sm text-slate-700\">\n                <li>CPU: {contract.limits.cpuMs}ms</li>\n                <li>Memory: {contract.limits.memoryMb}MB</li>\n                <li>Output: {contract.limits.outputKb}KB</li>\n                <li>Input: {contract.limits.inputKb}KB</li>\n              </ul>\n              {contract.securityNotes && (\n                <>\n                  <h3 className=\"mb-3 mt-6 text-base font-semibold text-slate-900\">Security</h3>\n                  <p className=\"mb-3 text-sm text-slate-700 leading-relaxed\">{contract.securityNotes}</p>\n                </>\n              )}\n            </>\n          )}\n        </div>\n      )}\n\n      {activeTab === \"examples\" && (\n        <div\n          className=\"space-y-4\"\n          role=\"tabpanel\"\n          id=\"tool-tabpanel-examples\"\n          aria-labelledby=\"tool-tab-examples\"\n        >\n          {allExamples.length > 0 ? (\n            <>\n              <div className=\"rounded-lg border border-blue-200 bg-blue-50 p-4\">\n                <p className=\"text-sm text-blue-800\">\n                  <strong>üí° Tip:</strong> Click Load this example to see it in action. After loading, click Run to execute it. Use Reset to clear results before trying a new example.\n                </p>\n              </div>\n              {allExamples.map((example, idx) => (\n                <div key={idx} className=\"rounded-lg border border-slate-200 bg-white p-4\">\n                  <h3 className=\"mb-2 text-sm font-semibold text-slate-900\">{example.title}</h3>\n                  {example.expectedOutput && (\n                    <div className=\"mb-3 rounded bg-slate-50 p-2 text-xs text-slate-600\">\n                      <strong>Expected output:</strong> {example.expectedOutput}\n                    </div>\n                  )}\n                  <button\n                    type=\"button\"\n                    onClick={() => handleLoadExample(example)}\n                    className=\"rounded-lg bg-slate-900 px-4 py-2 text-sm font-semibold text-white transition hover:bg-slate-800 focus:outline-none focus:ring-2 focus:ring-slate-500 focus:ring-offset-2\"\n                  >\n                    Load this example\n                  </button>\n                </div>\n              ))}\n            </>\n          ) : (\n            <p className=\"text-sm text-slate-600\">No examples available for this tool.</p>\n          )}\n        </div>\n      )}\n      </div>\n    </ToolInputsContext.Provider>\n  );\n}\n\n","\"use client\";\n\nimport React, { useMemo } from \"react\";\nimport type { ToolContract } from \"./ToolShell\";\n\ninterface CreditEstimateProps {\n  contract: ToolContract;\n  mode: \"local\" | \"compute\";\n  inputs: Record<string, unknown>;\n}\n\n/**\n * Calculates and displays estimated credits for a tool run.\n * Updates live as inputs change.\n */\nexport default function CreditEstimate({ contract, mode, inputs }: CreditEstimateProps) {\n  const estimatedCredits = useMemo(() => {\n    if (mode === \"local\") {\n      return 0;\n    }\n\n    const { baseCredits, perKbCredits, complexityMultiplierHints = {} } = contract.creditModel;\n\n    // Calculate input size in KB\n    let inputBytes = 0;\n    for (const [key, value] of Object.entries(inputs)) {\n      if (value !== null && value !== undefined) {\n        const str = typeof value === \"string\" ? value : JSON.stringify(value);\n        inputBytes += new Blob([str]).size;\n      }\n    }\n    const inputKb = Math.ceil(inputBytes / 1024);\n\n    // Calculate complexity multiplier\n    let complexityMultiplier = 1;\n    const codeInput = inputs.code as string | undefined;\n    if (codeInput && typeof codeInput === \"string\") {\n      const code = codeInput.toLowerCase();\n      \n      // JS/Python complexity hints\n      if (complexityMultiplierHints.hasLoops) {\n        const hasLoops = /\\b(for|while|do\\s*\\{)\\b/.test(code);\n        if (hasLoops) complexityMultiplier *= complexityMultiplierHints.hasLoops;\n      }\n      \n      if (complexityMultiplierHints.hasAsync) {\n        const hasAsync = /\\b(async|await|Promise|then|catch)\\b/.test(code);\n        if (hasAsync) complexityMultiplier *= complexityMultiplierHints.hasAsync;\n      }\n      \n      if (complexityMultiplierHints.hasImports) {\n        const hasImports = /\\b(import|from|require)\\b/.test(code);\n        if (hasImports) complexityMultiplier *= complexityMultiplierHints.hasImports;\n      }\n      \n      // SQL complexity hints\n      if (complexityMultiplierHints.hasJoins) {\n        const hasJoins = /\\b(join|inner join|left join|right join)\\b/i.test(code);\n        if (hasJoins) complexityMultiplier *= complexityMultiplierHints.hasJoins;\n      }\n      \n      if (complexityMultiplierHints.hasGroupBy) {\n        const hasGroupBy = /\\b(group by|having)\\b/i.test(code);\n        if (hasGroupBy) complexityMultiplier *= complexityMultiplierHints.hasGroupBy;\n      }\n    }\n\n    const estimated = baseCredits + inputKb * perKbCredits * complexityMultiplier;\n    return Math.ceil(estimated * 10) / 10; // Round to 1 decimal\n  }, [contract, mode, inputs]);\n\n  const explanation = useMemo(() => {\n    if (mode === \"local\") {\n      return \"Local mode runs entirely in your browser. No credits required.\";\n    }\n\n    const parts: string[] = [];\n    if (contract.creditModel.baseCredits > 0) {\n      parts.push(`Base: ${contract.creditModel.baseCredits} credits`);\n    }\n    if (contract.creditModel.perKbCredits > 0) {\n      let inputBytes = 0;\n      for (const val of Object.values(inputs)) {\n        if (val !== null && val !== undefined) {\n          const str = typeof val === \"string\" ? val : JSON.stringify(val);\n          inputBytes += new Blob([str]).size;\n        }\n      }\n      const inputKb = Math.ceil(inputBytes / 1024);\n      if (inputKb > 0) {\n        parts.push(`Input size: ${inputKb}KB √ó ${contract.creditModel.perKbCredits} credits/KB`);\n      }\n    }\n    if (Object.keys(contract.creditModel.complexityMultiplierHints || {}).length > 0) {\n      parts.push(\"Complexity multiplier applied\");\n    }\n\n    return parts.length > 0 ? parts.join(\"; \") : \"Standard compute cost\";\n  }, [contract, mode, inputs]);\n\n  return (\n    <div className=\"rounded-lg border border-slate-200 bg-slate-50 p-4\">\n      <div className=\"flex items-center justify-between\">\n        <div className=\"flex-1\">\n          <div className=\"flex items-center gap-2\">\n            <p className=\"text-sm font-semibold text-slate-900\">\n              Estimated credits this run: <span className=\"text-lg\">{estimatedCredits}</span>\n            </p>\n            {mode === \"compute\" && estimatedCredits > 0 && (\n              <span className=\"text-xs font-semibold text-amber-700 bg-amber-50 px-2 py-0.5 rounded\">ESTIMATE</span>\n            )}\n          </div>\n          <p className=\"mt-1 text-xs text-slate-600\">{explanation}</p>\n          {mode === \"compute\" && estimatedCredits > 0 && (\n            <p className=\"mt-2 text-xs font-medium text-amber-800 bg-amber-50 border border-amber-200 rounded px-2 py-1\">\n              ‚ö†Ô∏è This is an estimate. Actual cost may be higher or lower depending on actual execution time and complexity.\n            </p>\n          )}\n        </div>\n        {mode === \"compute\" && estimatedCredits > 0 && (\n          <button\n            type=\"button\"\n            className=\"text-xs text-slate-600 underline hover:text-slate-900 ml-2\"\n            title=\"Why this estimate\"\n            onClick={(e) => {\n              e.preventDefault();\n              alert(explanation);\n            }}\n          >\n            ‚ÑπÔ∏è\n          </button>\n        )}\n      </div>\n    </div>\n  );\n}\n\n","\"use client\";\n\nimport React from \"react\";\n\nexport interface ToolError {\n  code: string;\n  message: string;\n  fixSuggestion?: string;\n  limitExplanation?: string;\n}\n\ninterface ErrorPanelProps {\n  error: ToolError;\n  onDismiss?: () => void;\n}\n\n/**\n * User-friendly error display for tool execution failures.\n * Shows: what failed, why it failed, what the user can do next.\n */\nexport default function ErrorPanel({ error, onDismiss }: ErrorPanelProps) {\n  return (\n    <div\n      className=\"rounded-2xl border border-red-200 bg-red-50 p-4 shadow-sm\"\n      role=\"alert\"\n      aria-live=\"assertive\"\n    >\n      <div className=\"flex items-start justify-between gap-3\">\n        <div className=\"flex-1\">\n          <div className=\"flex items-center gap-2\">\n            <span className=\"text-lg\" aria-hidden=\"true\">\n              !\n            </span>\n            <h3 className=\"text-base font-semibold text-red-900\">Execution failed</h3>\n          </div>\n          <p className=\"mt-2 text-sm text-red-800\">{error.message}</p>\n          {error.limitExplanation && (\n            <p className=\"mt-2 text-xs text-red-700\">\n              <strong>Limit:</strong> {error.limitExplanation}\n            </p>\n          )}\n          {error.fixSuggestion && (\n            <div className=\"mt-3 rounded-lg border border-red-200 bg-white p-3\">\n              <p className=\"text-xs font-semibold text-red-900\">What you can do:</p>\n              <p className=\"mt-1 text-xs text-red-800\">{error.fixSuggestion}</p>\n            </div>\n          )}\n        </div>\n        {onDismiss && (\n          <button\n            type=\"button\"\n            onClick={onDismiss}\n            className=\"flex-shrink-0 rounded-lg p-1 text-red-700 hover:bg-red-100 focus:outline-none focus:ring-2 focus:ring-red-500\"\n            aria-label=\"Dismiss error\"\n          >\n            <span className=\"sr-only\">Dismiss</span>\n            <span aria-hidden=\"true\">√ó</span>\n          </button>\n        )}\n      </div>\n    </div>\n  );\n}\n\n/**\n * Helper to create error objects from tool contract failure modes\n */\nexport function createToolError(\n  failureMode: string,\n  toolId: string,\n  details?: Record<string, unknown>\n): ToolError {\n  const errorMap: Record<string, Omit<ToolError, \"code\">> = {\n    syntax_error: {\n      message: \"Your code contains a syntax error.\",\n      fixSuggestion: \"Check for typos, missing brackets, or incorrect syntax. Review the error details above.\",\n    },\n    runtime_error: {\n      message: \"Your code encountered a runtime error during execution.\",\n      fixSuggestion: \"Review the error message above and fix the logic or data handling.\",\n    },\n    timeout: {\n      message: \"Execution exceeded the time limit.\",\n      fixSuggestion: \"Simplify your code, reduce input size, or break it into smaller operations.\",\n      limitExplanation: details?.limitMs ? `Max execution time: ${details.limitMs}ms` : undefined,\n    },\n    memory_exceeded: {\n      message: \"Execution exceeded the memory limit.\",\n      fixSuggestion: \"Reduce input size, simplify data structures, or process data in smaller chunks.\",\n      limitExplanation: details?.limitMb ? `Max memory: ${details.limitMb}MB` : undefined,\n    },\n    resource_limit: {\n      message: \"Execution exceeded resource limits.\",\n      fixSuggestion: \"Reduce input complexity or size to stay within limits.\",\n    },\n    validation_error: {\n      message: \"Input validation failed.\",\n      fixSuggestion: \"Check that all required fields are filled and values are within limits.\",\n    },\n    invalid_input: {\n      message: \"The provided input is invalid.\",\n      fixSuggestion: \"Review input format and constraints.\",\n    },\n    file_too_large: {\n      message: \"The uploaded file exceeds the size limit.\",\n      fixSuggestion: \"Compress or reduce the file size, or use a smaller sample.\",\n      limitExplanation: details?.limitKb ? `Max file size: ${details.limitKb}KB` : undefined,\n    },\n    unsupported_format: {\n      message: \"The file format is not supported.\",\n      fixSuggestion: \"Use a supported format (check tool documentation).\",\n    },\n    processing_error: {\n      message: \"An error occurred while processing your input.\",\n      fixSuggestion: \"Try again with a different input or check if the service is available.\",\n    },\n  };\n\n  const error = errorMap[failureMode] || {\n    message: `An error occurred: ${failureMode}`,\n    fixSuggestion: \"Please try again or contact support if the issue persists.\",\n  };\n\n  return {\n    code: failureMode,\n    ...error,\n  };\n}\n\n","\"use client\";\n\nimport React, { useEffect, useState } from \"react\";\nimport type { ToolContract } from \"./ToolShell\";\n\ninterface SelfTestResult {\n  passed: boolean;\n  message: string;\n  missingFields?: string[];\n}\n\ninterface ToolSelfTestProps {\n  contract: ToolContract | null;\n  defaultInputs: Record<string, unknown>;\n  examples: Array<{ title: string; inputs: Record<string, unknown> }>;\n  onRun?: (mode: \"local\" | \"compute\", inputs: Record<string, unknown>) => Promise<{\n    success: boolean;\n    output?: string | unknown;\n    error?: { code: string; message: string };\n  }>;\n}\n\nexport default function ToolSelfTest({ contract, defaultInputs, examples, onRun }: ToolSelfTestProps) {\n  const [testResult, setTestResult] = useState<SelfTestResult | null>(null);\n\n  useEffect(() => {\n    if (!contract) {\n      setTestResult({\n        passed: false,\n        message: \"Tool contract not found\",\n        missingFields: [\"contract\"],\n      });\n      return;\n    }\n\n    const missingFields: string[] = [];\n    \n    // Check contract completeness\n    if (!contract.id) missingFields.push(\"contract.id\");\n    if (!contract.title) missingFields.push(\"contract.title\");\n    if (!contract.description) missingFields.push(\"contract.description\");\n    if (!contract.executionModes || contract.executionModes.length === 0) {\n      missingFields.push(\"contract.executionModes\");\n    }\n    if (!contract.inputs || contract.inputs.length === 0) {\n      missingFields.push(\"contract.inputs\");\n    }\n    if (!contract.limits) missingFields.push(\"contract.limits\");\n    if (!contract.creditModel) missingFields.push(\"contract.creditModel\");\n\n    // Check default inputs match contract\n    if (contract.inputs) {\n      for (const input of contract.inputs) {\n        if (input.required && !(input.name in defaultInputs)) {\n          missingFields.push(`defaultInputs.${input.name}`);\n        }\n      }\n    }\n\n    // Check examples\n    if (examples.length < 2) {\n      missingFields.push(\"examples (need at least 2)\");\n    }\n\n    // Note: onRun is optional - ToolShell will use unified runner if not provided\n    // So we don't require it here\n\n    if (missingFields.length > 0) {\n      setTestResult({\n        passed: false,\n        message: \"This tool is misconfigured\",\n        missingFields,\n      });\n    } else {\n      setTestResult({\n        passed: true,\n        message: \"Tool configuration looks good\",\n      });\n    }\n  }, [contract, defaultInputs, examples, onRun]);\n\n  if (!testResult || testResult.passed) {\n    return null;\n  }\n\n  return (\n    <div className=\"mb-4 rounded-lg border border-amber-200 bg-amber-50 p-4\" role=\"alert\">\n      <div className=\"flex items-start gap-3\">\n        <span className=\"text-lg font-semibold\" aria-hidden=\"true\">!</span>\n        <div className=\"flex-1\">\n          <h3 className=\"text-sm font-semibold text-amber-900\">{testResult.message}</h3>\n          {testResult.missingFields && testResult.missingFields.length > 0 && (\n            <div className=\"mt-2\">\n              <p className=\"text-xs font-semibold text-amber-800\">Missing fields:</p>\n              <ul className=\"mt-1 list-disc list-inside text-xs text-amber-700\">\n                {testResult.missingFields.map((field, idx) => (\n                  <li key={idx}>{field}</li>\n                ))}\n              </ul>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\n","/**\n * Load tool catalog with defaults, examples, and explain content\n * Client-safe: uses static JSON import from public/tools-index.json (bundled at build time)\n */\n\n// @ts-ignore - JSON import\nimport toolsIndexData from \"../../../public/tools-index.json\";\n\ninterface ToolCatalogEntry {\n  id: string;\n  defaultInputs: Record<string, unknown>;\n  examples: Array<{\n    title: string;\n    inputs: Record<string, unknown>;\n    expectedOutput?: string;\n  }>;\n  explain: string;\n}\n\ninterface ToolsIndex {\n  generatedAt: string;\n  tools: Array<{\n    id: string;\n    defaultInputs?: Record<string, unknown>;\n    examples?: Array<{\n      title: string;\n      inputs: Record<string, unknown>;\n      expectedOutput?: string;\n    }>;\n    explain?: string;\n  }>;\n}\n\nconst toolsIndex = toolsIndexData as ToolsIndex;\n\nexport function getToolCatalogEntry(toolId: string): ToolCatalogEntry | null {\n  const tool = toolsIndex.tools.find((t) => t.id === toolId);\n  if (!tool) return null;\n\n  return {\n    id: tool.id,\n    defaultInputs: tool.defaultInputs || {},\n    examples: tool.examples || [],\n    explain: tool.explain || \"\",\n  };\n}\n\nexport function getDefaultInputs(toolId: string): Record<string, unknown> {\n  const entry = getToolCatalogEntry(toolId);\n  return entry?.defaultInputs || {};\n}\n\nexport function getToolExamples(toolId: string): Array<{\n  title: string;\n  inputs: Record<string, unknown>;\n  expectedOutput?: string;\n}> {\n  const entry = getToolCatalogEntry(toolId);\n  return entry?.examples || [];\n}\n\nexport function getToolExplain(toolId: string): string {\n  const entry = getToolCatalogEntry(toolId);\n  return entry?.explain || \"No explanation available for this tool.\";\n}\n","/**\n * JavaScript Sandbox Runner\n * \n * Runs JavaScript code in a Web Worker with strict limits.\n * Secure sandbox: no DOM access, no network access.\n */\n\nimport type { ToolContract } from \"@/components/tools/ToolShell\";\n\nexport interface JsRunResult {\n  success: boolean;\n  output?: {\n    stdout: string[];\n    result: string;\n  };\n  error?: {\n    code: string;\n    message: string;\n  };\n}\n\nexport async function runJs(\n  code: string,\n  contract: ToolContract\n): Promise<JsRunResult> {\n  // Validate input size\n  const inputKb = new Blob([code]).size / 1024;\n  if (inputKb > contract.limits.inputKb) {\n    return {\n      success: false,\n      error: {\n        code: \"input_too_large\",\n        message: `Input exceeds ${contract.limits.inputKb}KB limit`,\n      },\n    };\n  }\n\n  return new Promise((resolve) => {\n    // Use a static worker file instead of blob URL\n    const worker = new Worker('/js-worker.js');\n\n    const timeout = setTimeout(() => {\n      worker.terminate();\n      resolve({\n        success: false,\n        error: {\n          code: \"timeout\",\n          message: `Execution exceeded ${contract.limits.wallMs}ms limit`,\n        },\n      });\n    }, contract.limits.wallMs);\n\n    worker.onmessage = (e) => {\n      clearTimeout(timeout);\n      worker.terminate();\n      \n      const response = e.data;\n      if (response.success) {\n        resolve({\n          success: true,\n          output: {\n            stdout: response.stdout || [],\n            result: response.result || \"\",\n          },\n        });\n      } else {\n        resolve({\n          success: false,\n          error: response.error,\n        });\n      }\n    };\n\n    worker.onerror = (err) => {\n      clearTimeout(timeout);\n      worker.terminate();\n      resolve({\n        success: false,\n        error: {\n          code: \"worker_error\",\n          message: err.message || \"Worker execution failed\",\n        },\n      });\n    };\n\n    worker.postMessage({\n      code,\n      timeoutMs: contract.limits.cpuMs,\n      maxOutputKb: contract.limits.outputKb,\n    });\n  });\n}\n","/**\n * Python Sandbox Runner (Pyodide)\n * \n * Runs Python code in a Web Worker using Pyodide.\n * Secure sandbox: no file system, no network access.\n */\n\nimport type { ToolContract } from \"@/components/tools/ToolShell\";\n\nexport interface PythonRunResult {\n  success: boolean;\n  output?: {\n    stdout: string[];\n    result: string;\n  };\n  error?: {\n    code: string;\n    message: string;\n  };\n}\n\nexport type PythonRuntimeStatusPhase = \"loading_runtime\" | \"ready\" | \"running\";\n\ntype PythonWorkerMessage =\n  | { type: \"status\"; requestId: string; phase: string; message?: string }\n  | {\n      type: \"result\";\n      requestId: string;\n      success: boolean;\n      stdout?: string[];\n      result?: string;\n      error?: { code: string; message: string };\n    };\n\nlet sharedWorker: Worker | null = null;\nlet sharedWorkerBusy = false;\n\nfunction createPyWorker(): Worker {\n  // Use a static worker file instead of blob URL to avoid importScripts issues.\n  // The worker file is served from /pyodide-worker.js\n  return new Worker(\"/pyodide-worker.js\");\n}\n\nexport async function runPython(\n  code: string,\n  contract: ToolContract,\n  opts?: {\n    onStatus?: (phase: PythonRuntimeStatusPhase | string, message?: string) => void;\n  }\n): Promise<PythonRunResult> {\n  // Validate input size\n  const inputKb = new Blob([code]).size / 1024;\n  if (inputKb > contract.limits.inputKb) {\n    return {\n      success: false,\n      error: {\n        code: \"input_too_large\",\n        message: `Input exceeds ${contract.limits.inputKb}KB limit`,\n      },\n    };\n  }\n\n  return new Promise((resolve) => {\n    // Reuse a shared worker so Pyodide only needs to load once per session.\n    // If a run is already in-flight, fall back to a one-off worker to avoid cross-talk.\n    const useShared = !sharedWorkerBusy;\n    const worker = useShared ? (sharedWorker ?? (sharedWorker = createPyWorker())) : createPyWorker();\n    if (useShared) sharedWorkerBusy = true;\n\n    const requestId =\n      typeof crypto !== \"undefined\" && \"randomUUID\" in crypto ? crypto.randomUUID() : String(Date.now());\n\n    const timeout = setTimeout(() => {\n      worker.terminate();\n      if (useShared) {\n        sharedWorker = null;\n        sharedWorkerBusy = false;\n      }\n      resolve({\n        success: false,\n        error: {\n          code: \"timeout\",\n          message: `Execution exceeded ${contract.limits.wallMs}ms limit`,\n        },\n      });\n    }, contract.limits.wallMs);\n\n    worker.onmessage = (e) => {\n      const msg = e.data as PythonWorkerMessage;\n      if (!msg || typeof msg !== \"object\" || msg.requestId !== requestId) return;\n\n      if (msg.type === \"status\") {\n        opts?.onStatus?.(msg.phase, msg.message);\n        // Intentionally do not resolve; this lets the UI stay responsive while Pyodide loads.\n        return;\n      }\n\n      if (msg.type !== \"result\") return;\n\n      clearTimeout(timeout);\n      if (!useShared) worker.terminate();\n      if (useShared) sharedWorkerBusy = false;\n\n      if (msg.success) {\n        resolve({\n          success: true,\n          output: {\n            stdout: msg.stdout || [],\n            result: msg.result || \"\",\n          },\n        });\n        return;\n      }\n\n      resolve({\n        success: false,\n        error: msg.error || {\n          code: \"unknown_error\",\n          message: \"Execution failed\",\n        },\n      });\n    };\n\n    worker.onerror = (err) => {\n      clearTimeout(timeout);\n      worker.terminate();\n      if (useShared) {\n        sharedWorker = null;\n        sharedWorkerBusy = false;\n      }\n      \n      const errorMsg = err.message || \"Worker execution failed\";\n      resolve({\n        success: false,\n        error: {\n          code: \"worker_error\",\n          message: errorMsg + \". Pyodide worker may have failed to load. Check browser console.\",\n        },\n      });\n    };\n\n    worker.postMessage({\n      requestId,\n      code,\n      timeoutMs: contract.limits.cpuMs,\n      maxOutputKb: contract.limits.outputKb,\n    });\n  });\n}\n","/**\n * SQL Sandbox Runner (sql.js)\n * \n * Runs SQL queries in a Web Worker using sql.js (SQLite compiled to WASM).\n * Secure sandbox: no file system access, in-memory database only.\n */\n\nimport type { ToolContract } from \"@/components/tools/ToolShell\";\n\nexport interface SqlRunResult {\n  success: boolean;\n  output?: {\n    rows: unknown[][];\n    columns: string[];\n    rowCount: number;\n  };\n  error?: {\n    code: string;\n    message: string;\n  };\n}\n\nexport async function runSql(\n  query: string,\n  contract: ToolContract\n): Promise<SqlRunResult> {\n  // Validate input size\n  const inputKb = new Blob([query]).size / 1024;\n  if (inputKb > contract.limits.inputKb) {\n    return {\n      success: false,\n      error: {\n        code: \"input_too_large\",\n        message: `Input exceeds ${contract.limits.inputKb}KB limit`,\n      },\n    };\n  }\n\n  return new Promise((resolve) => {\n    // Use a static worker file instead of blob URL\n    const worker = new Worker('/sql-worker.js');\n\n    const timeout = setTimeout(() => {\n      worker.terminate();\n      resolve({\n        success: false,\n        error: {\n          code: \"timeout\",\n          message: `Execution exceeded ${contract.limits.wallMs}ms limit`,\n        },\n      });\n    }, contract.limits.wallMs);\n\n    worker.onmessage = (e) => {\n      clearTimeout(timeout);\n      worker.terminate();\n      \n      const response = e.data;\n      if (response.success) {\n        resolve({\n          success: true,\n          output: {\n            rows: response.rows || [],\n            columns: response.columns || [],\n            rowCount: response.rowCount || 0,\n          },\n        });\n      } else {\n        resolve({\n          success: false,\n          error: response.error || {\n            code: \"unknown_error\",\n            message: \"Query execution failed\",\n          },\n        });\n      }\n    };\n\n    worker.onerror = (err) => {\n      clearTimeout(timeout);\n      worker.terminate();\n      resolve({\n        success: false,\n        error: {\n          code: \"worker_error\",\n          message: err.message || \"Worker execution failed. sql.js may not be loading correctly.\",\n        },\n      });\n    };\n\n    worker.postMessage({\n      query,\n      timeoutMs: contract.limits.cpuMs,\n      maxOutputKb: contract.limits.outputKb,\n      maxRows: 1000,\n    });\n  });\n}\n","/**\n * Unified Tool Runner\n * \n * Single interface for executing all tools with consistent error handling,\n * validation, and result formatting.\n */\n\nimport type { ToolContract } from \"@/components/tools/ToolShell\";\nimport { runJs } from \"@/lib/sandbox/js/runJs\";\nimport { runPython } from \"@/lib/sandbox/python/runPython\";\nimport { runSql } from \"@/lib/sandbox/sql/runSql\";\nimport type { ToolError } from \"@/components/tools/ErrorPanel\";\n\nexport interface ToolRunResult {\n  ok: boolean;\n  output?: string;\n  warnings?: string[];\n  metrics?: {\n    durationMs: number;\n    cpuMs: number;\n    memoryMb: number;\n  };\n  error?: {\n    code: string;\n    message: string;\n    whatToDo: string;\n    debugId: string;\n  };\n}\n\nexport interface ValidationError {\n  field: string;\n  message: string;\n}\n\n/**\n * Validate inputs against tool contract\n */\nexport function validateInputs(\n  contract: ToolContract,\n  inputs: Record<string, unknown>\n): { valid: boolean; errors: ValidationError[] } {\n  const errors: ValidationError[] = [];\n\n  if (!contract.inputs || contract.inputs.length === 0) {\n    return { valid: true, errors: [] };\n  }\n\n  for (const inputDef of contract.inputs) {\n    const value = inputs[inputDef.name];\n    const isRequired = inputDef.required !== false;\n\n    // Check required\n    if (isRequired && (value === undefined || value === null || value === \"\")) {\n      errors.push({\n        field: inputDef.name,\n        message: `${inputDef.name} is required`,\n      });\n      continue;\n    }\n\n    // Skip validation if value is empty and not required\n    if (value === undefined || value === null || value === \"\") {\n      continue;\n    }\n\n    // Type validation\n    switch (inputDef.type) {\n      case \"string\":\n        if (typeof value !== \"string\") {\n          errors.push({\n            field: inputDef.name,\n            message: `${inputDef.name} must be a string`,\n          });\n        } else {\n          // Check limits from limits string (e.g., \"max 10KB\")\n          const maxKbMatch = inputDef.limits.match(/max\\s+(\\d+)\\s*kb/i);\n          if (maxKbMatch) {\n            const maxBytes = parseInt(maxKbMatch[1]) * 1024;\n            if (new Blob([value]).size > maxBytes) {\n              errors.push({\n                field: inputDef.name,\n                message: `${inputDef.name} exceeds ${maxKbMatch[1]}KB limit`,\n              });\n            }\n          }\n        }\n        break;\n      case \"number\":\n        if (typeof value !== \"number\" || isNaN(value)) {\n          errors.push({\n            field: inputDef.name,\n            message: `${inputDef.name} must be a number`,\n          });\n        }\n        break;\n      case \"boolean\":\n        if (typeof value !== \"boolean\") {\n          errors.push({\n            field: inputDef.name,\n            message: `${inputDef.name} must be a boolean`,\n          });\n        }\n        break;\n      case \"array\":\n        if (!Array.isArray(value)) {\n          errors.push({\n            field: inputDef.name,\n            message: `${inputDef.name} must be an array`,\n          });\n        }\n        break;\n      case \"enum\":\n        if (typeof value !== \"string\") {\n          errors.push({\n            field: inputDef.name,\n            message: `${inputDef.name} must be a string`,\n          });\n        } else {\n          const allowedValues = inputDef.limits.split(\"|\");\n          if (!allowedValues.includes(value)) {\n            errors.push({\n              field: inputDef.name,\n              message: `${inputDef.name} must be one of: ${allowedValues.join(\", \")}`,\n            });\n          }\n        }\n        break;\n    }\n  }\n\n  return {\n    valid: errors.length === 0,\n    errors,\n  };\n}\n\n/**\n * Run a tool with unified interface\n */\nexport async function runTool(\n  contract: ToolContract,\n  mode: \"local\" | \"compute\",\n  inputs: Record<string, unknown>\n): Promise<ToolRunResult> {\n  const debugId = crypto.randomUUID();\n  const startTime = Date.now();\n\n  try {\n    // Validate inputs\n    const validation = validateInputs(contract, inputs);\n    if (!validation.valid) {\n      return {\n        ok: false,\n        error: {\n          code: \"validation_error\",\n          message: `Input validation failed: ${validation.errors.map((e) => e.message).join(\", \")}`,\n          whatToDo: `Fix these fields: ${validation.errors.map((e) => e.field).join(\", \")}`,\n          debugId,\n        },\n      };\n    }\n\n    // Route to appropriate executor\n    if (mode === \"compute\") {\n      // Compute mode - call API\n      try {\n        const res = await fetch(\"/api/tools/run\", {\n          method: \"POST\",\n          headers: { \"Content-Type\": \"application/json\" },\n          body: JSON.stringify({ toolId: contract.id, mode, inputs }),\n        });\n\n        if (!res.ok) {\n          const errorData = await res.json().catch(() => ({}));\n          return {\n            ok: false,\n            error: {\n              code: errorData.error?.code || \"compute_error\",\n              message: errorData.error?.message || \"Compute execution failed\",\n              whatToDo: errorData.error?.fixSuggestion || \"Try using Local mode instead\",\n              debugId,\n            },\n          };\n        }\n\n        const data = await res.json();\n        if (data.success) {\n          const duration = Date.now() - startTime;\n          return {\n            ok: true,\n            output: typeof data.output === \"string\" ? data.output : JSON.stringify(data.output, null, 2),\n            metrics: {\n              durationMs: duration,\n              cpuMs: duration,\n              memoryMb: 0,\n            },\n          };\n        } else {\n          return {\n            ok: false,\n            error: {\n              code: data.error?.code || \"compute_error\",\n              message: data.error?.message || \"Execution failed\",\n              whatToDo: data.error?.fixSuggestion || \"Check your inputs and try again\",\n              debugId,\n            },\n          };\n        }\n      } catch (err) {\n        return {\n          ok: false,\n          error: {\n            code: \"network_error\",\n            message: err instanceof Error ? err.message : \"Network request failed\",\n            whatToDo: \"Check your connection and try again, or use Local mode\",\n            debugId,\n          },\n        };\n      }\n    }\n\n    // Local mode - route to appropriate sandbox\n    let result: { success: boolean; output?: string | { result?: string; stdout?: string[] } | { rows: unknown[][]; columns: string[]; rowCount: number }; error?: { code: string; message: string } };\n\n    if (contract.id === \"js-sandbox\" || contract.id === \"javascript-sandbox\" || contract.route.includes(\"js-sandbox\")) {\n      const code = inputs.code as string;\n      if (!code || typeof code !== \"string\") {\n        return {\n          ok: false,\n          error: {\n            code: \"validation_error\",\n            message: \"Code input is required\",\n            whatToDo: \"Enter JavaScript code to execute\",\n            debugId,\n          },\n        };\n      }\n      const jsResult = await runJs(code, contract);\n      if (jsResult.success && jsResult.output) {\n        const outputObj = jsResult.output;\n        let outputStr: string;\n        if (typeof outputObj === \"string\") {\n          outputStr = outputObj;\n        } else if (outputObj && typeof outputObj === \"object\") {\n          outputStr = outputObj.result || (Array.isArray(outputObj.stdout) ? outputObj.stdout.join(\"\\n\") : JSON.stringify(outputObj, null, 2));\n        } else {\n          outputStr = String(outputObj);\n        }\n        return {\n          ok: true,\n          output: outputStr,\n          metrics: {\n            durationMs: Date.now() - startTime,\n            cpuMs: Date.now() - startTime,\n            memoryMb: 0,\n          },\n        };\n      } else {\n        return {\n          ok: false,\n          error: {\n            code: jsResult.error?.code || \"execution_error\",\n            message: jsResult.error?.message || \"Execution failed\",\n            whatToDo: \"Check your code for syntax errors\",\n            debugId,\n          },\n        };\n      }\n    } else if (contract.id === \"python-playground\" || contract.route.includes(\"python-playground\")) {\n      const code = inputs.code as string;\n      if (!code || typeof code !== \"string\") {\n        return {\n          ok: false,\n          error: {\n            code: \"validation_error\",\n            message: \"Code input is required\",\n            whatToDo: \"Enter Python code to execute\",\n            debugId,\n          },\n        };\n      }\n      const pythonResult = await runPython(code, contract);\n      if (pythonResult.success && pythonResult.output) {\n        const outputObj = pythonResult.output;\n        let outputStr: string;\n        if (typeof outputObj === \"string\") {\n          outputStr = outputObj;\n        } else if (outputObj && typeof outputObj === \"object\") {\n          outputStr = outputObj.result || (Array.isArray(outputObj.stdout) ? outputObj.stdout.join(\"\\n\") : JSON.stringify(outputObj, null, 2));\n        } else {\n          outputStr = String(outputObj);\n        }\n        return {\n          ok: true,\n          output: outputStr,\n          metrics: {\n            durationMs: Date.now() - startTime,\n            cpuMs: Date.now() - startTime,\n            memoryMb: 0,\n          },\n        };\n      } else {\n        return {\n          ok: false,\n          error: {\n            code: pythonResult.error?.code || \"execution_error\",\n            message: pythonResult.error?.message || \"Execution failed\",\n            whatToDo: \"Check your code for syntax errors or install Pyodide\",\n            debugId,\n          },\n        };\n      }\n    } else if (contract.id === \"sql-sqlite\" || contract.id === \"sql-sandbox\" || contract.route.includes(\"sql-sandbox\")) {\n      const query = inputs.query as string;\n      if (!query || typeof query !== \"string\") {\n        return {\n          ok: false,\n          error: {\n            code: \"validation_error\",\n            message: \"Query input is required\",\n            whatToDo: \"Enter a SQL query to execute\",\n            debugId,\n          },\n        };\n      }\n      const sqlResult = await runSql(query, contract);\n      if (sqlResult.success && sqlResult.output) {\n        return {\n          ok: true,\n          output: JSON.stringify(sqlResult.output, null, 2),\n          metrics: {\n            durationMs: Date.now() - startTime,\n            cpuMs: Date.now() - startTime,\n            memoryMb: 0,\n          },\n        };\n      } else {\n        return {\n          ok: false,\n          error: {\n            code: sqlResult.error?.code || \"execution_error\",\n            message: sqlResult.error?.message || \"Query execution failed\",\n            whatToDo: \"Check your SQL syntax and try again\",\n            debugId,\n          },\n        };\n      }\n    } else {\n      // For other tools, they should implement their own execution\n      // This is a fallback\n      return {\n        ok: false,\n        error: {\n          code: \"not_implemented\",\n          message: `Local execution not implemented for ${contract.id}`,\n          whatToDo: \"This tool may require compute mode or needs implementation\",\n          debugId,\n        },\n      };\n    }\n  } catch (err) {\n    const duration = Date.now() - startTime;\n    return {\n      ok: false,\n      error: {\n        code: \"runtime_error\",\n        message: err instanceof Error ? err.message : \"Unexpected error\",\n        whatToDo: \"Try refreshing the page or contact support\",\n        debugId,\n      },\n      metrics: {\n        durationMs: duration,\n        cpuMs: duration,\n        memoryMb: 0,\n      },\n    };\n  }\n}\n\n","/**\n * Load tool contract from public/tools-index.json\n * Client-safe: uses static JSON import (bundled at build time)\n */\n\n// @ts-ignore - JSON import\nimport toolsIndexData from \"../../../public/tools-index.json\";\n\nexport interface ToolContract {\n  id: string;\n  title: string;\n  description: string;\n  category?: string;\n  difficulty?: string;\n  route: string;\n  executionModes: (\"local\" | \"compute\")[];\n  defaultMode: \"local\" | \"compute\";\n  inputs: Array<{\n    name: string;\n    type: string;\n    limits: string;\n    required?: boolean;\n    default?: unknown;\n  }>;\n  limits: {\n    cpuMs: number;\n    wallMs: number;\n    memoryMb: number;\n    inputKb: number;\n    outputKb: number;\n  };\n  creditModel: {\n    baseCredits: number;\n    perKbCredits: number;\n    complexityMultiplierHints?: Record<string, number>;\n  };\n  runner: string;\n  failureModes: string[];\n  statusStates: string[];\n  securityNotes?: string;\n}\n\ninterface ToolsIndex {\n  generatedAt: string;\n  tools: Array<{\n    id: string;\n    title: string;\n    description: string;\n    category?: string;\n    difficulty?: string;\n    route: string;\n    executionModes: (\"local\" | \"compute\")[];\n    defaultMode: \"local\" | \"compute\";\n    limits: {\n      cpuMs: number;\n      wallMs: number;\n      memoryMb: number;\n      inputKb: number;\n      outputKb: number;\n    };\n    creditModel: {\n      baseCredits: number;\n      perKbCredits: number;\n      complexityMultiplierHints?: Record<string, number>;\n    };\n    runner: string;\n    failureModes: string[];\n    statusStates: string[];\n    inputs: Array<{\n      name: string;\n      type: string;\n      limits: string;\n      required?: boolean;\n      default?: unknown;\n    }>;\n    securityNotes?: string;\n    defaultInputs?: Record<string, unknown>;\n    examples?: Array<{\n      title: string;\n      inputs: Record<string, unknown>;\n      expectedOutput?: string;\n    }>;\n    explain?: string;\n  }>;\n}\n\nconst toolsIndex = toolsIndexData as ToolsIndex;\n\nexport function getToolContract(toolId: string): ToolContract | null {\n  const tool = toolsIndex.tools.find((t) => t.id === toolId);\n  if (!tool) return null;\n\n  return {\n    id: tool.id,\n    title: tool.title,\n    description: tool.description,\n    category: tool.category,\n    difficulty: tool.difficulty,\n    route: tool.route,\n    executionModes: tool.executionModes,\n    defaultMode: tool.defaultMode,\n    inputs: tool.inputs || [],\n    limits: {\n      cpuMs: tool.limits.cpuMs,\n      wallMs: tool.limits.wallMs,\n      memoryMb: tool.limits.memoryMb,\n      inputKb: tool.limits.inputKb || 64,\n      outputKb: tool.limits.outputKb,\n    },\n    creditModel: tool.creditModel,\n    runner: tool.runner || \"local\",\n    failureModes: tool.failureModes || [\"validation_error\", \"execution_error\", \"timeout\", \"security_error\"],\n    statusStates: tool.statusStates || [\"idle\", \"running\", \"completed\", \"failed\"],\n    securityNotes: tool.securityNotes,\n  };\n}\n\nexport function getAllToolContracts(): ToolContract[] {\n  return toolsIndex.tools\n    .map((t) => getToolContract(t.id))\n    .filter((t): t is ToolContract => t !== null);\n}\n"],"names":[],"mappings":"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"}}]
}