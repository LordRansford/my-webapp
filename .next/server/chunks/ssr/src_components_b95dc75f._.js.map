{
  "version": 3,
  "sources": [],
  "debugId": "33923483-e8ea-b9e9-f33c-0dbb87005b41",
  "sections": [
    {"offset": {"line": 1, "column": 0}, "map": {"version":3,"sources":["../../../../src/components/ui/CheckPill.tsx","../../../../src/components/dashboards/architecture/EventFlowModeler.jsx"],"sourcesContent":["import React from \"react\";\n\ntype Tone = \"sky\" | \"emerald\" | \"violet\" | \"amber\" | \"rose\" | \"slate\";\n\ntype Props = {\n  checked: boolean;\n  onCheckedChange: (checked: boolean) => void;\n  children: React.ReactNode;\n  after?: React.ReactNode;\n  tone?: Tone;\n  className?: string;\n  size?: \"sm\" | \"xs\";\n  disabled?: boolean;\n};\n\nconst toneClasses: Record<Tone, { border: string; bg: string; ring: string }> = {\n  sky: { border: \"border-sky-400/40\", bg: \"bg-sky-500/15\", ring: \"focus-visible:ring-sky-300/40\" },\n  emerald: { border: \"border-emerald-400/40\", bg: \"bg-emerald-500/15\", ring: \"focus-visible:ring-emerald-300/40\" },\n  violet: { border: \"border-violet-400/40\", bg: \"bg-violet-500/15\", ring: \"focus-visible:ring-violet-300/40\" },\n  amber: { border: \"border-amber-400/40\", bg: \"bg-amber-500/15\", ring: \"focus-visible:ring-amber-300/40\" },\n  rose: { border: \"border-rose-400/40\", bg: \"bg-rose-500/15\", ring: \"focus-visible:ring-rose-300/40\" },\n  slate: { border: \"border-slate-400/40\", bg: \"bg-slate-500/10\", ring: \"focus-visible:ring-slate-300/30\" },\n};\n\nfunction cx(...parts: Array<string | false | null | undefined>) {\n  return parts.filter(Boolean).join(\" \");\n}\n\nexport function CheckPill({\n  checked,\n  onCheckedChange,\n  children,\n  after,\n  tone = \"sky\",\n  className,\n  size = \"sm\",\n  disabled = false,\n}: Props) {\n  const toneStyle = toneClasses[tone] || toneClasses.sky;\n  const padding = size === \"xs\" ? \"px-3 py-2\" : \"px-3.5 py-2.5\";\n  const text = size === \"xs\" ? \"text-[0.7rem]\" : \"text-xs\";\n  const toggle = size === \"xs\" ? \"h-5 w-9\" : \"h-6 w-11\";\n  const knob = size === \"xs\" ? \"h-4 w-4\" : \"h-5 w-5\";\n  const knobOn = size === \"xs\" ? \"translate-x-4\" : \"translate-x-5\";\n  const knobOff = \"translate-x-1\";\n\n  return (\n    <button\n      type=\"button\"\n      role=\"switch\"\n      aria-checked={checked}\n      disabled={disabled}\n      onClick={() => onCheckedChange(!checked)}\n      className={cx(\n        \"inline-flex w-full items-center justify-between gap-3 rounded-2xl border transition\",\n        padding,\n        text,\n        \"bg-white/80 text-slate-900 hover:bg-white\",\n        \"dark:bg-slate-950/40 dark:text-slate-100 dark:hover:bg-slate-900/60 dark:border-slate-700\",\n        checked ? cx(toneStyle.bg, toneStyle.border) : \"border-slate-200\",\n        \"focus-visible:outline-none focus-visible:ring-2\",\n        toneStyle.ring,\n        disabled && \"cursor-not-allowed opacity-60\",\n        className\n      )}\n    >\n      <span className=\"min-w-0\">{children}</span>\n      <span className=\"inline-flex shrink-0 items-center gap-2\">\n        {after ? <span className=\"shrink-0\">{after}</span> : null}\n        <span\n          className={cx(\n            \"relative inline-flex items-center rounded-full border transition\",\n            toggle,\n            checked ? cx(toneStyle.border, toneStyle.bg) : \"border-slate-300 bg-slate-200\",\n            \"dark:border-slate-600 dark:bg-slate-800\"\n          )}\n          aria-hidden=\"true\"\n        >\n          <span\n            className={cx(\n              \"inline-block transform rounded-full bg-white shadow-sm transition\",\n              knob,\n              checked ? knobOn : knobOff\n            )}\n          />\n        </span>\n      </span>\n    </button>\n  );\n}\n","\"use client\";\n\nimport { useMemo, useState } from \"react\";\nimport { CheckPill } from \"@/components/ui/CheckPill\";\n\nexport function EventFlowModeler() {\n  const [events, setEvents] = useState([\n    { id: 1, name: \"CustomerRegistered\", consumers: 3, critical: true },\n    { id: 2, name: \"TariffChanged\", consumers: 2, critical: false },\n  ]);\n\n  function updateEvent(id, patch) {\n    setEvents((current) => current.map((e) => (e.id === id ? { ...e, ...patch } : e)));\n  }\n\n  function addEvent() {\n    const nextId = events.length ? Math.max(...events.map((e) => e.id)) + 1 : 1;\n    setEvents((current) => [...current, { id: nextId, name: \"\", consumers: 1, critical: false }]);\n  }\n\n  function removeEvent(id) {\n    setEvents((current) => current.filter((e) => e.id !== id));\n  }\n\n  const stats = useMemo(() => {\n    if (!events.length) {\n      return {\n        totalConsumers: 0,\n        averageConsumers: 0,\n        maxConsumers: 0,\n        hotEvent: \"\",\n        criticalCount: 0,\n      };\n    }\n    const totalConsumers = events.reduce((sum, e) => sum + e.consumers, 0);\n    const max = Math.max(...events.map((e) => e.consumers));\n    const hot = events.find((e) => e.consumers === max);\n    const criticalCount = events.filter((e) => e.critical).length;\n\n    return {\n      totalConsumers,\n      averageConsumers: totalConsumers / events.length,\n      maxConsumers: max,\n      hotEvent: hot?.name || \"\",\n      criticalCount,\n    };\n  }, [events]);\n\n  return (\n    <div className=\"flex flex-col gap-4\">\n      <p className=\"text-sm text-slate-600\">\n        Events connect services together. This modeller helps you spot hotspots where a single event has many consumers or where\n        too many events are treated as critical.\n      </p>\n\n      <div className=\"grid gap-4 md:grid-cols-[2fr,1fr]\">\n        <div className=\"rounded-2xl border border-slate-200 bg-white p-3 text-sm\">\n          <div className=\"mb-2 flex items-center justify-between\">\n            <p className=\"text-xs font-medium uppercase tracking-wide text-slate-500\">Events</p>\n            <button\n              type=\"button\"\n              onClick={addEvent}\n              className=\"rounded-full bg-slate-900 px-3 py-1 text-xs font-medium text-white hover:bg-slate-800\"\n            >\n              Add event\n            </button>\n          </div>\n\n          <div className=\"flex flex-col gap-3\">\n            {events.map((event) => (\n              <div key={event.id} className=\"rounded-2xl border border-slate-100 bg-slate-50 p-3 shadow-sm\">\n                <div className=\"mb-2 flex items-center justify-between gap-2\">\n                  <input\n                    className=\"w-full rounded-xl border border-slate-200 px-2 py-1 text-sm font-semibold\"\n                    placeholder=\"Event name, for example InvoiceRaised\"\n                    value={event.name}\n                    onChange={(e) => updateEvent(event.id, { name: e.target.value })}\n                  />\n                  <button\n                    type=\"button\"\n                    onClick={() => removeEvent(event.id)}\n                    className=\"rounded-full px-2 py-1 text-xs text-slate-400 hover:bg-slate-100 hover:text-slate-700\"\n                  >\n                    Remove\n                  </button>\n                </div>\n\n                <div className=\"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between\">\n                  <label className=\"text-xs text-slate-600\">\n                    Number of consumers\n                    <input\n                      type=\"range\"\n                      min={1}\n                      max={10}\n                      value={event.consumers}\n                      onChange={(e) => updateEvent(event.id, { consumers: Number(e.target.value) || 1 })}\n                      className=\"mt-1 w-full\"\n                    />\n                    <span className=\"mt-1 inline-block text-xs text-slate-700\">\n                      {event.consumers} consumer{event.consumers === 1 ? \"\" : \"s\"}\n                    </span>\n                  </label>\n\n                  <div className=\"sm:max-w-xs\">\n                    <CheckPill\n                      checked={event.critical}\n                      onCheckedChange={(checked) => updateEvent(event.id, { critical: checked })}\n                      tone=\"amber\"\n                    >\n                      Critical event that must not be lost\n                    </CheckPill>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n\n        <div className=\"space-y-3\">\n          <div className=\"rounded-2xl border border-slate-200 bg-white p-3 text-sm\">\n            <p className=\"mb-2 text-xs font-medium uppercase tracking-wide text-slate-500\">Event flow summary</p>\n            <p className=\"text-xs text-slate-700\">\n              Total consumers: <span className=\"font-semibold\">{stats.totalConsumers}</span>\n            </p>\n            <p className=\"text-xs text-slate-700\">\n              Average consumers per event: <span className=\"font-semibold\">{stats.averageConsumers.toFixed(1)}</span>\n            </p>\n            <p className=\"text-xs text-slate-700\">\n              Maximum consumers on a single event: <span className=\"font-semibold\">{stats.maxConsumers}</span>\n            </p>\n            {stats.hotEvent && (\n              <p className=\"text-xs text-slate-700\">\n                Highest fan out event: <span className=\"font-semibold\">{stats.hotEvent}</span>\n              </p>\n            )}\n            <p className=\"mt-1 text-xs text-slate-700\">\n              Critical events: <span className=\"font-semibold\">{stats.criticalCount}</span>\n            </p>\n          </div>\n\n          <div className=\"rounded-2xl bg-slate-50 p-3 text-xs text-slate-700\">\n            <p className=\"mb-1 font-medium\">What to discuss</p>\n            <ul className=\"list-disc space-y-1 pl-4\">\n              <li>Would any service be blocked if one event processing pipeline failed.</li>\n              <li>Do you have too many events marked as critical for the team to manage.</li>\n              <li>Is the highest fan out event a good candidate for extra observability and testing.</li>\n            </ul>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}