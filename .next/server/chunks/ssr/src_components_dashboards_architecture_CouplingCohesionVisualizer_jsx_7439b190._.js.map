{
  "version": 3,
  "sources": [],
  "debugId": "73c5bb9c-3a52-7566-69c4-a7367535f95b",
  "sections": [
    {"offset": {"line": 1, "column": 0}, "map": {"version":3,"sources":["../../../../src/components/dashboards/architecture/CouplingCohesionVisualizer.jsx"],"sourcesContent":["\"use client\";\n\nimport { useMemo, useState } from \"react\";\n\nexport function CouplingCohesionVisualizer() {\n  const [modules, setModules] = useState([\n    { id: 1, name: \"PricingEngine\", incoming: 5, outgoing: 6, responsibilities: 5 },\n    { id: 2, name: \"BillingService\", incoming: 3, outgoing: 2, responsibilities: 3 },\n  ]);\n\n  function updateModule(id, patch) {\n    setModules((current) => current.map((m) => (m.id === id ? { ...m, ...patch } : m)));\n  }\n\n  function addModule() {\n    const nextId = modules.length ? Math.max(...modules.map((m) => m.id)) + 1 : 1;\n    setModules((current) => [\n      ...current,\n      { id: nextId, name: \"\", incoming: 0, outgoing: 0, responsibilities: 1 },\n    ]);\n  }\n\n  function removeModule(id) {\n    setModules((current) => current.filter((m) => m.id !== id));\n  }\n\n  function score(m) {\n    const coupling = m.incoming + m.outgoing;\n    const cohesion = m.responsibilities;\n    const risk = coupling + cohesion;\n\n    if (risk >= 15) return { label: \"High risk god module\", tone: \"bg-rose-50 text-rose-700\" };\n    if (risk >= 8) return { label: \"Needs attention\", tone: \"bg-amber-50 text-amber-800\" };\n    return { label: \"Looks manageable\", tone: \"bg-emerald-50 text-emerald-700\" };\n  }\n\n  const worstModule = useMemo(\n    () =>\n      modules.length\n        ? modules.reduce((worst, m) =>\n            m.incoming + m.outgoing + m.responsibilities >\n            worst.incoming + worst.outgoing + worst.responsibilities\n              ? m\n              : worst,\n          )\n        : null,\n    [modules],\n  );\n\n  return (\n    <div className=\"flex flex-col gap-4\">\n      <p className=\"text-sm text-slate-600\">\n        This tool gives you a feel for coupling and cohesion. It is deliberately approximate. The aim is\n        not a perfect metric. The aim is to notice when one module is absorbing too many responsibilities\n        and dependencies.\n      </p>\n\n      <div className=\"overflow-x-auto rounded-2xl border border-slate-200 bg-white p-3 text-sm\">\n        <table className=\"min-w-full border-separate border-spacing-y-2\">\n          <thead className=\"text-xs uppercase tracking-wide text-slate-500\">\n            <tr>\n              <th className=\"text-left\">Module</th>\n              <th className=\"text-left\">Incoming deps</th>\n              <th className=\"text-left\">Outgoing deps</th>\n              <th className=\"text-left\">Responsibilities</th>\n              <th className=\"text-left\">Assessment</th>\n              <th />\n            </tr>\n          </thead>\n          <tbody>\n            {modules.map((m) => {\n              const s = score(m);\n              return (\n                <tr key={m.id} className=\"align-middle\">\n                  <td className=\"pr-2\">\n                    <input\n                      className=\"w-full rounded-xl border border-slate-200 px-2 py-1 text-sm\"\n                      placeholder=\"Module name\"\n                      value={m.name}\n                      onChange={(e) => updateModule(m.id, { name: e.target.value })}\n                    />\n                  </td>\n                  <td className=\"pr-2\">\n                    <input\n                      type=\"number\"\n                      min={0}\n                      className=\"w-full rounded-xl border border-slate-200 px-2 py-1 text-sm\"\n                      value={m.incoming}\n                      onChange={(e) => updateModule(m.id, { incoming: Number(e.target.value) || 0 })}\n                    />\n                  </td>\n                  <td className=\"pr-2\">\n                    <input\n                      type=\"number\"\n                      min={0}\n                      className=\"w-full rounded-xl border border-slate-200 px-2 py-1 text-sm\"\n                      value={m.outgoing}\n                      onChange={(e) => updateModule(m.id, { outgoing: Number(e.target.value) || 0 })}\n                    />\n                  </td>\n                  <td className=\"pr-2\">\n                    <input\n                      type=\"number\"\n                      min={1}\n                      className=\"w-full rounded-xl border border-slate-200 px-2 py-1 text-sm\"\n                      value={m.responsibilities}\n                      onChange={(e) =>\n                        updateModule(m.id, {\n                          responsibilities: Math.max(1, Number(e.target.value) || 1),\n                        })\n                      }\n                    />\n                  </td>\n                  <td className=\"pr-2\">\n                    <span\n                      className={\n                        \"inline-flex items-center rounded-full px-2 py-0.5 text-xs font-medium \" +\n                        s.tone\n                      }\n                    >\n                      {s.label}\n                    </span>\n                  </td>\n                  <td className=\"text-right\">\n                    <button\n                      type=\"button\"\n                      onClick={() => removeModule(m.id)}\n                      className=\"rounded-full px-2 py-1 text-xs text-slate-400 hover:bg-slate-100 hover:text-slate-700\"\n                    >\n                      Remove\n                    </button>\n                  </td>\n                </tr>\n              );\n            })}\n          </tbody>\n        </table>\n\n        <button\n          type=\"button\"\n          onClick={addModule}\n          className=\"mt-2 rounded-full bg-slate-900 px-3 py-1 text-xs font-medium text-white hover:bg-slate-800\"\n        >\n          Add module\n        </button>\n      </div>\n\n      <div className=\"rounded-2xl bg-slate-50 p-3 text-xs text-slate-700\">\n        <p className=\"mb-1 font-medium\">How to read this</p>\n        <p className=\"mb-1\">\n          Incoming dependencies increase the cost of change. Outgoing dependencies increase the risk of ripple effects. Responsibilities act as a rough stand in for cohesion. Very high values in all three fields suggest a god module.\n        </p>\n        {worstModule && (\n          <p className=\"mt-1\">\n            The current highest risk module is{\" \"}\n            <span className=\"font-semibold\">{worstModule.name || \"Unnamed module\"}</span>. Try\n            reducing either its dependencies or its responsibilities and see how the assessment changes.\n          </p>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}