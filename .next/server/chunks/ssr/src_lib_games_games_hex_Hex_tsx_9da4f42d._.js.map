{
  "version": 3,
  "sources": [],
  "debugId": "3a001623-09f9-3a67-c4d0-d6d090251ab3",
  "sections": [
    {"offset": {"line": 1, "column": 0}, "map": {"version":3,"sources":["../../../../src/lib/games/games/hex/Hex.tsx"],"sourcesContent":["/**\n * Hex\n * \n * Classic connection game on hexagonal board\n * Connect your sides to win\n */\n\n\"use client\";\n\nimport React, { useState, useCallback, useMemo } from \"react\";\nimport GameShell from \"@/lib/games/framework/GameShell\";\nimport { StateManager } from \"@/lib/games/framework/StateManager\";\nimport { DifficultyEngine } from \"@/lib/games/framework/DifficultyEngine\";\nimport { ExplainabilityEngine } from \"@/lib/games/framework/ExplainabilityEngine\";\nimport { useGameAnalytics } from \"@/lib/games/framework/useGameAnalytics\";\nimport type { GameConfig, GameStatus, GameAnalysis } from \"@/lib/games/framework/types\";\n\nconst GAME_CONFIG: GameConfig = {\n  id: \"hex\",\n  title: \"Hex\",\n  description: \"Classic connection game on hexagonal board. Connect your sides to win.\",\n  category: \"board\",\n  modes: [\"solo\", \"multiplayer\"],\n  supportsMultiplayer: true,\n  minPlayers: 2,\n  maxPlayers: 2,\n  estimatedMinutes: 15,\n  tutorialAvailable: true,\n};\n\ntype CellState = \"empty\" | \"player1\" | \"player2\";\ntype BoardSize = 9 | 11 | 13;\n\ninterface HexCell {\n  row: number;\n  col: number;\n  state: CellState;\n}\n\nexport default function Hex() {\n  const [status, setStatus] = useState<GameStatus>(\"idle\");\n  const [boardSize, setBoardSize] = useState<BoardSize>(9);\n  const [board, setBoard] = useState<HexCell[][]>([]);\n  const [currentPlayer, setCurrentPlayer] = useState<\"player1\" | \"player2\">(\"player1\");\n  const [winner, setWinner] = useState<\"player1\" | \"player2\" | null>(null);\n  const [analysis, setAnalysis] = useState<GameAnalysis | null>(null);\n\n  const seed = useMemo(() => Math.floor(Math.random() * 1000000), []);\n  const stateManager = useMemo(() => new StateManager({ status: \"idle\" }, seed), [seed]);\n  const difficultyEngine = useMemo(\n    () =>\n      new DifficultyEngine({\n        initial: 0.4,\n        target: 0.8,\n        rampTime: 900000, // 15 minutes\n        adaptive: true,\n      }),\n    []\n  );\n  const explainabilityEngine = useMemo(() => new ExplainabilityEngine(), []);\n\n  // Analytics\n  useGameAnalytics(GAME_CONFIG.id, status, stateManager.getState());\n\n  const initializeBoard = useCallback((size: BoardSize) => {\n    const newBoard: HexCell[][] = [];\n    for (let row = 0; row < size; row++) {\n      newBoard[row] = [];\n      for (let col = 0; col < size; col++) {\n        newBoard[row][col] = { row, col, state: \"empty\" };\n      }\n    }\n    return newBoard;\n  }, []);\n\n  const checkWin = useCallback(\n    (board: HexCell[][], player: \"player1\" | \"player2\"): boolean => {\n      const size = board.length;\n      const visited = new Set<string>();\n\n      const dfs = (row: number, col: number): boolean => {\n        const key = `${row},${col}`;\n        if (visited.has(key)) return false;\n        visited.add(key);\n\n        if (board[row][col].state !== player) return false;\n\n        // Check if reached opposite side\n        if (player === \"player1\" && col === size - 1) return true;\n        if (player === \"player2\" && row === size - 1) return true;\n\n        // Check neighbors (hexagonal)\n        const neighbors = [\n          [row - 1, col],\n          [row - 1, col + 1],\n          [row, col - 1],\n          [row, col + 1],\n          [row + 1, col - 1],\n          [row + 1, col],\n        ];\n\n        for (const [nr, nc] of neighbors) {\n          if (nr >= 0 && nr < size && nc >= 0 && nc < size) {\n            if (dfs(nr, nc)) return true;\n          }\n        }\n\n        return false;\n      };\n\n      // Start from player's side\n      if (player === \"player1\") {\n        for (let row = 0; row < size; row++) {\n          if (board[row][0].state === player && dfs(row, 0)) return true;\n        }\n      } else {\n        for (let col = 0; col < size; col++) {\n          if (board[0][col].state === player && dfs(0, col)) return true;\n        }\n      }\n\n      return false;\n    },\n    []\n  );\n\n  const handleCellClick = useCallback(\n    (row: number, col: number) => {\n      if (status !== \"playing\" || board[row][col].state !== \"empty\") return;\n\n      const newBoard = board.map((r) => r.map((c) => ({ ...c })));\n      newBoard[row][col].state = currentPlayer;\n\n      setBoard(newBoard);\n      stateManager.recordMove(\"place\", { row, col, player: currentPlayer });\n\n      // Check win\n      if (checkWin(newBoard, currentPlayer)) {\n        setWinner(currentPlayer);\n        setStatus(\"finished\");\n        stateManager.updateState({ status: \"finished\", score: currentPlayer === \"player1\" ? 100 : 0 });\n        const gameAnalysis = explainabilityEngine.analyzeGame(\n          stateManager.getState(),\n          { id: GAME_CONFIG.id, type: \"board\" }\n        );\n        setAnalysis(gameAnalysis);\n      } else {\n        setCurrentPlayer(currentPlayer === \"player1\" ? \"player2\" : \"player1\");\n      }\n    },\n    [status, board, currentPlayer, stateManager, checkWin, explainabilityEngine]\n  );\n\n  const handleStart = useCallback(() => {\n    const newBoard = initializeBoard(boardSize);\n    setBoard(newBoard);\n    setCurrentPlayer(\"player1\");\n    setWinner(null);\n    setStatus(\"playing\");\n    stateManager.updateState({ status: \"playing\", timestamp: Date.now() });\n    stateManager.recordMove(\"start\", { boardSize });\n  }, [boardSize, initializeBoard, stateManager]);\n\n  const handleReset = useCallback(() => {\n    setStatus(\"idle\");\n    setBoard([]);\n    setCurrentPlayer(\"player1\");\n    setWinner(null);\n    setAnalysis(null);\n    stateManager.updateState({ status: \"idle\", moves: [], score: 0 });\n    difficultyEngine.reset();\n  }, [stateManager, difficultyEngine]);\n\n  return (\n    <GameShell\n      config={GAME_CONFIG}\n      status={status}\n      onStart={status === \"idle\" ? handleStart : undefined}\n      onReset={handleReset}\n      rightPanel={\n        <div className=\"space-y-4\">\n          <div>\n            <h3 className=\"text-sm font-semibold text-slate-900 mb-2\">Current Player</h3>\n            <div className=\"text-lg font-bold text-slate-900\">\n              {currentPlayer === \"player1\" ? \"Player 1 (Red)\" : \"Player 2 (Blue)\"}\n            </div>\n          </div>\n          {winner && (\n            <div>\n              <h3 className=\"text-sm font-semibold text-slate-900 mb-2\">Winner</h3>\n              <div className=\"text-lg font-bold text-green-600\">\n                {winner === \"player1\" ? \"Player 1 Wins!\" : \"Player 2 Wins!\"}\n              </div>\n            </div>\n          )}\n        </div>\n      }\n    >\n      {status === \"idle\" && (\n        <div className=\"text-center py-12\">\n          <p className=\"text-slate-600 mb-4\">Select board size and start playing</p>\n          <div className=\"flex gap-4 justify-center\">\n            {([9, 11, 13] as BoardSize[]).map((size) => (\n              <button\n                key={size}\n                onClick={() => setBoardSize(size)}\n                className={`px-4 py-2 rounded-lg ${\n                  boardSize === size ? \"bg-blue-600 text-white\" : \"bg-slate-100 text-slate-700\"\n                }`}\n                type=\"button\"\n              >\n                {size}x{size}\n              </button>\n            ))}\n          </div>\n        </div>\n      )}\n\n      {status === \"playing\" && board.length > 0 && (\n        <div className=\"flex justify-center\" role=\"application\" aria-label=\"Hex game board\">\n          <div\n            className=\"inline-grid gap-0\"\n            style={{\n              gridTemplateColumns: `repeat(${boardSize}, minmax(0, 1fr))`,\n              transform: \"rotate(-30deg)\",\n            }}\n            role=\"grid\"\n            aria-label={`Hex board, ${boardSize} by ${boardSize} cells`}\n          >\n            {board.map((row, rowIdx) =>\n              row.map((cell, colIdx) => (\n                <button\n                  key={`${rowIdx}-${colIdx}`}\n                  onClick={() => handleCellClick(rowIdx, colIdx)}\n                  disabled={cell.state !== \"empty\"}\n                  className={`aspect-square w-12 h-12 border border-slate-300 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 ${\n                    cell.state === \"player1\"\n                      ? \"bg-red-500 hover:bg-red-600\"\n                      : cell.state === \"player2\"\n                      ? \"bg-blue-500 hover:bg-blue-600\"\n                      : \"bg-white hover:bg-slate-100\"\n                  } ${cell.state !== \"empty\" ? \"cursor-not-allowed opacity-60\" : \"cursor-pointer\"}`}\n                  type=\"button\"\n                  aria-label={`Cell row ${rowIdx + 1}, column ${colIdx + 1}, ${cell.state === \"empty\" ? \"empty\" : cell.state === \"player1\" ? \"occupied by player 1\" : \"occupied by player 2\"}`}\n                  aria-pressed={cell.state !== \"empty\"}\n                />\n              ))\n            )}\n          </div>\n        </div>\n      )}\n\n      {status === \"finished\" && analysis && (\n        <div className=\"mt-6 space-y-4\">\n          <div className=\"rounded-lg bg-blue-50 border border-blue-200 p-4\">\n            <p className=\"text-sm text-blue-900\">{analysis.summary}</p>\n          </div>\n        </div>\n      )}\n    </GameShell>\n  );\n}\n"],"names":[],"mappings":"uCAKC,IAAA,EAAA,EAAA,CAAA,CAAA,QAID,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QAGA,IAAM,EAA0B,CAC9B,GAAI,MACJ,MAAO,MACP,YAAa,yEACb,SAAU,QACV,MAAO,CAAC,OAAQ,cAAc,CAC9B,qBAAqB,EACrB,WAAY,EACZ,WAAY,EACZ,iBAAkB,GAClB,mBAAmB,CACrB,EAWe,SAAS,IACtB,GAAM,CAAC,EAAQ,EAAU,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAa,QAC3C,CAAC,EAAW,EAAa,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAY,GAChD,CAAC,EAAO,EAAS,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAc,EAAE,EAC5C,CAAC,EAAe,EAAiB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAwB,WACpE,CAAC,EAAQ,EAAU,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAA+B,MAC7D,CAAC,EAAU,EAAY,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAsB,MAExD,EAAO,CAAA,EAAA,EAAA,OAAA,AAAO,EAAC,IAAM,KAAK,KAAK,CAAiB,AAAhB,SAAK,MAAM,IAAe,EAAE,EAC5D,EAAe,CAAA,EAAA,EAAA,OAAA,AAAO,EAAC,IAAM,IAAI,EAAA,YAAY,CAAC,CAAE,OAAQ,MAAO,EAAG,GAAO,CAAC,EAAK,EAC/E,EAAmB,CAAA,EAAA,EAAA,OAAA,AAAO,EAC9B,IACE,IAAI,EAAA,gBAAgB,CAAC,CACnB,QAAS,GACT,OAAQ,GACR,SAAU,IACV,UAAU,CACZ,GACF,EAAE,EAEE,EAAuB,CAAA,EAAA,EAAA,OAAA,AAAO,EAAC,IAAM,IAAI,EAAA,oBAAoB,CAAI,EAAE,EAGzE,CAAA,EAAA,EAAA,gBAAA,AAAgB,EAAC,EAAY,EAAE,CAAE,EAAQ,EAAa,QAAQ,IAE9D,IAAM,EAAkB,CAAA,EAAA,EAAA,WAAA,AAAW,EAAC,AAAC,IACnC,IAAM,EAAwB,EAAE,CAChC,IAAK,IAAI,EAAM,EAAG,EAAM,EAAM,IAAO,CACnC,CAAQ,CAAC,EAAI,CAAG,EAAE,CAClB,IAAK,IAAI,EAAM,EAAG,EAAM,EAAM,IAC5B,CAAQ,CAAC,AAD0B,EACtB,CAAC,EAAI,CAAG,KAAE,MAAK,EAAK,MAAO,OAAQ,CAEpD,CACA,OAAO,CACT,EAAG,EAAE,EAEC,EAAW,CAAA,EAAA,EAAA,WAAA,AAAW,EAC1B,CAAC,EAAoB,KACnB,IAAM,EAAO,EAAM,MAAM,CACnB,EAAU,IAAI,IAEd,EAAM,CAAC,EAAa,KACxB,IAAM,EAAM,CAAA,EAAG,EAAI,CAAC,EAAE,EAAA,CAAK,CAC3B,GAAI,EAAQ,GAAG,CAAC,KAChB,EAAQ,GAAG,CAAC,GAER,CAAK,CAAC,EAAI,CAAC,EAAI,CAAC,KAAK,GAAK,GAHR,KAGgB,EAHT,EAM7B,GAAe,AAH8B,YAGzC,GAAwB,IAAQ,EAAO,GAC5B,YAAX,GAAwB,IAAQ,EAAO,EADG,CACA,MADO,CACA,CAYrD,IAAK,GAAM,CAAC,EAAI,EAAG,EATD,CAChB,CAAC,AAQoB,EARd,EAAG,EAAI,CACd,CAAC,EAAM,AAOyB,EAPtB,EAAM,EAAE,CAClB,CAAC,EAAK,EAAM,EAAE,CACd,CAAC,EAAK,EAAM,EAAE,CACd,CAAC,EAAM,EAAG,EAAM,EAAE,CAClB,CAAC,EAAM,EAAG,EAAI,CACf,CAGC,GAAI,GAAM,GAAK,EAAK,GAAQ,GAAM,GAAK,EAAK,GACtC,EAAI,CADwC,CACpC,GAAK,OAAO,EAI5B,OAAO,CACT,EAGA,GAAe,WAAW,CAAtB,EACF,KAAK,IAAI,EAAM,EAAG,EAAM,EAAM,IAC5B,EADmC,CAC/B,CAAK,CAAC,EAAI,CAAC,EAAE,CAAC,KAAK,GAAK,GAAU,EAAI,EAAK,GAAI,MAAO,EAC5D,MAEA,IAAK,IAAI,EAAM,EAAG,EAAM,EAAM,IAC5B,EADmC,CAC/B,CAAK,CAAC,EAAE,CAAC,EAAI,CAAC,KAAK,GAAK,GAAU,EAAI,EAAG,GAAM,OAAO,EAI9D,OAAO,CACT,EACA,EAAE,EAGE,EAAkB,CAAA,EAAA,EAAA,WAAA,AAAW,EACjC,CAAC,EAAa,KACZ,GAAe,YAAX,GAAkD,UAA1B,CAAK,CAAC,EAAI,CAAC,EAAI,CAAC,KAAK,CAAc,OAE/D,IAAM,EAAW,EAAM,GAAG,CAAC,AAAC,GAAM,EAAE,GAAG,CAAC,AAAC,IAAM,AAAC,CAAE,GAAG,CAAC,CAAC,CAAC,GACxD,CAAQ,CAAC,EAAI,CAAC,EAAI,CAAC,KAAK,CAAG,EAE3B,EAAS,GACT,EAAa,UAAU,CAAC,QAAS,KAAE,MAAK,EAAK,OAAQ,CAAc,GAG/D,EAAS,EAAU,IACrB,EAAU,GACV,EAAU,KAF2B,OAGrC,EAAa,WAAW,CAAC,CAAE,OAAQ,WAAY,MAAqC,KAAZ,CAAkB,WAApC,CAAkB,CAAoB,GAK5F,EAJqB,EAAqB,QAI9B,GAJyC,CACnD,EAAa,QAAQ,GACrB,CAAE,GAAI,EAAY,EAAE,CAAE,KAAM,OAAQ,KAItC,EAAmC,YAAlB,EAA8B,UAAY,UAE/D,EACA,CAAC,EAAQ,EAAO,EAAe,EAAc,EAAU,EAAqB,EAGxE,EAAc,CAAA,EAAA,EAAA,WAAA,AAAW,EAAC,KAE9B,EADiB,EAAgB,IAEjC,CADS,CACQ,WACjB,EAAU,MACV,EAAU,WACV,EAAa,WAAW,CAAC,CAAE,OAAQ,UAAW,UAAW,KAAK,GAAG,EAAG,GACpE,EAAa,UAAU,CAAC,QAAS,WAAE,CAAU,EAC/C,EAAG,CAAC,EAAW,EAAiB,EAAa,EAEvC,EAAc,CAAA,EAAA,EAAA,WAAA,AAAW,EAAC,KAC9B,EAAU,QACV,EAAS,EAAE,EACX,EAAiB,WACjB,EAAU,MACV,EAAY,MACZ,EAAa,WAAW,CAAC,CAAE,OAAQ,OAAQ,MAAO,EAAE,CAAE,MAAO,CAAE,GAC/D,EAAiB,KAAK,EACxB,EAAG,CAAC,EAAc,EAAiB,EAEnC,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,OAAS,CAAA,CACR,OAAQ,EACR,OAAQ,EACR,QAAoB,SAAX,EAAoB,EAAc,OAC3C,QAAS,EACT,WACE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,qDAA4C,mBAC1D,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,4CACM,YAAlB,EAA8B,iBAAmB,uBAGrD,GACC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,qDAA4C,WAC1D,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,4CACD,YAAX,EAAuB,iBAAmB,mCAOzC,SAAX,GACC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8BACb,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,+BAAsB,wCACnC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qCACX,CAAC,EAAG,GAAI,GAAG,CAAiB,GAAG,CAAC,AAAC,GACjC,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CAEC,QAAS,IAAM,EAAa,GAC5B,UAAW,CAAC,qBAAqB,EAC/B,IAAc,EAAO,yBAA2B,8BAAA,CAChD,CACF,KAAK,mBAEJ,EAAK,IAAE,IAPH,SAcH,YAAX,GAAwB,EAAM,MAAM,CAAG,GACtC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,sBAAsB,KAAK,cAAc,aAAW,0BACjE,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CACC,UAAU,oBACV,MAAO,CACL,oBAAqB,CAAC,OAAO,EAAE,EAAU,iBAAiB,CAAC,CAC3D,UAAW,gBACb,EACA,KAAK,OACL,aAAY,CAAC,WAAW,EAAE,EAAU,IAAI,EAAE,EAAU,MAAM,CAAC,UAE1D,EAAM,GAAG,CAAC,CAAC,EAAK,IACf,EAAI,GAAG,CAAC,CAAC,EAAM,IACb,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAEC,QAAS,IAAM,EAAgB,EAAQ,GACvC,SAAyB,UAAf,EAAK,KAAK,CACpB,UAAW,CAAC,8IAA8I,EACzI,YAAf,EAAK,KAAK,CACN,8BACe,YAAf,EAAK,KAAK,CACV,gCACA,8BACL,CAAC,EAAiB,UAAf,EAAK,KAAK,CAAe,gCAAkC,iBAAA,CAAkB,CACjF,KAAK,SACL,aAAY,CAAC,SAAS,EAAE,EAAS,EAAE,SAAS,EAAE,EAAS,EAAE,EAAE,EAAiB,UAAf,EAAK,KAAK,CAAe,QAAyB,YAAf,EAAK,KAAK,CAAiB,uBAAyB,uBAAA,CAAwB,CAC5K,eAAc,AAAe,YAAV,KAAK,EAZnB,CAAA,EAAG,EAAO,CAAC,EAAE,EAAA,CAAQ,QAoB1B,aAAX,GAAyB,GACxB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,0BACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,4DACb,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,iCAAyB,EAAS,OAAO,SAMlE"}}]
}