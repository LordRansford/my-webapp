{
  "version": 3,
  "sources": [],
  "debugId": "fcba0857-8227-888d-b92b-421e40a3518a",
  "sections": [
    {"offset": {"line": 1, "column": 0}, "map": {"version":3,"sources":["../../../../src/lib/db/prisma.ts","../../../../src/app/verify/certificate/%5BcertificateHash%5D/page.tsx"],"sourcesContent":["import { PrismaClient } from \"@prisma/client\";\n\n// Default DB for local dev when env is missing.\n// This keeps local dev lightweight and avoids \"silent\" runtime failures.\nif (!process.env.DATABASE_URL) {\n  process.env.DATABASE_URL = \"file:./data/dev.db\";\n}\n\ndeclare global {\n  var __prisma: PrismaClient | undefined;\n}\n\nexport const prisma: PrismaClient =\n  global.__prisma ||\n  new PrismaClient({\n    log: [\"error\"],\n  });\n\nif (process.env.NODE_ENV !== \"production\") {\n  global.__prisma = prisma;\n}\n\n\n","import { prisma } from \"@/lib/db/prisma\";\n\nexport const dynamic = \"force-dynamic\";\n\nfunction fmtDate(d: Date | null | undefined) {\n  try {\n    return d ? d.toISOString().slice(0, 10) : \"Unknown\";\n  } catch {\n    return \"Unknown\";\n  }\n}\n\nexport default async function VerifyByHashPage(props: { params: Promise<{ certificateHash: string }> }) {\n  const { certificateHash } = await props.params;\n  const hash = String(certificateHash || \"\").trim();\n\n  const cert = hash ? await (prisma as any).certificate.findUnique({ where: { certificateHash: hash } }) : null;\n  if (!cert) {\n    return (\n      <main className=\"mx-auto max-w-2xl p-6\">\n        <h1 className=\"text-2xl font-semibold\">Certificate verification</h1>\n        <p className=\"mt-4 rounded-lg border border-slate-200 bg-white p-4 text-sm text-slate-700\">\n          Certificate not found or invalid\n        </p>\n      </main>\n    );\n  }\n\n  const issuer = cert.issuer || \"RansfordsNotes\";\n  const status = cert.status || \"issued\";\n  const revoked = status === \"revoked\";\n  const verifiedAt = new Date().toISOString().slice(0, 19).replace(\"T\", \" \") + \" UTC\";\n\n  return (\n    <main className=\"mx-auto max-w-2xl p-6\">\n      <div className=\"rounded-2xl border border-slate-200 bg-white p-6\">\n        <div className=\"flex flex-col gap-1\">\n          <div className=\"text-xs font-semibold uppercase tracking-wide text-slate-600\">Issued by {issuer}</div>\n          <h1 className=\"text-2xl font-semibold text-slate-900\">Certificate verification</h1>\n          <div className=\"mt-2 text-sm text-slate-600\">Verified at {verifiedAt}</div>\n        </div>\n\n        <div className=\"mt-6 grid gap-4\">\n          <div className=\"rounded-lg border border-slate-200 p-4\">\n            <div className=\"text-xs font-semibold uppercase tracking-wide text-slate-600\">Status</div>\n            <div className={`mt-1 text-base font-semibold ${revoked ? \"text-rose-700\" : \"text-emerald-700\"}`}>\n              {revoked ? \"Revoked\" : \"Issued\"}\n            </div>\n            {revoked ? (\n              <div className=\"mt-2 text-sm text-slate-700\">This certificate has been revoked by the issuer.</div>\n            ) : null}\n          </div>\n\n          <div className=\"rounded-lg border border-slate-200 p-4\">\n            <div className=\"grid gap-3 sm:grid-cols-2\">\n              <div>\n                <div className=\"text-xs font-semibold uppercase tracking-wide text-slate-600\">Issuer</div>\n                <div className=\"mt-1 text-sm font-semibold text-slate-900\">{issuer}</div>\n              </div>\n              <div>\n                <div className=\"text-xs font-semibold uppercase tracking-wide text-slate-600\">Course</div>\n                <div className=\"mt-1 text-sm font-semibold text-slate-900\">{cert.courseId}</div>\n              </div>\n              <div>\n                <div className=\"text-xs font-semibold uppercase tracking-wide text-slate-600\">Course version</div>\n                <div className=\"mt-1 text-sm font-semibold text-slate-900\">{cert.courseVersion}</div>\n              </div>\n              <div>\n                <div className=\"text-xs font-semibold uppercase tracking-wide text-slate-600\">Issued</div>\n                <div className=\"mt-1 text-sm font-semibold text-slate-900\">{fmtDate(cert.issuedAt)}</div>\n              </div>\n            </div>\n\n            <div className=\"mt-4 border-t border-slate-200 pt-4\">\n              <div className=\"text-xs font-semibold uppercase tracking-wide text-slate-600\">Statement</div>\n              <div className=\"mt-1 text-sm text-slate-700\">\n                This page verifies that a certificate was issued by RansfordsNotes for this course and version.\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </main>\n  );\n}\n\n\n"],"names":[],"mappings":"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"}}]
}