;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="7d0c987d-e159-2d27-4421-c7d1285ecc32")}catch(e){}}();
module.exports=[433807,a=>{"use strict";var b=a.i(508171),c=a.i(127669);function d(){let[a,d]=(0,c.useState)(5),[e,f]=(0,c.useState)(2),[g,h]=(0,c.useState)(500),[i,j]=(0,c.useState)(50),k=(0,c.useMemo)(()=>{let b=e+1;return{userFailureProbability:Math.pow(a/100,b),extraLoadFactor:b,likelyCircuitTrip:a>=i?"High chance of opening":"Unlikely to open"}},[a,e,i]);return(0,b.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,b.jsx)("p",{className:"text-sm text-slate-600",children:"This sandbox lets you see how retries, timeouts and circuit breakers interact. It is not a full reliability model. It helps you feel how quickly extra retries can create extra load."}),(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-[2fr,1fr]",children:[(0,b.jsx)("div",{className:"rounded-2xl border border-slate-200 bg-white p-3 text-sm",children:(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("label",{className:"block text-xs text-slate-600",children:["Base failure rate of a single call",(0,b.jsx)("input",{type:"range",min:1,max:60,value:a,onChange:a=>d(Number(a.target.value)||1),className:"mt-1 w-full"}),(0,b.jsxs)("span",{className:"mt-1 inline-block text-xs text-slate-700",children:[a,"% of calls fail before resilience patterns."]})]}),(0,b.jsxs)("label",{className:"block text-xs text-slate-600",children:["Retries",(0,b.jsx)("input",{type:"range",min:0,max:4,value:e,onChange:a=>f(Number(a.target.value)||0),className:"mt-1 w-full"}),(0,b.jsxs)("span",{className:"mt-1 inline-block text-xs text-slate-700",children:[e," retry attempt",1===e?"":"s"," after the first call."]})]}),(0,b.jsxs)("label",{className:"block text-xs text-slate-600",children:["Timeout per attempt",(0,b.jsx)("input",{type:"range",min:200,max:3e3,step:100,value:g,onChange:a=>h(Number(a.target.value)||200),className:"mt-1 w-full"}),(0,b.jsxs)("span",{className:"mt-1 inline-block text-xs text-slate-700",children:[g," ms per attempt."]})]}),(0,b.jsxs)("label",{className:"block text-xs text-slate-600",children:["Circuit breaker failure threshold",(0,b.jsx)("input",{type:"range",min:10,max:80,step:5,value:i,onChange:a=>j(Number(a.target.value)||10),className:"mt-1 w-full"}),(0,b.jsxs)("span",{className:"mt-1 inline-block text-xs text-slate-700",children:["Circuit opens when failure rate is around ",i,"% or higher."]})]})]})}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"rounded-2xl border border-slate-200 bg-white p-3 text-sm",children:[(0,b.jsx)("p",{className:"mb-2 text-xs font-medium uppercase tracking-wide text-slate-500",children:"Estimated outcomes"}),(0,b.jsxs)("p",{className:"text-xs text-slate-700",children:["Probability that a user still sees a failure after all retries:"," ",(0,b.jsxs)("span",{className:"font-semibold",children:[(100*k.userFailureProbability).toFixed(2),"%"]})]}),(0,b.jsxs)("p",{className:"text-xs text-slate-700",children:["Relative extra load due to retries: ",(0,b.jsxs)("span",{className:"font-semibold",children:[k.extraLoadFactor.toFixed(1)," times"]})," the original request volume."]}),(0,b.jsxs)("p",{className:"text-xs text-slate-700",children:["Circuit breaker behaviour: ",(0,b.jsx)("span",{className:"font-semibold",children:k.likelyCircuitTrip})]}),(0,b.jsxs)("p",{className:"mt-2 text-xs text-slate-600",children:["Total worst case time for one user is roughly ",g*(e+1)/1e3," seconds if every attempt hits the full timeout."]})]}),(0,b.jsxs)("div",{className:"rounded-2xl bg-slate-50 p-3 text-xs text-slate-700",children:[(0,b.jsx)("p",{className:"mb-1 font-medium",children:"Discussion prompts"}),(0,b.jsxs)("ul",{className:"list-disc space-y-1 pl-4",children:[(0,b.jsx)("li",{children:"Is the extra load factor acceptable for the downstream service during an incident."}),(0,b.jsx)("li",{children:"Would a shorter timeout with fewer retries give users a faster, clearer failure."}),(0,b.jsx)("li",{children:"Are there some operations where you prefer no retries at all, for example payments."})]})]})]})]})]})}a.s(["ResiliencePatternSandbox",()=>d])},531809,a=>{a.n(a.i(433807))}];

//# debugId=7d0c987d-e159-2d27-4421-c7d1285ecc32
//# sourceMappingURL=src_components_dashboards_architecture_ResiliencePatternSandbox_jsx_7f955f79._.js.map