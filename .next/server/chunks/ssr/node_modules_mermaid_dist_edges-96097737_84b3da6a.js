;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="f2d921f9-fc51-5d7b-c869-3a0699a590b9")}catch(e){}}();
module.exports=[890969,a=>{"use strict";var b=a.i(407860);a.i(975930);var c=a.i(671731),d=a.i(398153),e=a.i(737645),f=a.i(670963);let g={extension:(a,c,d)=>{b.l.trace("Making markers for ",d),a.append("defs").append("marker").attr("id",d+"_"+c+"-extensionStart").attr("class","marker extension "+c).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),a.append("defs").append("marker").attr("id",d+"_"+c+"-extensionEnd").attr("class","marker extension "+c).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z")},composition:(a,b,c)=>{a.append("defs").append("marker").attr("id",c+"_"+b+"-compositionStart").attr("class","marker composition "+b).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),a.append("defs").append("marker").attr("id",c+"_"+b+"-compositionEnd").attr("class","marker composition "+b).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},aggregation:(a,b,c)=>{a.append("defs").append("marker").attr("id",c+"_"+b+"-aggregationStart").attr("class","marker aggregation "+b).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),a.append("defs").append("marker").attr("id",c+"_"+b+"-aggregationEnd").attr("class","marker aggregation "+b).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},dependency:(a,b,c)=>{a.append("defs").append("marker").attr("id",c+"_"+b+"-dependencyStart").attr("class","marker dependency "+b).attr("refX",6).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),a.append("defs").append("marker").attr("id",c+"_"+b+"-dependencyEnd").attr("class","marker dependency "+b).attr("refX",13).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},lollipop:(a,b,c)=>{a.append("defs").append("marker").attr("id",c+"_"+b+"-lollipopStart").attr("class","marker lollipop "+b).attr("refX",13).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6),a.append("defs").append("marker").attr("id",c+"_"+b+"-lollipopEnd").attr("class","marker lollipop "+b).attr("refX",1).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6)},point:(a,b,c)=>{a.append("marker").attr("id",c+"_"+b+"-pointEnd").attr("class","marker "+b).attr("viewBox","0 0 10 10").attr("refX",6).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),a.append("marker").attr("id",c+"_"+b+"-pointStart").attr("class","marker "+b).attr("viewBox","0 0 10 10").attr("refX",4.5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 5 L 10 10 L 10 0 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},circle:(a,b,c)=>{a.append("marker").attr("id",c+"_"+b+"-circleEnd").attr("class","marker "+b).attr("viewBox","0 0 10 10").attr("refX",11).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),a.append("marker").attr("id",c+"_"+b+"-circleStart").attr("class","marker "+b).attr("viewBox","0 0 10 10").attr("refX",-1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},cross:(a,b,c)=>{a.append("marker").attr("id",c+"_"+b+"-crossEnd").attr("class","marker cross "+b).attr("viewBox","0 0 11 11").attr("refX",12).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0"),a.append("marker").attr("id",c+"_"+b+"-crossStart").attr("class","marker cross "+b).attr("viewBox","0 0 11 11").attr("refX",-1).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0")},barb:(a,b,c)=>{a.append("defs").append("marker").attr("id",c+"_"+b+"-barbEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",14).attr("markerUnits","strokeWidth").attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")}},h=(a,b,c,d)=>{b.forEach(b=>{g[b](a,c,d)})},i=(a,d,e,f)=>{let g=a||"";"object"==typeof g&&(g=g[0]);let h=(0,b.c)();if((0,b.m)(h.flowchart.htmlLabels)){var i,j;let a,e,k,l;return g=g.replace(/\\n|\n/g,"<br />"),b.l.debug("vertexText"+g),i={isNode:f,label:(0,b.M)(g).replace(/fa[blrs]?:fa-[\w-]+/g,a=>`<i class='${a.replace(":"," ")}'></i>`),labelStyle:d.replace("fill:","color:")},e=(a=(0,c.select)(document.createElementNS("http://www.w3.org/2000/svg","foreignObject"))).append("xhtml:div"),k=i.label,l=i.isNode?"nodeLabel":"edgeLabel",e.html((0,b.d)('<span class="'+l+'" '+(i.labelStyle?'style="'+i.labelStyle+'"':"")+">"+k+"</span>",h)),(j=i.labelStyle)&&e.attr("style",j),e.style("display","inline-block"),e.style("white-space","nowrap"),e.attr("xmlns","http://www.w3.org/1999/xhtml"),a.node()}{let a=document.createElementNS("http://www.w3.org/2000/svg","text");a.setAttribute("style",d.replace("color:","fill:"));for(let b of"string"==typeof g?g.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(g)?g:[]){let c=document.createElementNS("http://www.w3.org/2000/svg","tspan");c.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),c.setAttribute("dy","1em"),c.setAttribute("x","0"),e?c.setAttribute("class","title-row"):c.setAttribute("class","row"),c.textContent=b.trim(),a.appendChild(c)}return a}},j=async(a,d,e,g)=>{let h,j,k=d.useHtmlLabels||(0,b.m)((0,b.c)().flowchart.htmlLabels),l=a.insert("g").attr("class",e||"node default").attr("id",d.domId||d.id),m=l.insert("g").attr("class","label").attr("style",d.labelStyle);h=void 0===d.labelText?"":"string"==typeof d.labelText?d.labelText:d.labelText[0];let n=m.node(),o=(j="markdown"===d.labelType?(0,f.a)(m,(0,b.d)((0,b.M)(h),(0,b.c)()),{useHtmlLabels:k,width:d.width||(0,b.c)().flowchart.wrappingWidth,classes:"markdown-node-label"}):n.appendChild(i((0,b.d)((0,b.M)(h),(0,b.c)()),d.labelStyle,!1,g))).getBBox(),p=d.padding/2;if((0,b.m)((0,b.c)().flowchart.htmlLabels)){let a=j.children[0],d=(0,c.select)(j),e=a.getElementsByTagName("img");if(e){let a=""===h.replace(/<img[^>]*>/g,"").trim();await Promise.all([...e].map(c=>new Promise(d=>{function e(){if(c.style.display="flex",c.style.flexDirection="column",a){let a=5*parseInt((0,b.c)().fontSize?(0,b.c)().fontSize:window.getComputedStyle(document.body).fontSize,10)+"px";c.style.minWidth=a,c.style.maxWidth=a}else c.style.width="100%";d(c)}setTimeout(()=>{c.complete&&e()}),c.addEventListener("error",e),c.addEventListener("load",e)})))}o=a.getBoundingClientRect(),d.attr("width",o.width),d.attr("height",o.height)}return k?m.attr("transform","translate("+-o.width/2+", "+-o.height/2+")"):m.attr("transform","translate(0, "+-o.height/2+")"),d.centerLabel&&m.attr("transform","translate("+-o.width/2+", "+-o.height/2+")"),m.insert("rect",":first-child"),{shapeSvg:l,bbox:o,halfPadding:p,label:m}},k=(a,b)=>{let c=b.node().getBBox();a.width=c.width,a.height=c.height};function l(a,b,c,d){return a.insert("polygon",":first-child").attr("points",d.map(function(a){return a.x+","+a.y}).join(" ")).attr("class","label-container").attr("transform","translate("+-b/2+","+c/2+")")}let m=(a,b)=>{var c,d,e=a.x,f=a.y,g=b.x-e,h=b.y-f,i=a.width/2,j=a.height/2;return Math.abs(h)*i>Math.abs(g)*j?(h<0&&(j=-j),c=0===h?0:j*g/h,d=j):(g<0&&(i=-i),c=i,d=0===g?0:i*h/g),{x:e+c,y:f+d}},n=function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n;return d=a,e=b,f=b,g=c,h=d.x,i=d.y,j=h-g.x,l=Math.sqrt(e*e*(k=i-g.y)*k+f*f*j*j),m=Math.abs(e*f*j/l),g.x<h&&(m=-m),n=Math.abs(e*f*k/l),g.y<i&&(n=-n),{x:h+m,y:i+n}},o=function(a,b,c){var d=a.x,e=a.y,f=[],g=1/0,h=1/0;"function"==typeof b.forEach?b.forEach(function(a){g=Math.min(g,a.x),h=Math.min(h,a.y)}):(g=Math.min(g,b.x),h=Math.min(h,b.y));for(var i=d-a.width/2-g,j=e-a.height/2-h,k=0;k<b.length;k++){var l=b[k],m=b[k<b.length-1?k+1:0],n=function(a,b,c,d){var e,f,g,h,i,j,k,l,m,n,o,p,q;if(e=b.y-a.y,g=a.x-b.x,i=b.x*a.y-a.x*b.y,m=e*c.x+g*c.y+i,n=e*d.x+g*d.y+i,0===m||0===n||!(m*n>0)){if((f=d.y-c.y,h=c.x-d.x,j=d.x*c.y-c.x*d.y,k=f*a.x+h*a.y+j,l=f*b.x+h*b.y+j,!(0!==k&&0!==l&&k*l>0))&&0!=(o=e*h-f*g))return p=Math.abs(o/2),{x:(q=g*j-h*i)<0?(q-p)/o:(q+p)/o,y:(q=f*i-e*j)<0?(q-p)/o:(q+p)/o}}}(a,c,{x:i+l.x,y:j+l.y},{x:i+m.x,y:j+m.y});n&&f.push(n)}return f.length?(f.length>1&&f.sort(function(a,b){var d=a.x-c.x,e=a.y-c.y,f=Math.sqrt(d*d+e*e),g=b.x-c.x,h=b.y-c.y,i=Math.sqrt(g*g+h*h);return f<i?-1:+(f!==i)}),f[0]):a},p=a=>a?" "+a:"",q=(a,b)=>`${b||"node default"}${p(a.classes)} ${p(a.class)}`,r=async(a,c)=>{let{shapeSvg:d,bbox:e}=await j(a,c,q(c,void 0),!0),f=e.width+c.padding+(e.height+c.padding),g=[{x:f/2,y:0},{x:f,y:-f/2},{x:f/2,y:-f},{x:0,y:-f/2}];b.l.info("Question main (Circle)");let h=l(d,f,f,g);return h.attr("style",c.style),k(c,h),c.intersect=function(a){return b.l.warn("Intersect called"),o(c,g,a)},d};function s(a,c,d,e){let f=[],g=a=>{f.push(a,0)},h=a=>{f.push(0,a)};c.includes("t")?(b.l.debug("add top border"),g(d)):h(d),c.includes("r")?(b.l.debug("add right border"),g(e)):h(e),c.includes("b")?(b.l.debug("add bottom border"),g(d)):h(d),c.includes("l")?(b.l.debug("add left border"),g(e)):h(e),a.attr("stroke-dasharray",f.join(" "))}let t=(a,b,c)=>{let d=a.insert("g").attr("class","node default").attr("id",b.domId||b.id),e=70,f=10;return"LR"===c&&(e=10,f=70),k(b,d.append("rect").attr("x",-1*e/2).attr("y",-1*f/2).attr("width",e).attr("height",f).attr("class","fork-join")),b.height=b.height+b.padding/2,b.width=b.width+b.padding/2,b.intersect=function(a){return m(b,a)},d},u={rhombus:r,composite:async(a,c)=>{let{shapeSvg:d,bbox:e,halfPadding:f}=await j(a,c,"node "+c.classes,!0),g=d.insert("rect",":first-child"),h=c.positioned?c.width:e.width+c.padding,i=c.positioned?c.height:e.height+c.padding,l=c.positioned?-h/2:-e.width/2-f,n=c.positioned?-i/2:-e.height/2-f;if(g.attr("class","basic cluster composite label-container").attr("style",c.style).attr("rx",c.rx).attr("ry",c.ry).attr("x",l).attr("y",n).attr("width",h).attr("height",i),c.props){let a=new Set(Object.keys(c.props));c.props.borders&&(s(g,c.props.borders,h,i),a.delete("borders")),a.forEach(a=>{b.l.warn(`Unknown node property ${a}`)})}return k(c,g),c.intersect=function(a){return m(c,a)},d},question:r,rect:async(a,c)=>{let{shapeSvg:d,bbox:e,halfPadding:f}=await j(a,c,"node "+c.classes+" "+c.class,!0),g=d.insert("rect",":first-child"),h=c.positioned?c.width:e.width+c.padding,i=c.positioned?c.height:e.height+c.padding,l=c.positioned?-h/2:-e.width/2-f,n=c.positioned?-i/2:-e.height/2-f;if(g.attr("class","basic label-container").attr("style",c.style).attr("rx",c.rx).attr("ry",c.ry).attr("x",l).attr("y",n).attr("width",h).attr("height",i),c.props){let a=new Set(Object.keys(c.props));c.props.borders&&(s(g,c.props.borders,h,i),a.delete("borders")),a.forEach(a=>{b.l.warn(`Unknown node property ${a}`)})}return k(c,g),c.intersect=function(a){return m(c,a)},d},labelRect:async(a,c)=>{let{shapeSvg:d}=await j(a,c,"label",!0);b.l.trace("Classes = ",c.class);let e=d.insert("rect",":first-child");if(e.attr("width",0).attr("height",0),d.attr("class","label edgeLabel"),c.props){let a=new Set(Object.keys(c.props));c.props.borders&&(s(e,c.props.borders,0,0),a.delete("borders")),a.forEach(a=>{b.l.warn(`Unknown node property ${a}`)})}return k(c,e),c.intersect=function(a){return m(c,a)},d},rectWithTitle:(a,d)=>{let e;e=d.classes?"node "+d.classes:"node default";let f=a.insert("g").attr("class",e).attr("id",d.domId||d.id),g=f.insert("rect",":first-child"),h=f.insert("line"),j=f.insert("g").attr("class","label"),l=d.labelText.flat?d.labelText.flat():d.labelText,n="";n="object"==typeof l?l[0]:l,b.l.info("Label text abc79",n,l,"object"==typeof l);let o=j.node().appendChild(i(n,d.labelStyle,!0,!0)),p={width:0,height:0};if((0,b.m)((0,b.c)().flowchart.htmlLabels)){let a=o.children[0],b=(0,c.select)(o);p=a.getBoundingClientRect(),b.attr("width",p.width),b.attr("height",p.height)}b.l.info("Text 2",l);let q=l.slice(1,l.length),r=o.getBBox(),s=j.node().appendChild(i(q.join?q.join("<br/>"):q,d.labelStyle,!0,!0));if((0,b.m)((0,b.c)().flowchart.htmlLabels)){let a=s.children[0],b=(0,c.select)(s);p=a.getBoundingClientRect(),b.attr("width",p.width),b.attr("height",p.height)}let t=d.padding/2;return(0,c.select)(s).attr("transform","translate( "+(p.width>r.width?0:(r.width-p.width)/2)+", "+(r.height+t+5)+")"),(0,c.select)(o).attr("transform","translate( "+(p.width<r.width?0:-(r.width-p.width)/2)+", 0)"),p=j.node().getBBox(),j.attr("transform","translate("+-p.width/2+", "+(-p.height/2-t+3)+")"),g.attr("class","outer title-state").attr("x",-p.width/2-t).attr("y",-p.height/2-t).attr("width",p.width+d.padding).attr("height",p.height+d.padding),h.attr("class","divider").attr("x1",-p.width/2-t).attr("x2",p.width/2+t).attr("y1",-p.height/2-t+r.height+t).attr("y2",-p.height/2-t+r.height+t),k(d,g),d.intersect=function(a){return m(d,a)},f},choice:(a,b)=>{let c=a.insert("g").attr("class","node default").attr("id",b.domId||b.id);return c.insert("polygon",":first-child").attr("points",[{x:0,y:14},{x:14,y:0},{x:0,y:-14},{x:-14,y:0}].map(function(a){return a.x+","+a.y}).join(" ")).attr("class","state-start").attr("r",7).attr("width",28).attr("height",28),b.width=28,b.height=28,b.intersect=function(a){return n(b,14,a)},c},circle:async(a,c)=>{let{shapeSvg:d,bbox:e,halfPadding:f}=await j(a,c,q(c,void 0),!0),g=d.insert("circle",":first-child");return g.attr("style",c.style).attr("rx",c.rx).attr("ry",c.ry).attr("r",e.width/2+f).attr("width",e.width+c.padding).attr("height",e.height+c.padding),b.l.info("Circle main"),k(c,g),c.intersect=function(a){return b.l.info("Circle intersect",c,e.width/2+f,a),n(c,e.width/2+f,a)},d},doublecircle:async(a,c)=>{let{shapeSvg:d,bbox:e,halfPadding:f}=await j(a,c,q(c,void 0),!0),g=d.insert("g",":first-child"),h=g.insert("circle"),i=g.insert("circle");return g.attr("class",c.class),h.attr("style",c.style).attr("rx",c.rx).attr("ry",c.ry).attr("r",e.width/2+f+5).attr("width",e.width+c.padding+10).attr("height",e.height+c.padding+10),i.attr("style",c.style).attr("rx",c.rx).attr("ry",c.ry).attr("r",e.width/2+f).attr("width",e.width+c.padding).attr("height",e.height+c.padding),b.l.info("DoubleCircle main"),k(c,h),c.intersect=function(a){return b.l.info("DoubleCircle intersect",c,e.width/2+f+5,a),n(c,e.width/2+f+5,a)},d},stadium:async(a,b)=>{let{shapeSvg:c,bbox:d}=await j(a,b,q(b,void 0),!0),e=d.height+b.padding,f=d.width+e/4+b.padding,g=c.insert("rect",":first-child").attr("style",b.style).attr("rx",e/2).attr("ry",e/2).attr("x",-f/2).attr("y",-e/2).attr("width",f).attr("height",e);return k(b,g),b.intersect=function(a){return m(b,a)},c},hexagon:async(a,b)=>{let{shapeSvg:c,bbox:d}=await j(a,b,q(b,void 0),!0),e=d.height+b.padding,f=e/4,g=d.width+2*f+b.padding,h=[{x:f,y:0},{x:g-f,y:0},{x:g,y:-e/2},{x:g-f,y:-e},{x:f,y:-e},{x:0,y:-e/2}],i=l(c,g,e,h);return i.attr("style",b.style),k(b,i),b.intersect=function(a){return o(b,h,a)},c},block_arrow:async(a,b)=>{var c;let d,e,f,g,h,{shapeSvg:i,bbox:m}=await j(a,b,void 0,!0),n=m.height+2*b.padding,p=n/2,q=m.width+2*p+b.padding,r=(c=b.directions,d=(a=>{let b=new Set;for(let c of a)switch(c){case"x":b.add("right"),b.add("left");break;case"y":b.add("up"),b.add("down");break;default:b.add(c)}return b})(c),f=(e=m.height+2*b.padding)/2,g=m.width+2*f+b.padding,h=b.padding/2,d.has("right")&&d.has("left")&&d.has("up")&&d.has("down")?[{x:0,y:0},{x:f,y:0},{x:g/2,y:2*h},{x:g-f,y:0},{x:g,y:0},{x:g,y:-e/3},{x:g+2*h,y:-e/2},{x:g,y:-2*e/3},{x:g,y:-e},{x:g-f,y:-e},{x:g/2,y:-e-2*h},{x:f,y:-e},{x:0,y:-e},{x:0,y:-2*e/3},{x:-2*h,y:-e/2},{x:0,y:-e/3}]:d.has("right")&&d.has("left")&&d.has("up")?[{x:f,y:0},{x:g-f,y:0},{x:g,y:-e/2},{x:g-f,y:-e},{x:f,y:-e},{x:0,y:-e/2}]:d.has("right")&&d.has("left")&&d.has("down")?[{x:0,y:0},{x:f,y:-e},{x:g-f,y:-e},{x:g,y:0}]:d.has("right")&&d.has("up")&&d.has("down")?[{x:0,y:0},{x:g,y:-f},{x:g,y:-e+f},{x:0,y:-e}]:d.has("left")&&d.has("up")&&d.has("down")?[{x:g,y:0},{x:0,y:-f},{x:0,y:-e+f},{x:g,y:-e}]:d.has("right")&&d.has("left")?[{x:f,y:0},{x:f,y:-h},{x:g-f,y:-h},{x:g-f,y:0},{x:g,y:-e/2},{x:g-f,y:-e},{x:g-f,y:-e+h},{x:f,y:-e+h},{x:f,y:-e},{x:0,y:-e/2}]:d.has("up")&&d.has("down")?[{x:g/2,y:0},{x:0,y:-h},{x:f,y:-h},{x:f,y:-e+h},{x:0,y:-e+h},{x:g/2,y:-e},{x:g,y:-e+h},{x:g-f,y:-e+h},{x:g-f,y:-h},{x:g,y:-h}]:d.has("right")&&d.has("up")?[{x:0,y:0},{x:g,y:-f},{x:0,y:-e}]:d.has("right")&&d.has("down")?[{x:0,y:0},{x:g,y:0},{x:0,y:-e}]:d.has("left")&&d.has("up")?[{x:g,y:0},{x:0,y:-f},{x:g,y:-e}]:d.has("left")&&d.has("down")?[{x:g,y:0},{x:0,y:0},{x:g,y:-e}]:d.has("right")?[{x:f,y:-h},{x:f,y:-h},{x:g-f,y:-h},{x:g-f,y:0},{x:g,y:-e/2},{x:g-f,y:-e},{x:g-f,y:-e+h},{x:f,y:-e+h},{x:f,y:-e+h}]:d.has("left")?[{x:f,y:0},{x:f,y:-h},{x:g-f,y:-h},{x:g-f,y:-e+h},{x:f,y:-e+h},{x:f,y:-e},{x:0,y:-e/2}]:d.has("up")?[{x:f,y:-h},{x:f,y:-e+h},{x:0,y:-e+h},{x:g/2,y:-e},{x:g,y:-e+h},{x:g-f,y:-e+h},{x:g-f,y:-h}]:d.has("down")?[{x:g/2,y:0},{x:0,y:-h},{x:f,y:-h},{x:f,y:-e+h},{x:g-f,y:-e+h},{x:g-f,y:-h},{x:g,y:-h}]:[{x:0,y:0}]),s=l(i,q,n,r);return s.attr("style",b.style),k(b,s),b.intersect=function(a){return o(b,r,a)},i},rect_left_inv_arrow:async(a,b)=>{let{shapeSvg:c,bbox:d}=await j(a,b,q(b,void 0),!0),e=d.width+b.padding,f=d.height+b.padding,g=[{x:-f/2,y:0},{x:e,y:0},{x:e,y:-f},{x:-f/2,y:-f},{x:0,y:-f/2}];return l(c,e,f,g).attr("style",b.style),b.width=e+f,b.height=f,b.intersect=function(a){return o(b,g,a)},c},lean_right:async(a,b)=>{let{shapeSvg:c,bbox:d}=await j(a,b,q(b),!0),e=d.width+b.padding,f=d.height+b.padding,g=[{x:-2*f/6,y:0},{x:e-f/6,y:0},{x:e+2*f/6,y:-f},{x:f/6,y:-f}],h=l(c,e,f,g);return h.attr("style",b.style),k(b,h),b.intersect=function(a){return o(b,g,a)},c},lean_left:async(a,b)=>{let{shapeSvg:c,bbox:d}=await j(a,b,q(b,void 0),!0),e=d.width+b.padding,f=d.height+b.padding,g=[{x:2*f/6,y:0},{x:e+f/6,y:0},{x:e-2*f/6,y:-f},{x:-f/6,y:-f}],h=l(c,e,f,g);return h.attr("style",b.style),k(b,h),b.intersect=function(a){return o(b,g,a)},c},trapezoid:async(a,b)=>{let{shapeSvg:c,bbox:d}=await j(a,b,q(b,void 0),!0),e=d.width+b.padding,f=d.height+b.padding,g=[{x:-2*f/6,y:0},{x:e+2*f/6,y:0},{x:e-f/6,y:-f},{x:f/6,y:-f}],h=l(c,e,f,g);return h.attr("style",b.style),k(b,h),b.intersect=function(a){return o(b,g,a)},c},inv_trapezoid:async(a,b)=>{let{shapeSvg:c,bbox:d}=await j(a,b,q(b,void 0),!0),e=d.width+b.padding,f=d.height+b.padding,g=[{x:f/6,y:0},{x:e-f/6,y:0},{x:e+2*f/6,y:-f},{x:-2*f/6,y:-f}],h=l(c,e,f,g);return h.attr("style",b.style),k(b,h),b.intersect=function(a){return o(b,g,a)},c},rect_right_inv_arrow:async(a,b)=>{let{shapeSvg:c,bbox:d}=await j(a,b,q(b,void 0),!0),e=d.width+b.padding,f=d.height+b.padding,g=[{x:0,y:0},{x:e+f/2,y:0},{x:e,y:-f/2},{x:e+f/2,y:-f},{x:0,y:-f}],h=l(c,e,f,g);return h.attr("style",b.style),k(b,h),b.intersect=function(a){return o(b,g,a)},c},cylinder:async(a,b)=>{let{shapeSvg:c,bbox:d}=await j(a,b,q(b,void 0),!0),e=d.width+b.padding,f=e/2,g=f/(2.5+e/50),h=d.height+g+b.padding,i="M 0,"+g+" a "+f+","+g+" 0,0,0 "+e+" 0 a "+f+","+g+" 0,0,0 "+-e+" 0 l 0,"+h+" a "+f+","+g+" 0,0,0 "+e+" 0 l 0,"+-h,l=c.attr("label-offset-y",g).insert("path",":first-child").attr("style",b.style).attr("d",i).attr("transform","translate("+-e/2+","+-(h/2+g)+")");return k(b,l),b.intersect=function(a){let c=m(b,a),d=c.x-b.x;if(0!=f&&(Math.abs(d)<b.width/2||Math.abs(d)==b.width/2&&Math.abs(c.y-b.y)>b.height/2-g)){let e=g*g*(1-d*d/(f*f));0!=e&&(e=Math.sqrt(e)),e=g-e,a.y-b.y>0&&(e=-e),c.y+=e}return c},c},start:(a,b)=>{let c=a.insert("g").attr("class","node default").attr("id",b.domId||b.id),d=c.insert("circle",":first-child");return d.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14),k(b,d),b.intersect=function(a){return n(b,7,a)},c},end:(a,b)=>{let c=a.insert("g").attr("class","node default").attr("id",b.domId||b.id),d=c.insert("circle",":first-child"),e=c.insert("circle",":first-child");return e.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14),d.attr("class","state-end").attr("r",5).attr("width",10).attr("height",10),k(b,e),b.intersect=function(a){return n(b,7,a)},c},note:async(a,c)=>{c.useHtmlLabels||(0,b.c)().flowchart.htmlLabels||(c.centerLabel=!0);let{shapeSvg:d,bbox:e,halfPadding:f}=await j(a,c,"node "+c.classes,!0);b.l.info("Classes = ",c.classes);let g=d.insert("rect",":first-child");return g.attr("rx",c.rx).attr("ry",c.ry).attr("x",-e.width/2-f).attr("y",-e.height/2-f).attr("width",e.width+c.padding).attr("height",e.height+c.padding),k(c,g),c.intersect=function(a){return m(c,a)},d},subroutine:async(a,b)=>{let{shapeSvg:c,bbox:d}=await j(a,b,q(b,void 0),!0),e=d.width+b.padding,f=d.height+b.padding,g=[{x:0,y:0},{x:e,y:0},{x:e,y:-f},{x:0,y:-f},{x:0,y:0},{x:-8,y:0},{x:e+8,y:0},{x:e+8,y:-f},{x:-8,y:-f},{x:-8,y:0}],h=l(c,e,f,g);return h.attr("style",b.style),k(b,h),b.intersect=function(a){return o(b,g,a)},c},fork:t,join:t,class_box:(a,d)=>{let e,f=d.padding/2;e=d.classes?"node "+d.classes:"node default";let g=a.insert("g").attr("class",e).attr("id",d.domId||d.id),h=g.insert("rect",":first-child"),j=g.insert("line"),l=g.insert("line"),n=0,o=4,p=g.insert("g").attr("class","label"),q=0,r=d.classData.annotations&&d.classData.annotations[0],s=d.classData.annotations[0]?"«"+d.classData.annotations[0]+"»":"",t=p.node().appendChild(i(s,d.labelStyle,!0,!0)),u=t.getBBox();if((0,b.m)((0,b.c)().flowchart.htmlLabels)){let a=t.children[0],b=(0,c.select)(t);u=a.getBoundingClientRect(),b.attr("width",u.width),b.attr("height",u.height)}d.classData.annotations[0]&&(o+=u.height+4,n+=u.width);let v=d.classData.label;void 0!==d.classData.type&&""!==d.classData.type&&((0,b.c)().flowchart.htmlLabels?v+="&lt;"+d.classData.type+"&gt;":v+="<"+d.classData.type+">");let w=p.node().appendChild(i(v,d.labelStyle,!0,!0));(0,c.select)(w).attr("class","classTitle");let x=w.getBBox();if((0,b.m)((0,b.c)().flowchart.htmlLabels)){let a=w.children[0],b=(0,c.select)(w);x=a.getBoundingClientRect(),b.attr("width",x.width),b.attr("height",x.height)}o+=x.height+4,x.width>n&&(n=x.width);let y=[];d.classData.members.forEach(a=>{let e=a.getDisplayDetails(),f=e.displayText;(0,b.c)().flowchart.htmlLabels&&(f=f.replace(/</g,"&lt;").replace(/>/g,"&gt;"));let g=p.node().appendChild(i(f,e.cssStyle?e.cssStyle:d.labelStyle,!0,!0)),h=g.getBBox();if((0,b.m)((0,b.c)().flowchart.htmlLabels)){let a=g.children[0],b=(0,c.select)(g);h=a.getBoundingClientRect(),b.attr("width",h.width),b.attr("height",h.height)}h.width>n&&(n=h.width),o+=h.height+4,y.push(g)}),o+=8;let z=[];if(d.classData.methods.forEach(a=>{let e=a.getDisplayDetails(),f=e.displayText;(0,b.c)().flowchart.htmlLabels&&(f=f.replace(/</g,"&lt;").replace(/>/g,"&gt;"));let g=p.node().appendChild(i(f,e.cssStyle?e.cssStyle:d.labelStyle,!0,!0)),h=g.getBBox();if((0,b.m)((0,b.c)().flowchart.htmlLabels)){let a=g.children[0],b=(0,c.select)(g);h=a.getBoundingClientRect(),b.attr("width",h.width),b.attr("height",h.height)}h.width>n&&(n=h.width),o+=h.height+4,z.push(g)}),o+=8,r){let a=(n-u.width)/2;(0,c.select)(t).attr("transform","translate( "+(-1*n/2+a)+", "+-1*o/2+")"),q=u.height+4}let A=(n-x.width)/2;return(0,c.select)(w).attr("transform","translate( "+(-1*n/2+A)+", "+(-1*o/2+q)+")"),q+=x.height+4,j.attr("class","divider").attr("x1",-n/2-f).attr("x2",n/2+f).attr("y1",-o/2-f+8+q).attr("y2",-o/2-f+8+q),q+=8,y.forEach(a=>{(0,c.select)(a).attr("transform","translate( "+-n/2+", "+(-1*o/2+q+4)+")");let b=null==a?void 0:a.getBBox();q+=((null==b?void 0:b.height)??0)+4}),q+=8,l.attr("class","divider").attr("x1",-n/2-f).attr("x2",n/2+f).attr("y1",-o/2-f+8+q).attr("y2",-o/2-f+8+q),q+=8,z.forEach(a=>{(0,c.select)(a).attr("transform","translate( "+-n/2+", "+(-1*o/2+q)+")");let b=null==a?void 0:a.getBBox();q+=((null==b?void 0:b.height)??0)+4}),h.attr("style",d.style).attr("class","outer title-state").attr("x",-n/2-f).attr("y",-(o/2)-f).attr("width",n+d.padding).attr("height",o+d.padding),k(d,h),d.intersect=function(a){return m(d,a)},g}},v={},w=async(a,c,d)=>{let e,f;if(c.link){let g;"sandbox"===(0,b.c)().securityLevel?g="_top":c.linkTarget&&(g=c.linkTarget||"_blank"),e=a.insert("svg:a").attr("xlink:href",c.link).attr("target",g),f=await u[c.shape](e,c,d)}else e=f=await u[c.shape](a,c,d);return c.tooltip&&f.attr("title",c.tooltip),c.class&&f.attr("class","node default "+c.class),e.attr("data-node","true"),e.attr("data-id",c.id),v[c.id]=e,c.haveCallback&&v[c.id].attr("class",v[c.id].attr("class")+" clickable"),e},x=(a,b)=>{v[b.id]=a},y=()=>{v={}},z=a=>{let c=v[a.id];b.l.trace("Transforming node",a.diff,a,"translate("+(a.x-a.width/2-5)+", "+a.width/2+")");let d=a.diff||0;return a.clusterNode?c.attr("transform","translate("+(a.x+d-a.width/2)+", "+(a.y-a.height/2-8)+")"):c.attr("transform","translate("+a.x+", "+a.y+")"),d},A=({flowchart:a})=>{var b,c;let d=(null==(b=null==a?void 0:a.subGraphTitleMargin)?void 0:b.top)??0,e=(null==(c=null==a?void 0:a.subGraphTitleMargin)?void 0:c.bottom)??0;return{subGraphTitleTopMargin:d,subGraphTitleBottomMargin:e,subGraphTitleTotalMargin:d+e}},B={aggregation:18,extension:18,composition:18,dependency:6,lollipop:13.5,arrow_point:5.3};function C(a,b){if(void 0===a||void 0===b)return{angle:0,deltaX:0,deltaY:0};a=D(a),b=D(b);let[c,d]=[a.x,a.y],[e,f]=[b.x,b.y],g=e-c,h=f-d;return{angle:Math.atan(h/g),deltaX:g,deltaY:h}}let D=a=>Array.isArray(a)?{x:a[0],y:a[1]}:a,E=a=>({x:function(b,c,d){let e=0;if(0===c&&Object.hasOwn(B,a.arrowTypeStart)){let{angle:b,deltaX:c}=C(d[0],d[1]);e=B[a.arrowTypeStart]*Math.cos(b)*(c>=0?1:-1)}else if(c===d.length-1&&Object.hasOwn(B,a.arrowTypeEnd)){let{angle:b,deltaX:c}=C(d[d.length-1],d[d.length-2]);e=B[a.arrowTypeEnd]*Math.cos(b)*(c>=0?1:-1)}return D(b).x+e},y:function(b,c,d){let e=0;if(0===c&&Object.hasOwn(B,a.arrowTypeStart)){let{angle:b,deltaY:c}=C(d[0],d[1]);e=B[a.arrowTypeStart]*Math.abs(Math.sin(b))*(c>=0?1:-1)}else if(c===d.length-1&&Object.hasOwn(B,a.arrowTypeEnd)){let{angle:b,deltaY:c}=C(d[d.length-1],d[d.length-2]);e=B[a.arrowTypeEnd]*Math.abs(Math.sin(b))*(c>=0?1:-1)}return D(b).y+e}}),F=(a,b,c,d,e)=>{b.arrowTypeStart&&H(a,"start",b.arrowTypeStart,c,d,e),b.arrowTypeEnd&&H(a,"end",b.arrowTypeEnd,c,d,e)},G={arrow_cross:"cross",arrow_point:"point",arrow_barb:"barb",arrow_circle:"circle",aggregation:"aggregation",extension:"extension",composition:"composition",dependency:"dependency",lollipop:"lollipop"},H=(a,c,d,e,f,g)=>{let h=G[d];h?a.attr(`marker-${c}`,`url(${e}#${f}_${g}-${h}${"start"===c?"Start":"End"})`):b.l.warn(`Unknown arrow type: ${d}`)},I={},J={},K=()=>{I={},J={}},L=(a,d)=>{let e,g=(0,b.m)((0,b.c)().flowchart.htmlLabels),h="markdown"===d.labelType?(0,f.a)(a,d.label,{style:d.labelStyle,useHtmlLabels:g,addSvgBackground:!0}):i(d.label,d.labelStyle),j=a.insert("g").attr("class","edgeLabel"),k=j.insert("g").attr("class","label");k.node().appendChild(h);let l=h.getBBox();if(g){let a=h.children[0],b=(0,c.select)(h);l=a.getBoundingClientRect(),b.attr("width",l.width),b.attr("height",l.height)}if(k.attr("transform","translate("+-l.width/2+", "+-l.height/2+")"),I[d.id]=j,d.width=l.width,d.height=l.height,d.startLabelLeft){let b=i(d.startLabelLeft,d.labelStyle),c=a.insert("g").attr("class","edgeTerminals"),f=c.insert("g").attr("class","inner");e=f.node().appendChild(b);let g=b.getBBox();f.attr("transform","translate("+-g.width/2+", "+-g.height/2+")"),J[d.id]||(J[d.id]={}),J[d.id].startLeft=c,M(e,d.startLabelLeft)}if(d.startLabelRight){let b=i(d.startLabelRight,d.labelStyle),c=a.insert("g").attr("class","edgeTerminals"),f=c.insert("g").attr("class","inner");e=c.node().appendChild(b),f.node().appendChild(b);let g=b.getBBox();f.attr("transform","translate("+-g.width/2+", "+-g.height/2+")"),J[d.id]||(J[d.id]={}),J[d.id].startRight=c,M(e,d.startLabelRight)}if(d.endLabelLeft){let b=i(d.endLabelLeft,d.labelStyle),c=a.insert("g").attr("class","edgeTerminals"),f=c.insert("g").attr("class","inner");e=f.node().appendChild(b);let g=b.getBBox();f.attr("transform","translate("+-g.width/2+", "+-g.height/2+")"),c.node().appendChild(b),J[d.id]||(J[d.id]={}),J[d.id].endLeft=c,M(e,d.endLabelLeft)}if(d.endLabelRight){let b=i(d.endLabelRight,d.labelStyle),c=a.insert("g").attr("class","edgeTerminals"),f=c.insert("g").attr("class","inner");e=f.node().appendChild(b);let g=b.getBBox();f.attr("transform","translate("+-g.width/2+", "+-g.height/2+")"),c.node().appendChild(b),J[d.id]||(J[d.id]={}),J[d.id].endRight=c,M(e,d.endLabelRight)}return h};function M(a,c){(0,b.c)().flowchart.htmlLabels&&a&&(a.style.width=9*c.length+"px",a.style.height="12px")}let N=(a,c)=>{b.l.debug("Moving label abc88 ",a.id,a.label,I[a.id],c);let d=c.updatedPath?c.updatedPath:c.originalPath,{subGraphTitleTotalMargin:e}=A((0,b.c)());if(a.label){let f=I[a.id],g=a.x,h=a.y;if(d){let e=b.u.calcLabelPosition(d);b.l.debug("Moving label "+a.label+" from (",g,",",h,") to (",e.x,",",e.y,") abc88"),c.updatedPath&&(g=e.x,h=e.y)}f.attr("transform",`translate(${g}, ${h+e/2})`)}if(a.startLabelLeft){let c=J[a.id].startLeft,e=a.x,f=a.y;if(d){let c=b.u.calcTerminalLabelPosition(10*!!a.arrowTypeStart,"start_left",d);e=c.x,f=c.y}c.attr("transform",`translate(${e}, ${f})`)}if(a.startLabelRight){let c=J[a.id].startRight,e=a.x,f=a.y;if(d){let c=b.u.calcTerminalLabelPosition(10*!!a.arrowTypeStart,"start_right",d);e=c.x,f=c.y}c.attr("transform",`translate(${e}, ${f})`)}if(a.endLabelLeft){let c=J[a.id].endLeft,e=a.x,f=a.y;if(d){let c=b.u.calcTerminalLabelPosition(10*!!a.arrowTypeEnd,"end_left",d);e=c.x,f=c.y}c.attr("transform",`translate(${e}, ${f})`)}if(a.endLabelRight){let c=J[a.id].endRight,e=a.x,f=a.y;if(d){let c=b.u.calcTerminalLabelPosition(10*!!a.arrowTypeEnd,"end_right",d);e=c.x,f=c.y}c.attr("transform",`translate(${e}, ${f})`)}},O=(a,c)=>{b.l.debug("abc88 cutPathAtIntersect",a,c);let d=[],e=a[0],f=!1;return a.forEach(a=>{let g,h,i,j,k,l;if(g=c.x,h=c.y,i=Math.abs(a.x-g),j=Math.abs(a.y-h),k=c.width/2,l=c.height/2,i>=k||j>=l||f)e=a,f||d.push(a);else{let g=((a,c,d)=>{b.l.debug(`intersection calc abc89:
  outsidePoint: ${JSON.stringify(c)}
  insidePoint : ${JSON.stringify(d)}
  node        : x:${a.x} y:${a.y} w:${a.width} h:${a.height}`);let e=a.x,f=a.y,g=Math.abs(e-d.x),h=a.width/2,i=d.x<c.x?h-g:h+g,j=a.height/2,k=Math.abs(c.y-d.y),l=Math.abs(c.x-d.x);if(Math.abs(f-c.y)*h>Math.abs(e-c.x)*j){let a=d.y<c.y?c.y-j-f:f-j-c.y;i=l*a/k;let e={x:d.x<c.x?d.x+i:d.x-l+i,y:d.y<c.y?d.y+k-a:d.y-k+a};return 0===i&&(e.x=c.x,e.y=c.y),0===l&&(e.x=c.x),0===k&&(e.y=c.y),b.l.debug(`abc89 topp/bott calc, Q ${k}, q ${a}, R ${l}, r ${i}`,e),e}{let a=k*(i=d.x<c.x?c.x-h-e:e-h-c.x)/l,f=d.x<c.x?d.x+l-i:d.x-l+i,g=d.y<c.y?d.y+a:d.y-a;return b.l.debug(`sides calc abc89, Q ${k}, q ${a}, R ${l}, r ${i}`,{_x:f,_y:g}),0===i&&(f=c.x,g=c.y),0===l&&(f=c.x),0===k&&(g=c.y),{x:f,y:g}}})(c,e,a),h=!1;d.forEach(a=>{h=h||a.x===g.x&&a.y===g.y}),d.some(a=>a.x===g.x&&a.y===g.y)||d.push(g),f=!0}}),d},P=function(a,c,f,g,h,i,j){let k,l=f.points;b.l.debug("abc88 InsertEdge: edge=",f,"e=",c);let m=!1,n=i.node(c.v);var o=i.node(c.w);(null==o?void 0:o.intersect)&&(null==n?void 0:n.intersect)&&((l=l.slice(1,f.points.length-1)).unshift(n.intersect(l[0])),l.push(o.intersect(l[l.length-1]))),f.toCluster&&(b.l.debug("to cluster abc88",g[f.toCluster]),l=O(f.points,g[f.toCluster].node),m=!0),f.fromCluster&&(b.l.debug("from cluster abc88",g[f.fromCluster]),l=O(l.reverse(),g[f.fromCluster].node).reverse(),m=!0);let p=l.filter(a=>!Number.isNaN(a.y)),q=e.curveBasis;f.curve&&("graph"===h||"flowchart"===h)&&(q=f.curve);let{x:r,y:s}=E(f),t=(0,d.line)().x(r).y(s).curve(q);switch(f.thickness){case"normal":k="edge-thickness-normal";break;case"thick":case"invisible":k="edge-thickness-thick";break;default:k=""}switch(f.pattern){case"solid":k+=" edge-pattern-solid";break;case"dotted":k+=" edge-pattern-dotted";break;case"dashed":k+=" edge-pattern-dashed"}let u=a.append("path").attr("d",t(p)).attr("id",f.id).attr("class"," "+k+(f.classes?" "+f.classes:"")).attr("style",f.style),v="";((0,b.c)().flowchart.arrowMarkerAbsolute||(0,b.c)().state.arrowMarkerAbsolute)&&(v=(v=(v=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search).replace(/\(/g,"\\(")).replace(/\)/g,"\\)")),F(u,f,v,j,h);let w={};return m&&(w.updatedPath=l),w.originalPath=f.points,w};a.s(["a",()=>h,"b",()=>y,"c",()=>i,"d",()=>K,"e",()=>w,"f",()=>L,"g",()=>A,"h",()=>P,"i",()=>m,"j",()=>N,"k",()=>E,"l",()=>j,"m",()=>F,"p",()=>z,"s",()=>x,"u",()=>k])}];

//# debugId=f2d921f9-fc51-5d7b-c869-3a0699a590b9
//# sourceMappingURL=node_modules_mermaid_dist_edges-96097737_84b3da6a.js.map