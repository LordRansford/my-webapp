{
  "version": 3,
  "sources": [],
  "debugId": "e6ed19b2-cc35-2418-7685-3329d79d2ae3",
  "sections": [
    {"offset": {"line": 1, "column": 0}, "map": {"version":3,"sources":["../../../../src/components/dashboards/architecture/SystemLandscapeCanvas.jsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\n\nconst allLayers = [\"Presentation\", \"Domain\", \"Integration\", \"Data\"];\n\nexport function SystemLandscapeCanvas() {\n  const [rows, setRows] = useState([\n    { id: 1, name: \"Web app\", layer: \"Presentation\", talksTo: \"Domain\" },\n    { id: 2, name: \"Domain service\", layer: \"Domain\", talksTo: \"Data\" },\n  ]);\n\n  function updateRow(id, patch) {\n    setRows((current) => current.map((row) => (row.id === id ? { ...row, ...patch } : row)));\n  }\n\n  function addRow() {\n    const nextId = rows.length ? Math.max(...rows.map((r) => r.id)) + 1 : 1;\n    setRows((current) => [\n      ...current,\n      {\n        id: nextId,\n        name: \"\",\n        layer: \"Presentation\",\n        talksTo: \"Domain\",\n      },\n    ]);\n  }\n\n  function removeRow(id) {\n    setRows((current) => current.filter((row) => row.id !== id));\n  }\n\n  function isViolation(row) {\n    if (row.layer === \"Presentation\" && row.talksTo === \"Data\") return true;\n    if (row.layer === \"Data\" && (row.talksTo === \"Domain\" || row.talksTo === \"Presentation\")) {\n      return true;\n    }\n    return false;\n  }\n\n  const violationCount = rows.filter(isViolation).length;\n\n  return (\n    <div className=\"flex flex-col gap-4\">\n      <p className=\"text-sm text-slate-600\">\n        List a few key components, place them in layers and describe which layer they talk to most\n        often. The simple rules below highlight obvious layering problems.\n      </p>\n\n      <div className=\"rounded-2xl border border-slate-200 bg-white p-3 text-sm\">\n        <div className=\"overflow-x-auto\">\n          <table className=\"min-w-full border-separate border-spacing-y-2\">\n            <thead className=\"text-xs uppercase tracking-wide text-slate-500\">\n              <tr>\n                <th className=\"text-left\">Component</th>\n                <th className=\"text-left\">Layer</th>\n                <th className=\"text-left\">Primarily talks to</th>\n                <th className=\"text-left\">Health</th>\n                <th />\n              </tr>\n            </thead>\n            <tbody>\n              {rows.map((row) => {\n                const violation = isViolation(row);\n                return (\n                  <tr key={row.id} className=\"align-middle\">\n                    <td className=\"pr-2\">\n                      <input\n                        className=\"w-full rounded-xl border border-slate-200 px-2 py-1 text-sm\"\n                        placeholder=\"Web app, API gateway, pricing service\"\n                        value={row.name}\n                        onChange={(e) => updateRow(row.id, { name: e.target.value })}\n                      />\n                    </td>\n                    <td className=\"pr-2\">\n                      <select\n                        className=\"w-full rounded-xl border border-slate-200 px-2 py-1 text-sm\"\n                        value={row.layer}\n                        onChange={(e) => updateRow(row.id, { layer: e.target.value })}\n                      >\n                        {allLayers.map((layer) => (\n                          <option key={layer}>{layer}</option>\n                        ))}\n                      </select>\n                    </td>\n                    <td className=\"pr-2\">\n                      <select\n                        className=\"w-full rounded-xl border border-slate-200 px-2 py-1 text-sm\"\n                        value={row.talksTo}\n                        onChange={(e) => updateRow(row.id, { talksTo: e.target.value })}\n                      >\n                        {allLayers.map((layer) => (\n                          <option key={layer}>{layer}</option>\n                        ))}\n                      </select>\n                    </td>\n                    <td className=\"pr-2\">\n                      <span\n                        className={\n                          \"inline-flex items-center rounded-full px-2 py-0.5 text-xs font-medium \" +\n                          (violation ? \"bg-rose-50 text-rose-700\" : \"bg-emerald-50 text-emerald-700\")\n                        }\n                      >\n                        {violation ? \"Layering risk\" : \"Looks sensible\"}\n                      </span>\n                    </td>\n                    <td className=\"text-right\">\n                      <button\n                        type=\"button\"\n                        onClick={() => removeRow(row.id)}\n                        className=\"rounded-full px-2 py-1 text-xs text-slate-400 hover:bg-slate-100 hover:text-slate-700\"\n                      >\n                        Remove\n                      </button>\n                    </td>\n                  </tr>\n                );\n              })}\n            </tbody>\n          </table>\n        </div>\n\n        <button\n          type=\"button\"\n          onClick={addRow}\n          className=\"mt-2 rounded-full bg-slate-900 px-3 py-1 text-xs font-medium text-white hover:bg-slate-800\"\n        >\n          Add component\n        </button>\n      </div>\n\n      <div className=\"grid gap-2 rounded-2xl bg-slate-50 p-3 text-xs text-slate-700\">\n        <p className=\"font-medium\">Hints</p>\n        <ul className=\"list-disc pl-4 space-y-1\">\n          <li>Keep presentation logic out of the data layer.</li>\n          <li>Domain logic should not depend directly on user interface details.</li>\n          <li>\n            If many components talk straight to the data layer, consider adding a clearer domain\n            layer.\n          </li>\n        </ul>\n        <p className=\"text-slate-600\">\n          Current obvious violations detected: <span className=\"font-semibold\">{violationCount}</span>\n        </p>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}