;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="1061c40d-6c7c-4d0f-5d72-d2a2bb968e7c")}catch(e){}}();
module.exports=[193695,(a,b,c)=>{b.exports=a.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},29173,(a,b,c)=>{b.exports=a.x("@prisma/client",()=>require("@prisma/client"))},569264,a=>{a.n(a.i(354832))},881967,a=>{a.n(a.i(429735))},900827,a=>{a.n(a.i(995845))},918554,a=>{a.n(a.i(316801))},517537,a=>{a.n(a.i(903363))},13718,a=>{a.n(a.i(685523))},118198,a=>{a.n(a.i(545518))},666680,(a,b,c)=>{b.exports=a.x("node:crypto",()=>require("node:crypto"))},902157,(a,b,c)=>{b.exports=a.x("node:fs",()=>require("node:fs"))},750227,(a,b,c)=>{b.exports=a.x("node:path",()=>require("node:path"))},929073,a=>{"use strict";var b=a.i(29173);process.env.DATABASE_URL||(process.env.DATABASE_URL="file:./data/dev.db");let c=global.__prisma||new b.PrismaClient({log:["error"]});a.s(["prisma",0,c])},467780,a=>{"use strict";var b=a.i(907997),c=a.i(666680),d=a.i(929073),e=a.i(902157),f=a.i(750227);async function g(a){let b=function(a){let b=String(a||"").trim();if(!b||b.includes(".."))throw Error("Invalid storage key");return b.replace(/^\//,"")}(a.key),c=process.env.BLOB_READ_WRITE_TOKEN||"";if(c){let a=`https://blob.vercel-storage.com/${encodeURIComponent(b)}`,d=await fetch(a,{headers:{authorization:`Bearer ${c}`}});if(!d.ok)throw Error("CERT_STORAGE_GET_FAILED");return new Uint8Array(await d.arrayBuffer())}let d=f.default.join(f.default.join(process.cwd(),"prisma","data","certificates"),b);if(!e.default.existsSync(d))throw Error("CERT_STORAGE_NOT_FOUND");return new Uint8Array(e.default.readFileSync(d))}function h(a,b){let c=a&&"object"==typeof a?a[b]:null;return"string"==typeof c?c:""}async function i(a){var e;let f,i,{certificateId:j}=await a.params,k=String(j||"").trim(),l=d.prisma.certificateIssuance,m=await l.findUnique({where:{certificateId:k}});if(!m)return(0,b.jsxs)("main",{className:"mx-auto max-w-2xl p-6",children:[(0,b.jsx)("h1",{className:"text-2xl font-semibold",children:"Certificate verification"}),(0,b.jsx)("p",{className:"mt-4 rounded-lg border border-slate-200 bg-white p-4 text-sm text-slate-700",children:"Certificate not found or invalid"})]});let n=!1;try{e=await g({key:m.pdfStorageKey}),n=c.default.createHash("sha256").update(Buffer.from(e)).digest("hex")===m.pdfSha256}catch{n=!1}if(!n)return(0,b.jsxs)("main",{className:"mx-auto max-w-2xl p-6",children:[(0,b.jsx)("h1",{className:"text-2xl font-semibold",children:"Certificate verification"}),(0,b.jsx)("p",{className:"mt-4 rounded-lg border border-rose-200 bg-rose-50 p-4 text-sm text-rose-800",children:"Certificate integrity check failed"})]});let o=m.metadata||{},p=h(o,"learnerName")||"Learner",q=h(o,"courseTitle")||m.courseId,r=Number.isFinite(i="number"==typeof(f=o&&"object"==typeof o?o.cpdHours:null)?f:Number(f))?i:null,s=m.issuedAt?new Date(m.issuedAt).toISOString().slice(0,10):"",t=!!m.revokedAt,u=new Date().toISOString().slice(0,19).replace("T"," ")+" UTC";return(0,b.jsx)("main",{className:"mx-auto max-w-2xl p-6",children:(0,b.jsxs)("div",{className:"rounded-2xl border border-slate-200 bg-white p-6",children:[(0,b.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,b.jsx)("div",{className:"text-xs font-semibold uppercase tracking-wide text-slate-600",children:"Issued by RansfordsNotes"}),(0,b.jsx)("h1",{className:"text-2xl font-semibold text-slate-900",children:"Certificate verification"}),(0,b.jsxs)("div",{className:"mt-2 text-sm text-slate-600",children:["Verified at ",u]})]}),(0,b.jsxs)("div",{className:"mt-6 grid gap-4",children:[(0,b.jsxs)("div",{className:"rounded-lg border border-slate-200 p-4",children:[(0,b.jsx)("div",{className:"text-xs font-semibold uppercase tracking-wide text-slate-600",children:"Status"}),(0,b.jsx)("div",{className:`mt-1 text-base font-semibold ${t?"text-rose-700":"text-emerald-700"}`,children:t?"Revoked":"Valid"}),t?(0,b.jsx)("div",{className:"mt-2 text-sm text-slate-700",children:"This certificate has been revoked and is no longer valid."}):null]}),(0,b.jsxs)("div",{className:"rounded-lg border border-slate-200 p-4",children:[(0,b.jsxs)("div",{className:"grid gap-3 sm:grid-cols-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-xs font-semibold uppercase tracking-wide text-slate-600",children:"Certificate holder"}),(0,b.jsx)("div",{className:"mt-1 text-sm font-semibold text-slate-900",children:p})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-xs font-semibold uppercase tracking-wide text-slate-600",children:"Course"}),(0,b.jsx)("div",{className:"mt-1 text-sm font-semibold text-slate-900",children:q}),(0,b.jsx)("div",{className:"text-xs text-slate-600",children:m.courseId})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-xs font-semibold uppercase tracking-wide text-slate-600",children:"CPD hours"}),(0,b.jsx)("div",{className:"mt-1 text-sm font-semibold text-slate-900",children:r&&r>0?r:"Not specified"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-xs font-semibold uppercase tracking-wide text-slate-600",children:"Issue date"}),(0,b.jsx)("div",{className:"mt-1 text-sm font-semibold text-slate-900",children:s||"Unknown"})]})]}),(0,b.jsxs)("div",{className:"mt-4 border-t border-slate-200 pt-4",children:[(0,b.jsx)("div",{className:"text-xs font-semibold uppercase tracking-wide text-slate-600",children:"Certificate ID"}),(0,b.jsx)("div",{className:"mt-1 font-mono text-sm text-slate-900",children:m.certificateId})]})]})]})]})})}a.s(["default",()=>i,"dynamic",0,"force-dynamic"],467780)}];

//# debugId=1061c40d-6c7c-4d0f-5d72-d2a2bb968e7c
//# sourceMappingURL=%5Broot-of-the-server%5D__2cd3f07f._.js.map