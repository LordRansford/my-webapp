;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="f3b82c18-d9ec-b83b-08cc-7701eaa4bfb2")}catch(e){}}();
module.exports=[192945,a=>{"use strict";var b=a.i(218282),c=a.i(572131),d=a.i(469124),e=a.i(831866);function f(a){var b,c;let d,e=function(a){if(0===a.totalBudgetUsed)return 100;let b=a.projects.reduce((b,c)=>{let d=c.currentProgress,e=a.allocationHistory.filter(a=>a.projectId===c.id).reduce((a,b)=>a+b.resources,0);return 0===e?b:b+d/c.requiredResources/(e/c.requiredResources)},0);return Math.min(100,Math.max(0,100*(a.projects.length>0?b/a.projects.length:0)))}(a),f=function(a){if(0===a.objectives.length)return 100;let b=a.objectives.reduce((a,b)=>a+Math.min(100,b.current/b.target*100)*b.weight,0),c=a.objectives.reduce((a,b)=>a+b.weight,0);return c>0?b/c:0}(a),g=0===(b=a).constraints.length?100:b.constraints.filter(a=>!a.violated).length/b.constraints.length*100;return{resourceEfficiency:e,objectiveProgress:f,constraintCompliance:g,riskLevel:Math.min(100,Math.max(0,d=0+(c=a).projects.reduce((a,b)=>a+(.5*((100-b.health)/100)+.5*b.riskLevel),0)/c.projects.length*50+c.constraints.reduce((a,b)=>a+Math.min(1,b.current/b.limit),0)/c.constraints.length*30+Math.min(20,5*c.events.filter(a=>a.round>c.currentRound).length))),waste:function(a){let b=0;for(let c of a.projects){let d=a.allocationHistory.filter(a=>a.projectId===c.id).reduce((a,b)=>a+b.resources,0);c.currentProgress>=100?b+=Math.max(0,d-c.requiredResources):1-c.currentProgress/100*c.diminishingReturns<.1&&(b+=.2*d)}return b}(a)}}function g(a,b){let c=a.projects.map(a=>{var c,d;let e=b.find(b=>b.projectId===a.id);if(!e||0===e.resources)return{...a};let f=(c=a,d=e.resources,c.progressPerResource*d*(1-c.currentProgress/100*c.diminishingReturns)),g=Math.min(100,a.currentProgress+f);return{...a,currentProgress:g}});return{...a,projects:c}}function h(a){return a.objectives.every(a=>a.met)}function i(a){return a.objectives.filter(a=>!a.met)}function j(a){return a.constraints.some(a=>a.violated)}function k(){return{version:1,xp:0,currentTier:"planner",tierProgress:0,unlockedScenarios:["budget-optimization"],unlockedHorizons:[6],unlockedConstraints:["budget"],personalBests:{},currentStreak:0,longestStreak:0,lastPlayedDate:"",completedChallenges:[],stats:{scenariosCompleted:0,averageEfficiency:0,averageScore:0,constraintViolations:0,eventResilience:0,scenarioTypeStats:{}}}}a.i(260054);var l=a.i(389158);a.i(671016);var m=a.i(682313),n=a.i(485827);a.i(264057);var o=a.i(648309);a.i(126482);var p=a.i(196613);a.i(649317);var q=a.i(301944);a.i(930929);var r=a.i(103121),s=a.i(550165),t=a.i(132333),u=a.i(442299);a.i(896088);var v=a.i(129739),w=a.i(606346);let x={id:"allocation-architect",title:"Allocation Architect",description:"Build optimal resource allocation plans under constraints",category:"strategy",modes:["solo","daily"],supportsMultiplayer:!1,minPlayers:1,maxPlayers:1,estimatedMinutes:12,tutorialAvailable:!0},y="allocation-architect";function z(){let[a,z]=(0,c.useState)("idle"),[A,B]=(0,c.useState)(null),[C,D]=(0,c.useState)({}),[E,F]=(0,c.useState)(null),[G,H]=(0,c.useState)(null),[I,J]=(0,c.useState)(null),[K,L]=(0,c.useState)([]),[M,N]=(0,c.useState)(null),[O,P]=(0,c.useState)(null),[Q,R]=(0,c.useState)(null);(0,c.useEffect)(()=>{"idle"!==a||A||S()},[a,A]);let S=(0,c.useCallback)(()=>{try{var a,b;let c=(0,l.getOrGenerateTodayChallenge)(y),d=(a=function(a,b,c,d=8){var f,g,h,i,j;let k=new e.SeededRNG(a),l=(f=c,({foundations:{projectCount:4,objectiveCount:1,constraintCount:1,initialBudget:100,budgetPerRound:50,eventFrequency:.1,constraintTightness:.7,diminishingReturns:.2},intermediate:{projectCount:6,objectiveCount:2,constraintCount:2,initialBudget:80,budgetPerRound:40,eventFrequency:.2,constraintTightness:.8,diminishingReturns:.4},advanced:{projectCount:8,objectiveCount:3,constraintCount:3,initialBudget:70,budgetPerRound:35,eventFrequency:.3,constraintTightness:.9,diminishingReturns:.6},expert:{projectCount:10,objectiveCount:4,constraintCount:4,initialBudget:60,budgetPerRound:30,eventFrequency:.4,constraintTightness:.95,diminishingReturns:.8}})[f]),m=function(a,b,c){let d=[],e=["Alpha","Beta","Gamma","Delta","Epsilon","Zeta","Eta","Theta","Iota","Kappa"];for(let f=0;f<a;f++){let g=c.nextInt(30,80),h=c.nextFloat(.5,2),i=b.diminishingReturns*c.nextFloat(.8,1.2),j=c.nextInt(1,10),k=c.nextFloat(.1,.5),l=[];f>0&&.3>c.next()&&l.push(d[c.nextInt(0,f-1)].id);let m=[];f<a-1&&.3>c.next()&&m.push(`project-${f+1}`),d.push({id:`project-${f}`,name:e[f]||`Project ${f+1}`,description:`Project ${f+1} requires ${g} resources to complete`,requiredResources:g,currentProgress:0,progressPerResource:h,diminishingReturns:i,dependencies:l,unlocks:m,priority:j,riskLevel:k,health:0})}return d}(l.projectCount,l,k),n=function(a,b,c,d){let e=[],f=["complete-projects","maintain-efficiency","meet-constraints","minimize-risk"];for(let c=0;c<a;c++){let a=f[c%f.length],g=0,h="",i="";switch(a){case"complete-projects":g=Math.ceil(b.length*(.5+.3*d.next())),h="Complete Projects",i=`Complete at least ${g} projects`;break;case"maintain-efficiency":g=Math.round(70+20*d.next()),h="Maintain Efficiency",i=`Maintain resource efficiency above ${g}%`;break;case"meet-constraints":g=100,h="Meet All Constraints",i="Meet all constraints throughout the planning horizon";break;case"minimize-risk":g=Math.round(20+30*d.next()),h="Minimize Risk",i=`Keep risk level below ${g}%`}e.push({id:`objective-${c}`,name:h,description:i,type:a,target:g,current:0,weight:d.nextInt(1,10),met:!1})}return e}(l.objectiveCount,m,0,k),o=function(a,b,c){let d=[],e=["budget","time","capacity","resource"];for(let f=0;f<a;f++){let a=e[f%e.length],g=b.initialBudget+8*b.budgetPerRound,h=Math.round(g*b.constraintTightness*c.nextFloat(.9,1.1));d.push({id:`constraint-${f}`,type:a,name:`${a.charAt(0).toUpperCase()+a.slice(1)} Constraint`,description:`Total ${a} usage must not exceed ${h}`,limit:h,current:0,warningThreshold:.8,violated:!1})}return d}(l.constraintCount,l,k),p=function(a,b,c){let d=[];for(let e=2;e<=a;e++)if(c.next()<b.eventFrequency){let a=["budget-shock","requirement-change","resource-availability","external-pressure"],f=c.choice(a);d.push({id:`event-${e}`,type:f,name:{"budget-shock":"Budget Reduction","requirement-change":"Requirement Change","resource-availability":"Resource Availability","external-pressure":"External Pressure"}[f],description:{"budget-shock":"Unexpected budget reduction affects available resources","requirement-change":"Project requirements have changed","resource-availability":"Resource availability has changed","external-pressure":"External pressure affects project priorities"}[f],round:e,severity:c.nextFloat(.3,.8),affectedProjects:[],effect:function(a,b,c){switch(a){case"budget-shock":return{resourceChange:-Math.round(b.budgetPerRound*c.nextFloat(.2,.5))};case"requirement-change":return{requirementChange:c.nextFloat(.1,.3)};case"resource-availability":return{resourceChange:Math.round(b.budgetPerRound*c.nextFloat(-.3,.3))};case"external-pressure":return{progressLoss:c.nextFloat(5,15)};default:return{}}}(f,b,c)})}return d}(d,l,k);return{id:`scenario-${a}`,name:(g=b,h=c,`${({"budget-optimization":"Budget Optimization","time-management":"Time Management","capacity-planning":"Capacity Planning","multi-objective":"Multi-Objective Planning"})[g]} - ${h.charAt(0).toUpperCase()+h.slice(1)}`),description:(i=b,j=c,`A ${j} scenario focusing on ${i.replace("-"," ")}. Allocate resources strategically to meet objectives while managing constraints.`),type:b,difficulty:c,totalRounds:d,initialBudget:l.initialBudget,budgetPerRound:l.budgetPerRound,projects:m,objectives:n,constraints:o,events:p}}(c.seed,"budget-optimization","intermediate",8),b=c.seed,{scenario:a,currentRound:0,totalRounds:a.totalRounds,resourceBudget:a.initialBudget+a.budgetPerRound,totalBudgetUsed:0,projects:a.projects.map(a=>({...a})),objectives:a.objectives.map(a=>({...a})),constraints:a.constraints.map(a=>({...a})),events:[...a.events],allocationHistory:[],roundHistory:[],metrics:{resourceEfficiency:0,objectiveProgress:0,constraintCompliance:100,riskLevel:0,waste:0},seed:b,status:"idle"});B(d),D({}),F(null),H(null),J(null),L([]),N(null),P(null)}catch(a){console.error("Error initializing challenge:",a)}},[]),T=(0,c.useCallback)(()=>{A?(B({...A,status:"playing",currentRound:1}),z("playing"),R(Date.now())):S()},[A,S]),U=(0,c.useCallback)((b,c)=>{let d,e,h;if("playing"!==a||!A)return;D(a=>({...a,[b]:Math.max(0,c)}));let i=Object.entries({...C,[b]:c}).filter(([a,b])=>b>0).map(([a,b])=>({projectId:a,resources:b}));F((d=g(A,i),e=f({...d,projects:d.projects.map(a=>{let b=i.find(b=>b.projectId===a.id);if(!b)return a;let c=a.progressPerResource*b.resources,d=1-a.currentProgress/100*a.diminishingReturns,e=Math.min(100,a.currentProgress+c*d);return{...a,currentProgress:e}}),allocationHistory:[...d.allocationHistory,...i],totalBudgetUsed:d.totalBudgetUsed+i.reduce((a,b)=>a+b.resources,0)}),h=[],i.reduce((a,b)=>a+b.resources,0)>A.resourceBudget&&h.push("Allocation exceeds budget"),d.constraints.forEach(a=>{a.current>a.limit?h.push(`${a.name} will be violated`):a.current>a.limit*a.warningThreshold&&h.push(`${a.name} is approaching limit`)}),{projects:d.projects,objectives:d.objectives,constraints:d.constraints,metrics:e,warnings:h}))},[a,A,C]),V=(0,c.useCallback)(()=>{if(!A||"playing"!==a)return;let b=Object.entries(C).filter(([a,b])=>b>0).map(([a,b])=>({projectId:a,resources:b})),c=function(a,b){let c=[],d=[],e=b.reduce((a,b)=>a+b.resources,0);for(let d of(e>a.resourceBudget&&c.push(`Total allocation (${e}) exceeds available budget (${a.resourceBudget})`),b))d.resources<0&&c.push(`Allocation for ${d.projectId} cannot be negative`);for(let e of b){let b=a.projects.find(a=>a.id===e.projectId);if(b)for(let c of b.dependencies){let b=a.projects.find(a=>a.id===c);b&&b.currentProgress<100&&d.push(`Project ${e.projectId} depends on ${c} which is not complete`)}else c.push(`Project ${e.projectId} not found`)}return e<.5*a.resourceBudget&&d.push("Less than 50% of budget is allocated"),{valid:0===c.length,errors:c,warnings:d}}(A,b);if(!c.valid)return void alert(c.errors.join("\n"));let d=function(a,b){var c,d,e;let h,i,j,k,l;if("playing"!==a.status)return a;let m=b.reduce((a,b)=>a+b.resources,0);if(m>a.resourceBudget)return a;let n=g(a,b),o=n.events.filter(a=>a.round===n.currentRound);o.length>0&&(n=function(a,b){let c={...a};for(let a of b)c=function(a,b){let c=a.projects.map(a=>{if(!(b.affectedProjects.includes(a.id)||0===b.affectedProjects.length))return{...a};let c={...a};if(b.effect.resourceChange){let a=b.effect.resourceChange*b.severity;c.requiredResources=Math.max(10,c.requiredResources+a)}if(b.effect.requirementChange){let a=b.effect.requirementChange*b.severity,d=c.requiredResources*(1+a);c.requiredResources=Math.max(10,d)}if(b.effect.progressLoss){let a=b.effect.progressLoss*b.severity;c.health>0?c.health=Math.max(0,c.health-a):c.currentProgress=Math.max(0,c.currentProgress-a)}return c}),d=a.resourceBudget;return b.effect.resourceChange&&0===b.affectedProjects.length&&(d=Math.max(0,d+b.effect.resourceChange*b.severity)),{...a,projects:c,resourceBudget:d}}(c,a);return c}(n,o)),h=f(c=n),i=c.objectives.map(a=>{let b=function(a,b,c){switch(b.type){case"complete-projects":return a.projects.filter(a=>a.currentProgress>=100).length;case"maintain-efficiency":return c.resourceEfficiency;case"meet-constraints":let d=a.constraints.filter(a=>!a.violated).length;return a.constraints.length>0?d/a.constraints.length*100:100;case"minimize-risk":return c.riskLevel;default:return 0}}(c,a,h),d=b>=a.target;return{...a,current:b,met:d}}),j=(d=n={...c,objectives:i}).constraints.map(a=>{let b=function(a,b){switch(b.type){case"budget":case"resource":return a.totalBudgetUsed;case"time":return a.currentRound;case"capacity":return a.allocationHistory.reduce((a,b)=>a+b.resources,0);case"dependency":return a.projects.filter(b=>b.dependencies.some(b=>{let c=a.projects.find(a=>a.id===b);return!c||c.currentProgress<100})).length;default:return 0}}(d,a),c=b>a.limit;return{...a,current:b,violated:c}}),(n={...d,constraints:j}).metrics=f(n);let p={round:n.currentRound,allocation:b,projectProgress:{},objectiveProgress:{},constraintStatus:{},events:o,metrics:{...n.metrics}};return a.projects.forEach((a,b)=>{let c=n.projects[b];c&&(p.projectProgress[a.id]=c.currentProgress-a.currentProgress)}),a.objectives.forEach((a,b)=>{let c=n.objectives[b];c&&(p.objectiveProgress[a.id]=c.current-a.current)}),n.constraints.forEach(a=>{p.constraintStatus[a.id]=a.violated}),n.roundHistory.push(p),n.allocationHistory.push(...b),n.totalBudgetUsed+=m,n.resourceBudget=n.resourceBudget-m+n.scenario.budgetPerRound,n.currentRound>=n.totalRounds?(n.status="finished",k=(e=n).objectives.every(a=>a.met),l=e.constraints.every(a=>!a.violated),n.outcome=k&&l?"win":"loss"):n.currentRound+=1,n}(A,b);B(d),D({}),F(null),"finished"===d.status&&(z("finished"),W(d))},[A,a,C]),W=(0,c.useCallback)(a=>{let b,c,d,e;if(!a.outcome||!Q)return;let g=Date.now()-Q,r=f(a),s="win"===a.outcome,t=(0,m.generateTodayChallengeCode)(y,a.seed);(0,n.storeChallengeCode)(t),H(t);let u=s?Math.round(.4*r.objectiveProgress+.4*r.resourceEfficiency+.2*r.constraintCompliance):Math.round(.3*r.objectiveProgress+.3*r.resourceEfficiency),x=(0,v.calculateBaseXP)({win:s,score:u,efficiency:r.resourceEfficiency,time:g,difficulty:a.scenario.difficulty,tier:k().currentTier}),z=(0,o.getStreakDataForGame)(y),A=(0,v.createRewardContext)({gameId:y,seed:a.seed,baseXP:x,performance:{score:u,efficiency:r.resourceEfficiency,time:g},streak:z.currentStreak,tier:k().currentTier}),B=(0,w.generateRewardResult)(A),C=function(a,b,c,d){let e={...a};e.xp+=50;let f={planner:0,strategist:100,architect:300,master:600,legend:1e3},g=Object.keys(f).indexOf(e.currentTier),h=Object.keys(f)[g+1];if(h&&e.xp>=f[h])e.currentTier=h,e.tierProgress=0;else{let a=f[e.currentTier],b=h?f[h]:1/0;e.tierProgress=(e.xp-a)/(b-a)}let i=b.scenario.id,k=e.personalBests[i];(!k||c>k.bestScore)&&(e.personalBests[i]={bestScore:c,bestEfficiency:d,bestCompletionRounds:b.currentRound}),e.stats.scenariosCompleted+=1,e.stats.averageScore=(e.stats.averageScore*(e.stats.scenariosCompleted-1)+c)/e.stats.scenariosCompleted,e.stats.averageEfficiency=(e.stats.averageEfficiency*(e.stats.scenariosCompleted-1)+d)/e.stats.scenariosCompleted,j(b)&&(e.stats.constraintViolations+=1);let l=b.scenario.type;e.stats.scenarioTypeStats[l]||(e.stats.scenarioTypeStats[l]={completed:0,averageScore:0,averageEfficiency:0});let m=e.stats.scenarioTypeStats[l];return m.completed+=1,m.averageScore=(m.averageScore*(m.completed-1)+c)/m.completed,m.averageEfficiency=(m.averageEfficiency*(m.completed-1)+d)/m.completed,e}(k(),a,u,r.resourceEfficiency);C.xp=B.totalXP;let D={score:u,time:g,scoreValue:u,efficiency:r.resourceEfficiency,timestamp:Date.now()};N(D),J((0,q.submitScore)(t.code,D)),(0,l.completeTodayChallenge)(y,{score:u,time:g,scoreValue:u}),(0,o.updateStreakForGame)(y,!0),L((0,p.checkAndUnlockAchievements)({gameId:y,currentStreak:z.currentStreak+1,gamesCompleted:C.stats.scenariosCompleted,score:u,time:g}).newlyUnlocked),P((b=function(a){let b=[];for(let c=0;c<a.roundHistory.length;c++){let d=a.roundHistory[c],e=c>0?a.roundHistory[c-1]:null,f=d.allocation,g=f.reduce((a,b)=>a+b.resources,0),h=Math.max(...f.map(a=>a.resources),0),i=g>0?h/g:0;i>.6&&b.push({round:d.round,description:`Concentrated ${Math.round(100*i)}% of resources on single project`,impact:i>.8?"positive":"neutral",reasoning:i>.8?"High concentration enabled fast project completion":"Moderate concentration balanced speed and risk"});let j=Object.values(d.constraintStatus).filter(a=>a).length;if(e){let a=Object.values(e.constraintStatus).filter(a=>a).length;j<a?b.push({round:d.round,description:"Resolved constraint violations",impact:"positive",reasoning:"Successfully addressed constraint issues from previous round"}):j>a&&b.push({round:d.round,description:"New constraint violations occurred",impact:"negative",reasoning:"Allocation strategy led to constraint violations"})}d.events.length>0&&b.push({round:d.round,description:`Responded to ${d.events.length} event(s)`,impact:d.metrics.constraintCompliance>80?"positive":"negative",reasoning:d.metrics.constraintCompliance>80?"Successfully managed events without major impact":"Events caused significant disruption"})}return b.sort((a,b)=>{let c={positive:0,neutral:1,negative:2},d=c[a.impact]-c[b.impact];return 0!==d?d:b.round-a.round}),b.slice(0,3)}(a),c=function(a){let b=[],c=f(a);if(c.resourceEfficiency<70&&b.push({round:a.currentRound,description:`Low resource efficiency: ${Math.round(c.resourceEfficiency)}%`,cost:`Wasted ${Math.round(c.waste)} resources`,recommendation:"Allocate resources more strategically, focus on projects with better returns"}),j(a)){let c=a.constraints.filter(a=>a.violated);b.push({round:a.currentRound,description:`Constraint violations: ${c.length} constraint(s) violated`,cost:"Failed scenario due to constraint violations",recommendation:"Monitor constraints more closely, allocate resources within limits"})}if(!h(a)){let c=i(a);b.push({round:a.currentRound,description:`Unmet objectives: ${c.length} objective(s) not achieved`,cost:"Failed scenario due to unmet objectives",recommendation:"Focus allocation on projects that contribute to objectives"})}return c.waste>.1*a.totalBudgetUsed&&b.push({round:a.currentRound,description:`High resource waste: ${Math.round(c.waste)} resources wasted`,cost:`Lost ${Math.round(c.waste)} resources that could have been used`,recommendation:"Avoid over-allocating to completed projects, redistribute resources"}),a.roundHistory.filter(a=>Object.values(a.constraintStatus).some(a=>a)).length>2&&b.push({round:a.currentRound,description:"Late constraint management",cost:"Multiple rounds with constraint violations",recommendation:"Address constraint issues earlier, monitor constraints proactively"}),b.slice(0,3)}(a),d=function(a,b){let c=[],d=f(a);if(d.resourceEfficiency<70&&c.push({type:"allocation",description:"Improve resource allocation efficiency",rationale:"Current efficiency is below optimal. Focus on projects with better progress-to-resource ratios and avoid over-allocation."}),d.riskLevel>50&&c.push({type:"risk-management",description:"Invest in project health buffers",rationale:"High risk level suggests vulnerability to events. Allocate extra resources to build health buffers on critical projects."}),j(a)&&c.push({type:"strategy",description:"Adopt more conservative allocation strategy",rationale:"Constraint violations indicate need for more careful resource management. Monitor constraints closely and stay within limits."}),!h(a)){let b=i(a);c.push({type:"strategy",description:"Prioritize objective-critical projects",rationale:`Focus allocation on projects that directly contribute to unmet objectives: ${b.map(a=>a.name).join(", ")}`})}return c.slice(0,3)}(a,0),e=function(a,b,c){let d="win"===a.outcome?"successful":"unsuccessful",e=f(a),g=`This ${d} run achieved ${Math.round(e.objectiveProgress)}% objective progress `;if(g+=`with ${Math.round(e.resourceEfficiency)}% resource efficiency. `,b.length>0){let a=b.filter(a=>"positive"===a.impact).length;g+=`Key strategic decisions included ${a} positive choices. `}return c.length>0&&(g+=`Areas for improvement include ${c[0].description.toLowerCase()}. `),"win"===a.outcome?g+="Overall, the allocation strategy successfully balanced objectives, constraints, and resource efficiency.":g+="The allocation strategy needs refinement to better balance competing priorities.",g}(a,b,c),{keyDecisions:b,mistakes:c,recommendations:d,summary:e}))},[Q]),X=(0,c.useCallback)(()=>{z("idle"),B(null),D({}),F(null),H(null),J(null),L([]),N(null),P(null),R(null)},[]),Y=A?(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-sm font-semibold text-slate-900 mb-2",children:"Round"}),(0,b.jsxs)("div",{className:"text-lg font-bold",children:[A.currentRound," / ",A.totalRounds]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-sm font-semibold text-slate-900 mb-2",children:"Budget"}),(0,b.jsx)("div",{className:"text-lg font-bold",children:A.resourceBudget})]}),A.metrics&&(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-sm font-semibold text-slate-900 mb-2",children:"Efficiency"}),(0,b.jsxs)("div",{className:"text-lg font-bold text-green-600",children:[Math.round(A.metrics.resourceEfficiency),"%"]})]}),A.constraints.some(a=>a.violated)&&(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-sm font-semibold text-red-600 mb-2",children:"⚠️ Constraints"}),(0,b.jsxs)("div",{className:"text-sm text-red-600",children:[A.constraints.filter(a=>a.violated).length," violated"]})]})]}):null;return(0,b.jsx)(d.default,{config:x,status:a,onStart:T,onReset:X,rightPanel:Y,children:(0,b.jsx)("div",{className:"p-4",children:A?"idle"===a?(0,b.jsxs)("div",{className:"max-w-2xl mx-auto space-y-4",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-slate-900",children:A.scenario.name}),(0,b.jsx)("p",{className:"text-slate-600",children:A.scenario.description}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("strong",{children:"Projects:"})," ",A.projects.length]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("strong",{children:"Objectives:"})," ",A.objectives.length]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("strong",{children:"Constraints:"})," ",A.constraints.length]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("strong",{children:"Rounds:"})," ",A.totalRounds]})]}),(0,b.jsx)("button",{onClick:T,className:"w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Start Planning"})]}):"playing"===a||"finished"===a?(0,b.jsxs)("div",{className:"max-w-4xl mx-auto space-y-6",children:[(0,b.jsxs)("div",{className:"rounded-xl border border-slate-200 bg-white p-4",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-slate-900 mb-3",children:"Objectives"}),(0,b.jsx)("div",{className:"space-y-2",children:A.objectives.map(a=>(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("div",{className:"text-sm font-medium text-slate-900",children:a.name}),(0,b.jsx)("div",{className:"text-xs text-slate-600",children:a.description})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"w-32 bg-slate-200 rounded-full h-2",children:(0,b.jsx)("div",{className:`h-2 rounded-full ${a.met?"bg-green-600":"bg-blue-600"}`,style:{width:`${Math.min(100,a.current/a.target*100)}%`}})}),(0,b.jsxs)("div",{className:"text-sm font-medium w-16 text-right",children:[Math.round(a.current)," / ",a.target]})]})]},a.id))})]}),(0,b.jsxs)("div",{className:"rounded-xl border border-slate-200 bg-white p-4",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-slate-900 mb-3",children:"Projects"}),(0,b.jsx)("div",{className:"space-y-3",children:A.projects.map(c=>{let d=C[c.id]||0,e=c.dependencies.every(a=>{let b=A.projects.find(b=>b.id===a);return!b||b.currentProgress>=100});return(0,b.jsxs)("div",{className:`p-3 border-2 rounded-lg ${c.currentProgress>=100?"border-green-500 bg-green-50":e?"border-slate-300 bg-white":"border-slate-200 bg-slate-50 opacity-60"}`,children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-semibold text-slate-900",children:c.name}),(0,b.jsx)("div",{className:"text-xs text-slate-600",children:c.description})]}),(0,b.jsxs)("div",{className:"text-sm font-medium",children:[Math.round(c.currentProgress),"%"]})]}),(0,b.jsx)("div",{className:"w-full bg-slate-200 rounded-full h-2 mb-2",children:(0,b.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all",style:{width:`${c.currentProgress}%`}})}),"playing"===a&&e&&(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("input",{type:"range",min:"0",max:A.resourceBudget,value:d,onChange:a=>U(c.id,parseInt(a.target.value)),className:"flex-1"}),(0,b.jsx)("div",{className:"w-16 text-sm font-medium text-right",children:d})]}),!e&&c.dependencies.length>0&&(0,b.jsxs)("div",{className:"text-xs text-slate-500",children:["Depends on: ",c.dependencies.join(", ")]})]},c.id)})})]}),(0,b.jsxs)("div",{className:"rounded-xl border border-slate-200 bg-white p-4",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-slate-900 mb-3",children:"Constraints"}),(0,b.jsx)("div",{className:"space-y-2",children:A.constraints.map(a=>(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("div",{className:"text-sm font-medium text-slate-900",children:a.name}),(0,b.jsxs)("div",{className:`text-sm font-medium ${a.violated?"text-red-600":a.current>a.limit*a.warningThreshold?"text-yellow-600":"text-green-600"}`,children:[Math.round(a.current)," / ",a.limit]})]},a.id))})]}),"playing"===a&&(0,b.jsx)("div",{className:"flex gap-2",children:(0,b.jsxs)("button",{onClick:V,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:["Confirm Round ",A.currentRound]})}),"finished"===a&&G&&(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:`text-3xl font-bold mb-2 ${"win"===A.outcome?"text-green-600":"text-red-600"}`,children:"win"===A.outcome?"Success!":"Failed"}),A.metrics&&(0,b.jsxs)("div",{className:"text-sm text-slate-600",children:["Efficiency: ",Math.round(A.metrics.resourceEfficiency),"% | Objectives: ",Math.round(A.metrics.objectiveProgress),"%"]})]}),(0,b.jsx)(r.ChallengeCodeShare,{code:G,score:M?.score||0}),I&&(0,b.jsx)("div",{className:"rounded-xl border border-slate-200 bg-white p-4",children:(0,b.jsx)(s.ScoreComparisonDisplay,{comparison:I})}),(0,b.jsx)("div",{className:"rounded-xl border border-slate-200 bg-white p-4",children:(0,b.jsx)(u.LeaderboardView,{challengeCode:G.code,playerScore:M||void 0})}),K.length>0&&(0,b.jsx)("div",{className:"rounded-xl border border-slate-200 bg-white p-4",children:(0,b.jsx)(t.AchievementDisplay,{achievementIds:K,compact:!0})}),O&&(0,b.jsxs)("div",{className:"rounded-xl border border-slate-200 bg-white p-4",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-slate-900 mb-3",children:"Post-Run Analysis"}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"font-medium text-slate-900 mb-2",children:"Summary"}),(0,b.jsx)("p",{className:"text-sm text-slate-600",children:O.summary})]}),O.keyDecisions&&O.keyDecisions.length>0&&(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"font-medium text-slate-900 mb-2",children:"Key Decisions"}),(0,b.jsx)("ul",{className:"text-sm text-slate-600 space-y-2",children:O.keyDecisions.slice(0,3).map((a,c)=>(0,b.jsxs)("li",{className:"border-l-2 border-blue-300 pl-2",children:[(0,b.jsxs)("div",{className:"font-medium",children:["Round ",a.round,": ",a.description]}),(0,b.jsx)("div",{className:"text-xs text-slate-500",children:a.reasoning})]},c))})]}),O.mistakes&&O.mistakes.length>0&&(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"font-medium text-slate-900 mb-2",children:"Mistakes & Inefficiencies"}),(0,b.jsx)("ul",{className:"text-sm text-slate-600 space-y-2",children:O.mistakes.slice(0,3).map((a,c)=>(0,b.jsxs)("li",{className:"border-l-2 border-red-300 pl-2",children:[(0,b.jsxs)("div",{className:"font-medium",children:["Round ",a.round,": ",a.description]}),(0,b.jsxs)("div",{className:"text-xs text-slate-500",children:["Cost: ",a.cost]}),(0,b.jsxs)("div",{className:"text-xs text-blue-600",children:["Recommendation: ",a.recommendation]})]},c))})]}),O.recommendations&&O.recommendations.length>0&&(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"font-medium text-slate-900 mb-2",children:"Recommended Strategy Adjustment"}),(0,b.jsx)("ul",{className:"text-sm text-slate-600 list-disc list-inside space-y-1",children:O.recommendations.map((a,c)=>(0,b.jsxs)("li",{children:[(0,b.jsxs)("span",{className:"font-medium",children:[a.type,":"]})," ",a.description,(0,b.jsx)("div",{className:"text-xs text-slate-500 ml-4",children:a.rationale})]},c))})]})]})]}),(0,b.jsx)("div",{className:"flex gap-2",children:(0,b.jsx)("button",{onClick:X,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"New Challenge"})})]})]}):null:(0,b.jsx)("div",{className:"text-center text-slate-600",children:"Loading scenario..."})})})}a.s(["default",()=>z],192945)}];

//# debugId=f3b82c18-d9ec-b83b-08cc-7701eaa4bfb2
//# sourceMappingURL=src_lib_games_games_allocation-architect_AllocationArchitect_tsx_f624c6b5._.js.map