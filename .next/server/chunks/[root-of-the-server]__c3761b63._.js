;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="fb711711-4e23-59a6-c144-8e46064eccdd")}catch(e){}}();
module.exports=[300794,(e,t,r)=>{t.exports=e.x("node:dns/promises",()=>require("node:dns/promises"))},166457,31373,e=>{"use strict";var t=e.i(300794);class r extends Error{code="SAFE_FETCH_BLOCKED";constructor(e){super(e)}}class o extends Error{code="SAFE_FETCH_TIMEOUT";constructor(e){super(e)}}let a=new Set(["169.254.169.254"]);function n(e){let t=/^(\d+)\.(\d+)\.(\d+)\.(\d+)$/.exec(e);if(!t)return!1;let r=Number(t[1]),o=Number(t[2]);return 10===r||127===r||0===r||169===r&&254===o||192===r&&168===o||172===r&&o>=16&&o<=31||100===r&&o>=64&&o<=127||!1}async function s(e,o){let s;if("localhost"===(s=e.hostname.toLowerCase())||"127.0.0.1"===s||"::1"===s||s.endsWith(".localhost")||a.has(e.hostname))throw new r("Blocked host");if(n(e.hostname))throw new r("Blocked IP range");try{for(let o of(await t.default.lookup(e.hostname,{all:!0,verbatim:!0})))if("string"==typeof o?.address&&(a.has(o.address)||n(o.address)))throw new r("Blocked IP range")}catch{throw new r("Unable to resolve host")}}async function i(e,t){let o=e.body?.getReader?.();if(!o){let o=Buffer.from(await e.arrayBuffer());if(o.byteLength>t)throw new r("Response too large");return o}let a=[],n=0;for(;;){let{done:e,value:s}=await o.read();if(e)break;if(s){if((n+=s.byteLength)>t)throw new r("Response too large");a.push(s)}}return Buffer.concat(a.map(e=>Buffer.from(e)))}async function l(e,t){let a=new URL(e),n=!!t.allowHttp||!!t.allowHttpInDev&&!1;if("https:"!==a.protocol&&!(n&&"http:"===a.protocol))throw new r("Blocked protocol");await s(a,!!t.allowLocalhostInDev);let l=new AbortController,u=setTimeout(()=>l.abort(),Math.max(1,t.overallTimeoutMs));try{let e=await fetch(a.toString(),{...t,redirect:"manual",signal:l.signal}),r=await i(e,t.maxResponseBytes);return{res:e,body:r}}catch(e){if(e?.name==="AbortError")throw new o("Request timed out");throw e}finally{clearTimeout(u)}}e.s(["safeFetch",()=>l],31373),e.s([],166457)},723847,e=>{"use strict";var t=e.i(926747),r=e.i(190406),o=e.i(244898),a=e.i(262950);e.i(166457);var n=e.i(31373);async function s(e,t){if("POST"!==e.method)return t.setHeader("Allow","POST"),t.status(405).json({error:"Method not allowed"});let r=process.env.BACKEND_SCORES_URL;if(!r)return t.status(501).json({error:"Score backend not configured"});try{let{res:o,body:a}=await (0,n.safeFetch)(r,{method:"POST",headers:{"Content-Type":"application/json",Authorization:e.headers.authorization||"",cookie:e.headers.cookie||""},body:JSON.stringify(e.body||{}),allowHttp:!1,overallTimeoutMs:15e3,maxResponseBytes:524288}),s=(()=>{try{return JSON.parse(a.toString("utf8"))}catch{return{}}})();if(!o.ok)return t.status(o.status).json(s||{error:"Score backend error"});return t.status(200).json(s)}catch(e){if("SAFE_FETCH_TIMEOUT"===(e?.code||""))return t.status(504).json({error:"Score backend timed out"});return t.status(502).json({error:"Unable to reach score backend"})}}e.s(["default",()=>s],59425);var i=e.i(59425),l=e.i(7031),u=e.i(181927),d=e.i(846432);let c=(0,a.hoist)(i,"default"),p=(0,a.hoist)(i,"config"),h=new o.PagesAPIRouteModule({definition:{kind:r.RouteKind.PAGES_API,page:"/api/scores",pathname:"/api/scores",bundlePath:"",filename:""},userland:i,distDir:".next",relativeProjectDir:""});async function f(e,r,o){h.isDev&&(0,d.addRequestMeta)(e,"devRequestTimingInternalsEnd",process.hrtime.bigint());let a="/api/scores";a=a.replace(/\/index$/,"")||"/";let n=await h.prepare(e,r,{srcPage:a});if(!n){r.statusCode=400,r.end("Bad Request"),null==o.waitUntil||o.waitUntil.call(o,Promise.resolve());return}let{query:s,params:i,prerenderManifest:c,routerServerContext:p}=n;try{let t=e.method||"GET",o=(0,l.getTracer)(),n=o.getActiveScopeSpan(),d=h.instrumentationOnRequestError.bind(h),f=async n=>h.render(e,r,{query:{...s,...i},params:i,allowedRevalidateHeaderKeys:[],multiZoneDraftMode:!1,trustHostHeader:!1,previewProps:c.preview,propagateError:!1,dev:h.isDev,page:"/api/scores",internalRevalidate:null==p?void 0:p.revalidate,onError:(...t)=>d(e,...t)}).finally(()=>{if(!n)return;n.setAttributes({"http.status_code":r.statusCode,"next.rsc":!1});let e=o.getRootSpanAttributes();if(!e)return;if(e.get("next.span_type")!==u.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${e.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let s=e.get("next.route");if(s){let e=`${t} ${s}`;n.setAttributes({"next.route":s,"http.route":s,"next.span_name":e}),n.updateName(e)}else n.updateName(`${t} ${a}`)});n?await f(n):await o.withPropagatedContext(e.headers,()=>o.trace(u.BaseServerSpan.handleRequest,{spanName:`${t} ${a}`,kind:l.SpanKind.SERVER,attributes:{"http.method":t,"http.target":e.url}},f))}catch(e){if(h.isDev)throw e;(0,t.sendError)(r,500,"Internal Server Error")}finally{null==o.waitUntil||o.waitUntil.call(o,Promise.resolve())}}e.s(["config",0,p,"default",0,c,"handler",()=>f],723847)}];

//# debugId=fb711711-4e23-59a6-c144-8e46064eccdd
//# sourceMappingURL=%5Broot-of-the-server%5D__c3761b63._.js.map