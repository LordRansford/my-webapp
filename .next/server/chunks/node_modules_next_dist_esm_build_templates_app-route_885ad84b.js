;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="c5e5fb80-34ad-d712-1de0-0570e8b734dc")}catch(e){}}();
module.exports=[38675,e=>{"use strict";var t=e.i(747909),n=e.i(174017),r=e.i(996250),i=e.i(759756),s=e.i(561916),o=e.i(114444),a=e.i(837092),l=e.i(869741),u=e.i(316795),c=e.i(487718),d=e.i(995169),p=e.i(47587),h=e.i(666012),f=e.i(570101),g=e.i(626937),w=e.i(10372),m=e.i(193695);e.i(52474);var y=e.i(600220),v=e.i(89171),R=e.i(757660),x=e.i(568212),C=e.i(124594),S=e.i(895968),b=e.i(936426),E=e.i(657194),A=e.i(522734),P=e.i(814747);function k(e){try{if(!A.default.existsSync(e))return null;return JSON.parse(A.default.readFileSync(e,"utf8"))}catch{return null}}function I(e){return String(e||"").toLowerCase().replace(/[^a-z0-9\s/-]+/g," ").split(/\s+/).map(e=>e.trim()).filter(e=>e.length>=3).slice(0,50)}function T(e,t){let n=String(t||"").toLowerCase(),r=0;for(let t of e)n.includes(t)&&(r+=1);return r}let N=null,q=null,O=null;function D(){if(N)return N;let e=k(P.default.join(process.cwd(),"public","content-index.json")),t=e?.pages||[],n=t.map(e=>({slug:e.route,title:e.title,excerpt:Array.isArray(e.sections)&&e.sections.length?String(e.sections[0]?.excerpt||e.sections[0]?.title||""):"",section:e.sourcePath}));N=n;let r=new Map;for(let e of t){let t=Array.isArray(e.sections)&&e.sections.length?String(e.sections.find(e=>2===e.depth)?.excerpt||e.sections[0]?.excerpt||""):"";r.set(e.route,{route:e.route,title:String(e.title||e.route),excerpt:t})}return q=r,n}function $(e){let t=D().map(t=>({row:t,score:T(e,`${t.title||""} ${t.excerpt||""} ${t.slug||""}`)})).sort((e,t)=>t.score-e.score).filter(e=>e.score>0).slice(0,1);return t[0]?.row||null}function U(e){q||D();let t=q?.get(e)||null,n=String(t?.excerpt||"").trim();return n?n.replace(/courseId=.*?>/g,"").replace(/<[^>]+>/g,"").trim().slice(0,260):""}async function _(e){var t;let n,r,i,s,o,a=(n=I((t={question:e.question,pageUrl:e.pageUrl}).question),r=D(),i=function(){if(O)return O;let e=k(P.default.join(process.cwd(),"public","tools-index.json")),t=Array.isArray(e?.tools)?e.tools:[];return O=t,t}(),s=[...r.map(e=>({row:e,score:T(n,`${e.title||""} ${e.excerpt||""} ${e.slug||""}`)+(t.pageUrl&&e.slug===t.pageUrl?2:0)})).filter(e=>e.score>0).sort((e,t)=>t.score-e.score).slice(0,4).map(e=>({title:String(e.row.title||e.row.slug),href:String(e.row.slug),why:e.row.excerpt?String(e.row.excerpt).slice(0,90):"Relevant page on this site"})),...i.map(e=>({row:e,score:T(n,`${e.title} ${e.description||""} ${e.route} ${e.category||""}`)})).filter(e=>e.score>0).sort((e,t)=>t.score-e.score).slice(0,2).map(e=>({title:e.row.title,href:e.row.route,why:e.row.description?e.row.description.slice(0,90):"Relevant tool on this site"})),{title:"Pricing",href:"/pricing",why:"Donations, CPD assessment, and compute credits"}],o=new Set,s.filter(e=>!(!e.href||o.has(e.href))&&(o.add(e.href),!0)));return{answer:function(e){let t=String(e.question||"").trim(),n=t.toLowerCase(),r=I(t);if(n.includes("pricing")||n.includes("price")||n.includes("pay")||n.includes("credits"))return"This site has three payments.\n1. Donations support keeping learning free.\n2. CPD assessments and certificates are paid so you can prove competence professionally.\n3. Compute credits are for heavy server runs that go beyond your browser.\n\nIf you want CPD and certificates you should sign in before you start learning so your progress can be recorded.\nYou can find details on the pricing page.";if(n.includes("cpd")||n.includes("certificate")||n.includes("assessment"))return"For CPD on this site.\n1. Sign in so progress and attempts attach to your account.\n2. Study the course path for your level.\n3. When ready take the timed assessment for that level.\n4. After submission you get explanations and revision links based on what you missed.\n\nIf you tell me which course and level you are on I can point you to the best next page and tools.";if(n.includes("digitalisation")||n.includes("digitalization")){let e=U(String(($(["digitalisation",...r])||{slug:"/digitalisation",title:"Digitalisation"}).slug||"/digitalisation"));return["Digitalisation is the redesign of how value is created and delivered using people, process, data, and technology together.\nIt is not the same as buying tools.\n",e?`On this site it is covered as.
${e}`:"On this site it is covered through foundations, intermediate, and advanced notes with tools and dashboards.","\nIf you tell me your context I can point you to the best starting page and one tool to practise with."].join("\n")}if(n.includes("tool")||n.includes("lab")||n.includes("not working")||n.includes("error"))return"If a tool is not working, the fastest way to fix it is to narrow the problem.\n1. Check the input format and keep it short.\n2. Try one example input first.\n3. If the tool has a compute mode, confirm you have credits and are signed in when required.\n\nTell me the tool name and what you entered and I will point to the exact tool page and the most common fixes.";let i=$(r),s=i?.slug?U(i.slug):"";return[s?`Here is a direct answer based on this site.
${s}`:"I can answer using this site content.","","Best next pages on this site.",...e.citations.slice(0,4).map(e=>`- ${e.title} ${e.href}`),"","Ask your question in one sentence and I will respond with a direct explanation and the exact page to read next."].join("\n")}({question:e.question,citations:a}),citations:a,lowConfidence:0===a.length}}function j(e,t){return("string"==typeof e?e:"").replace(/[\u0000-\u0008\u000B\u000C\u000E-\u001F\u007F]/g,"").trim().slice(0,t)}async function H(e){return(0,S.withRequestLogging)(e,{route:"POST /api/professor/ask"},async()=>{let t,n,r,i,s,o=(0,b.requireSameOrigin)(e);if(o)return o;let a=(0,E.rateLimit)(e,{keyPrefix:"professor-ask",limit:45,windowMs:6e4});if(a)return a;let l=await e.json().catch(()=>null),u=j(l?.question,800),c=j(l?.pageUrl,200),d=j(l?.pageTitle,120);if(!u||u.length<3)return v.NextResponse.json({message:"Invalid question"},{status:400});if(c.includes("/assessment")||(r=(n=(t=String(u||"")).split("\n").map(e=>e.trim()).filter(Boolean)).filter(e=>/^[A-D][).:\-]\s+/.test(e)).length>=3||t.includes("A)")||t.includes("B)")||t.includes("C)")||t.includes("D)"),i=t.length>700||n.length>10,s=/assessment|pass mark|75 minutes|80 percent|question bank/i.test(t),r||i||s))return v.NextResponse.json({answer:"I cannot help with timed assessments or pasted exam questions. After you submit, I can explain concepts, show where to revise on this site, and help you practise.",citations:[{title:"Pricing and CPD",href:"/pricing",why:"How assessment and CPD works on this site"},{title:"Cybersecurity overview",href:"/cybersecurity",why:"Where to find learning path and practice"}],lowConfidence:!1},{status:200});let p=await (0,R.getServerSession)(x.authOptions).catch(()=>null),h=p?.user?.id||null;if(h){let e=new Date,t=await C.prisma.assessmentSession.findFirst({where:{userId:h,expiresAt:{gt:e}},select:{id:!0}}).catch(()=>null);if(t?.id)return v.NextResponse.json({answer:"Professor Ransford is paused while you have an active timed assessment session. Submit or let it expire, then come back for feedback and revision help.",citations:[{title:"My account",href:"/account",why:"Credits, certificates, and CPD links"}],lowConfidence:!1},{status:200})}let f=await _({question:u,pageUrl:c,pageTitle:d}).catch(()=>null);return f?v.NextResponse.json(f,{status:200}):v.NextResponse.json({message:"Unable to answer"},{status:503})})}e.s(["POST",()=>H],748959);var M=e.i(748959);let F=new t.AppRouteRouteModule({definition:{kind:n.RouteKind.APP_ROUTE,page:"/api/professor/ask/route",pathname:"/api/professor/ask",filename:"route",bundlePath:""},distDir:".next",relativeProjectDir:"",resolvedPagePath:"[project]/src/app/api/professor/ask/route.ts",nextConfigOutput:"",userland:M}),{workAsyncStorage:L,workUnitAsyncStorage:B,serverHooks:K}=F;function W(){return(0,r.patchFetch)({workAsyncStorage:L,workUnitAsyncStorage:B})}async function z(e,t,r){F.isDev&&(0,i.addRequestMeta)(e,"devRequestTimingInternalsEnd",process.hrtime.bigint());let v="/api/professor/ask/route";v=v.replace(/\/index$/,"")||"/";let R=await F.prepare(e,t,{srcPage:v,multiZoneDraftMode:!1});if(!R)return t.statusCode=400,t.end("Bad Request"),null==r.waitUntil||r.waitUntil.call(r,Promise.resolve()),null;let{buildId:x,params:C,nextConfig:S,parsedUrl:b,isDraftMode:E,prerenderManifest:A,routerServerContext:P,isOnDemandRevalidate:k,revalidateOnlyGenerated:I,resolvedPathname:T,clientReferenceManifest:N,serverActionsManifest:q}=R,O=(0,l.normalizeAppPath)(v),D=!!(A.dynamicRoutes[O]||A.routes[T]),$=async()=>((null==P?void 0:P.render404)?await P.render404(e,t,b,!1):t.end("This page could not be found"),null);if(D&&!E){let e=!!A.routes[T],t=A.dynamicRoutes[O];if(t&&!1===t.fallback&&!e){if(S.experimental.adapterPath)return await $();throw new m.NoFallbackError}}let U=null;!D||F.isDev||E||(U="/index"===(U=T)?"/":U);let _=!0===F.isDev||!D,j=D&&!_;q&&N&&(0,o.setReferenceManifestsSingleton)({page:v,clientReferenceManifest:N,serverActionsManifest:q,serverModuleMap:(0,a.createServerModuleMap)({serverActionsManifest:q})});let H=e.method||"GET",M=(0,s.getTracer)(),L=M.getActiveScopeSpan(),B={params:C,prerenderManifest:A,renderOpts:{experimental:{authInterrupts:!!S.experimental.authInterrupts},cacheComponents:!!S.cacheComponents,supportsDynamicResponse:_,incrementalCache:(0,i.getRequestMeta)(e,"incrementalCache"),cacheLifeProfiles:S.cacheLife,waitUntil:r.waitUntil,onClose:e=>{t.on("close",e)},onAfterTaskError:void 0,onInstrumentationRequestError:(t,n,r)=>F.onRequestError(e,t,r,P)},sharedContext:{buildId:x}},K=new u.NodeNextRequest(e),W=new u.NodeNextResponse(t),z=c.NextRequestAdapter.fromNodeNextRequest(K,(0,c.signalFromNodeResponse)(t));try{let o=async e=>F.handle(z,B).finally(()=>{if(!e)return;e.setAttributes({"http.status_code":t.statusCode,"next.rsc":!1});let n=M.getRootSpanAttributes();if(!n)return;if(n.get("next.span_type")!==d.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${n.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let r=n.get("next.route");if(r){let t=`${H} ${r}`;e.setAttributes({"next.route":r,"http.route":r,"next.span_name":t}),e.updateName(t)}else e.updateName(`${H} ${v}`)}),a=!!(0,i.getRequestMeta)(e,"minimalMode"),l=async i=>{var s,l;let u=async({previousCacheEntry:n})=>{try{if(!a&&k&&I&&!n)return t.statusCode=404,t.setHeader("x-nextjs-cache","REVALIDATED"),t.end("This page could not be found"),null;let s=await o(i);e.fetchMetrics=B.renderOpts.fetchMetrics;let l=B.renderOpts.pendingWaitUntil;l&&r.waitUntil&&(r.waitUntil(l),l=void 0);let u=B.renderOpts.collectedTags;if(!D)return await (0,h.sendResponse)(K,W,s,B.renderOpts.pendingWaitUntil),null;{let e=await s.blob(),t=(0,f.toNodeOutgoingHttpHeaders)(s.headers);u&&(t[w.NEXT_CACHE_TAGS_HEADER]=u),!t["content-type"]&&e.type&&(t["content-type"]=e.type);let n=void 0!==B.renderOpts.collectedRevalidate&&!(B.renderOpts.collectedRevalidate>=w.INFINITE_CACHE)&&B.renderOpts.collectedRevalidate,r=void 0===B.renderOpts.collectedExpire||B.renderOpts.collectedExpire>=w.INFINITE_CACHE?void 0:B.renderOpts.collectedExpire;return{value:{kind:y.CachedRouteKind.APP_ROUTE,status:s.status,body:Buffer.from(await e.arrayBuffer()),headers:t},cacheControl:{revalidate:n,expire:r}}}}catch(t){throw(null==n?void 0:n.isStale)&&await F.onRequestError(e,t,{routerKind:"App Router",routePath:v,routeType:"route",revalidateReason:(0,p.getRevalidateReason)({isStaticGeneration:j,isOnDemandRevalidate:k})},P),t}},c=await F.handleResponse({req:e,nextConfig:S,cacheKey:U,routeKind:n.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:A,isRoutePPREnabled:!1,isOnDemandRevalidate:k,revalidateOnlyGenerated:I,responseGenerator:u,waitUntil:r.waitUntil,isMinimalMode:a});if(!D)return null;if((null==c||null==(s=c.value)?void 0:s.kind)!==y.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==c||null==(l=c.value)?void 0:l.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});a||t.setHeader("x-nextjs-cache",k?"REVALIDATED":c.isMiss?"MISS":c.isStale?"STALE":"HIT"),E&&t.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let d=(0,f.fromNodeOutgoingHttpHeaders)(c.value.headers);return a&&D||d.delete(w.NEXT_CACHE_TAGS_HEADER),!c.cacheControl||t.getHeader("Cache-Control")||d.get("Cache-Control")||d.set("Cache-Control",(0,g.getCacheControlHeader)(c.cacheControl)),await (0,h.sendResponse)(K,W,new Response(c.value.body,{headers:d,status:c.value.status||200})),null};L?await l(L):await M.withPropagatedContext(e.headers,()=>M.trace(d.BaseServerSpan.handleRequest,{spanName:`${H} ${v}`,kind:s.SpanKind.SERVER,attributes:{"http.method":H,"http.target":e.url}},l))}catch(t){if(t instanceof m.NoFallbackError||await F.onRequestError(e,t,{routerKind:"App Router",routePath:O,routeType:"route",revalidateReason:(0,p.getRevalidateReason)({isStaticGeneration:j,isOnDemandRevalidate:k})}),D)throw t;return await (0,h.sendResponse)(K,W,new Response(null,{status:500})),null}}e.s(["handler",()=>z,"patchFetch",()=>W,"routeModule",()=>F,"serverHooks",()=>K,"workAsyncStorage",()=>L,"workUnitAsyncStorage",()=>B],38675)}];

//# debugId=c5e5fb80-34ad-d712-1de0-0570e8b734dc
//# sourceMappingURL=node_modules_next_dist_esm_build_templates_app-route_885ad84b.js.map