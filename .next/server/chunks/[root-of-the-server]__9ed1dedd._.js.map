{
  "version": 3,
  "sources": [],
  "debugId": "127585fb-e808-3ffd-2b4b-4eb3127256f3",
  "sections": [
    {"offset": {"line": 1, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/node_modules/openid-client/package.json","turbopack:///[project]/node_modules/nodemailer/package.json","turbopack:///[project]/node_modules/nodemailer/lib/well-known/services.json","../../../src/lib/db/prisma.ts","../../../src/lib/telemetry/log.ts","../../../src/lib/auth/store.ts","../../../src/lib/storage/jsonFile.ts","../../../src/lib/billing/store.ts"],"sourcesContent":["{\"name\":\"openid-client\",\"version\":\"5.7.1\",\"description\":\"OpenID Connect Relying Party (RP, Client) implementation for Node.js runtime, supports passportjs\",\"keywords\":[\"auth\",\"authentication\",\"basic\",\"certified\",\"client\",\"connect\",\"dynamic\",\"electron\",\"hybrid\",\"identity\",\"implicit\",\"oauth\",\"oauth2\",\"oidc\",\"openid\",\"passport\",\"relying party\",\"strategy\"],\"homepage\":\"https://github.com/panva/openid-client\",\"repository\":\"panva/openid-client\",\"funding\":{\"url\":\"https://github.com/sponsors/panva\"},\"license\":\"MIT\",\"author\":\"Filip Skokan <panva.ip@gmail.com>\",\"exports\":{\"types\":\"./types/index.d.ts\",\"import\":\"./lib/index.mjs\",\"require\":\"./lib/index.js\"},\"main\":\"./lib/index.js\",\"types\":\"./types/index.d.ts\",\"files\":[\"lib\",\"types/index.d.ts\"],\"scripts\":{\"format\":\"npx prettier --loglevel silent --write ./lib ./test ./certification ./types\",\"test\":\"mocha test/**/*.test.js\"},\"dependencies\":{\"jose\":\"^4.15.9\",\"lru-cache\":\"^6.0.0\",\"object-hash\":\"^2.2.0\",\"oidc-token-hash\":\"^5.0.3\"},\"devDependencies\":{\"@types/node\":\"^16.18.106\",\"@types/passport\":\"^1.0.16\",\"base64url\":\"^3.0.1\",\"chai\":\"^4.5.0\",\"mocha\":\"^10.7.3\",\"nock\":\"^13.5.5\",\"prettier\":\"^2.8.8\",\"readable-mock-req\":\"^0.2.2\",\"sinon\":\"^9.2.4\",\"timekeeper\":\"^2.3.1\"},\"standard-version\":{\"scripts\":{\"postchangelog\":\"sed -i '' -e 's/### \\\\[/## [/g' CHANGELOG.md\"},\"types\":[{\"type\":\"feat\",\"section\":\"Features\"},{\"type\":\"fix\",\"section\":\"Fixes\"},{\"type\":\"chore\",\"hidden\":true},{\"type\":\"docs\",\"hidden\":true},{\"type\":\"style\",\"hidden\":true},{\"type\":\"refactor\",\"section\":\"Refactor\",\"hidden\":false},{\"type\":\"perf\",\"section\":\"Performance\",\"hidden\":false},{\"type\":\"test\",\"hidden\":true}]}}","{\"name\":\"nodemailer\",\"version\":\"7.0.12\",\"description\":\"Easy as cake e-mail sending from your Node.js applications\",\"main\":\"lib/nodemailer.js\",\"scripts\":{\"test\":\"node --test --test-concurrency=1 test/**/*.test.js test/**/*-test.js\",\"test:coverage\":\"c8 node --test --test-concurrency=1 test/**/*.test.js test/**/*-test.js\",\"format\":\"prettier --write \\\"**/*.{js,json,md}\\\"\",\"format:check\":\"prettier --check \\\"**/*.{js,json,md}\\\"\",\"lint\":\"eslint .\",\"lint:fix\":\"eslint . --fix\",\"update\":\"rm -rf node_modules/ package-lock.json && ncu -u && npm install\"},\"repository\":{\"type\":\"git\",\"url\":\"https://github.com/nodemailer/nodemailer.git\"},\"keywords\":[\"Nodemailer\"],\"author\":\"Andris Reinman\",\"license\":\"MIT-0\",\"bugs\":{\"url\":\"https://github.com/nodemailer/nodemailer/issues\"},\"homepage\":\"https://nodemailer.com/\",\"devDependencies\":{\"@aws-sdk/client-sesv2\":\"3.940.0\",\"bunyan\":\"1.8.15\",\"c8\":\"10.1.3\",\"eslint\":\"9.39.1\",\"eslint-config-prettier\":\"10.1.8\",\"globals\":\"16.5.0\",\"libbase64\":\"1.3.0\",\"libmime\":\"5.3.7\",\"libqp\":\"2.1.1\",\"nodemailer-ntlm-auth\":\"1.0.4\",\"prettier\":\"3.6.2\",\"proxy\":\"1.0.2\",\"proxy-test-server\":\"1.0.0\",\"smtp-server\":\"3.16.1\"},\"engines\":{\"node\":\">=6.0.0\"}}","{\"1und1\":{\"description\":\"1&1 Mail (German hosting provider)\",\"host\":\"smtp.1und1.de\",\"port\":465,\"secure\":true,\"authMethod\":\"LOGIN\"},\"126\":{\"description\":\"126 Mail (NetEase)\",\"host\":\"smtp.126.com\",\"port\":465,\"secure\":true},\"163\":{\"description\":\"163 Mail (NetEase)\",\"host\":\"smtp.163.com\",\"port\":465,\"secure\":true},\"Aliyun\":{\"description\":\"Alibaba Cloud Mail\",\"domains\":[\"aliyun.com\"],\"host\":\"smtp.aliyun.com\",\"port\":465,\"secure\":true},\"AliyunQiye\":{\"description\":\"Alibaba Cloud Enterprise Mail\",\"host\":\"smtp.qiye.aliyun.com\",\"port\":465,\"secure\":true},\"AOL\":{\"description\":\"AOL Mail\",\"domains\":[\"aol.com\"],\"host\":\"smtp.aol.com\",\"port\":587},\"Aruba\":{\"description\":\"Aruba PEC (Italian email provider)\",\"domains\":[\"aruba.it\",\"pec.aruba.it\"],\"aliases\":[\"Aruba PEC\"],\"host\":\"smtps.aruba.it\",\"port\":465,\"secure\":true,\"authMethod\":\"LOGIN\"},\"Bluewin\":{\"description\":\"Bluewin (Swiss email provider)\",\"host\":\"smtpauths.bluewin.ch\",\"domains\":[\"bluewin.ch\"],\"port\":465},\"BOL\":{\"description\":\"BOL Mail (Brazilian provider)\",\"domains\":[\"bol.com.br\"],\"host\":\"smtp.bol.com.br\",\"port\":587,\"requireTLS\":true},\"DebugMail\":{\"description\":\"DebugMail (email testing service)\",\"host\":\"debugmail.io\",\"port\":25},\"Disroot\":{\"description\":\"Disroot (privacy-focused provider)\",\"domains\":[\"disroot.org\"],\"host\":\"disroot.org\",\"port\":587,\"secure\":false,\"authMethod\":\"LOGIN\"},\"DynectEmail\":{\"description\":\"Dyn Email Delivery\",\"aliases\":[\"Dynect\"],\"host\":\"smtp.dynect.net\",\"port\":25},\"ElasticEmail\":{\"description\":\"Elastic Email\",\"aliases\":[\"Elastic Email\"],\"host\":\"smtp.elasticemail.com\",\"port\":465,\"secure\":true},\"Ethereal\":{\"description\":\"Ethereal Email (email testing service)\",\"aliases\":[\"ethereal.email\"],\"host\":\"smtp.ethereal.email\",\"port\":587},\"FastMail\":{\"description\":\"FastMail\",\"domains\":[\"fastmail.fm\"],\"host\":\"smtp.fastmail.com\",\"port\":465,\"secure\":true},\"Feishu Mail\":{\"description\":\"Feishu Mail (Lark)\",\"aliases\":[\"Feishu\",\"FeishuMail\"],\"domains\":[\"www.feishu.cn\"],\"host\":\"smtp.feishu.cn\",\"port\":465,\"secure\":true},\"Forward Email\":{\"description\":\"Forward Email (email forwarding service)\",\"aliases\":[\"FE\",\"ForwardEmail\"],\"domains\":[\"forwardemail.net\"],\"host\":\"smtp.forwardemail.net\",\"port\":465,\"secure\":true},\"GandiMail\":{\"description\":\"Gandi Mail\",\"aliases\":[\"Gandi\",\"Gandi Mail\"],\"host\":\"mail.gandi.net\",\"port\":587},\"Gmail\":{\"description\":\"Gmail\",\"aliases\":[\"Google Mail\"],\"domains\":[\"gmail.com\",\"googlemail.com\"],\"host\":\"smtp.gmail.com\",\"port\":465,\"secure\":true},\"GMX\":{\"description\":\"GMX Mail\",\"domains\":[\"gmx.com\",\"gmx.net\",\"gmx.de\"],\"host\":\"mail.gmx.com\",\"port\":587},\"Godaddy\":{\"description\":\"GoDaddy Email (US)\",\"host\":\"smtpout.secureserver.net\",\"port\":25},\"GodaddyAsia\":{\"description\":\"GoDaddy Email (Asia)\",\"host\":\"smtp.asia.secureserver.net\",\"port\":25},\"GodaddyEurope\":{\"description\":\"GoDaddy Email (Europe)\",\"host\":\"smtp.europe.secureserver.net\",\"port\":25},\"hot.ee\":{\"description\":\"Hot.ee (Estonian email provider)\",\"host\":\"mail.hot.ee\"},\"Hotmail\":{\"description\":\"Outlook.com / Hotmail\",\"aliases\":[\"Outlook\",\"Outlook.com\",\"Hotmail.com\"],\"domains\":[\"hotmail.com\",\"outlook.com\"],\"host\":\"smtp-mail.outlook.com\",\"port\":587},\"iCloud\":{\"description\":\"iCloud Mail\",\"aliases\":[\"Me\",\"Mac\"],\"domains\":[\"me.com\",\"mac.com\"],\"host\":\"smtp.mail.me.com\",\"port\":587},\"Infomaniak\":{\"description\":\"Infomaniak Mail (Swiss hosting provider)\",\"host\":\"mail.infomaniak.com\",\"domains\":[\"ik.me\",\"ikmail.com\",\"etik.com\"],\"port\":587},\"KolabNow\":{\"description\":\"KolabNow (secure email service)\",\"domains\":[\"kolabnow.com\"],\"aliases\":[\"Kolab\"],\"host\":\"smtp.kolabnow.com\",\"port\":465,\"secure\":true,\"authMethod\":\"LOGIN\"},\"Loopia\":{\"description\":\"Loopia (Swedish hosting provider)\",\"host\":\"mailcluster.loopia.se\",\"port\":465},\"Loops\":{\"description\":\"Loops\",\"host\":\"smtp.loops.so\",\"port\":587},\"mail.ee\":{\"description\":\"Mail.ee (Estonian email provider)\",\"host\":\"smtp.mail.ee\"},\"Mail.ru\":{\"description\":\"Mail.ru\",\"host\":\"smtp.mail.ru\",\"port\":465,\"secure\":true},\"Mailcatch.app\":{\"description\":\"Mailcatch (email testing service)\",\"host\":\"sandbox-smtp.mailcatch.app\",\"port\":2525},\"Maildev\":{\"description\":\"MailDev (local email testing)\",\"port\":1025,\"ignoreTLS\":true},\"MailerSend\":{\"description\":\"MailerSend\",\"host\":\"smtp.mailersend.net\",\"port\":587},\"Mailgun\":{\"description\":\"Mailgun\",\"host\":\"smtp.mailgun.org\",\"port\":465,\"secure\":true},\"Mailjet\":{\"description\":\"Mailjet\",\"host\":\"in.mailjet.com\",\"port\":587},\"Mailosaur\":{\"description\":\"Mailosaur (email testing service)\",\"host\":\"mailosaur.io\",\"port\":25},\"Mailtrap\":{\"description\":\"Mailtrap\",\"host\":\"live.smtp.mailtrap.io\",\"port\":587},\"Mandrill\":{\"description\":\"Mandrill (by Mailchimp)\",\"host\":\"smtp.mandrillapp.com\",\"port\":587},\"Naver\":{\"description\":\"Naver Mail (Korean email provider)\",\"host\":\"smtp.naver.com\",\"port\":587},\"OhMySMTP\":{\"description\":\"OhMySMTP (email delivery service)\",\"host\":\"smtp.ohmysmtp.com\",\"port\":587,\"secure\":false},\"One\":{\"description\":\"One.com Email\",\"host\":\"send.one.com\",\"port\":465,\"secure\":true},\"OpenMailBox\":{\"description\":\"OpenMailBox\",\"aliases\":[\"OMB\",\"openmailbox.org\"],\"host\":\"smtp.openmailbox.org\",\"port\":465,\"secure\":true},\"Outlook365\":{\"description\":\"Microsoft 365 / Office 365\",\"host\":\"smtp.office365.com\",\"port\":587,\"secure\":false},\"Postmark\":{\"description\":\"Postmark\",\"aliases\":[\"PostmarkApp\"],\"host\":\"smtp.postmarkapp.com\",\"port\":2525},\"Proton\":{\"description\":\"Proton Mail\",\"aliases\":[\"ProtonMail\",\"Proton.me\",\"Protonmail.com\",\"Protonmail.ch\"],\"domains\":[\"proton.me\",\"protonmail.com\",\"pm.me\",\"protonmail.ch\"],\"host\":\"smtp.protonmail.ch\",\"port\":587,\"requireTLS\":true},\"qiye.aliyun\":{\"description\":\"Alibaba Mail Enterprise Edition\",\"host\":\"smtp.mxhichina.com\",\"port\":\"465\",\"secure\":true},\"QQ\":{\"description\":\"QQ Mail\",\"domains\":[\"qq.com\"],\"host\":\"smtp.qq.com\",\"port\":465,\"secure\":true},\"QQex\":{\"description\":\"QQ Enterprise Mail\",\"aliases\":[\"QQ Enterprise\"],\"domains\":[\"exmail.qq.com\"],\"host\":\"smtp.exmail.qq.com\",\"port\":465,\"secure\":true},\"Resend\":{\"description\":\"Resend\",\"host\":\"smtp.resend.com\",\"port\":465,\"secure\":true},\"Runbox\":{\"description\":\"Runbox (Norwegian email provider)\",\"domains\":[\"runbox.com\"],\"host\":\"smtp.runbox.com\",\"port\":465,\"secure\":true},\"SendCloud\":{\"description\":\"SendCloud (Chinese email delivery)\",\"host\":\"smtp.sendcloud.net\",\"port\":2525},\"SendGrid\":{\"description\":\"SendGrid\",\"host\":\"smtp.sendgrid.net\",\"port\":587},\"SendinBlue\":{\"description\":\"Brevo (formerly Sendinblue)\",\"aliases\":[\"Brevo\"],\"host\":\"smtp-relay.brevo.com\",\"port\":587},\"SendPulse\":{\"description\":\"SendPulse\",\"host\":\"smtp-pulse.com\",\"port\":465,\"secure\":true},\"SES\":{\"description\":\"AWS SES US East (N. Virginia)\",\"host\":\"email-smtp.us-east-1.amazonaws.com\",\"port\":465,\"secure\":true},\"SES-AP-NORTHEAST-1\":{\"description\":\"AWS SES Asia Pacific (Tokyo)\",\"host\":\"email-smtp.ap-northeast-1.amazonaws.com\",\"port\":465,\"secure\":true},\"SES-AP-NORTHEAST-2\":{\"description\":\"AWS SES Asia Pacific (Seoul)\",\"host\":\"email-smtp.ap-northeast-2.amazonaws.com\",\"port\":465,\"secure\":true},\"SES-AP-NORTHEAST-3\":{\"description\":\"AWS SES Asia Pacific (Osaka)\",\"host\":\"email-smtp.ap-northeast-3.amazonaws.com\",\"port\":465,\"secure\":true},\"SES-AP-SOUTH-1\":{\"description\":\"AWS SES Asia Pacific (Mumbai)\",\"host\":\"email-smtp.ap-south-1.amazonaws.com\",\"port\":465,\"secure\":true},\"SES-AP-SOUTHEAST-1\":{\"description\":\"AWS SES Asia Pacific (Singapore)\",\"host\":\"email-smtp.ap-southeast-1.amazonaws.com\",\"port\":465,\"secure\":true},\"SES-AP-SOUTHEAST-2\":{\"description\":\"AWS SES Asia Pacific (Sydney)\",\"host\":\"email-smtp.ap-southeast-2.amazonaws.com\",\"port\":465,\"secure\":true},\"SES-CA-CENTRAL-1\":{\"description\":\"AWS SES Canada (Central)\",\"host\":\"email-smtp.ca-central-1.amazonaws.com\",\"port\":465,\"secure\":true},\"SES-EU-CENTRAL-1\":{\"description\":\"AWS SES Europe (Frankfurt)\",\"host\":\"email-smtp.eu-central-1.amazonaws.com\",\"port\":465,\"secure\":true},\"SES-EU-NORTH-1\":{\"description\":\"AWS SES Europe (Stockholm)\",\"host\":\"email-smtp.eu-north-1.amazonaws.com\",\"port\":465,\"secure\":true},\"SES-EU-WEST-1\":{\"description\":\"AWS SES Europe (Ireland)\",\"host\":\"email-smtp.eu-west-1.amazonaws.com\",\"port\":465,\"secure\":true},\"SES-EU-WEST-2\":{\"description\":\"AWS SES Europe (London)\",\"host\":\"email-smtp.eu-west-2.amazonaws.com\",\"port\":465,\"secure\":true},\"SES-EU-WEST-3\":{\"description\":\"AWS SES Europe (Paris)\",\"host\":\"email-smtp.eu-west-3.amazonaws.com\",\"port\":465,\"secure\":true},\"SES-SA-EAST-1\":{\"description\":\"AWS SES South America (SÃ£o Paulo)\",\"host\":\"email-smtp.sa-east-1.amazonaws.com\",\"port\":465,\"secure\":true},\"SES-US-EAST-1\":{\"description\":\"AWS SES US East (N. Virginia)\",\"host\":\"email-smtp.us-east-1.amazonaws.com\",\"port\":465,\"secure\":true},\"SES-US-EAST-2\":{\"description\":\"AWS SES US East (Ohio)\",\"host\":\"email-smtp.us-east-2.amazonaws.com\",\"port\":465,\"secure\":true},\"SES-US-GOV-EAST-1\":{\"description\":\"AWS SES GovCloud (US-East)\",\"host\":\"email-smtp.us-gov-east-1.amazonaws.com\",\"port\":465,\"secure\":true},\"SES-US-GOV-WEST-1\":{\"description\":\"AWS SES GovCloud (US-West)\",\"host\":\"email-smtp.us-gov-west-1.amazonaws.com\",\"port\":465,\"secure\":true},\"SES-US-WEST-1\":{\"description\":\"AWS SES US West (N. California)\",\"host\":\"email-smtp.us-west-1.amazonaws.com\",\"port\":465,\"secure\":true},\"SES-US-WEST-2\":{\"description\":\"AWS SES US West (Oregon)\",\"host\":\"email-smtp.us-west-2.amazonaws.com\",\"port\":465,\"secure\":true},\"Seznam\":{\"description\":\"Seznam Email (Czech email provider)\",\"aliases\":[\"Seznam Email\"],\"domains\":[\"seznam.cz\",\"email.cz\",\"post.cz\",\"spoluzaci.cz\"],\"host\":\"smtp.seznam.cz\",\"port\":465,\"secure\":true},\"SMTP2GO\":{\"description\":\"SMTP2GO\",\"host\":\"mail.smtp2go.com\",\"port\":2525},\"Sparkpost\":{\"description\":\"SparkPost\",\"aliases\":[\"SparkPost\",\"SparkPost Mail\"],\"domains\":[\"sparkpost.com\"],\"host\":\"smtp.sparkpostmail.com\",\"port\":587,\"secure\":false},\"Tipimail\":{\"description\":\"Tipimail (email delivery service)\",\"host\":\"smtp.tipimail.com\",\"port\":587},\"Tutanota\":{\"description\":\"Tutanota (Tuta Mail)\",\"domains\":[\"tutanota.com\",\"tuta.com\",\"tutanota.de\",\"tuta.io\"],\"host\":\"smtp.tutanota.com\",\"port\":465,\"secure\":true},\"Yahoo\":{\"description\":\"Yahoo Mail\",\"domains\":[\"yahoo.com\"],\"host\":\"smtp.mail.yahoo.com\",\"port\":465,\"secure\":true},\"Yandex\":{\"description\":\"Yandex Mail\",\"domains\":[\"yandex.ru\"],\"host\":\"smtp.yandex.ru\",\"port\":465,\"secure\":true},\"Zimbra\":{\"description\":\"Zimbra Mail Server\",\"aliases\":[\"Zimbra Collaboration\"],\"host\":\"smtp.zimbra.com\",\"port\":587,\"requireTLS\":true},\"Zoho\":{\"description\":\"Zoho Mail\",\"host\":\"smtp.zoho.com\",\"port\":465,\"secure\":true,\"authMethod\":\"LOGIN\"}}","import { PrismaClient } from \"@prisma/client\";\n\n// Default DB for local dev when env is missing.\n// This keeps local dev lightweight and avoids \"silent\" runtime failures.\nif (!process.env.DATABASE_URL) {\n  process.env.DATABASE_URL = \"file:./data/dev.db\";\n}\n\ndeclare global {\n  var __prisma: PrismaClient | undefined;\n}\n\nexport const prisma: PrismaClient =\n  global.__prisma ||\n  new PrismaClient({\n    log: [\"error\"],\n  });\n\nif (process.env.NODE_ENV !== \"production\") {\n  global.__prisma = prisma;\n}\n\n\n","type Level = \"info\" | \"warn\" | \"error\";\n\nconst REDACT_KEYS = new Set([\n  \"authorization\",\n  \"cookie\",\n  \"set-cookie\",\n  \"stripe-signature\",\n  \"secret\",\n  \"token\",\n  \"password\",\n  \"apiKey\",\n  \"apikey\",\n  \"client_secret\",\n]);\n\nfunction isProd() {\n  return process.env.NODE_ENV === \"production\";\n}\n\nfunction redactValue(value: unknown) {\n  if (value == null) return value;\n  if (typeof value === \"string\") {\n    if (value.length <= 6) return \"[REDACTED]\";\n    return \"[REDACTED]\";\n  }\n  return \"[REDACTED]\";\n}\n\nfunction redactAny(input: any, depth = 0): any {\n  if (depth > 4) return \"[TRUNCATED]\";\n  if (input == null) return input;\n  if (Array.isArray(input)) return input.slice(0, 20).map((v) => redactAny(v, depth + 1));\n  if (typeof input !== \"object\") return input;\n\n  const out: any = {};\n  for (const [k, v] of Object.entries(input)) {\n    const key = String(k);\n    const lower = key.toLowerCase();\n    if (REDACT_KEYS.has(lower) || lower.includes(\"secret\") || lower.includes(\"token\") || lower.includes(\"password\")) {\n      out[key] = redactValue(v);\n      continue;\n    }\n    out[key] = redactAny(v, depth + 1);\n  }\n  return out;\n}\n\nfunction safeFields(fields: Record<string, unknown> | undefined) {\n  const base = fields && typeof fields === \"object\" ? fields : {};\n  // In production: always redact aggressively.\n  return isProd() ? redactAny(base) : redactAny(base);\n}\n\nfunction write(level: Level, eventName: string, fields?: Record<string, unknown>) {\n  const payload = {\n    level,\n    event: String(eventName || \"\").slice(0, 80),\n    ts: new Date().toISOString(),\n    ...safeFields(fields),\n  };\n  if (level === \"error\") console.error(payload);\n  else if (level === \"warn\") console.warn(payload);\n  else console.log(payload);\n}\n\nexport function logInfo(eventName: string, fields?: Record<string, unknown>) {\n  write(\"info\", eventName, fields);\n}\n\nexport function logWarn(eventName: string, fields?: Record<string, unknown>) {\n  write(\"warn\", eventName, fields);\n}\n\nexport function logError(eventName: string, fields?: Record<string, unknown>) {\n  write(\"error\", eventName, fields);\n}\n\n\n","import { randomUUID } from \"crypto\";\nimport { readJsonFile, writeJsonFile } from \"@/lib/storage/jsonFile\";\n\nconst AUTH_STORE_PATH = process.env.AUTH_STORE_PATH || \"data/auth.json\";\n\nexport type StoredUser = {\n  id: string;\n  email: string;\n  emailVerified: string | null;\n  name: string | null;\n  image: string | null;\n  provider: string | null;\n  entitlements: string[];\n  entitlementSource: string;\n  createdAt: string;\n  lastLoginAt?: string | null;\n  tier?: \"visitor\" | \"registered\" | \"supporter\" | \"professional\";\n  consent?: {\n    termsAcceptedAt?: string | null;\n    privacyAcceptedAt?: string | null;\n    cpdDataUseAcceptedAt?: string | null;\n  };\n};\n\nexport function addUserEntitlement(params: { userId: string; entitlement: string; source: string }) {\n  const s = load();\n  const idx = s.users.findIndex((u) => u.id === params.userId);\n  if (idx === -1) return null;\n  const user = s.users[idx];\n  const entitlements = Array.isArray(user.entitlements) ? user.entitlements : [\"free\"];\n  const next = Array.from(new Set([...entitlements.filter((e) => e !== \"free\"), params.entitlement]));\n  s.users[idx] = {\n    ...user,\n    entitlements: next.length ? next : [\"free\"],\n    entitlementSource: params.source,\n  };\n  save(s);\n  return s.users[idx];\n}\n\ntype StoredAccount = {\n  id: string;\n  userId: string;\n  type: string;\n  provider: string;\n  providerAccountId: string;\n  refresh_token?: string | null;\n  access_token?: string | null;\n  expires_at?: number | null;\n  token_type?: string | null;\n  scope?: string | null;\n  id_token?: string | null;\n  session_state?: string | null;\n};\n\ntype StoredSession = {\n  id: string;\n  sessionToken: string;\n  userId: string;\n  expires: string;\n};\n\ntype StoredVerificationToken = {\n  identifier: string;\n  token: string;\n  expires: string;\n};\n\ntype AuthStore = {\n  users: StoredUser[];\n  accounts: StoredAccount[];\n  sessions: StoredSession[];\n  verificationTokens: StoredVerificationToken[];\n  cpdState: Record<string, { stateJson: string; updatedAt: string }>;\n};\n\nconst empty: AuthStore = {\n  users: [],\n  accounts: [],\n  sessions: [],\n  verificationTokens: [],\n  cpdState: {},\n};\n\nfunction load(): AuthStore {\n  return readJsonFile<AuthStore>(AUTH_STORE_PATH, empty);\n}\n\nfunction save(store: AuthStore) {\n  writeJsonFile(AUTH_STORE_PATH, store);\n}\n\nexport function createId() {\n  return randomUUID();\n}\n\nexport function getUserById(id: string) {\n  const s = load();\n  return s.users.find((u) => u.id === id) || null;\n}\n\nexport function getUserByEmail(email: string) {\n  const s = load();\n  return s.users.find((u) => u.email.toLowerCase() === email.toLowerCase()) || null;\n}\n\nexport function upsertUser(user: Omit<StoredUser, \"createdAt\"> & { createdAt?: string }) {\n  const s = load();\n  const existingIdx = s.users.findIndex((u) => u.id === user.id);\n  const existing = existingIdx >= 0 ? s.users[existingIdx] : null;\n  const record: StoredUser = {\n    ...user,\n    entitlements: Array.isArray(user.entitlements) && user.entitlements.length ? user.entitlements : [\"free\"],\n    entitlementSource: user.entitlementSource || \"default\",\n    createdAt: user.createdAt || new Date().toISOString(),\n    lastLoginAt: user.lastLoginAt !== undefined ? user.lastLoginAt : existing?.lastLoginAt ?? null,\n    tier: user.tier || existing?.tier || \"registered\",\n    consent: {\n      termsAcceptedAt:\n        user.consent?.termsAcceptedAt !== undefined ? user.consent?.termsAcceptedAt : existing?.consent?.termsAcceptedAt ?? null,\n      privacyAcceptedAt:\n        user.consent?.privacyAcceptedAt !== undefined ? user.consent?.privacyAcceptedAt : existing?.consent?.privacyAcceptedAt ?? null,\n      cpdDataUseAcceptedAt:\n        user.consent?.cpdDataUseAcceptedAt !== undefined ? user.consent?.cpdDataUseAcceptedAt : existing?.consent?.cpdDataUseAcceptedAt ?? null,\n    },\n  };\n  if (existingIdx >= 0) s.users[existingIdx] = record;\n  else s.users.push(record);\n  save(s);\n  return record;\n}\n\nexport function updateUserConsent(params: {\n  userId: string;\n  termsAccepted: boolean;\n  privacyAccepted: boolean;\n  cpdDataUseAccepted: boolean;\n}) {\n  const s = load();\n  const idx = s.users.findIndex((u) => u.id === params.userId);\n  if (idx < 0) return null;\n  const now = new Date().toISOString();\n  const existing = s.users[idx];\n  const consent = existing.consent || {};\n  s.users[idx] = {\n    ...existing,\n    consent: {\n      termsAcceptedAt: params.termsAccepted ? consent.termsAcceptedAt || now : null,\n      privacyAcceptedAt: params.privacyAccepted ? consent.privacyAcceptedAt || now : null,\n      cpdDataUseAcceptedAt: params.cpdDataUseAccepted ? consent.cpdDataUseAcceptedAt || now : null,\n    },\n  };\n  save(s);\n  return s.users[idx];\n}\n\nexport function deleteUser(id: string) {\n  const s = load();\n  s.users = s.users.filter((u) => u.id !== id);\n  s.accounts = s.accounts.filter((a) => a.userId !== id);\n  s.sessions = s.sessions.filter((sess) => sess.userId !== id);\n  delete s.cpdState[id];\n  save(s);\n}\n\nexport function linkAccount(account: Omit<StoredAccount, \"id\">) {\n  const s = load();\n  const record: StoredAccount = { id: createId(), ...account };\n  // Ensure uniqueness by provider/providerAccountId\n  s.accounts = s.accounts.filter(\n    (a) => !(a.provider === record.provider && a.providerAccountId === record.providerAccountId)\n  );\n  s.accounts.push(record);\n  save(s);\n  return record;\n}\n\nexport function unlinkAccount(provider: string, providerAccountId: string) {\n  const s = load();\n  s.accounts = s.accounts.filter((a) => !(a.provider === provider && a.providerAccountId === providerAccountId));\n  save(s);\n}\n\nexport function getUserByAccount(provider: string, providerAccountId: string) {\n  const s = load();\n  const acct = s.accounts.find((a) => a.provider === provider && a.providerAccountId === providerAccountId);\n  if (!acct) return null;\n  return s.users.find((u) => u.id === acct.userId) || null;\n}\n\nexport function createSession(session: Omit<StoredSession, \"id\">) {\n  const s = load();\n  const record: StoredSession = { id: createId(), ...session };\n  s.sessions.push(record);\n  save(s);\n  return record;\n}\n\nexport function getSessionAndUser(sessionToken: string) {\n  const s = load();\n  const sess = s.sessions.find((x) => x.sessionToken === sessionToken);\n  if (!sess) return null;\n  const user = s.users.find((u) => u.id === sess.userId);\n  if (!user) return null;\n  return { session: sess, user };\n}\n\nexport function updateSession(sessionToken: string, patch: Partial<Pick<StoredSession, \"expires\">>) {\n  const s = load();\n  const idx = s.sessions.findIndex((x) => x.sessionToken === sessionToken);\n  if (idx < 0) return null;\n  s.sessions[idx] = { ...s.sessions[idx], ...patch };\n  save(s);\n  return s.sessions[idx];\n}\n\nexport function deleteSession(sessionToken: string) {\n  const s = load();\n  s.sessions = s.sessions.filter((x) => x.sessionToken !== sessionToken);\n  save(s);\n}\n\nexport function createVerificationToken(token: StoredVerificationToken) {\n  const s = load();\n  s.verificationTokens.push(token);\n  save(s);\n  return token;\n}\n\nexport function useVerificationToken(identifier: string, token: string) {\n  const s = load();\n  const idx = s.verificationTokens.findIndex((t) => t.identifier === identifier && t.token === token);\n  if (idx < 0) return null;\n  const record = s.verificationTokens[idx];\n  s.verificationTokens.splice(idx, 1);\n  save(s);\n  return record;\n}\n\nexport function getCpdState(userId: string) {\n  const s = load();\n  return s.cpdState[userId] || null;\n}\n\nexport function setCpdState(userId: string, stateJson: string) {\n  const s = load();\n  s.cpdState[userId] = { stateJson, updatedAt: new Date().toISOString() };\n  save(s);\n  return s.cpdState[userId];\n}\n\n\n","import fs from \"fs\";\nimport path from \"path\";\n\nfunction ensureDir(filePath: string) {\n  const dir = path.dirname(filePath);\n  if (!fs.existsSync(dir)) fs.mkdirSync(dir, { recursive: true });\n}\n\nexport function readJsonFile<T>(filePath: string, fallback: T): T {\n  try {\n    const abs = path.isAbsolute(filePath) ? filePath : path.join(process.cwd(), filePath);\n    if (!fs.existsSync(abs)) return fallback;\n    const raw = fs.readFileSync(abs, \"utf8\");\n    return JSON.parse(raw) as T;\n  } catch {\n    return fallback;\n  }\n}\n\nexport function writeJsonFile<T>(filePath: string, value: T) {\n  const abs = path.isAbsolute(filePath) ? filePath : path.join(process.cwd(), filePath);\n  ensureDir(abs);\n  const tmp = `${abs}.tmp`;\n  fs.writeFileSync(tmp, JSON.stringify(value, null, 2), \"utf8\");\n  fs.renameSync(tmp, abs);\n}\n\n\n","import { readJsonFile, writeJsonFile } from \"@/lib/storage/jsonFile\";\n\nexport type UserPlanRecord = {\n  userId: string;\n  plan: \"free\" | \"supporter\" | \"pro\";\n  source: \"default\" | \"donation\" | \"manual\" | \"future\";\n  updatedAt: string;\n};\n\nexport type ToolRunRecord = {\n  id: string;\n  userId?: string | null;\n  anonymousUserId?: string | null;\n  toolId: string;\n  timestamp: string;\n  metadata?: Record<string, unknown>;\n};\n\nexport type TemplateDownloadRecord = {\n  id: string;\n  userId?: string | null;\n  anonymousUserId?: string | null;\n  templateId: string;\n  licenseChoice: \"internal_use\" | \"commercial_use\";\n  signaturePolicyApplied: \"kept\" | \"removed\";\n  timestamp: string;\n  metadata?: Record<string, unknown>;\n};\n\ntype BillingStore = {\n  userPlans: UserPlanRecord[];\n  toolRuns: ToolRunRecord[];\n  templateDownloads: TemplateDownloadRecord[];\n  donations: Array<{\n    id: string;\n    stripeEventId: string;\n    stripeSessionId?: string | null;\n    stripePaymentIntentId?: string | null;\n    amount: number;\n    currency: string;\n    status: \"paid\" | \"failed\";\n    userId?: string | null;\n    createdAt: string;\n  }>;\n};\n\nconst STORE_PATH = process.env.BILLING_STORE_PATH || \"data/billing-store.json\";\nconst empty: BillingStore = { userPlans: [], toolRuns: [], templateDownloads: [], donations: [] };\n\nfunction load() {\n  return readJsonFile<BillingStore>(STORE_PATH, empty);\n}\n\nfunction save(store: BillingStore) {\n  writeJsonFile(STORE_PATH, store);\n}\n\nexport function upsertUserPlan(record: UserPlanRecord) {\n  const s = load();\n  s.userPlans = s.userPlans.filter((p) => p.userId !== record.userId);\n  s.userPlans.push(record);\n  save(s);\n  return record;\n}\n\nexport function getUserPlanRecord(userId: string) {\n  const s = load();\n  return s.userPlans.find((p) => p.userId === userId) || null;\n}\n\nexport function addToolRun(record: ToolRunRecord) {\n  const s = load();\n  s.toolRuns.push({\n    ...record,\n    userId: record.userId || null,\n    anonymousUserId: record.anonymousUserId || null,\n  });\n  save(s);\n  return record;\n}\n\nexport function listToolRuns(filters: { userId?: string | null; anonymousUserId?: string | null } = {}, limit = 50) {\n  const s = load();\n  return [...s.toolRuns]\n    .filter((r) => (filters.userId ? r.userId === filters.userId : true))\n    .filter((r) => (filters.anonymousUserId ? r.anonymousUserId === filters.anonymousUserId : true))\n    .sort((a, b) => (b.timestamp || \"\").localeCompare(a.timestamp || \"\"))\n    .slice(0, limit);\n}\n\nexport function countToolRunsSince(filters: { userId?: string | null; anonymousUserId?: string | null }, sinceIso: string) {\n  const s = load();\n  return s.toolRuns.filter((r) => (filters.userId ? r.userId === filters.userId : true))\n    .filter((r) => (filters.anonymousUserId ? r.anonymousUserId === filters.anonymousUserId : true))\n    .filter((r) => (r.timestamp || \"\") >= sinceIso).length;\n}\n\nexport function addTemplateDownload(record: TemplateDownloadRecord) {\n  const s = load();\n  s.templateDownloads.push({\n    ...record,\n    userId: record.userId || null,\n    anonymousUserId: record.anonymousUserId || null,\n  });\n  save(s);\n  return record;\n}\n\nexport function listTemplateDownloads(filters: { userId?: string | null; anonymousUserId?: string | null } = {}, limit = 50) {\n  const s = load();\n  return [...s.templateDownloads]\n    .filter((r) => (filters.userId ? r.userId === filters.userId : true))\n    .filter((r) => (filters.anonymousUserId ? r.anonymousUserId === filters.anonymousUserId : true))\n    .sort((a, b) => (b.timestamp || \"\").localeCompare(a.timestamp || \"\"))\n    .slice(0, limit);\n}\n\nexport function addDonation(record: BillingStore[\"donations\"][number]) {\n  const s = load();\n  const exists = s.donations.some((d) => d.stripeEventId === record.stripeEventId);\n  if (!exists) {\n    s.donations.push({\n      ...record,\n      userId: record.userId || null,\n      stripeSessionId: record.stripeSessionId || null,\n      stripePaymentIntentId: record.stripePaymentIntentId || null,\n    });\n    save(s);\n  }\n  return record;\n}\n\nexport function deleteUserBillingData(userId: string) {\n  const s = load();\n  s.userPlans = s.userPlans.filter((p) => p.userId !== userId);\n  s.toolRuns = s.toolRuns.filter((r) => r.userId !== userId);\n  s.templateDownloads = s.templateDownloads.filter((r) => r.userId !== userId);\n  s.donations = s.donations.filter((d) => d.userId !== userId);\n  save(s);\n}\n\n\n"],"names":[],"mappings":"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"}}]
}