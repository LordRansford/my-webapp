;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="80570b2f-d5de-b3e1-941b-839a1a841292")}catch(e){}}();
module.exports=[814747,(e,t,a)=>{t.exports=e.x("path",()=>require("path"))},193695,(e,t,a)=>{t.exports=e.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},522734,(e,t,a)=>{t.exports=e.x("fs",()=>require("fs"))},406461,(e,t,a)=>{t.exports=e.x("zlib",()=>require("zlib"))},688947,(e,t,a)=>{t.exports=e.x("stream",()=>require("stream"))},657194,e=>{"use strict";var t=e.i(89171),a=e.i(254799);let r=new Map;function n(e,n){var o,i;let s,l,d,u=Date.now(),p=`${n.keyPrefix}:${(o=n.keySuffix,s=e.headers.get("x-forwarded-for")||"",l=s.split(",")[0]?.trim()||e.headers.get("x-real-ip")||"unknown",d=e.headers.get("user-agent")||"unknown",i=`${l}|${d}|${o||""}`,a.default.createHash("sha256").update(i).digest("hex").slice(0,24))}`,c=r.get(p);if(!c||c.resetAt<=u)return r.set(p,{count:1,resetAt:u+n.windowMs}),null;if(c.count+=1,c.count>n.limit){let e=Math.max(1,Math.ceil((c.resetAt-u)/1e3));return t.NextResponse.json({error:n.message||"Too many requests. Please try again shortly."},{status:429,headers:{"retry-after":String(e)}})}return null}e.s(["rateLimit",()=>n])},61383,e=>{"use strict";var t=e.i(747909),a=e.i(174017),r=e.i(996250),n=e.i(759756),o=e.i(561916),i=e.i(114444),s=e.i(837092),l=e.i(869741),d=e.i(316795),u=e.i(487718),p=e.i(995169),c=e.i(47587),h=e.i(666012),f=e.i(570101),m=e.i(626937),g=e.i(10372),R=e.i(193695);e.i(52474);var w=e.i(600220);let v=(0,e.i(1863).createToolExecutionHandler)({toolId:"data-studio-lineage",executeTool:async(e,t)=>{let a,r,n,o,i,s,l,d=Date.now(),u=t.lineageName||t.name||"Untitled Lineage",p=t.nodes||[],c=t.flows||[],h=(a=[],r=[],0===p.length&&a.push("Lineage must contain at least one data node"),n=new Set,p.forEach((e,t)=>{e.name&&""!==e.name.trim()?n.has(e.id)?a.push(`Duplicate node ID: ${e.id}`):n.add(e.id):a.push(`Node ${t+1} must have a name`),"transform"!==e.type||e.transformType||r.push(`Transform node "${e.name}" should specify a transform type`)}),o=p.filter(e=>"source"===e.type),i=p.filter(e=>"destination"===e.type),0===o.length&&r.push("No source nodes defined"),0===i.length&&r.push("No destination nodes defined"),c.forEach((e,t)=>{let n=p.find(t=>t.id===e.from),o=p.find(t=>t.id===e.to);n||a.push(`Flow ${t+1} references non-existent source node: ${e.from}`),o||a.push(`Flow ${t+1} references non-existent destination node: ${e.to}`),n&&o&&"destination"===n.type&&r.push(`Flow from "${n.name}" (destination) to "${o.name}" may be invalid`)}),{valid:0===a.length,errors:a,warnings:r});if(!h.valid)return{result:{success:!1,errors:h.errors,warnings:h.warnings,lineage:{name:u,nodes:p,flows:c}},actualUsage:{cpuMs:Date.now()-d,memMb:160,durationMs:Date.now()-d}};let f={nodes:p.map(e=>({id:e.id,name:e.name,type:e.type,transformType:e.transformType,description:e.description,location:e.location})),edges:c.map(e=>({from:e.from,to:e.to,transformation:e.transformation}))},m=(s=`DATA LINEAGE REPORT
===================

Lineage Name: ${u}
Generated: ${new Date().toISOString()}

SUMMARY
-------
Total Nodes: ${p.length}
Total Flows: ${c.length}

`,l=p.reduce((e,t)=>(e[t.type]=(e[t.type]||0)+1,e),{}),s+=`Nodes by Type:
`,Object.entries(l).forEach(([e,t])=>{s+=`  ${e}: ${t}
`}),s+=`

NODES
=====

`,["source","transform","destination"].forEach(e=>{let t=p.filter(t=>t.type===e);t.length>0&&(s+=`${e.toUpperCase()} NODES
${"-".repeat(e.length+6)}

`,t.forEach(e=>{s+=`${e.name}
  ID: ${e.id}
  Location: ${e.location||"Not specified"}
`,e.transformType&&(s+=`  Transform Type: ${e.transformType}
`),e.description&&(s+=`  Description: ${e.description}
`),s+=`
`}))}),s+=`
DATA FLOWS
==========

`,c.forEach((e,t)=>{let a=p.find(t=>t.id===e.from),r=p.find(t=>t.id===e.to);s+=`${t+1}. ${a?.name||e.from} â†’ ${r?.name||e.to}
`,e.transformation&&(s+=`   Transformation: ${e.transformation}
`),s+=`
`}),s+=`
--- END OF REPORT ---
`);return await new Promise(e=>setTimeout(e,280)),{result:{success:!0,lineage:{name:u,nodes:p,flows:c,graph:f,report:m,summary:{totalNodes:p.length,totalFlows:c.length,sourceNodes:p.filter(e=>"source"===e.type).length,transformNodes:p.filter(e=>"transform"===e.type).length,destinationNodes:p.filter(e=>"destination"===e.type).length},validation:{valid:!0,warnings:h.warnings},toolId:"data-studio-lineage",timestamp:new Date().toISOString()}},actualUsage:{cpuMs:Date.now()-d,memMb:160,durationMs:Date.now()-d}}}});e.s(["POST",0,v],29748);var y=e.i(29748);let x=new t.AppRouteRouteModule({definition:{kind:a.RouteKind.APP_ROUTE,page:"/api/data-studio/lineage/run/route",pathname:"/api/data-studio/lineage/run",filename:"route",bundlePath:""},distDir:".next",relativeProjectDir:"",resolvedPagePath:"[project]/src/app/api/data-studio/lineage/run/route.ts",nextConfigOutput:"",userland:y}),{workAsyncStorage:E,workUnitAsyncStorage:T,serverHooks:N}=x;function $(){return(0,r.patchFetch)({workAsyncStorage:E,workUnitAsyncStorage:T})}async function A(e,t,r){x.isDev&&(0,n.addRequestMeta)(e,"devRequestTimingInternalsEnd",process.hrtime.bigint());let v="/api/data-studio/lineage/run/route";v=v.replace(/\/index$/,"")||"/";let y=await x.prepare(e,t,{srcPage:v,multiZoneDraftMode:!1});if(!y)return t.statusCode=400,t.end("Bad Request"),null==r.waitUntil||r.waitUntil.call(r,Promise.resolve()),null;let{buildId:E,params:T,nextConfig:N,parsedUrl:$,isDraftMode:A,prerenderManifest:C,routerServerContext:b,isOnDemandRevalidate:P,revalidateOnlyGenerated:S,resolvedPathname:O,clientReferenceManifest:D,serverActionsManifest:M}=y,_=(0,l.normalizeAppPath)(v),I=!!(C.dynamicRoutes[_]||C.routes[O]),U=async()=>((null==b?void 0:b.render404)?await b.render404(e,t,$,!1):t.end("This page could not be found"),null);if(I&&!A){let e=!!C.routes[O],t=C.dynamicRoutes[_];if(t&&!1===t.fallback&&!e){if(N.experimental.adapterPath)return await U();throw new R.NoFallbackError}}let k=null;!I||x.isDev||A||(k="/index"===(k=O)?"/":k);let q=!0===x.isDev||!I,H=I&&!q;M&&D&&(0,i.setReferenceManifestsSingleton)({page:v,clientReferenceManifest:D,serverActionsManifest:M,serverModuleMap:(0,s.createServerModuleMap)({serverActionsManifest:M})});let F=e.method||"GET",j=(0,o.getTracer)(),L=j.getActiveScopeSpan(),K={params:T,prerenderManifest:C,renderOpts:{experimental:{authInterrupts:!!N.experimental.authInterrupts},cacheComponents:!!N.cacheComponents,supportsDynamicResponse:q,incrementalCache:(0,n.getRequestMeta)(e,"incrementalCache"),cacheLifeProfiles:N.cacheLife,waitUntil:r.waitUntil,onClose:e=>{t.on("close",e)},onAfterTaskError:void 0,onInstrumentationRequestError:(t,a,r)=>x.onRequestError(e,t,r,b)},sharedContext:{buildId:E}},B=new d.NodeNextRequest(e),G=new d.NodeNextResponse(t),z=u.NextRequestAdapter.fromNodeNextRequest(B,(0,u.signalFromNodeResponse)(t));try{let i=async e=>x.handle(z,K).finally(()=>{if(!e)return;e.setAttributes({"http.status_code":t.statusCode,"next.rsc":!1});let a=j.getRootSpanAttributes();if(!a)return;if(a.get("next.span_type")!==p.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${a.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let r=a.get("next.route");if(r){let t=`${F} ${r}`;e.setAttributes({"next.route":r,"http.route":r,"next.span_name":t}),e.updateName(t)}else e.updateName(`${F} ${v}`)}),s=!!(0,n.getRequestMeta)(e,"minimalMode"),l=async n=>{var o,l;let d=async({previousCacheEntry:a})=>{try{if(!s&&P&&S&&!a)return t.statusCode=404,t.setHeader("x-nextjs-cache","REVALIDATED"),t.end("This page could not be found"),null;let o=await i(n);e.fetchMetrics=K.renderOpts.fetchMetrics;let l=K.renderOpts.pendingWaitUntil;l&&r.waitUntil&&(r.waitUntil(l),l=void 0);let d=K.renderOpts.collectedTags;if(!I)return await (0,h.sendResponse)(B,G,o,K.renderOpts.pendingWaitUntil),null;{let e=await o.blob(),t=(0,f.toNodeOutgoingHttpHeaders)(o.headers);d&&(t[g.NEXT_CACHE_TAGS_HEADER]=d),!t["content-type"]&&e.type&&(t["content-type"]=e.type);let a=void 0!==K.renderOpts.collectedRevalidate&&!(K.renderOpts.collectedRevalidate>=g.INFINITE_CACHE)&&K.renderOpts.collectedRevalidate,r=void 0===K.renderOpts.collectedExpire||K.renderOpts.collectedExpire>=g.INFINITE_CACHE?void 0:K.renderOpts.collectedExpire;return{value:{kind:w.CachedRouteKind.APP_ROUTE,status:o.status,body:Buffer.from(await e.arrayBuffer()),headers:t},cacheControl:{revalidate:a,expire:r}}}}catch(t){throw(null==a?void 0:a.isStale)&&await x.onRequestError(e,t,{routerKind:"App Router",routePath:v,routeType:"route",revalidateReason:(0,c.getRevalidateReason)({isStaticGeneration:H,isOnDemandRevalidate:P})},b),t}},u=await x.handleResponse({req:e,nextConfig:N,cacheKey:k,routeKind:a.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:C,isRoutePPREnabled:!1,isOnDemandRevalidate:P,revalidateOnlyGenerated:S,responseGenerator:d,waitUntil:r.waitUntil,isMinimalMode:s});if(!I)return null;if((null==u||null==(o=u.value)?void 0:o.kind)!==w.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==u||null==(l=u.value)?void 0:l.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});s||t.setHeader("x-nextjs-cache",P?"REVALIDATED":u.isMiss?"MISS":u.isStale?"STALE":"HIT"),A&&t.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let p=(0,f.fromNodeOutgoingHttpHeaders)(u.value.headers);return s&&I||p.delete(g.NEXT_CACHE_TAGS_HEADER),!u.cacheControl||t.getHeader("Cache-Control")||p.get("Cache-Control")||p.set("Cache-Control",(0,m.getCacheControlHeader)(u.cacheControl)),await (0,h.sendResponse)(B,G,new Response(u.value.body,{headers:p,status:u.value.status||200})),null};L?await l(L):await j.withPropagatedContext(e.headers,()=>j.trace(p.BaseServerSpan.handleRequest,{spanName:`${F} ${v}`,kind:o.SpanKind.SERVER,attributes:{"http.method":F,"http.target":e.url}},l))}catch(t){if(t instanceof R.NoFallbackError||await x.onRequestError(e,t,{routerKind:"App Router",routePath:_,routeType:"route",revalidateReason:(0,c.getRevalidateReason)({isStaticGeneration:H,isOnDemandRevalidate:P})}),I)throw t;return await (0,h.sendResponse)(B,G,new Response(null,{status:500})),null}}e.s(["handler",()=>A,"patchFetch",()=>$,"routeModule",()=>x,"serverHooks",()=>N,"workAsyncStorage",()=>E,"workUnitAsyncStorage",()=>T],61383)},549292,e=>{e.v(e=>Promise.resolve().then(()=>e(333248)))},118191,e=>{e.v(t=>Promise.all(["server/chunks/src_lib_credits_store_ts_40181bd8._.js"].map(t=>e.l(t))).then(()=>t(685750)))},119949,e=>{e.v(e=>Promise.resolve().then(()=>e(124594)))}];

//# debugId=80570b2f-d5de-b3e1-941b-839a1a841292
//# sourceMappingURL=%5Broot-of-the-server%5D__e077a1f2._.js.map