;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="e95115ce-67ad-2525-5ffa-9ccf5ebb9f19")}catch(e){}}();
module.exports=[124733,(e,t,r)=>{var o=Object.defineProperty,n=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,l=Object.prototype.hasOwnProperty,s={},i={isNodeProcess:()=>c};for(var d in i)o(s,d,{get:i[d],enumerable:!0});function c(){if("undefined"!=typeof navigator&&"ReactNative"===navigator.product)return!0;if("undefined"!=typeof process){let e=process.type;return"renderer"!==e&&"worker"!==e&&!!(process.versions&&process.versions.node)}return!1}t.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))l.call(e,r)||void 0===r||o(e,r,{get:()=>t[r],enumerable:!(s=n(t,r))||s.enumerable});return e})(o({},"__esModule",{value:!0}),s)},827620,(e,t,r)=>{"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var n,a,l,s=e.r(124733),i=e.r(688947),d=o(e.r(828994)),c=new Promise(e=>{try{let t=new Uint8Array([104,101,108,108,111]);new Blob([t]).text().then(t=>{e("hello"===t)}).catch(()=>{e(!1)})}catch(t){e(!1)}});async function u(e){var t,r;let o;return e instanceof ReadableStream?e:e instanceof Blob?e.stream():p(e)?i.Readable.toWeb(e):(o=e instanceof ArrayBuffer?new Uint8Array(e):(t=e,d.default.call(void 0,t))?e:(r=e,new TextEncoder().encode(r)),await c)?new Blob([o]).stream():new ReadableStream({start(e){e.enqueue(o),e.close()}})}function p(e){return"object"==typeof e&&"function"==typeof e.pipe&&e.readable&&"function"==typeof e._read&&"object"==typeof e._readableState}var h=/^((-|\+)?(\d+(?:\.\d+)?)) *(kb|mb|gb|tb|pb)$/i,f={b:1,kb:1024,mb:1048576,gb:0x40000000,tb:0x10000000000,pb:0x4000000000000};function m(e){let t;if("number"==typeof e&&!isNaN(e))return e;if("string"!=typeof e)return null;let r=h.exec(e),o="b";if(r){let[,e,,,n]=r;if(!e)return null;t=parseFloat(e),n&&(o=n.toLowerCase())}else t=parseInt(e,10);return isNaN(t)?null:Math.floor(f[o]*t)}function b(e){if(null==e?void 0:e.token)return e.token;if(process.env.BLOB_READ_WRITE_TOKEN)return process.env.BLOB_READ_WRITE_TOKEN;throw new w("No token found. Either configure the `BLOB_READ_WRITE_TOKEN` environment variable, or pass a `token` option to your calls.")}var w=class extends Error{constructor(e){super(`Vercel Blob: ${e}`)}};function y(e){if("object"!=typeof e||null===e)return!1;let t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}var g=["//"],v=(()=>{if(s.isNodeProcess.call(void 0))return!0;if(E().startsWith("http://localhost"))return!1;let e=!1,t=new Request(E(),{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t})();function E(e=""){let t=null;try{t=process.env.VERCEL_BLOB_API_URL||process.env.NEXT_PUBLIC_VERCEL_BLOB_API_URL}catch(e){}return`${t||"https://vercel.com/api/blob"}${e}`}var _="function"==typeof TextEncoder?new TextEncoder:null;function R(e){return e?"string"==typeof e?_?_.encode(e).byteLength:new Blob([e]).size:"byteLength"in e&&"number"==typeof e.byteLength?e.byteLength:"size"in e&&"number"==typeof e.size?e.size:0:0}function T(e){return globalThis.ReadableStream&&e instanceof ReadableStream}var x=o(e.r(252534)),S=Object.prototype.toString,A=new Set(["network error","Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Load failed","Network request failed","fetch failed","terminated"]),N=!1;try{((null==(n=process.env.DEBUG)?void 0:n.includes("blob"))||(null==(a=process.env.NEXT_PUBLIC_DEBUG)?void 0:a.includes("blob")))&&(N=!0)}catch(e){}function B(e,...t){N&&console.debug(`vercel-blob: ${e}`,...t)}var P=e.r(936689),O="function"==typeof P.fetch,U=O&&v,C=async({input:e,init:t,onUploadProgress:r})=>{var o,n;let a;if(B("using fetch"),t.body)if(r){let e,n=await u(t.body),l=0,s=(o=e=>{r(l+=e)},e=new Uint8Array(0),new TransformStream({transform(t,r){queueMicrotask(()=>{let n=new Uint8Array(e.length+t.byteLength);for(n.set(e),n.set(new Uint8Array(t),e.length),e=n;e.length>=65536;){let t=e.slice(0,65536);r.enqueue(t),null==o||o(t.byteLength),e=e.slice(65536)}})},flush(t){queueMicrotask(()=>{e.length>0&&(t.enqueue(e),null==o||o(e.byteLength))})}}));a=n.pipeThrough(s)}else a=t.body;let l=v&&a&&(T(n=a)||p(n))?"half":void 0;return P.fetch.call(void 0,e,{...t,...t.body?{body:a}:{},duplex:l})},k="undefined"!=typeof XMLHttpRequest,L=async({input:e,init:t,onUploadProgress:r})=>{B("using xhr");let o=null;return t.body&&(o=T(t.body)?await new Response(t.body).blob():t.body),new Promise((n,a)=>{let l=new XMLHttpRequest;(l.open(t.method||"GET",e.toString(),!0),r&&l.upload.addEventListener("progress",e=>{e.lengthComputable&&r(e.loaded)}),l.onload=()=>{var e;if(null==(e=t.signal)?void 0:e.aborted)return void a(new DOMException("The user aborted the request.","AbortError"));let r=new Headers;l.getAllResponseHeaders().trim().split(/[\r\n]+/).forEach(e=>{let t=e.split(": "),o=t.shift(),n=t.join(": ");o&&r.set(o.toLowerCase(),n)}),n(new Response(l.response,{status:l.status,statusText:l.statusText,headers:r}))},l.onerror=()=>{a(TypeError("Network request failed"))},l.ontimeout=()=>{a(TypeError("Network request timed out"))},l.onabort=()=>{a(new DOMException("The user aborted a request.","AbortError"))},t.headers&&new Headers(t.headers).forEach((e,t)=>{l.setRequestHeader(t,e)}),t.signal&&(t.signal.addEventListener("abort",()=>{l.abort()}),t.signal.aborted))?l.abort():l.send(o)})},I=async({input:e,init:t,onUploadProgress:r})=>{if(r){if(U)return C({input:e,init:t,onUploadProgress:r});if(k)return L({input:e,init:t,onUploadProgress:r})}if(O)return C({input:e,init:t});if(k)return L({input:e,init:t});throw Error("No request implementation available")},M=null!=(l=globalThis.DOMException)?l:(()=>{try{atob("~")}catch(e){return Object.getPrototypeOf(e).constructor}})(),q=class extends w{constructor(){super("Access denied, please provide a valid token for this resource.")}},$=class extends w{constructor(e){super(`Content type mismatch, ${e}.`)}},D=class extends w{constructor(e){super(`Pathname mismatch, ${e}. Check the pathname used in upload() or put() matches the one from the client token.`)}},H=class extends w{constructor(){super("Client token has expired.")}},j=class extends w{constructor(e){super(`File is too large, ${e}.`)}},F=class extends w{constructor(){super("This store does not exist.")}},V=class extends w{constructor(){super("This store has been suspended.")}},K=class extends w{constructor(){super("Unknown error, please visit https://vercel.com/help.")}},X=class extends w{constructor(){super("The requested blob does not exist")}},G=class extends w{constructor(){super("The blob service is currently not available. Please try again.")}},W=class extends w{constructor(e){super(`Too many requests please lower the number of concurrent requests ${e?` - try again in ${e} seconds`:""}.`),this.retryAfter=null!=e?e:0}},z=class extends w{constructor(){super("The request was aborted.")}};async function Y(e){var t,r,o;let n,a,l,s;try{let l=await e.json();n=null!=(r=null==(t=l.error)?void 0:t.code)?r:"unknown_error",a=null==(o=l.error)?void 0:o.message}catch(e){n="unknown_error"}switch((null==a?void 0:a.includes("contentType"))&&a.includes("is not allowed")&&(n="content_type_not_allowed"),(null==a?void 0:a.includes('"pathname"'))&&a.includes("does not match the token payload")&&(n="client_token_pathname_mismatch"),"Token expired"===a&&(n="client_token_expired"),(null==a?void 0:a.includes("the file length cannot be greater than"))&&(n="file_too_large"),n){case"store_suspended":l=new V;break;case"forbidden":l=new q;break;case"content_type_not_allowed":l=new $(a);break;case"client_token_pathname_mismatch":l=new D(a);break;case"client_token_expired":l=new H;break;case"file_too_large":l=new j(a);break;case"not_found":l=new X;break;case"store_not_found":l=new F;break;case"bad_request":l=new w(null!=a?a:"Bad request");break;case"service_unavailable":l=new G;break;case"rate_limited":l=new W((s=e.headers.get("retry-after"))?parseInt(s,10):void 0);break;default:l=new K}return{code:n,error:l}}async function J(e,t,r){let o=function(){let e=null;try{e=process.env.VERCEL_BLOB_API_VERSION_OVERRIDE||process.env.NEXT_PUBLIC_VERCEL_BLOB_API_VERSION_OVERRIDE}catch(e){}return`${null!=e?e:11}`}(),n=b(r),a=function(){let e={};try{"VERCEL_BLOB_PROXY_THROUGH_ALTERNATIVE_API"in process.env&&void 0!==process.env.VERCEL_BLOB_PROXY_THROUGH_ALTERNATIVE_API?e["x-proxy-through-alternative-api"]=process.env.VERCEL_BLOB_PROXY_THROUGH_ALTERNATIVE_API:"NEXT_PUBLIC_VERCEL_BLOB_PROXY_THROUGH_ALTERNATIVE_API"in process.env&&void 0!==process.env.NEXT_PUBLIC_VERCEL_BLOB_PROXY_THROUGH_ALTERNATIVE_API&&(e["x-proxy-through-alternative-api"]=process.env.NEXT_PUBLIC_VERCEL_BLOB_PROXY_THROUGH_ALTERNATIVE_API)}catch(e){}return e}(),[,,,l=""]=n.split("_"),s=`${l}:${Date.now()}:${Math.random().toString(16).slice(2)}`,i=0,d=0,c=0,u=(null==r?void 0:r.onUploadProgress)||function(){try{return"1"===process.env.VERCEL_BLOB_USE_X_CONTENT_LENGTH}catch(e){return!1}}();t.body&&u&&(d=R(t.body)),(null==r?void 0:r.onUploadProgress)&&r.onUploadProgress({loaded:0,total:d,percentage:0});let p=await x.default.call(void 0,async l=>{let p;try{p=await I({input:E(e),init:{...t,headers:{"x-api-blob-request-id":s,"x-api-blob-request-attempt":String(i),"x-api-version":o,...u?{"x-content-length":String(d)}:{},authorization:`Bearer ${n}`,...a,...t.headers}},onUploadProgress:(null==r?void 0:r.onUploadProgress)?e=>{var t;let o=0!==d?d:e;c=e;let n=d>0?Number((e/o*100).toFixed(2)):0;100===n&&d>0||null==(t=r.onUploadProgress)||t.call(r,{loaded:e,total:o,percentage:n})}:void 0})}catch(e){if(e instanceof M&&"AbortError"===e.name)return void l(new z);if(e&&"[object Error]"===S.call(e)&&"TypeError"===e.name&&"string"==typeof e.message&&("Load failed"===e.message?void 0===e.stack:A.has(e.message)))throw e;if(e instanceof TypeError)return void l(e);throw e}if(p.ok)return p;let{code:h,error:f}=await Y(p);if("unknown_error"===h||"service_unavailable"===h||"internal_server_error"===h)throw f;l(f)},{retries:function(){try{let e=process.env.VERCEL_BLOB_RETRIES||"10";return parseInt(e,10)}catch(e){return 10}}(),onRetry:t=>{t instanceof Error&&B(`retrying API request to ${e}`,t.message),i+=1}});if(!p)throw new K;return(null==r?void 0:r.onUploadProgress)&&r.onUploadProgress({loaded:c,total:c,percentage:100}),await p.json()}var Z="x-add-random-suffix";function Q(e,t){let r={};return e.includes("contentType")&&t.contentType&&(r["x-content-type"]=t.contentType),e.includes("addRandomSuffix")&&void 0!==t.addRandomSuffix&&(r[Z]=t.addRandomSuffix?"1":"0"),e.includes("allowOverwrite")&&void 0!==t.allowOverwrite&&(r["x-allow-overwrite"]=t.allowOverwrite?"1":"0"),e.includes("cacheControlMaxAge")&&void 0!==t.cacheControlMaxAge&&(r["x-cache-control-max-age"]=t.cacheControlMaxAge.toString()),r}async function ee({pathname:e,options:t,extraChecks:r,getToken:o}){if(!e)throw new w("pathname is required");if(e.length>950)throw new w("pathname is too long, maximum length is 950");for(let t of g)if(e.includes(t))throw new w(`pathname cannot contain "${t}", please encode it if needed`);if(!t)throw new w("missing options, see usage");if("public"!==t.access)throw new w('access must be "public"');return r&&r(t),o&&(t.token=await o(e,t)),t}async function et({uploadId:e,key:t,pathname:r,parts:o,headers:n,options:a}){let l=new URLSearchParams({pathname:r});try{let r=await J(`/mpu?${l.toString()}`,{method:"POST",headers:{...n,"content-type":"application/json","x-mpu-action":"complete","x-mpu-upload-id":e,"x-mpu-key":encodeURIComponent(t)},body:JSON.stringify(o),signal:a.abortSignal},a);return B("mpu: complete",r),r}catch(e){if(e instanceof TypeError&&("Failed to fetch"===e.message||"fetch failed"===e.message))throw new G;throw e}}async function er(e,t,r){B("mpu: create","pathname:",e);let o=new URLSearchParams({pathname:e});try{let e=await J(`/mpu?${o.toString()}`,{method:"POST",headers:{...t,"x-mpu-action":"create"},signal:r.abortSignal},r);return B("mpu: create",e),e}catch(e){if(e instanceof TypeError&&("Failed to fetch"===e.message||"fetch failed"===e.message))throw new G;throw e}}var eo=o(e.r(296191));async function en({uploadId:e,key:t,pathname:r,headers:o,options:n,internalAbortController:a=new AbortController,part:l}){var s,i,d;let c=new URLSearchParams({pathname:r}),u=J(`/mpu?${c.toString()}`,{signal:a.signal,method:"POST",headers:{...o,"x-mpu-action":"upload","x-mpu-key":encodeURIComponent(t),"x-mpu-upload-id":e,"x-mpu-part-number":l.partNumber.toString()},body:l.blob},n);function p(){a.abort()}(null==(s=n.abortSignal)?void 0:s.aborted)?p():null==(i=n.abortSignal)||i.addEventListener("abort",p);let h=await u;return null==(d=n.abortSignal)||d.removeEventListener("abort",p),h}async function ea(e,t,r,o){B("mpu: init","pathname:",e,"headers:",r);let n={...o,onUploadProgress:void 0},a=await er(e,r,n),l=R(t),s=await u(t),i=await function({uploadId:e,key:t,pathname:r,stream:o,headers:n,options:a,totalToLoad:l}){B("mpu: upload init","key:",t);let s=new AbortController;return new Promise((i,d)=>{let c,u=[],p=[],h=o.getReader(),f=0,b=!1,w=1,y=!1,g=0,v=!1,E=0,_=[],R=0,T={};async function x(){for(B("mpu: upload read start","activeUploads:",f,"currentBytesInMemory:",`${m(g)}/${m(0x8000000)}`,"bytesSent:",m(E)),b=!0;g<0x8000000&&!y;)try{let{value:e,done:t}=await h.read();if(t){v=!0,B("mpu: upload read consumed the whole stream"),_.length>0&&(u.push({partNumber:w++,blob:new Blob(_,{type:"application/octet-stream"})}),A()),b=!1;return}g+=e.byteLength;let r=0;for(;r<e.byteLength;){let t=8388608-R,o=Math.min(r+t,e.byteLength),n=e.slice(r,o);_.push(n),R+=n.byteLength,r=o,8388608===R&&(u.push({partNumber:w++,blob:new Blob(_,{type:"application/octet-stream"})}),_=[],R=0,A())}}catch(e){N(e)}B("mpu: upload read end","activeUploads:",f,"currentBytesInMemory:",`${m(g)}/${m(0x8000000)}`,"bytesSent:",m(E)),b=!1}async function S(o){f++,B("mpu: upload send part start","partNumber:",o.partNumber,"size:",o.blob.size,"activeUploads:",f,"currentBytesInMemory:",`${m(g)}/${m(0x8000000)}`,"bytesSent:",m(E));try{let l=a.onUploadProgress?e=>{T[o.partNumber]=e.loaded,c&&c()}:void 0,d=await en({uploadId:e,key:t,pathname:r,headers:n,options:{...a,onUploadProgress:l},internalAbortController:s,part:o});if(B("mpu: upload send part end","partNumber:",o.partNumber,"activeUploads",f,"currentBytesInMemory:",`${m(g)}/${m(0x8000000)}`,"bytesSent:",m(E)),y)return;if(p.push({partNumber:o.partNumber,etag:d.etag}),g-=o.blob.size,f--,E+=o.blob.size,u.length>0&&A(),v){0===f&&(h.releaseLock(),i(p));return}b||x().catch(N)}catch(e){N(e)}}function A(){if(!y)for(B("send parts","activeUploads",f,"partsToUpload",u.length);f<8&&u.length>0;){let e=u.shift();e&&S(e)}}function N(e){y||(y=!0,s.abort(),h.releaseLock(),e instanceof TypeError&&("Failed to fetch"===e.message||"fetch failed"===e.message)?d(new G):d(e))}a.onUploadProgress&&(c=eo.default.call(void 0,()=>{var e;let t=Object.values(T).reduce((e,t)=>e+t,0),r=l||t,o=l>0?Number((100*(t/l||t)).toFixed(2)):0;null==(e=a.onUploadProgress)||e.call(a,{loaded:t,total:r,percentage:o})},150)),x().catch(N)})}({uploadId:a.uploadId,key:a.key,pathname:e,stream:s,headers:r,options:o,totalToLoad:l});return await et({uploadId:a.uploadId,key:a.key,pathname:e,parts:i,headers:r,options:n})}async function el(e,t={}){let r=e.endsWith("/")?e:`${e}/`,o={};o[Z]="0";let n=new URLSearchParams({pathname:r}),a=await J(`/?${n.toString()}`,{method:"PUT",headers:o,signal:t.abortSignal},t);return{url:a.url,pathname:a.pathname}}r.getTokenFromOptionsOrEnv=b,r.BlobError=w,r.getDownloadUrl=function(e){let t=new URL(e);return t.searchParams.set("download","1"),t.toString()},r.disallowedPathnameCharacters=g,r.MAXIMUM_PATHNAME_LENGTH=950,r.BlobAccessError=q,r.BlobContentTypeNotAllowedError=$,r.BlobPathnameMismatchError=D,r.BlobClientTokenExpiredError=H,r.BlobFileTooLargeError=j,r.BlobStoreNotFoundError=F,r.BlobStoreSuspendedError=V,r.BlobUnknownError=K,r.BlobNotFoundError=X,r.BlobServiceNotAvailable=G,r.BlobServiceRateLimited=W,r.BlobRequestAbortedError=z,r.requestApi=J,r.createCompleteMultipartUploadMethod=function({allowedOptions:e,getToken:t,extraChecks:r}){return async(o,n,a)=>{let l=await ee({pathname:o,options:a,extraChecks:r,getToken:t}),s=Q(e,l);return et({uploadId:l.uploadId,key:l.key,pathname:o,headers:s,options:l,parts:n})}},r.createCreateMultipartUploadMethod=function({allowedOptions:e,getToken:t,extraChecks:r}){return async(o,n)=>{let a=await ee({pathname:o,options:n,extraChecks:r,getToken:t}),l=Q(e,a),s=await er(o,l,a);return{key:s.key,uploadId:s.uploadId}}},r.createUploadPartMethod=function({allowedOptions:e,getToken:t,extraChecks:r}){return async(o,n,a)=>{let l=await ee({pathname:o,options:a,extraChecks:r,getToken:t}),s=Q(e,l);if(y(n))throw new w("Body must be a string, buffer or stream. You sent a plain JavaScript object, double check what you're trying to upload.");return{etag:(await en({uploadId:l.uploadId,key:l.key,pathname:o,part:{blob:n,partNumber:l.partNumber},headers:s,options:l})).etag,partNumber:l.partNumber}}},r.createPutMethod=function({allowedOptions:e,getToken:t,extraChecks:r}){return async function(o,n,a){if(!n)throw new w("body is required");if(y(n))throw new w("Body must be a string, buffer or stream. You sent a plain JavaScript object, double check what you're trying to upload.");let l=await ee({pathname:o,options:a,extraChecks:r,getToken:t}),s=Q(e,l);if(!0===l.multipart)return ea(o,n,s,l);let i=l.onUploadProgress?eo.default.call(void 0,l.onUploadProgress,100):void 0,d=new URLSearchParams({pathname:o}),c=await J(`/?${d.toString()}`,{method:"PUT",body:n,headers:s,signal:l.abortSignal},{...l,onUploadProgress:i});return{url:c.url,downloadUrl:c.downloadUrl,pathname:c.pathname,contentType:c.contentType,contentDisposition:c.contentDisposition}}},r.createCreateMultipartUploaderMethod=function({allowedOptions:e,getToken:t,extraChecks:r}){return async(o,n)=>{let a=await ee({pathname:o,options:n,extraChecks:r,getToken:t}),l=Q(e,a),s=await er(o,l,a);return{key:s.key,uploadId:s.uploadId,async uploadPart(e,t){if(y(t))throw new w("Body must be a string, buffer or stream. You sent a plain JavaScript object, double check what you're trying to upload.");return{etag:(await en({uploadId:s.uploadId,key:s.key,pathname:o,part:{partNumber:e,blob:t},headers:l,options:a})).etag,partNumber:e}},complete:async e=>et({uploadId:s.uploadId,key:s.key,pathname:o,parts:e,headers:l,options:a})}}},r.createFolder=el},74016,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=e.r(827620);async function n(e,t){await o.requestApi.call(void 0,"/delete",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({urls:Array.isArray(e)?e:[e]}),signal:null==t?void 0:t.abortSignal},t)}async function a(e,t){let r=new URLSearchParams({url:e}),n=await o.requestApi.call(void 0,`?${r.toString()}`,{method:"GET",signal:null==t?void 0:t.abortSignal},t);return{url:n.url,downloadUrl:n.downloadUrl,pathname:n.pathname,size:n.size,contentType:n.contentType,contentDisposition:n.contentDisposition,cacheControl:n.cacheControl,uploadedAt:new Date(n.uploadedAt)}}async function l(e){var t;let r=new URLSearchParams;(null==e?void 0:e.limit)&&r.set("limit",e.limit.toString()),(null==e?void 0:e.prefix)&&r.set("prefix",e.prefix),(null==e?void 0:e.cursor)&&r.set("cursor",e.cursor),(null==e?void 0:e.mode)&&r.set("mode",e.mode);let n=await o.requestApi.call(void 0,`?${r.toString()}`,{method:"GET",signal:null==e?void 0:e.abortSignal},e);return(null==e?void 0:e.mode)==="folded"?{folders:null!=(t=n.folders)?t:[],cursor:n.cursor,hasMore:n.hasMore,blobs:n.blobs.map(s)}:{cursor:n.cursor,hasMore:n.hasMore,blobs:n.blobs.map(s)}}function s(e){return{url:e.url,downloadUrl:e.downloadUrl,pathname:e.pathname,size:e.size,uploadedAt:new Date(e.uploadedAt)}}async function i(e,t,r){if(!r)throw new(0,o.BlobError)("missing options, see usage");if("public"!==r.access)throw new(0,o.BlobError)('access must be "public"');if(t.length>o.MAXIMUM_PATHNAME_LENGTH)throw new(0,o.BlobError)(`pathname is too long, maximum length is ${o.MAXIMUM_PATHNAME_LENGTH}`);for(let e of o.disallowedPathnameCharacters)if(t.includes(e))throw new(0,o.BlobError)(`pathname cannot contain "${e}", please encode it if needed`);let n={};void 0!==r.addRandomSuffix&&(n["x-add-random-suffix"]=r.addRandomSuffix?"1":"0"),void 0!==r.allowOverwrite&&(n["x-allow-overwrite"]=r.allowOverwrite?"1":"0"),r.contentType&&(n["x-content-type"]=r.contentType),void 0!==r.cacheControlMaxAge&&(n["x-cache-control-max-age"]=r.cacheControlMaxAge.toString());let a=new URLSearchParams({pathname:t,fromUrl:e}),l=await o.requestApi.call(void 0,`?${a.toString()}`,{method:"PUT",headers:n,signal:r.abortSignal},r);return{url:l.url,downloadUrl:l.downloadUrl,pathname:l.pathname,contentType:l.contentType,contentDisposition:l.contentDisposition}}var d=o.createPutMethod.call(void 0,{allowedOptions:["cacheControlMaxAge","addRandomSuffix","allowOverwrite","contentType"]}),c=o.createCreateMultipartUploadMethod.call(void 0,{allowedOptions:["cacheControlMaxAge","addRandomSuffix","allowOverwrite","contentType"]}),u=o.createCreateMultipartUploaderMethod.call(void 0,{allowedOptions:["cacheControlMaxAge","addRandomSuffix","allowOverwrite","contentType"]}),p=o.createUploadPartMethod.call(void 0,{allowedOptions:["cacheControlMaxAge","addRandomSuffix","allowOverwrite","contentType"]}),h=o.createCompleteMultipartUploadMethod.call(void 0,{allowedOptions:["cacheControlMaxAge","addRandomSuffix","allowOverwrite","contentType"]});r.BlobAccessError=o.BlobAccessError,r.BlobClientTokenExpiredError=o.BlobClientTokenExpiredError,r.BlobContentTypeNotAllowedError=o.BlobContentTypeNotAllowedError,r.BlobError=o.BlobError,r.BlobFileTooLargeError=o.BlobFileTooLargeError,r.BlobNotFoundError=o.BlobNotFoundError,r.BlobPathnameMismatchError=o.BlobPathnameMismatchError,r.BlobRequestAbortedError=o.BlobRequestAbortedError,r.BlobServiceNotAvailable=o.BlobServiceNotAvailable,r.BlobServiceRateLimited=o.BlobServiceRateLimited,r.BlobStoreNotFoundError=o.BlobStoreNotFoundError,r.BlobStoreSuspendedError=o.BlobStoreSuspendedError,r.BlobUnknownError=o.BlobUnknownError,r.completeMultipartUpload=h,r.copy=i,r.createFolder=o.createFolder,r.createMultipartUpload=c,r.createMultipartUploader=u,r.del=n,r.getDownloadUrl=o.getDownloadUrl,r.head=a,r.list=l,r.put=d,r.uploadPart=p},951086,e=>{"use strict";var t=e.i(747909),r=e.i(174017),o=e.i(996250),n=e.i(759756),a=e.i(561916),l=e.i(114444),s=e.i(837092),i=e.i(869741),d=e.i(316795),c=e.i(487718),u=e.i(995169),p=e.i(47587),h=e.i(666012),f=e.i(570101),m=e.i(626937),b=e.i(10372),w=e.i(193695);e.i(52474);var y=e.i(600220),g=e.i(89171),v=e.i(663775),E=e.i(657194),_=e.i(187177);async function R(t,r){let o=await (0,v.requireAdminJson)("VIEW_SUPPORT");if(!o.ok)return o.response;let n=o.session?.user;if(!n?.id)return g.NextResponse.json({error:"Unauthorized"},{status:401});let a=n.email||n.id,l=(0,E.rateLimit)(t,{keyPrefix:"admin-support-attachment",limit:60,windowMs:6e4,keySuffix:a});if(l)return l;let{id:s,attachmentId:i}=await r.params,d=await (0,_.getSupportTicketAdminSafe)(s);if(!d)return g.NextResponse.json({error:"Not found"},{status:404});let c=d.attachments.find(e=>e.id===i);if(!c)return g.NextResponse.json({error:"Not found"},{status:404});if(!c.storageKey)return g.NextResponse.json({error:"Attachment storage is not configured for this environment."},{status:501});try{if(process.env.BLOB_READ_WRITE_TOKEN){let{get:t}=e.r(74016),r=await t(c.storageKey,{token:process.env.BLOB_READ_WRITE_TOKEN});return new g.NextResponse(r,{headers:{"Content-Type":c.mimeType,"Content-Disposition":`attachment; filename="${c.fileName}"`}})}if(process.env.AWS_ACCESS_KEY_ID&&process.env.AWS_SECRET_ACCESS_KEY)try{let{S3Client:e,GetObjectCommand:t}=Function("moduleName","return require(moduleName)")("@aws-sdk/client-s3"),r=new e({region:process.env.AWS_REGION||"us-east-1",credentials:{accessKeyId:process.env.AWS_ACCESS_KEY_ID,secretAccessKey:process.env.AWS_SECRET_ACCESS_KEY}}),o=new t({Bucket:process.env.AWS_S3_BUCKET_NAME,Key:c.storageKey}),n=await r.send(o),a=await n.Body.transformToByteArray();return new g.NextResponse(a,{headers:{"Content-Type":c.mimeType,"Content-Disposition":`attachment; filename="${c.fileName}"`}})}catch(e){e?.code!=="MODULE_NOT_FOUND"&&console.error("AWS S3 download failed:",e)}return g.NextResponse.json({error:"Attachment storage is not configured. Please set up Vercel Blob or AWS S3."},{status:501})}catch(e){return console.error("Failed to download attachment:",e),g.NextResponse.json({error:"Failed to download attachment"},{status:500})}}e.s(["GET",()=>R],793866);var T=e.i(793866);let x=new t.AppRouteRouteModule({definition:{kind:r.RouteKind.APP_ROUTE,page:"/api/admin/support/[id]/attachments/[attachmentId]/route",pathname:"/api/admin/support/[id]/attachments/[attachmentId]",filename:"route",bundlePath:""},distDir:".next",relativeProjectDir:"",resolvedPagePath:"[project]/src/app/api/admin/support/[id]/attachments/[attachmentId]/route.ts",nextConfigOutput:"",userland:T}),{workAsyncStorage:S,workUnitAsyncStorage:A,serverHooks:N}=x;function B(){return(0,o.patchFetch)({workAsyncStorage:S,workUnitAsyncStorage:A})}async function P(e,t,o){x.isDev&&(0,n.addRequestMeta)(e,"devRequestTimingInternalsEnd",process.hrtime.bigint());let g="/api/admin/support/[id]/attachments/[attachmentId]/route";g=g.replace(/\/index$/,"")||"/";let v=await x.prepare(e,t,{srcPage:g,multiZoneDraftMode:!1});if(!v)return t.statusCode=400,t.end("Bad Request"),null==o.waitUntil||o.waitUntil.call(o,Promise.resolve()),null;let{buildId:E,params:_,nextConfig:R,parsedUrl:T,isDraftMode:S,prerenderManifest:A,routerServerContext:N,isOnDemandRevalidate:B,revalidateOnlyGenerated:P,resolvedPathname:O,clientReferenceManifest:U,serverActionsManifest:C}=v,k=(0,i.normalizeAppPath)(g),L=!!(A.dynamicRoutes[k]||A.routes[O]),I=async()=>((null==N?void 0:N.render404)?await N.render404(e,t,T,!1):t.end("This page could not be found"),null);if(L&&!S){let e=!!A.routes[O],t=A.dynamicRoutes[k];if(t&&!1===t.fallback&&!e){if(R.experimental.adapterPath)return await I();throw new w.NoFallbackError}}let M=null;!L||x.isDev||S||(M="/index"===(M=O)?"/":M);let q=!0===x.isDev||!L,$=L&&!q;C&&U&&(0,l.setReferenceManifestsSingleton)({page:g,clientReferenceManifest:U,serverActionsManifest:C,serverModuleMap:(0,s.createServerModuleMap)({serverActionsManifest:C})});let D=e.method||"GET",H=(0,a.getTracer)(),j=H.getActiveScopeSpan(),F={params:_,prerenderManifest:A,renderOpts:{experimental:{authInterrupts:!!R.experimental.authInterrupts},cacheComponents:!!R.cacheComponents,supportsDynamicResponse:q,incrementalCache:(0,n.getRequestMeta)(e,"incrementalCache"),cacheLifeProfiles:R.cacheLife,waitUntil:o.waitUntil,onClose:e=>{t.on("close",e)},onAfterTaskError:void 0,onInstrumentationRequestError:(t,r,o)=>x.onRequestError(e,t,o,N)},sharedContext:{buildId:E}},V=new d.NodeNextRequest(e),K=new d.NodeNextResponse(t),X=c.NextRequestAdapter.fromNodeNextRequest(V,(0,c.signalFromNodeResponse)(t));try{let l=async e=>x.handle(X,F).finally(()=>{if(!e)return;e.setAttributes({"http.status_code":t.statusCode,"next.rsc":!1});let r=H.getRootSpanAttributes();if(!r)return;if(r.get("next.span_type")!==u.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${r.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let o=r.get("next.route");if(o){let t=`${D} ${o}`;e.setAttributes({"next.route":o,"http.route":o,"next.span_name":t}),e.updateName(t)}else e.updateName(`${D} ${g}`)}),s=!!(0,n.getRequestMeta)(e,"minimalMode"),i=async n=>{var a,i;let d=async({previousCacheEntry:r})=>{try{if(!s&&B&&P&&!r)return t.statusCode=404,t.setHeader("x-nextjs-cache","REVALIDATED"),t.end("This page could not be found"),null;let a=await l(n);e.fetchMetrics=F.renderOpts.fetchMetrics;let i=F.renderOpts.pendingWaitUntil;i&&o.waitUntil&&(o.waitUntil(i),i=void 0);let d=F.renderOpts.collectedTags;if(!L)return await (0,h.sendResponse)(V,K,a,F.renderOpts.pendingWaitUntil),null;{let e=await a.blob(),t=(0,f.toNodeOutgoingHttpHeaders)(a.headers);d&&(t[b.NEXT_CACHE_TAGS_HEADER]=d),!t["content-type"]&&e.type&&(t["content-type"]=e.type);let r=void 0!==F.renderOpts.collectedRevalidate&&!(F.renderOpts.collectedRevalidate>=b.INFINITE_CACHE)&&F.renderOpts.collectedRevalidate,o=void 0===F.renderOpts.collectedExpire||F.renderOpts.collectedExpire>=b.INFINITE_CACHE?void 0:F.renderOpts.collectedExpire;return{value:{kind:y.CachedRouteKind.APP_ROUTE,status:a.status,body:Buffer.from(await e.arrayBuffer()),headers:t},cacheControl:{revalidate:r,expire:o}}}}catch(t){throw(null==r?void 0:r.isStale)&&await x.onRequestError(e,t,{routerKind:"App Router",routePath:g,routeType:"route",revalidateReason:(0,p.getRevalidateReason)({isStaticGeneration:$,isOnDemandRevalidate:B})},N),t}},c=await x.handleResponse({req:e,nextConfig:R,cacheKey:M,routeKind:r.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:A,isRoutePPREnabled:!1,isOnDemandRevalidate:B,revalidateOnlyGenerated:P,responseGenerator:d,waitUntil:o.waitUntil,isMinimalMode:s});if(!L)return null;if((null==c||null==(a=c.value)?void 0:a.kind)!==y.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==c||null==(i=c.value)?void 0:i.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});s||t.setHeader("x-nextjs-cache",B?"REVALIDATED":c.isMiss?"MISS":c.isStale?"STALE":"HIT"),S&&t.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let u=(0,f.fromNodeOutgoingHttpHeaders)(c.value.headers);return s&&L||u.delete(b.NEXT_CACHE_TAGS_HEADER),!c.cacheControl||t.getHeader("Cache-Control")||u.get("Cache-Control")||u.set("Cache-Control",(0,m.getCacheControlHeader)(c.cacheControl)),await (0,h.sendResponse)(V,K,new Response(c.value.body,{headers:u,status:c.value.status||200})),null};j?await i(j):await H.withPropagatedContext(e.headers,()=>H.trace(u.BaseServerSpan.handleRequest,{spanName:`${D} ${g}`,kind:a.SpanKind.SERVER,attributes:{"http.method":D,"http.target":e.url}},i))}catch(t){if(t instanceof w.NoFallbackError||await x.onRequestError(e,t,{routerKind:"App Router",routePath:k,routeType:"route",revalidateReason:(0,p.getRevalidateReason)({isStaticGeneration:$,isOnDemandRevalidate:B})}),L)throw t;return await (0,h.sendResponse)(V,K,new Response(null,{status:500})),null}}e.s(["handler",()=>P,"patchFetch",()=>B,"routeModule",()=>x,"serverHooks",()=>N,"workAsyncStorage",()=>S,"workUnitAsyncStorage",()=>A],951086)}];

//# debugId=e95115ce-67ad-2525-5ffa-9ccf5ebb9f19
//# sourceMappingURL=node_modules_9b7442ab._.js.map