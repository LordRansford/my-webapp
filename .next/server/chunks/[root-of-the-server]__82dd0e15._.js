;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="d045ef84-db63-1843-a93c-e3f1274dcd4f")}catch(e){}}();
module.exports=[679594,(e,t,r)=>{t.exports=e.x("dns",()=>require("dns"))},504446,(e,t,r)=>{t.exports=e.x("net",()=>require("net"))},985049,e=>{"use strict";let t=new Set(["http://localhost:3000","https://localhost:3000",process.env.NEXT_PUBLIC_SITE_URL||""].filter(Boolean));function r(e){if(!e?.headers)return;let r=e.headers.origin||e.headers.referer||"";if(!r)return;let s=r.match(/^https?:\/\/[^/]+/i),a=s?s[0]:r;if(0!==t.size&&!t.has(a))throw Error("Dashboard API origin not allowed")}e.s(["assertAllowedRequest",()=>r])},300794,(e,t,r)=>{t.exports=e.x("node:dns/promises",()=>require("node:dns/promises"))},166457,31373,e=>{"use strict";var t=e.i(300794);class r extends Error{code="SAFE_FETCH_BLOCKED";constructor(e){super(e)}}class s extends Error{code="SAFE_FETCH_TIMEOUT";constructor(e){super(e)}}let a=new Set(["169.254.169.254"]);function o(e){let t=/^(\d+)\.(\d+)\.(\d+)\.(\d+)$/.exec(e);if(!t)return!1;let r=Number(t[1]),s=Number(t[2]);return 10===r||127===r||0===r||169===r&&254===s||192===r&&168===s||172===r&&s>=16&&s<=31||100===r&&s>=64&&s<=127||!1}async function n(e,s){let n;if("localhost"===(n=e.hostname.toLowerCase())||"127.0.0.1"===n||"::1"===n||n.endsWith(".localhost")||a.has(e.hostname))throw new r("Blocked host");if(o(e.hostname))throw new r("Blocked IP range");try{for(let s of(await t.default.lookup(e.hostname,{all:!0,verbatim:!0})))if("string"==typeof s?.address&&(a.has(s.address)||o(s.address)))throw new r("Blocked IP range")}catch{throw new r("Unable to resolve host")}}async function i(e,t){let s=e.body?.getReader?.();if(!s){let s=Buffer.from(await e.arrayBuffer());if(s.byteLength>t)throw new r("Response too large");return s}let a=[],o=0;for(;;){let{done:e,value:n}=await s.read();if(e)break;if(n){if((o+=n.byteLength)>t)throw new r("Response too large");a.push(n)}}return Buffer.concat(a.map(e=>Buffer.from(e)))}async function l(e,t){let a=new URL(e),o=!!t.allowHttp||!!t.allowHttpInDev&&!1;if("https:"!==a.protocol&&!(o&&"http:"===a.protocol))throw new r("Blocked protocol");await n(a,!!t.allowLocalhostInDev);let l=new AbortController,d=setTimeout(()=>l.abort(),Math.max(1,t.overallTimeoutMs));try{let e=await fetch(a.toString(),{...t,redirect:"manual",signal:l.signal}),r=await i(e,t.maxResponseBytes);return{res:e,body:r}}catch(e){if(e?.name==="AbortError")throw new s("Request timed out");throw e}finally{clearTimeout(d)}}e.s(["safeFetch",()=>l],31373),e.s([],166457)},426584,e=>{"use strict";var t=e.i(504446),r=e.i(679594);async function s(e){let s;try{s=new URL(e)}catch{throw Error("Invalid URL")}if(!["http:","https:"].includes(s.protocol))throw Error("Only HTTP and HTTPS URLs are allowed");let a=s.hostname;if(!a)throw Error("Invalid host");if("localhost"===a)throw Error("Localhost is not allowed");let o=await r.default.promises.lookup(a,{all:!0}).catch(()=>[]);if(!o.length)throw Error("Unable to resolve host");for(let e of o)if(function(e){if(0===t.default.isIP(e)||"127.0.0.1"===e||"::1"===e||e.startsWith("10.")||e.startsWith("192.168."))return!0;let r=e.split(".").map(e=>Number(e));return 4===r.length&&172===r[0]&&!!(r[1]>=16)&&!!(r[1]<=31)||4===r.length&&169===r[0]&&254===r[1]}(e.address))throw Error("Private network targets are not allowed");return s}e.s(["validateOutboundUrl",()=>s])},188006,e=>{"use strict";var t=e.i(926747),r=e.i(190406),s=e.i(244898),a=e.i(262950),o=e.i(985049),n=e.i(426584);e.i(166457);var i=e.i(31373);async function l(e,t){let r;if("POST"!==e.method)return t.setHeader("Allow","POST"),t.status(405).json({error:"Method not allowed"});try{(0,o.assertAllowedRequest)(e)}catch(e){return t.status(403).json({error:"Dashboard API origin not allowed"})}let{url:s}=e.body;if(!s||"string"!=typeof s)return t.status(400).json({error:"URL is required"});try{r=await (0,n.validateOutboundUrl)(s)}catch(e){return t.status(400).json({error:e.message||"Invalid URL"})}try{let e=[],s=r.href,a=0;for(;a<10;){let{res:t}=await (0,i.safeFetch)(s,{method:"GET",headers:{"User-Agent":"Mozilla/5.0 (compatible; RansfordsNotes/1.0; Educational Tool)"},allowHttp:!0,overallTimeoutMs:5e3,maxResponseBytes:65536}),r=new URL(s);if(e.push({url:s,scheme:r.protocol.replace(":",""),status:t.status}),t.status>=300&&t.status<400){let e=t.headers.get("location");if(e)try{s=new URL(e,s).href,a++;continue}catch{}}break}let o=e.filter(e=>"http"===e.scheme);e.filter(e=>"https"===e.scheme);let n=e.length>0?e[e.length-1].scheme:"unknown",l="";return l=o.length>0&&"https"===n?"Redirect chain includes HTTP steps before reaching HTTPS. This creates a security risk.":o.length>0?"Warning: Redirect chain includes HTTP steps and does not end on HTTPS.":"https"===n?"Clean redirect chain. All steps use HTTPS.":"Redirect chain analysis complete.",t.status(200).json({chain:e,summary:l})}catch(e){if("SAFE_FETCH_TIMEOUT"===(e?.code||""))return t.status(408).json({error:"Request timeout. The site may be slow or unreachable."});return console.error("HTTPS redirect analysis error:",e),t.status(500).json({error:"Failed to trace redirects. The site may be blocking requests or may be unreachable.",details:void 0})}}e.s(["default",()=>l],975944);var d=e.i(975944),u=e.i(7031),h=e.i(181927),c=e.i(846432);let p=(0,a.hoist)(d,"default"),f=(0,a.hoist)(d,"config"),w=new s.PagesAPIRouteModule({definition:{kind:r.RouteKind.PAGES_API,page:"/api/dashboards/https-redirects",pathname:"/api/dashboards/https-redirects",bundlePath:"",filename:""},userland:d,distDir:".next",relativeProjectDir:""});async function m(e,r,s){w.isDev&&(0,c.addRequestMeta)(e,"devRequestTimingInternalsEnd",process.hrtime.bigint());let a="/api/dashboards/https-redirects";a=a.replace(/\/index$/,"")||"/";let o=await w.prepare(e,r,{srcPage:a});if(!o){r.statusCode=400,r.end("Bad Request"),null==s.waitUntil||s.waitUntil.call(s,Promise.resolve());return}let{query:n,params:i,prerenderManifest:l,routerServerContext:d}=o;try{let t=e.method||"GET",s=(0,u.getTracer)(),o=s.getActiveScopeSpan(),c=w.instrumentationOnRequestError.bind(w),p=async o=>w.render(e,r,{query:{...n,...i},params:i,allowedRevalidateHeaderKeys:[],multiZoneDraftMode:!1,trustHostHeader:!1,previewProps:l.preview,propagateError:!1,dev:w.isDev,page:"/api/dashboards/https-redirects",internalRevalidate:null==d?void 0:d.revalidate,onError:(...t)=>c(e,...t)}).finally(()=>{if(!o)return;o.setAttributes({"http.status_code":r.statusCode,"next.rsc":!1});let e=s.getRootSpanAttributes();if(!e)return;if(e.get("next.span_type")!==h.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${e.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let n=e.get("next.route");if(n){let e=`${t} ${n}`;o.setAttributes({"next.route":n,"http.route":n,"next.span_name":e}),o.updateName(e)}else o.updateName(`${t} ${a}`)});o?await p(o):await s.withPropagatedContext(e.headers,()=>s.trace(h.BaseServerSpan.handleRequest,{spanName:`${t} ${a}`,kind:u.SpanKind.SERVER,attributes:{"http.method":t,"http.target":e.url}},p))}catch(e){if(w.isDev)throw e;(0,t.sendError)(r,500,"Internal Server Error")}finally{null==s.waitUntil||s.waitUntil.call(s,Promise.resolve())}}e.s(["config",0,f,"default",0,p,"handler",()=>m],188006)}];

//# debugId=d045ef84-db63-1843-a93c-e3f1274dcd4f
//# sourceMappingURL=%5Broot-of-the-server%5D__82dd0e15._.js.map