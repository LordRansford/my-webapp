;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="8b783355-cd95-0611-f13a-c5caf27b0002")}catch(e){}}();
module.exports=[814747,(e,r,t)=>{r.exports=e.x("path",()=>require("path"))},193695,(e,r,t)=>{r.exports=e.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},522734,(e,r,t)=>{r.exports=e.x("fs",()=>require("fs"))},657194,e=>{"use strict";var r=e.i(89171),t=e.i(254799);let s=new Map;function n(e,n){var o,a;let u,i,c,l=Date.now(),d=`${n.keyPrefix}:${(o=n.keySuffix,u=e.headers.get("x-forwarded-for")||"",i=u.split(",")[0]?.trim()||e.headers.get("x-real-ip")||"unknown",c=e.headers.get("user-agent")||"unknown",a=`${i}|${c}|${o||""}`,t.default.createHash("sha256").update(a).digest("hex").slice(0,24))}`,g=s.get(d);if(!g||g.resetAt<=l)return s.set(d,{count:1,resetAt:l+n.windowMs}),null;if(g.count+=1,g.count>n.limit){let e=Math.max(1,Math.ceil((g.resetAt-l)/1e3));return r.NextResponse.json({error:n.message||"Too many requests. Please try again shortly."},{status:429,headers:{"retry-after":String(e)}})}return null}e.s(["rateLimit",()=>n])},936426,e=>{"use strict";var r=e.i(89171);function t(e){let t=e.headers.get("origin"),s=e.headers.get("referer"),n=function(){try{return new URL(process.env.NEXT_PUBLIC_SITE_URL||"http://localhost:3000").origin}catch{return"http://localhost:3000"}}(),o=null;try{o=new URL(e.url).origin}catch{o=null}let a=t||(s?(()=>{try{return new URL(s).origin}catch{return null}})():null);return a?a===n||o&&a===o?null:r.NextResponse.json({error:"Invalid origin"},{status:403}):r.NextResponse.json({error:"Missing origin"},{status:403})}e.s(["requireSameOrigin",()=>t])},895968,e=>{"use strict";var r=e.i(254799);function t(e){return e.headers.get("x-request-id")||r.default.randomUUID()}async function s(e,r,s){let n=t(e),o=Date.now();try{let e=await s({requestId:n}),t=Date.now()-o;return console.info("req",{requestId:n,route:r.route,status:"ok",durationMs:t}),e}catch(t){let e=Date.now()-o;throw console.error("req",{requestId:n,route:r.route,status:"error",durationMs:e,message:t?.message||"error"}),t}}e.s(["getRequestId",()=>t,"withRequestLogging",()=>s])},161857,e=>{"use strict";function r(e,r,t,s){let n={level:e,event:r,requestId:t.requestId,route:t.route,...s,ts:new Date().toISOString()};"error"===e?console.error(r,n):"warn"===e?console.warn(r,n):console.info(r,n)}e.s(["logger",0,{debug:(e,t,s)=>r("debug",e,t,s),info:(e,t,s)=>r("info",e,t,s),warn:(e,t,s)=>r("warn",e,t,s),error:(e,t,s)=>r("error",e,t,s)}])},902157,(e,r,t)=>{r.exports=e.x("node:fs",()=>require("node:fs"))},750227,(e,r,t)=>{r.exports=e.x("node:path",()=>require("node:path"))},986225,e=>{"use strict";let r="2025.01",t={ai:r,cybersecurity:r,"software-architecture":r,data:r,digitalisation:r};function s(e){let s=t[e];return"string"==typeof s&&s.trim()?s.trim():r}e.s(["getActiveCourseVersion",()=>s])},996388,519193,e=>{"use strict";var r=e.i(89171),t=e.i(895968);class s extends Error{code;status;exposeMessage;cause;constructor(e){super(e.message),this.name="AppError",this.code=e.code,this.status=e.status,this.exposeMessage=e.exposeMessage??"Request failed.",this.cause=e.cause}}function n(e){return e instanceof s?e:new s({code:"INTERNAL_ERROR",status:500,message:e instanceof Error?e.message:String(e),exposeMessage:"Something went wrong.",cause:e})}e.s(["AppError",()=>s,"asAppError",()=>n],519193);var o=e.i(161857);function a(e,t){let s=t?.status??200,n=t?.requestId,o=n?{...e,requestId:n}:e,a=r.NextResponse.json(o,{status:s});return n&&a.headers.set("x-request-id",n),a}async function u(e,s,a){let u=(0,t.getRequestId)(e),i=Date.now();try{let e=await a({requestId:u}),r=Date.now()-i;return o.logger.info("api_request",{requestId:u,route:s.route},{status:e.status,durationMs:r}),e.headers.set("x-request-id",u),e}catch(g){var c;let e,t,a,l,d=Date.now()-i;return o.logger.error("api_request",{requestId:u,route:s.route},{status:"error",durationMs:d}),c={requestId:u,route:s.route},e=n(g),t=c.requestId,o.logger.error("api_error",{requestId:t,route:c.route},{code:e.code,status:e.status,message:e.message}),a={error:{code:e.code,message:e.exposeMessage,requestId:t}},l=r.NextResponse.json(a,{status:e.status}),t&&l.headers.set("x-request-id",t),l}}e.s(["handleAppRoute",()=>u,"jsonOk",()=>a],996388)},868154,e=>{"use strict";var r=e.i(902157),t=e.i(750227);let s=process.env.LEARNING_RECORDS_STORE_PATH||"data/learning-records.json",n={records:[]};function o(e,s){try{let n=t.default.isAbsolute(e)?e:t.default.join(process.cwd(),e);if(!r.default.existsSync(n))return s;return JSON.parse(r.default.readFileSync(n,"utf8"))}catch{return s}}function a(e){let{estimatedMinutes:r,sectionsCompleted:t,quizzesCompleted:s,toolsUsed:n}=e;return Math.min(10*Math.max(0,Number(t)||0)+5*Math.max(0,Number(s)||0)+5*Math.max(0,Number(n)||0),Math.max(0,Number(r)||0))}function u(e){let{userId:r,courseId:t,levelId:s,totalSections:n,completedSectionKeys:o,quizIdsCompleted:u,toolIdsUsed:i,estimatedMinutes:c}=e,l=o.size,d=u.size,g=i.size,f=a({estimatedMinutes:c,sectionsCompleted:l,quizzesCompleted:d,toolsUsed:g}),p=n>0&&l>=n&&d>=1?"completed":l>0||d>0||g>0?"in_progress":"not_started",h="completed"===p?new Date().toISOString():null;return{userId:r,courseId:t,levelId:s,sectionsCompleted:l,quizzesCompleted:d,toolsUsed:g,timeSpentMinutes:f,completionStatus:p,completionDate:h,updatedAt:new Date().toISOString()}}function i(e){let a,u,i,c=o(s,n),l=`${e.userId}:${e.courseId}:${e.levelId}`,d=c.records.findIndex(e=>`${e.userId}:${e.courseId}:${e.levelId}`===l),g=e;if(d>=0){let r=c.records[d],t="completed"===r.completionStatus&&r.completionDate?r.completionDate:e.completionDate;g={...e,completionDate:t},c.records[d]=g}else c.records.push(e);return a=t.default.isAbsolute(s)?s:t.default.join(process.cwd(),s),u=t.default.dirname(a),r.default.existsSync(u)||r.default.mkdirSync(u,{recursive:!0}),i=`${a}.tmp`,r.default.writeFileSync(i,JSON.stringify(c,null,2),"utf8"),r.default.renameSync(i,a),g}function c(e){return(o(s,n).records||[]).filter(r=>r.userId===e)}e.s(["calculateEarnedMinutes",()=>a,"deriveLearningRecord",()=>u,"listLearningRecordsForUser",()=>c,"upsertLearningRecord",()=>i])},946628,e=>{"use strict";let r=e.r(868154);r.calculateEarnedMinutes;let t=r.deriveLearningRecord,s=r.upsertLearningRecord,n=r.listLearningRecordsForUser;e.s(["deriveLearningRecord",0,t,"listLearningRecordsForUser",0,n,"upsertLearningRecord",0,s])}];

//# debugId=8b783355-cd95-0611-f13a-c5caf27b0002
//# sourceMappingURL=%5Broot-of-the-server%5D__ace139f9._.js.map